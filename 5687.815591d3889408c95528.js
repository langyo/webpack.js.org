"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5687],{5687:function(a,e,t){t.r(e),t(7378);var n=t(2682);function p(){return p=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},p.apply(this,arguments)}const s=("Badge",a=>(console.warn("Component `%s` was not imported, exported, or provided by MDXProvider as global scope","Badge"),(0,n.kt)(n.kt.Fragment,null,a.children)));function o(a){let{components:e,...t}=a;return(0,n.kt)("wrapper",p({components:e},t),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"output")," 位于对象最顶级键(key)，包括了一组选项，指示 webpack 如何去输出、以及在哪里输出你的「bundle、asset 和其他你所打包或使用 webpack 载入的任何内容」。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputassetmodulefilename",parentName:"h2"}),"output.assetModuleFilename",(0,n.kt)("a",{href:"#outputassetmodulefilename","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = '[hash][ext][query]'")),(0,n.kt)("p",null,"与 ",(0,n.kt)("a",{href:"#outputfilename",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.filename"))," 相同，不过应用于 ",(0,n.kt)("a",{href:"/guides/asset-modules/",parentName:"p"},"Asset Modules"),"。"),(0,n.kt)("p",null,"对从数据 URI 替换构建的静态资源，",(0,n.kt)("inlineCode",{parentName:"p"},"[name]"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"[file]"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"[query]"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"[fragment]"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"[base]")," 与 ",(0,n.kt)("inlineCode",{parentName:"p"},"[path]")," 为空字符串。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputasyncChunks",parentName:"h2"}),"output.asyncChunks",(0,n.kt)("a",{href:"#outputasyncChunks","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = true")),(0,n.kt)("p",null,"创建按需加载的异步 chunk。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n    asyncChunks",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputauxiliarycomment",parentName:"h2"}),"output.auxiliaryComment",(0,n.kt)("a",{href:"#outputauxiliarycomment","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"最好使用 ",(0,n.kt)("a",{href:"#outputlibraryauxiliarycomment",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.auxiliaryComment")),"。")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string")," ",(0,n.kt)("inlineCode",{parentName:"p"},"object")),(0,n.kt)("p",null,"在和 ",(0,n.kt)("a",{href:"#outputlibrary",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library"))," 和 ",(0,n.kt)("a",{href:"#outputlibrarytarget",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.libraryTarget"))," 一起使用时，此选项允许用户向导出容器(export wrapper)中插入注释。要为 ",(0,n.kt)("inlineCode",{parentName:"p"},"libraryTarget")," 每种类型都插入相同的注释，将 ",(0,n.kt)("inlineCode",{parentName:"p"},"auxiliaryComment")," 设置为一个字符串："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'someLibName'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    libraryTarget",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'umd'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    filename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'someLibName.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    auxiliaryComment",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'Test Comment'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"将会生成如下："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"someLibName.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"webpackUniversalModuleDefinition"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"root",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Test Comment"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"&&")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," module ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n    module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'lodash'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Test Comment"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," define ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'function'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"&&")," define",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"amd",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n    ",(0,n.kt)("span",{className:"token function",parentName:"code"},"define"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'lodash'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," factory",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Test Comment"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n    exports",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'someLibName'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'lodash'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Test Comment"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," root",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'someLibName'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"root",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'_'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"this"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"__WEBPACK_EXTERNAL_MODULE_1__"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"对于 ",(0,n.kt)("inlineCode",{parentName:"p"},"libraryTarget")," 每种类型的注释进行更细粒度地控制，请传入一个对象："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n    auxiliaryComment",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      root",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'Root Comment'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      commonjs",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'CommonJS Comment'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      commonjs2",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'CommonJS2 Comment'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      amd",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'AMD Comment'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputcharset",parentName:"h2"}),"output.charset",(0,n.kt)("a",{href:"#outputcharset","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = true")),(0,n.kt)("p",null,"告诉 webpack 为 HTML 的 ",(0,n.kt)("inlineCode",{parentName:"p"},"<script>")," 标签添加 ",(0,n.kt)("inlineCode",{parentName:"p"},'charset="utf-8"')," 标识。"),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"尽管 ",(0,n.kt)("inlineCode",{parentName:"p"},"<script>")," ",(0,n.kt)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#Deprecated_attributes",parentName:"p"},"已弃用"),"了 ",(0,n.kt)("inlineCode",{parentName:"p"},"charset")," 属性，当 webpack 还是默认添加了它，目的是与非现代浏览器兼容。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputchunkfilename",parentName:"h2"}),"output.chunkFilename",(0,n.kt)("a",{href:"#outputchunkfilename","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = '[id].js'")," ",(0,n.kt)("inlineCode",{parentName:"p"},"function (pathData, assetInfo) => string")),(0,n.kt)("p",null,"此选项决定了非初始（non-initial）chunk 文件的名称。有关可取的值的详细信息，请查看 ",(0,n.kt)("a",{href:"#outputfilename",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.filename"))," 选项。"),(0,n.kt)("p",null,"注意，这些文件名需要在运行时根据 chunk 发送的请求去生成。因此，需要在 webpack runtime 输出 bundle 值时，将 chunk id 的值对应映射到占位符(如 ",(0,n.kt)("inlineCode",{parentName:"p"},"[name]")," 和 ",(0,n.kt)("inlineCode",{parentName:"p"},"[chunkhash]"),")。这会增加文件大小，并且在任何 chunk 的占位符值修改后，都会使 bundle 失效。"),(0,n.kt)("p",null,"默认使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"[id].js")," 或从 ",(0,n.kt)("a",{href:"#outputfilename",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.filename"))," 中推断出的值（",(0,n.kt)("inlineCode",{parentName:"p"},"[name]")," 会被预先替换为 ",(0,n.kt)("inlineCode",{parentName:"p"},"[id]")," 或 ",(0,n.kt)("inlineCode",{parentName:"p"},"[id]."),"）。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n    chunkFilename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'[id].js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"Usage as a function:"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token function-variable function",parentName:"code"},"chunkFilename"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"pathData"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," pathData",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"chunk",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"name ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'main'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"?")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'[name].js'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'[name]/[name].js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputchunkformat",parentName:"h2"}),"output.chunkFormat",(0,n.kt)("a",{href:"#outputchunkformat","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"false")," ",(0,n.kt)("inlineCode",{parentName:"p"},"string: 'array-push' | 'commonjs' | 'module' | <any string>")),(0,n.kt)("p",null,"chunk 的格式（formats 默认包含 ",(0,n.kt)("inlineCode",{parentName:"p"},"'array-push'")," (web/WebWorker)、",(0,n.kt)("inlineCode",{parentName:"p"},"'commonjs'")," (node.js)、",(0,n.kt)("inlineCode",{parentName:"p"},"'module'")," (ESM)，还有其他情况可由插件添加）。"),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"The default value of this option depends on the ",(0,n.kt)("a",{href:"/configuration/target/",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"target"))," and ",(0,n.kt)("a",{href:"#outputmodule",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.module"))," setting. For more details, search for ",(0,n.kt)("inlineCode",{parentName:"p"},'"chunkFormat"')," ",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/blob/main/lib/config/defaults.js",parentName:"p"},"in the webpack defaults"),".")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n    chunkFormat",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'commonjs'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputchunkLoadTimeout-outputchunkLoadtimeout",parentName:"h2"}),"output.chunkLoadTimeout $#outputchunkLoadtimeout$",(0,n.kt)("a",{href:"#outputchunkLoadTimeout-outputchunkLoadtimeout","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"number = 120000")),(0,n.kt)("p",null,"chunk 请求到期之前的毫秒数，默认为 120000。从 webpack 2.6.0 开始支持此选项。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n    chunkLoadTimeout",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"30000"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputchunkloadingglobal",parentName:"h2"}),"output.chunkLoadingGlobal",(0,n.kt)("a",{href:"#outputchunkloadingglobal","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = 'webpackChunkwebpack'")),(0,n.kt)("p",null,"webpack 用于加载 chunk 的全局变量。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n    chunkLoadingGlobal",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'myCustomFunc'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputchunkloading",parentName:"h2"}),"output.chunkLoading",(0,n.kt)("a",{href:"#outputchunkloading","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"false")," ",(0,n.kt)("inlineCode",{parentName:"p"},"string: 'jsonp' | 'import-scripts' | 'require' | 'async-node' | 'import' | <any string>")),(0,n.kt)("p",null,"加载 chunk 的方法（默认值有 ",(0,n.kt)("inlineCode",{parentName:"p"},"'jsonp'")," (web)、",(0,n.kt)("inlineCode",{parentName:"p"},"'import'")," (ESM)、",(0,n.kt)("inlineCode",{parentName:"p"},"'importScripts'")," (WebWorker)、",(0,n.kt)("inlineCode",{parentName:"p"},"'require'")," (sync node.js)、",(0,n.kt)("inlineCode",{parentName:"p"},"'async-node'")," (async node.js)，还有其他值可由插件添加)。"),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"The default value of this option depends on the ",(0,n.kt)("a",{href:"/configuration/target/",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"target"))," and ",(0,n.kt)("a",{href:"#outputchunkformat",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"chunkFormat ")),"setting. For more details, search for ",(0,n.kt)("inlineCode",{parentName:"p"},'"chunkLoading"')," ",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/blob/main/lib/config/defaults.js",parentName:"p"},"in the webpack defaults"),".")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n    chunkLoading",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'async-node'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputclean",parentName:"h2"}),"output.clean",(0,n.kt)("a",{href:"#outputclean","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)(s,{text:"5.20.0+",mdxType:"Badge"}),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean")," ",(0,n.kt)("inlineCode",{parentName:"p"},"{ dry?: boolean, keep?: RegExp | string | ((filename: string) => boolean) }")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    clean",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 在生成文件之前清空 output 目录"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    clean",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      dry",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 打印而不是删除应该移除的静态资源"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    clean",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      keep",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/ignored\\/dir\\//"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 保留 'ignored/dir' 下的静态资源"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 或者"),"\n\nmodule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    clean",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token function",parentName:"code"},"keep"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"asset"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," asset",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"includes"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'ignored/dir'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"你也可以使用钩子函数："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"webpack",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"CleanPlugin",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"getCompilationHooks"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"compilation",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"keep",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"tap"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"\n  ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'Test'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"asset"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token regex",parentName:"code"},"/ignored\\/dir\\//"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"test"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"asset",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputcomparebeforeemit",parentName:"h2"}),"output.compareBeforeEmit",(0,n.kt)("a",{href:"#outputcomparebeforeemit","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = true")),(0,n.kt)("p",null,"告知 webpack 在写入到输出文件系统时检查输出的文件是否已经存在并且拥有相同内容。"),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"当在磁盘中已经存在有相同内容的文件时，webpack 将不会写入输出文件。")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    compareBeforeEmit",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputcrossoriginloading",parentName:"h2"}),"output.crossOriginLoading",(0,n.kt)("a",{href:"#outputcrossoriginloading","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = false")," ",(0,n.kt)("inlineCode",{parentName:"p"},"string: 'anonymous' | 'use-credentials'")),(0,n.kt)("p",null,"告诉 webpack 启用 ",(0,n.kt)("a",{href:"https://developer.mozilla.org/en/docs/Web/HTML/Element/script#attr-crossorigin",parentName:"p"},"cross-origin 属性")," 加载 chunk。仅在 ",(0,n.kt)("a",{href:"/configuration/target/",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"target"))," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'web'")," 时生效，通过使用 JSONP 来添加脚本标签，实现按需加载模块。"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"'anonymous'")," - ",(0,n.kt)("strong",{parentName:"li"},"不带凭据(credential)")," 启用跨域加载"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"'use-credentials'")," - ",(0,n.kt)("strong",{parentName:"li"},"携带凭据(credential)")," 启用跨域加载")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputdevtoolfallbackmodulefilenametemplate",parentName:"h2"}),"output.devtoolFallbackModuleFilenameTemplate",(0,n.kt)("a",{href:"#outputdevtoolfallbackmodulefilenametemplate","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string")," ",(0,n.kt)("inlineCode",{parentName:"p"},"function (info)")),(0,n.kt)("p",null,"当上面的模板字符串或函数产生重复时使用的备用内容。"),(0,n.kt)("p",null,"查看 ",(0,n.kt)("a",{href:"#outputdevtoolmodulefilenametemplate",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.devtoolModuleFilenameTemplate")),"。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputdevtoolmodulefilenametemplate",parentName:"h2"}),"output.devtoolModuleFilenameTemplate",(0,n.kt)("a",{href:"#outputdevtoolmodulefilenametemplate","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = 'webpack://[namespace]/[resource-path]?[loaders]'")," ",(0,n.kt)("inlineCode",{parentName:"p"},"function (info) => string")),(0,n.kt)("p",null,"此选项仅在 「",(0,n.kt)("a",{href:"/configuration/devtool",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"devtool"))," 使用了需要模块名称的选项」时使用。"),(0,n.kt)("p",null,"自定义每个 source map 的 ",(0,n.kt)("inlineCode",{parentName:"p"},"sources")," 数组中使用的名称。可以通过传递模板字符串(template string)或者函数来完成。例如，当使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"devtool: 'eval'"),"，默认值是："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    devtoolModuleFilenameTemplate",(0,n.kt)("span",{className:"token operator",parentName:"code"},":"),"\n      ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'webpack://[namespace]/[resource-path]?[loaders]'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"模板字符串(template string)中做以下替换（通过 webpack 内部的 ",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/blob/main/lib/ModuleFilenameHelpers.js",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"ModuleFilenameHelpers")),"）："),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"Template"),(0,n.kt)("th",{parentName:"tr"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Template",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[absolute-resource-path]")),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"绝对路径文件名"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Template",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[all-loaders]")),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"自动和显式的 loader，并且参数取决于第一个 loader 名称"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Template",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[hash]")),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"模块标识符的 hash"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Template",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[id]")),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"模块标识符"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Template",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[loaders]")),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"显式的 loader，并且参数取决于第一个 loader 名称"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Template",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[resource]")),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"用于解析文件的路径和用于第一个 loader 的任意查询参数"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Template",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[resource-path]")),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"不带任何查询参数，用于解析文件的路径"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Template",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[namespace]")),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"模块命名空间。在构建成为一个 library 之后，通常也是 library 名称，否则为空"))))),(0,n.kt)("p",null,"当使用一个函数，同样的选项要通过 ",(0,n.kt)("inlineCode",{parentName:"p"},"info")," 参数并使用驼峰式(camel-cased)："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token function-variable function",parentName:"code"},"devtoolModuleFilenameTemplate"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"info"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,n.kt)("span",{className:"token template-string",parentName:"code"},(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`"),(0,n.kt)("span",{className:"token string",parentName:"span"},"webpack:///"),(0,n.kt)("span",{className:"token interpolation",parentName:"span"},(0,n.kt)("span",{className:"token interpolation-punctuation punctuation",parentName:"span"},"${"),"info",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"."),"resourcePath",(0,n.kt)("span",{className:"token interpolation-punctuation punctuation",parentName:"span"},"}")),(0,n.kt)("span",{className:"token string",parentName:"span"},"?"),(0,n.kt)("span",{className:"token interpolation",parentName:"span"},(0,n.kt)("span",{className:"token interpolation-punctuation punctuation",parentName:"span"},"${"),"info",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"."),"loaders",(0,n.kt)("span",{className:"token interpolation-punctuation punctuation",parentName:"span"},"}")),(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`")),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"如果多个模块产生相同的名称，使用 ",(0,n.kt)("a",{href:"#outputdevtoolfallbackmodulefilenametemplate",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.devtoolFallbackModuleFilenameTemplate"))," 来代替这些模块。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputdevtoolnamespace",parentName:"h2"}),"output.devtoolNamespace",(0,n.kt)("a",{href:"#outputdevtoolnamespace","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string")),(0,n.kt)("p",null,"此选项确定 ",(0,n.kt)("a",{href:"#outputdevtoolmodulefilenametemplate",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.devtoolModuleFilenameTemplate"))," 使用的模块名称空间。未指定时的默认值为：",(0,n.kt)("a",{href:"#outputuniquename",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.uniqueName")),"。在加载多个通过 webpack 构建的 library 时，用于防止 source map 中源文件路径冲突。"),(0,n.kt)("p",null,"例如，如果你有两个 library，分别使用命名空间 ",(0,n.kt)("inlineCode",{parentName:"p"},"library1")," 和 ",(0,n.kt)("inlineCode",{parentName:"p"},"library2"),"，并且都有一个文件 ",(0,n.kt)("inlineCode",{parentName:"p"},"./src/index.js"),"（可能具有不同内容），它们会将这些文件暴露为 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack://library1/./src/index.js")," 和 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack://library2/./src/index.js"),"。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputenabledchunkloadingtypes",parentName:"h2"}),(0,n.kt)("inlineCode",{parentName:"h2"},"output.enabledChunkLoadingTypes"),(0,n.kt)("a",{href:"#outputenabledchunkloadingtypes","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"[string: 'jsonp' | 'import-scripts' | 'require' | 'async-node' | <any string>]")),(0,n.kt)("p",null,"允许入口点使用的 chunk 加载类型列表。将被 webpack 自动填充。只有当使用一个函数作为入口配置项并从那里返回 chunkLoading 配置项时才需要。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n    enabledChunkLoadingTypes",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'jsonp'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'require'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputenabledlibrarytypes",parentName:"h2"}),(0,n.kt)("inlineCode",{parentName:"h2"},"output.enabledLibraryTypes"),(0,n.kt)("a",{href:"#outputenabledlibrarytypes","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"[string]")),(0,n.kt)("p",null,"入口点可用的 library 类型列表."),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    enabledLibraryTypes",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'module'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputenabledwasmloadingtypes",parentName:"h2"}),(0,n.kt)("inlineCode",{parentName:"h2"},"output.enabledWasmLoadingTypes"),(0,n.kt)("a",{href:"#outputenabledwasmloadingtypes","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"[string]")),(0,n.kt)("p",null,"用于设置入口支持的 wasm 加载类型的列表。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    enabledWasmLoadingTypes",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'fetch'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n## ",(0,n.kt)("span",{className:"token template-string",parentName:"code"},(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`"),(0,n.kt)("span",{className:"token string",parentName:"span"},"output.environment"),(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`"))," $#outputenvironment$\n\n告诉 webpack 在生成的运行时代码中可以使用哪个版本的 ",(0,n.kt)("span",{className:"token constant",parentName:"code"},"ES")," 特性。\n\n",(0,n.kt)("span",{className:"token template-string",parentName:"code"},(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`"),(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`")),"`javascript\nmodule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    environment",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// The environment supports arrow functions ('() => { ... }')."),"\n      arrowFunction",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// The environment supports BigInt as literal (123n)."),"\n      bigIntLiteral",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// The environment supports const and let for variable declarations."),"\n      ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// The environment supports destructuring ('{ a, b } = obj')."),"\n      destructuring",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// The environment supports an async import() function to import EcmaScript modules."),"\n      dynamicImport",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// The environment supports 'for of' iteration ('for (const x of array) { ... }')."),"\n      forOf",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// The environment supports ECMAScript Module syntax to import ECMAScript modules (import ... from '...')."),"\n      module",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// The environment supports optional chaining ('obj?.a' or 'obj?.()')."),"\n      optionalChaining",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// The environment supports template literals."),"\n      templateLiteral",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputfilename",parentName:"h2"}),"output.filename",(0,n.kt)("a",{href:"#outputfilename","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string")," ",(0,n.kt)("inlineCode",{parentName:"p"},"function (pathData, assetInfo) => string")),(0,n.kt)("p",null,"此选项决定了每个输出 bundle 的名称。这些 bundle 将写入到 ",(0,n.kt)("a",{href:"#outputpath",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.path"))," 选项指定的目录下。"),(0,n.kt)("p",null,"对于单个",(0,n.kt)("a",{href:"/configuration/entry-context#entry",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"入口")),"起点，filename 会是一个静态名称。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    filename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'bundle.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"然而，当通过多个入口起点(entry point)、代码拆分(code splitting)或各种插件(plugin)创建多个 bundle，应该使用以下一种替换方式，来赋予每个 bundle 一个唯一的名称……"),(0,n.kt)("p",null,"使用入口名称："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    filename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'[name].bundle.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"使用内部 chunk id"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    filename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'[id].bundle.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"使用由生成的内容产生的 hash："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    filename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'[contenthash].bundle.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"结合多个替换组合使用："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    filename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'[name].[contenthash].bundle.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"使用函数返回 filename："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token function-variable function",parentName:"code"},"filename"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"pathData"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," pathData",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"chunk",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"name ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'main'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"?")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'[name].js'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'[name]/[name].js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"请确保已阅读过 ",(0,n.kt)("a",{href:"/guides/caching",parentName:"p"},"指南 - 缓存")," 的详细信息。这里涉及更多步骤，不仅仅是设置此选项。"),(0,n.kt)("p",null,"注意此选项被称为文件名，但是你还是可以使用像 ",(0,n.kt)("inlineCode",{parentName:"p"},"'js/[name]/bundle.js'")," 这样的文件夹结构。"),(0,n.kt)("p",null,"注意，此选项不会影响那些「按需加载 chunk」的输出文件。它只影响最初加载的输出文件。对于按需加载的 chunk 文件，请使用 ",(0,n.kt)("a",{href:"#outputchunkfilename",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.chunkFilename"))," 选项来控制输出。通过 loader 创建的文件也不受影响。在这种情况下，你必须尝试 loader 特定的可用选项。"),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"template-strings",parentName:"h3"}),"Template strings",(0,n.kt)("a",{href:"#template-strings","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"可以使用以下替换模板字符串（通过 webpack 内部的",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/blob/main/lib/TemplatedPathPlugin.js",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"TemplatedPathPlugin")),"）:"),(0,n.kt)("p",null,"可在编译层面进行替换的内容："),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"模板"),(0,n.kt)("th",{parentName:"tr"},"描述"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[fullhash]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"compilation 完整的 hash 值"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[hash]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"同上，但已弃用"))))),(0,n.kt)("p",null,"可在 chunk 层面进行替换的内容："),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"模板"),(0,n.kt)("th",{parentName:"tr"},"描述"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[id]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"此 chunk 的 ID"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[name]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"如果设置，则为此 chunk 的名称，否则使用 chunk 的 ID"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[chunkhash]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"此 chunk 的 hash 值，包含该 chunk 的所有元素"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[contenthash]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"此 chunk 的 hash 值，只包括该内容类型的元素（受 ",(0,n.kt)("inlineCode",{parentName:"span"},"optimization.realContentHash")," 影响）"))))),(0,n.kt)("p",null,"可在模块层面替换的内容："),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"模板"),(0,n.kt)("th",{parentName:"tr"},"描述"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[id]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"模块的 ID"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[moduleid]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"同上，但已弃用"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[hash]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"模块的 Hash 值"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[modulehash]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"同上，但已弃用"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[contenthash]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"模块内容的 Hash 值"))))),(0,n.kt)("p",null,"可在文件层面替换的内容："),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"模板"),(0,n.kt)("th",{parentName:"tr"},"描述"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[file]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"filename 和路径，不含 query 或 fragment"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[query]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"带前缀 ",(0,n.kt)("inlineCode",{parentName:"span"},"?")," 的 query"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[fragment]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"带前缀 ",(0,n.kt)("inlineCode",{parentName:"span"},"#")," 的 fragment"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[base]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"只有 filename（包含扩展名），不含 path"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[filebase]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"同上，但已弃用"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[path]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"只有 path，不含 filename"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[name]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"只有 filename，不含扩展名或 path"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模板",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[ext]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"带前缀 ",(0,n.kt)("inlineCode",{parentName:"span"},".")," 的扩展名（对 ",(0,n.kt)("a",{href:"#outputfilename",parentName:"span"},"output.filename")," 不可用）"))))),(0,n.kt)("p",null,"可在 URL 层面替换的内容："),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"模块"),(0,n.kt)("th",{parentName:"tr"},"描述"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"模块",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"[url]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"URL"))))),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},(0,n.kt)("inlineCode",{parentName:"p"},"[file]")," 等价于 ",(0,n.kt)("inlineCode",{parentName:"p"},"[path][base]"),"。",(0,n.kt)("inlineCode",{parentName:"p"},"[base]")," 等价于 ",(0,n.kt)("inlineCode",{parentName:"p"},"[name][ext]"),"。完整的路径为 ",(0,n.kt)("inlineCode",{parentName:"p"},"[path][name][ext][query][fragment]")," 或 ",(0,n.kt)("inlineCode",{parentName:"p"},"[path][base][query][fragment]")," 或 ",(0,n.kt)("inlineCode",{parentName:"p"},"[file][query][fragment]"),"。")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"[hash]"),"，",(0,n.kt)("inlineCode",{parentName:"p"},"[contenthash]")," 或者 ",(0,n.kt)("inlineCode",{parentName:"p"},"[chunkhash]")," 的长度可以使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"[hash:16]"),"（默认为 20）来指定。或者，通过指定",(0,n.kt)("a",{href:"#outputhashdigestlength",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.hashDigestLength"))," 在全局配置长度。"),(0,n.kt)("p",null,"当你要在实际文件名中使用占位符时，webpack 会过滤出需要替换的占位符。例如，输出一个文件 ",(0,n.kt)("inlineCode",{parentName:"p"},"[name].js"),"， 你必须通过在括号之间添加反斜杠来转义",(0,n.kt)("inlineCode",{parentName:"p"},"[name]"),"占位符。 因此，",(0,n.kt)("inlineCode",{parentName:"p"},"[\\name\\]")," 生成 ",(0,n.kt)("inlineCode",{parentName:"p"},"[name]")," 而不是 ",(0,n.kt)("inlineCode",{parentName:"p"},"name"),"。"),(0,n.kt)("p",null,"例如：",(0,n.kt)("inlineCode",{parentName:"p"},"[\\id\\]")," 生成 ",(0,n.kt)("inlineCode",{parentName:"p"},"[id]")," 而不是 ",(0,n.kt)("inlineCode",{parentName:"p"},"id"),"。"),(0,n.kt)("p",null,"如果将这个选项设为一个函数，函数将返回一个包含上面表格中含有替换信息数据的对象。\n替换也会被应用到返回的字符串中。\n传递的对象将具有如下类型（取决于上下文的属性）："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-typescript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"type")," ",(0,n.kt)("span",{className:"token class-name",parentName:"code"},"PathData")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  hash",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token function-variable function",parentName:"code"},"hashWithLength"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token builtin",parentName:"code"},"number"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  chunk",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," Chunk ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"|")," ChunkPathData",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"module"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," Module ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"|")," ModulePathData",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  contentHashType",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  contentHash",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token function-variable function",parentName:"code"},"contentHashWithLength"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token builtin",parentName:"code"},"number"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  filename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  url",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  runtime",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"|")," SortableSet",(0,n.kt)("span",{className:"token operator",parentName:"code"},"<"),(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token operator",parentName:"code"},">"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  chunkGraph",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ChunkGraph",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"type")," ",(0,n.kt)("span",{className:"token class-name",parentName:"code"},"ChunkPathData")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  id",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"|")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"number"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  hash",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token function-variable function",parentName:"code"},"hashWithLength"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token builtin",parentName:"code"},"number"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  contentHash",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," Record",(0,n.kt)("span",{className:"token operator",parentName:"code"},"<"),(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token operator",parentName:"code"},">"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  contentHashWithLength",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," Record",(0,n.kt)("span",{className:"token operator",parentName:"code"},"<"),(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token builtin",parentName:"code"},"number"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token operator",parentName:"code"},">"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"type")," ",(0,n.kt)("span",{className:"token class-name",parentName:"code"},"ModulePathData")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  id",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"|")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"number"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  hash",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token function-variable function",parentName:"code"},"hashWithLength"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token builtin",parentName:"code"},"number"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"在某些上下文中，属性将使用 JavaScript 代码表达式代替原始值。在此情况下，",(0,n.kt)("inlineCode",{parentName:"p"},"WithLength")," 变量是可用的，应该使用它来代替对原始值的分片操作。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputglobalobject",parentName:"h2"}),"output.globalObject",(0,n.kt)("a",{href:"#outputglobalobject","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = 'self'")),(0,n.kt)("p",null,"当输出为 library 时，尤其是当 ",(0,n.kt)("inlineCode",{parentName:"p"},"libraryTarget")," 为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'umd'"),"时，此选项将决定使用哪个全局对象来挂载 library。为了使 UMD 构建在浏览器和 Node.js 上均可用，应将 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.globalObject")," 选项设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'this'"),"。对于类似 web 的目标，默认为 ",(0,n.kt)("inlineCode",{parentName:"p"},"self"),"。"),(0,n.kt)("p",null,"入口点的返回值将会使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library.name")," 赋值给全局对象。依赖于 ",(0,n.kt)("inlineCode",{parentName:"p"},"target")," 配置项，全局对象将会发生对应的改变，例如：",(0,n.kt)("inlineCode",{parentName:"p"},"self"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"global")," 或者 ",(0,n.kt)("inlineCode",{parentName:"p"},"globalThis"),"。"),(0,n.kt)("p",null,"示例："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'myLib'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    libraryTarget",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'umd'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    filename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'myLib.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    globalObject",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'this'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputhashdigest",parentName:"h2"}),"output.hashDigest",(0,n.kt)("a",{href:"#outputhashdigest","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = 'hex'")),(0,n.kt)("p",null,"在生成 hash 时使用的编码方式。支持 Node.js ",(0,n.kt)("a",{href:"https://nodejs.org/api/buffer.html#buffers-and-character-encodings",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"hash.digest"))," 的所有编码。对文件名使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"'base64'"),"，可能会出现问题，因为 base64 字母表中具有 ",(0,n.kt)("inlineCode",{parentName:"p"},"/")," 这个字符(character)。同样的，",(0,n.kt)("inlineCode",{parentName:"p"},"'latin1'")," 规定可以含有任何字符(character)。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputhashdigestlength",parentName:"h2"}),"output.hashDigestLength",(0,n.kt)("a",{href:"#outputhashdigestlength","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"number = 20")),(0,n.kt)("p",null,"散列摘要的前缀长度。"),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"针对 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack v5.65.0+"),"，在 ",(0,n.kt)("a",{href:"/configuration/experiments/#experimentsfuturedefaults",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"experiments.futureDefaults"))," 启用时，",(0,n.kt)("inlineCode",{parentName:"p"},"hashDigestLength")," 配置项会以 ",(0,n.kt)("inlineCode",{parentName:"p"},"16")," 作为默认值。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputhashfunction",parentName:"h2"}),"output.hashFunction",(0,n.kt)("a",{href:"#outputhashfunction","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = 'md4'")," ",(0,n.kt)("inlineCode",{parentName:"p"},"function")),(0,n.kt)("p",null,"散列算法。支持 Node.JS ",(0,n.kt)("a",{href:"https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"crypto.createHash"))," 的所有功能。从 ",(0,n.kt)("inlineCode",{parentName:"p"},"4.0.0-alpha2")," 开始，",(0,n.kt)("inlineCode",{parentName:"p"},"hashFunction")," 现在可以是一个返回自定义 hash 的构造函数。出于性能原因，你可以提供一个不加密的哈希函数(non-crypto hash function)。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    hashFunction",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'metrohash'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"MetroHash64",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"确保 hash 函数有可访问的 ",(0,n.kt)("inlineCode",{parentName:"p"},"update")," 和 ",(0,n.kt)("inlineCode",{parentName:"p"},"digest")," 方法。"),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"从 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack v5.54.0+")," 起，",(0,n.kt)("inlineCode",{parentName:"p"},"hashFunction")," 支持将 ",(0,n.kt)("inlineCode",{parentName:"p"},"xxhash64")," 作为更快的算法，当启用 ",(0,n.kt)("a",{href:"/configuration/experiments/#experimentsfuturedefaults",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"experiments.futureDefaults"))," 时，此算法将被默认使用。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputhashsalt",parentName:"h2"}),"output.hashSalt",(0,n.kt)("a",{href:"#outputhashsalt","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"一个可选的加盐值，通过 Node.JS ",(0,n.kt)("a",{href:"https://nodejs.org/api/crypto.html#crypto_hash_update_data_inputencoding",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"hash.update"))," 来更新哈希。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputhotupdatechunkfilename",parentName:"h2"}),"output.hotUpdateChunkFilename",(0,n.kt)("a",{href:"#outputhotupdatechunkfilename","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = '[id].[fullhash].hot-update.js'")),(0,n.kt)("p",null,"自定义热更新 chunk 的文件名。可选的值的详细信息，请查看 ",(0,n.kt)("a",{href:"#outputfilename",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.filename"))," 选项。"),(0,n.kt)("p",null,"其中值唯一的占位符是 ",(0,n.kt)("inlineCode",{parentName:"p"},"[id]")," 和 ",(0,n.kt)("inlineCode",{parentName:"p"},"[fullhash]"),"，其默认为："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    hotUpdateChunkFilename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'[id].[fullhash].hot-update.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"通常，你不需要修改 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.hotUpdateChunkFilename"),".")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputhotupdateglobal",parentName:"h2"}),"output.hotUpdateGlobal",(0,n.kt)("a",{href:"#outputhotupdateglobal","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string")),(0,n.kt)("p",null,"只在 ",(0,n.kt)("a",{href:"/configuration/target/",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"target"))," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'web'")," 时使用，用于加载热更新(hot update)的 JSONP 函数。"),(0,n.kt)("p",null,"JSONP 函数用于异步加载(async load)热更新(hot-update) chunk。"),(0,n.kt)("p",null,"欲了解详情，请查阅 ",(0,n.kt)("a",{href:"#outputchunkloadingglobal",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.chunkLoadingGlobal")),"。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputhotupdatemainfilename",parentName:"h2"}),"output.hotUpdateMainFilename",(0,n.kt)("a",{href:"#outputhotupdatemainfilename","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = '[runtime].[fullhash].hot-update.json'")," ",(0,n.kt)("inlineCode",{parentName:"p"},"function")),(0,n.kt)("p",null,"自定义热更新的主文件名(main filename)。",(0,n.kt)("inlineCode",{parentName:"p"},"[fullhash]")," 和 ",(0,n.kt)("inlineCode",{parentName:"p"},"[runtime]")," 均可作为占位符。"),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"通常，你不需要修改 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.hotUpdateMainFilename"),".")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputiife",parentName:"h2"}),(0,n.kt)("inlineCode",{parentName:"h2"},"output.iife"),(0,n.kt)("a",{href:"#outputiife","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = true")),(0,n.kt)("p",null,"告诉 webpack 添加 ",(0,n.kt)("a",{href:"https://developer.mozilla.org/en-US/docs/Glossary/IIFE",parentName:"p"},"IIFE")," 外层包裹生成的代码."),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    iife",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputimportFunctionName",parentName:"h2"}),"output.importFunctionName",(0,n.kt)("a",{href:"#outputimportFunctionName","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = 'import'")),(0,n.kt)("p",null,"内部 ",(0,n.kt)("inlineCode",{parentName:"p"},"import()")," 函数的名称. 可用于 polyfilling, 例如 通过 ",(0,n.kt)("a",{href:"https://github.com/GoogleChromeLabs/dynamic-import-polyfill",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"dynamic-import-polyfill")),"."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    importFunctionName",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'__import__'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputlibrary",parentName:"h2"}),"output.library",(0,n.kt)("a",{href:"#outputlibrary","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"输出一个库，为你的入口做导出。"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"类型：",(0,n.kt)("inlineCode",{parentName:"li"},"string | string[] | object"))),(0,n.kt)("p",null,"一起来看一个简单的示例。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  entry",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./src/index.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"假设你在 ",(0,n.kt)("inlineCode",{parentName:"p"},"src/index.js")," 的入口中导出了如下函数："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"export")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"hello"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"name"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  console",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"log"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token template-string",parentName:"code"},(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`"),(0,n.kt)("span",{className:"token string",parentName:"span"},"hello "),(0,n.kt)("span",{className:"token interpolation",parentName:"span"},(0,n.kt)("span",{className:"token interpolation-punctuation punctuation",parentName:"span"},"${"),"name",(0,n.kt)("span",{className:"token interpolation-punctuation punctuation",parentName:"span"},"}")),(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`")),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,n.kt)("p",null,"此时，变量 ",(0,n.kt)("inlineCode",{parentName:"p"},"MyLibrary")," 将与你的入口文件所导出的文件进行绑定，下面是如何使用 webpack 构建的库的实现："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-html",parentName:"pre"},(0,n.kt)("span",{className:"token tag",parentName:"code"},(0,n.kt)("span",{className:"token tag",parentName:"span"},(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"script")," ",(0,n.kt)("span",{className:"token attr-name",parentName:"span"},"src"),(0,n.kt)("span",{className:"token attr-value",parentName:"span"},(0,n.kt)("span",{className:"token punctuation attr-equals",parentName:"span"},"="),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},'"'),"https://example.org/path/to/my-library.js",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},'"')),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},">")),(0,n.kt)("span",{className:"token script",parentName:"code"}),(0,n.kt)("span",{className:"token tag",parentName:"code"},(0,n.kt)("span",{className:"token tag",parentName:"span"},(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"script"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n",(0,n.kt)("span",{className:"token tag",parentName:"code"},(0,n.kt)("span",{className:"token tag",parentName:"span"},(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"script"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},">")),(0,n.kt)("span",{className:"token script",parentName:"code"},(0,n.kt)("span",{className:"token language-javascript",parentName:"span"},"\n  MyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"."),(0,n.kt)("span",{className:"token function",parentName:"span"},"hello"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"("),(0,n.kt)("span",{className:"token string",parentName:"span"},"'webpack'"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},";"),"\n")),(0,n.kt)("span",{className:"token tag",parentName:"code"},(0,n.kt)("span",{className:"token tag",parentName:"span"},(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"script"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},">")))),(0,n.kt)("p",null,"在上面的例子中，我们为 ",(0,n.kt)("inlineCode",{parentName:"p"},"entry")," 设置了一个入口文件，然而 webpack 可以接受 ",(0,n.kt)("a",{href:"/configuration/entry-context/#entry",parentName:"p"},"多个入口"),"，例如一个 ",(0,n.kt)("inlineCode",{parentName:"p"},"array")," 或者一个 ",(0,n.kt)("inlineCode",{parentName:"p"},"object"),"。"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"如果你将 ",(0,n.kt)("inlineCode",{parentName:"p"},"entry")," 设置为一个 ",(0,n.kt)("inlineCode",{parentName:"p"},"array"),"，那么只有数组中的最后一个会被暴露。"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  entry",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'./src/a.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./src/b.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 只有在 b.js 中导出的内容才会被暴露"),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";")))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"如果你将 ",(0,n.kt)("inlineCode",{parentName:"p"},"entry")," 设置为一个 ",(0,n.kt)("inlineCode",{parentName:"p"},"object"),"，所以入口都可以通过 ",(0,n.kt)("inlineCode",{parentName:"p"},"library")," 的 ",(0,n.kt)("inlineCode",{parentName:"p"},"array")," 语法暴露："),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  entry",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    a",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./src/a.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    b",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./src/b.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    filename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'[name].js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'[name]'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// name is a placeholder here"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",{parentName:"li"},"假设 ",(0,n.kt)("inlineCode",{parentName:"p"},"a.js")," 与 ",(0,n.kt)("inlineCode",{parentName:"p"},"b.js")," 导出名为 ",(0,n.kt)("inlineCode",{parentName:"p"},"hello")," 的函数，这就是如何使用这些库的方法："),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{className:"hljs language-html",parentName:"pre"},(0,n.kt)("span",{className:"token tag",parentName:"code"},(0,n.kt)("span",{className:"token tag",parentName:"span"},(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"script")," ",(0,n.kt)("span",{className:"token attr-name",parentName:"span"},"src"),(0,n.kt)("span",{className:"token attr-value",parentName:"span"},(0,n.kt)("span",{className:"token punctuation attr-equals",parentName:"span"},"="),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},'"'),"https://example.org/path/to/a.js",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},'"')),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},">")),(0,n.kt)("span",{className:"token script",parentName:"code"}),(0,n.kt)("span",{className:"token tag",parentName:"code"},(0,n.kt)("span",{className:"token tag",parentName:"span"},(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"script"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n",(0,n.kt)("span",{className:"token tag",parentName:"code"},(0,n.kt)("span",{className:"token tag",parentName:"span"},(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"script")," ",(0,n.kt)("span",{className:"token attr-name",parentName:"span"},"src"),(0,n.kt)("span",{className:"token attr-value",parentName:"span"},(0,n.kt)("span",{className:"token punctuation attr-equals",parentName:"span"},"="),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},'"'),"https://example.org/path/to/b.js",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},'"')),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},">")),(0,n.kt)("span",{className:"token script",parentName:"code"}),(0,n.kt)("span",{className:"token tag",parentName:"code"},(0,n.kt)("span",{className:"token tag",parentName:"span"},(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"script"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},">")),"\n",(0,n.kt)("span",{className:"token tag",parentName:"code"},(0,n.kt)("span",{className:"token tag",parentName:"span"},(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"script"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},">")),(0,n.kt)("span",{className:"token script",parentName:"code"},(0,n.kt)("span",{className:"token language-javascript",parentName:"span"},"\n  MyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"."),"a",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"."),(0,n.kt)("span",{className:"token function",parentName:"span"},"hello"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"("),(0,n.kt)("span",{className:"token string",parentName:"span"},"'webpack'"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},";"),"\n  MyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"."),"b",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"."),(0,n.kt)("span",{className:"token function",parentName:"span"},"hello"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"("),(0,n.kt)("span",{className:"token string",parentName:"span"},"'webpack'"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},";"),"\n")),(0,n.kt)("span",{className:"token tag",parentName:"code"},(0,n.kt)("span",{className:"token tag",parentName:"span"},(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"script"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},">")))),(0,n.kt)("p",{parentName:"li"},"查看 ",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/tree/main/examples/multi-part-library",parentName:"p"},"示例")," 获取更多内容。"),(0,n.kt)("p",{parentName:"li"},"请注意，如果你打算在每个入口点配置 library 配置项的话，以上配置将不能按照预期执行。这里是如何 ",(0,n.kt)("a",{href:"/concepts/entry-points/#entry-description-object",parentName:"p"},"在每个入口点下")," 做的方法："),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  entry",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    main",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./src/index.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// `output.library` 下的所有配置项可以在这里使用"),"\n        name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'umd'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        umdNamedDefine",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    another",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./src/another.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'AnotherLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'commonjs2'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"outputlibraryname",parentName:"h3"}),"output.library.name",(0,n.kt)("a",{href:"#outputlibraryname","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"指定库的名称。"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"类型："),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{className:"hljs language-ts",parentName:"pre"},(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"|")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"|")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"amd",(0,n.kt)("span",{className:"token operator",parentName:"code"},"?"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," commonjs",(0,n.kt)("span",{className:"token operator",parentName:"code"},"?"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," root",(0,n.kt)("span",{className:"token operator",parentName:"code"},"?"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"|")," ",(0,n.kt)("span",{className:"token builtin",parentName:"code"},"string"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"))))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"outputlibrarytype",parentName:"h3"}),"output.library.type",(0,n.kt)("a",{href:"#outputlibrarytype","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"配置将库暴露的方式。"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"类型：",(0,n.kt)("inlineCode",{parentName:"p"},"string")),(0,n.kt)("p",{parentName:"li"},"类型默认包括 ",(0,n.kt)("inlineCode",{parentName:"p"},"'var'"),"、 ",(0,n.kt)("inlineCode",{parentName:"p"},"'module'"),"、 ",(0,n.kt)("inlineCode",{parentName:"p"},"'assign'"),"、 ",(0,n.kt)("inlineCode",{parentName:"p"},"'assign-properties'"),"、 ",(0,n.kt)("inlineCode",{parentName:"p"},"'this'"),"、 ",(0,n.kt)("inlineCode",{parentName:"p"},"'window'"),"、 ",(0,n.kt)("inlineCode",{parentName:"p"},"'self'"),"、 ",(0,n.kt)("inlineCode",{parentName:"p"},"'global'"),"、 ",(0,n.kt)("inlineCode",{parentName:"p"},"'commonjs'"),"、 ",(0,n.kt)("inlineCode",{parentName:"p"},"'commonjs2'"),"、 ",(0,n.kt)("inlineCode",{parentName:"p"},"'commonjs-module'"),"、 ",(0,n.kt)("inlineCode",{parentName:"p"},"'commonjs-static'"),"、 ",(0,n.kt)("inlineCode",{parentName:"p"},"'amd'"),"、 ",(0,n.kt)("inlineCode",{parentName:"p"},"'amd-require'"),"、 ",(0,n.kt)("inlineCode",{parentName:"p"},"'umd'"),"、 ",(0,n.kt)("inlineCode",{parentName:"p"},"'umd2'"),"、 ",(0,n.kt)("inlineCode",{parentName:"p"},"'jsonp'")," 以及 ",(0,n.kt)("inlineCode",{parentName:"p"},"'system'"),"，除此之外也可以通过插件添加。"))),(0,n.kt)("p",null,"对于接下来的示例，我们将会使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"_entry_return_")," 表示被入口点返回的值。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"exposeavariable",parentName:"h4"}),"Expose a Variable",(0,n.kt)("a",{href:"#exposeavariable","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"These options assign the return value of the entry point (e.g. whatever the entry point exported) to the name provided by ",(0,n.kt)("a",{href:"#outputlibraryname",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.name"))," at whatever scope the bundle was included at."),(0,n.kt)("h5",null,(0,n.kt)("span",{id:"type-var",parentName:"h5"}),"type: 'var'",(0,n.kt)("a",{href:"#type-var","aria-hidden":"true",tabIndex:"-1",parentName:"h5"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'var'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"让你的库加载之后，",(0,n.kt)("strong",{parentName:"p"},"入口起点的返回值")," 将会被赋值给一个变量："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"var")," MyLibrary ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 在加载了 `MyLibrary` 的单独脚本中"),"\nMyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h5",null,(0,n.kt)("span",{id:"typeassign",parentName:"h5"}),"type: 'assign'",(0,n.kt)("a",{href:"#typeassign","aria-hidden":"true",tabIndex:"-1",parentName:"h5"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'assign'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"这将生成一个隐含的全局变量，它有可能重新分配一个现有的值（请谨慎使用）："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"MyLibrary ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"请注意，如果 ",(0,n.kt)("inlineCode",{parentName:"p"},"MyLibrary")," 没有在你的库之前定义，那么它将会被设置在全局作用域。"),(0,n.kt)("h5",null,(0,n.kt)("span",{id:"typeassignproperties",parentName:"h5"}),"type: 'assign-properties'",(0,n.kt)("a",{href:"#typeassignproperties","aria-hidden":"true",tabIndex:"-1",parentName:"h5"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)(s,{text:"5.16.0+",mdxType:"Badge"}),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'assign-properties'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"与 ",(0,n.kt)("a",{href:"#typeassign",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"type: 'assign'"))," 相似但是更安全，因为如果 ",(0,n.kt)("inlineCode",{parentName:"p"},"MyLibrary")," 已经存在的话，它将被重用："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 仅在当其不存在是创建 MyLibrary"),"\nMyLibrary ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," MyLibrary ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'undefined'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"?")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," MyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 然后复制返回值到 MyLibrary"),"\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 与 Object.assign 行为类似"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 例如，你像下面这样在你的入口导出一个 `hello` 函数"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"export")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"hello"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"name"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  console",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"log"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token template-string",parentName:"code"},(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`"),(0,n.kt)("span",{className:"token string",parentName:"span"},"Hello "),(0,n.kt)("span",{className:"token interpolation",parentName:"span"},(0,n.kt)("span",{className:"token interpolation-punctuation punctuation",parentName:"span"},"${"),"name",(0,n.kt)("span",{className:"token interpolation-punctuation punctuation",parentName:"span"},"}")),(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`")),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 在另外一个已经加载 MyLibrary 的脚本中"),"\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 你可以像这样运行 `hello` 函数"),"\nMyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"hello"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'World'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"exposeviaobjectassignment",parentName:"h4"}),"Expose Via Object Assignment",(0,n.kt)("a",{href:"#exposeviaobjectassignment","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"这些配置项分配入口点的返回值（例如：无论入口点导出的什么内容）到一个名为 ",(0,n.kt)("a",{href:"#outputlibraryname",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.name"))," 的对象中。"),(0,n.kt)("h5",null,(0,n.kt)("span",{id:"typethis",parentName:"h5"}),"type: 'this'",(0,n.kt)("a",{href:"#typethis","aria-hidden":"true",tabIndex:"-1",parentName:"h5"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'this'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"入口起点的返回值")," 将会被赋值给 this 对象下的 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library.name")," 属性。",(0,n.kt)("inlineCode",{parentName:"p"},"this")," 的含义取决于你："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"this"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 在一个单独的脚本中"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"this"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"MyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\nMyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 如果 `this` 为 window 对象"))),(0,n.kt)("h5",null,(0,n.kt)("span",{id:"type-window",parentName:"h5"}),"type: 'window'",(0,n.kt)("a",{href:"#type-window","aria-hidden":"true",tabIndex:"-1",parentName:"h5"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'window'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"入口起点的返回值")," 将会被赋值给 ",(0,n.kt)("inlineCode",{parentName:"p"},"window")," 对象下的 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library.name"),"。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"window",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\nwindow",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"MyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h5",null,(0,n.kt)("span",{id:"type-global",parentName:"h5"}),"type: 'global'",(0,n.kt)("a",{href:"#type-global","aria-hidden":"true",tabIndex:"-1",parentName:"h5"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'global'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"入口起点的返回值")," 将会被复制给全局对象下的 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library.name"),"。取决于 ",(0,n.kt)("a",{href:"/configuration/target/",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"target"))," 值，全局对象可以分别改变,例如，",(0,n.kt)("inlineCode",{parentName:"p"},"self"),"、",(0,n.kt)("inlineCode",{parentName:"p"},"global")," 或者 ",(0,n.kt)("inlineCode",{parentName:"p"},"globalThis"),"。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"global",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\nglobal",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"MyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h5",null,(0,n.kt)("span",{id:"type-commmonjs",parentName:"h5"}),"type: 'commonjs'",(0,n.kt)("a",{href:"#type-commmonjs","aria-hidden":"true",tabIndex:"-1",parentName:"h5"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'commonjs'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"入口起点的返回值")," 将使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library.name")," 赋值给 ",(0,n.kt)("inlineCode",{parentName:"p"},"exports")," 对象。顾名思义，这是在 CommonJS 环境中使用。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"exports",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"注意，不设置 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library.name")," 将导致入口起点返回的所有属性都被赋值给给定的对象；不检查现有的属性名。")),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"moduledefinitionsystems",parentName:"h4"}),"Module Definition Systems",(0,n.kt)("a",{href:"#moduledefinitionsystems","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"这些配置项将生成一个带有完整 header 的 bundle，以确保与各种模块系统兼容。",(0,n.kt)("inlineCode",{parentName:"p"},"output.library.name")," 配置项在不同的 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library.type")," 中有不同的含义。"),(0,n.kt)("h5",null,(0,n.kt)("span",{id:"type-module",parentName:"h5"}),"type: 'module'",(0,n.kt)("a",{href:"#type-module","aria-hidden":"true",tabIndex:"-1",parentName:"h5"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  experiments",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    outputModule",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// do not specify a `name` here"),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'module'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"输出 ES 模块。"),(0,n.kt)("p",null,"然而该特性仍然是实验性的，并且没有完全支持，所以请确保事先启用 ",(0,n.kt)("a",{href:"/configuration/experiments/",parentName:"p"},"experiments.outputModule"),"。除此之外，你可以在 ",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/issues/2933#issuecomment-774253975",parentName:"p"},"这里")," 追踪开发进度。"),(0,n.kt)("h5",null,(0,n.kt)("span",{id:"type-commmonjs2",parentName:"h5"}),"type: 'commonjs2'",(0,n.kt)("a",{href:"#type-commmonjs2","aria-hidden":"true",tabIndex:"-1",parentName:"h5"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// note there's no `name` here"),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'commonjs2'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"入口起点的返回值")," 将会被赋值给 ",(0,n.kt)("inlineCode",{parentName:"p"},"module.exports"),"。顾名思义，这是在 Node.js（CommonJS）环境中使用的："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"如果我们指定 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library.name")," 为 ",(0,n.kt)("inlineCode",{parentName:"p"},"type: commmonjs2"),"，你的入口起点的返回值将会被赋值给 ",(0,n.kt)("inlineCode",{parentName:"p"},"module.exports.[output.library.name]"),"。"),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"在考虑 CommonJS 与 CommonJS2 之间的区别？虽然它们很相似，但是它们之间有一些细微的差别，这些差别在 webpack 的上下文中通常是不相关的。（要获取更多详细内容，请 ",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/issues/1114",parentName:"p"},"阅读这个 issue"),"。）")),(0,n.kt)("h5",null,(0,n.kt)("span",{id:"type-commonjsstatic",parentName:"h5"}),"type: 'commonjs-static'",(0,n.kt)("a",{href:"#type-commonjsstatic","aria-hidden":"true",tabIndex:"-1",parentName:"h5"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)(s,{text:"5.66.0+",mdxType:"Badge"}),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// note there's no `name` here"),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'commonjs-static'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"单个导出将被设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"module.exports"),' 中的属性。名称中的 "static" 是指输出是静态可分析的，因此具名导出可以通过 Node.js 导入到 ESM 中：'),(0,n.kt)("p",null,"输入："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"export")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,n.kt)("p",null,"输出："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n\nexports",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"doSomething ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," __webpack_exports__",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"doSomething",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"Consumption (CommonJS):"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{")," doSomething ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'./output.cjs'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// doSomething => [Function: doSomething]"))),(0,n.kt)("p",null,"Consumption (ESM):"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{")," doSomething ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./output.cjs'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// doSomething => [Function: doSomething]"))),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"当源代码是用 ESM 编写的，并且输出应该兼容 CJS 和 ESM 时，这是很有用的。获取更多详情，请阅读该 ",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/issues/14998",parentName:"p"},"issue")," 或者 ",(0,n.kt)("a",{href:"https://dev.to/jakobjingleheimer/configuring-commonjs-es-modules-for-nodejs-12ed",parentName:"p"},"这篇文档"),"（尤其是 ",(0,n.kt)("a",{href:"https://dev.to/jakobjingleheimer/configuring-commonjs-es-modules-for-nodejs-12ed#publish-only-a-cjs-distribution-with-property-exports",parentName:"p"},"这个章节"),"）。")),(0,n.kt)("h5",null,(0,n.kt)("span",{id:"type-amd",parentName:"h5"}),"type: 'amd'",(0,n.kt)("a",{href:"#type-amd","aria-hidden":"true",tabIndex:"-1",parentName:"h5"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"可以将你的库暴露为 AMD 模块。"),(0,n.kt)("p",null,"AMD module 要求入口 chunk（例如，第一个通过 ",(0,n.kt)("inlineCode",{parentName:"p"},"<script>")," 标签加载的脚本）使用特定的属性来定义, 例如 ",(0,n.kt)("inlineCode",{parentName:"p"},"define")," 与 ",(0,n.kt)("inlineCode",{parentName:"p"},"require"),"，这通常由 RequireJS 或任何兼容的 loader（如 almond）提供。否则，直接加载产生的 AMD bundle 将导致一个错误，如 ",(0,n.kt)("inlineCode",{parentName:"p"},"define is not defined"),"。"),(0,n.kt)("p",null,"按照下面的配置"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'amd'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"生成的输出将被定义为 ",(0,n.kt)("inlineCode",{parentName:"p"},'"MyLibrary"'),"，例如："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token function",parentName:"code"},"define"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"该 bundle 可以使用 script 标签引入，并且可以被这样引入："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"MyLibrary"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Do something with the library..."),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"如果没有定义 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library.name")," 的话，会生成以下内容。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token function",parentName:"code"},"define"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"如果使用一个 ",(0,n.kt)("inlineCode",{parentName:"p"},"<script>")," 标签直接加载。它只能通过 RequireJS 兼容的异步模块 loader 通过文件的实际路径工作，所以在这种情况下，如果 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.path")," 与 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.filename")," 直接在服务端暴露，那么对于这种特殊设置可能会变得很重要。"),(0,n.kt)("h5",null,(0,n.kt)("span",{id:"type-amd-require",parentName:"h5"}),"type: 'amd-require'",(0,n.kt)("a",{href:"#type-amd-require","aria-hidden":"true",tabIndex:"-1",parentName:"h5"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'amd-require'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"它会用一个立即执行的 AMD ",(0,n.kt)("inlineCode",{parentName:"p"},"require(dependencies, factory)")," 包装器来打包输出。"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"'amd-require'")," 类型允许使用 AMD 的依赖，而不需要单独的后续调用。与 ",(0,n.kt)("inlineCode",{parentName:"p"},"'amd'")," 类型一样，这取决于在加载 webpack 输出的环境中适当的 ",(0,n.kt)("a",{href:"https://github.com/amdjs/amdjs-api/blob/master/require.md",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"require")," 函数")," 是否可用。"),(0,n.kt)("p",null,"使用该类型的话，不能使用库的名称。"),(0,n.kt)("h5",null,(0,n.kt)("span",{id:"type-umd",parentName:"h5"}),"type: 'umd'",(0,n.kt)("a",{href:"#type-umd","aria-hidden":"true",tabIndex:"-1",parentName:"h5"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"这将在所有模块定义下暴露你的库, 允许它与 CommonJS、AMD 和作为全局变量工作。可以查看 ",(0,n.kt)("a",{href:"https://github.com/umdjs/umd",parentName:"p"},"UMD Repository")," 获取更多内容。"),(0,n.kt)("p",null,"在这种情况下，你需要使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"library.name")," 属性命名你的模块："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'umd'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"最终的输出为："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"webpackUniversalModuleDefinition"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"root",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"&&")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," module ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n    module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," define ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'function'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"&&")," define",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"amd",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"define"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," factory",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," exports",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," root",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"global",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"请注意，根据 ",(0,n.kt)("a",{href:"#expose-via-object-assignment",parentName:"p"},"对象赋值部分"),"，省略 ",(0,n.kt)("inlineCode",{parentName:"p"},"library.name")," 将导致入口起点返回的所有属性直接赋值给根对象。示例："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    libraryTarget",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'umd'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"输出将会是："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"webpackUniversalModuleDefinition"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"root",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"&&")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," module ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n    module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," define ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'function'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"&&")," define",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"amd",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"define"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," factory",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"var")," a ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"for")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"var")," i ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"in")," a",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"?")," exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," root",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"i",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," a",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"i",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"global",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"你可以为 ",(0,n.kt)("inlineCode",{parentName:"p"},"library.name")," 指定一个对象，每个目标的名称不同："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        root",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        amd",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'my-library'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        commonjs",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'my-common-library'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'umd'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h5",null,(0,n.kt)("span",{id:"type-system",parentName:"h5"}),"type: 'system'",(0,n.kt)("a",{href:"#type-system","aria-hidden":"true",tabIndex:"-1",parentName:"h5"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"这将会把你的库暴露为一个 ",(0,n.kt)("a",{href:"https://github.com/systemjs/systemjs/blob/master/docs/system-register.md",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"System.register"))," 模块。这个特性最初是在 ",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/releases/tag/v4.30.0",parentName:"p"},"webpack 4.30.0")," 中发布。"),(0,n.kt)("p",null,"System 模块要求当 webpack bundle 执行时，全局变量 ",(0,n.kt)("inlineCode",{parentName:"p"},"System")," 出现在浏览器中。编译的 ",(0,n.kt)("inlineCode",{parentName:"p"},"System.register")," 格式允许你在没有额外配置的情况下使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"System.import('/bundle.js')"),"，并将你的 webpack bundle 加载到系统模块注册表中。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'system'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"输出："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"System",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"register"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"__WEBPACK_DYNAMIC_EXPORT__",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," __system_context__"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token function-variable function",parentName:"code"},"execute"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"除了设置 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library.type")," 为 ",(0,n.kt)("inlineCode",{parentName:"p"},"system"),"，还要将 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library.name")," 添加到配置中，输出的 bundle 将以库名作为 ",(0,n.kt)("inlineCode",{parentName:"p"},"System.register")," 的参数："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"System",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"register"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"\n  ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"__WEBPACK_DYNAMIC_EXPORT__",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," __system_context__"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token function-variable function",parentName:"code"},"execute"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"othertypes",parentName:"h4"}),"Other Types",(0,n.kt)("a",{href:"#othertypes","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("h5",null,(0,n.kt)("span",{id:"type-jsonp",parentName:"h5"}),"type: 'jsonp'",(0,n.kt)("a",{href:"#type-jsonp","aria-hidden":"true",tabIndex:"-1",parentName:"h5"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'jsonp'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"这将把入口起点的返回值包装到 jsonp 包装器中。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token function",parentName:"code"},"MyLibrary"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"_entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"你的库的依赖将由 ",(0,n.kt)("a",{href:"/configuration/externals/",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"externals"))," 配置定义。"),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"阅读 ",(0,n.kt)("a",{href:"/guides/author-libraries/",parentName:"p"},"authoring libraries guide")," 指南获取更多关于 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library.name")," 与 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library.type")," 的相关信息。")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"outputlibraryexport",parentName:"h3"}),"output.library.export",(0,n.kt)("a",{href:"#outputlibraryexport","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"指定哪一个导出应该被暴露为一个库。"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"类型：",(0,n.kt)("inlineCode",{parentName:"li"},"string | string[]"))),(0,n.kt)("p",null,"默认为 ",(0,n.kt)("inlineCode",{parentName:"p"},"undefined"),"，将会导出整个（命名空间）对象。下面的例子演示了使用 ",(0,n.kt)("a",{href:"#type-var",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.type: 'var'"))," 配置项产生的作用。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'var'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"export"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'default'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"入口起点的默认导出将会被赋值为库名称："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 如果入口有一个默认导出"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"var")," MyLibrary ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"default",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"你也可以向 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library.export")," 传递一个数组，它将被解析为一个要分配给库名的模块的路径："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'var'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"export"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'default'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'subModule'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"这里就是库代码："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"var")," MyLibrary ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"default",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"subModule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"outputlibraryauxiliarycomment",parentName:"h3"}),"output.library.auxiliaryComment",(0,n.kt)("a",{href:"#outputlibraryauxiliarycomment","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"在 UMD 包装器中添加注释。"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"类型：",(0,n.kt)("inlineCode",{parentName:"li"},"string | { amd?: string, commonjs?: string, commonjs2?: string, root?: string }"))),(0,n.kt)("p",null,"为每个 ",(0,n.kt)("inlineCode",{parentName:"p"},"umd")," 类型插入相同的注释，将 ",(0,n.kt)("inlineCode",{parentName:"p"},"auxiliaryComment")," 设置为 string。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  mode",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'development'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'umd'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      auxiliaryComment",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'Test Comment'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"这将产生以下结果："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"webpackUniversalModuleDefinition"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"root",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//Test Comment"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"&&")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," module ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n    module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//Test Comment"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," define ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'function'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"&&")," define",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"amd",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"define"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," factory",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//Test Comment"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," exports",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//Test Comment"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," root",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"self",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"对于细粒度控制，可以传递一个对象："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// …"),"\n  mode",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'development'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'umd'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      auxiliaryComment",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        root",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'Root Comment'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        commonjs",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'CommonJS Comment'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        commonjs2",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'CommonJS2 Comment'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        amd",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'AMD Comment'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"outputlibraryumdnameddefine",parentName:"h3"}),"output.library.umdNamedDefine",(0,n.kt)("a",{href:"#outputlibraryumdnameddefine","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean")),(0,n.kt)("p",null,"当使用 ",(0,n.kt)("inlineCode",{parentName:"p"},'output.library.type: "umd"')," 时，将 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library.umdNamedDefine")," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"true")," 将会把 AMD 模块命名为 UMD 构建。否则使用匿名 ",(0,n.kt)("inlineCode",{parentName:"p"},"define"),"。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      type",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'umd'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      umdNamedDefine",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"AMD module 将会是这样："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token function",parentName:"code"},"define"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," factory",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputlibraryexport",parentName:"h2"}),"output.libraryExport",(0,n.kt)("a",{href:"#outputlibraryexport","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"我们可能会停止对此的支持，所以最好使用 ",(0,n.kt)("a",{href:"#outputlibraryexport",parentName:"p"},"output.library.export"),"，其作用与 ",(0,n.kt)("inlineCode",{parentName:"p"},"libraryExport")," 一致。")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string")," ",(0,n.kt)("inlineCode",{parentName:"p"},"[string]")),(0,n.kt)("p",null,"通过配置 ",(0,n.kt)("inlineCode",{parentName:"p"},"libraryTarget")," 决定暴露哪些模块。默认情况下为 ",(0,n.kt)("inlineCode",{parentName:"p"},"undefined"),"，如果你将 ",(0,n.kt)("inlineCode",{parentName:"p"},"libraryTarget")," 设置为空字符串，则与默认情况具有相同的行为。例如，如果设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"''"),"，将导出整个（命名空间）对象。下述 demo 演示了当设置 ",(0,n.kt)("inlineCode",{parentName:"p"},"libraryTarget: 'var'")," 时的效果。"),(0,n.kt)("p",null,"支持以下配置："),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"libraryExport: 'default'")," - ",(0,n.kt)("strong",{parentName:"p"},"入口的默认导出"),"将分配给 library target："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token comment",parentName:"code"},"// if your entry has a default export of `MyDefaultModule`"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"var")," MyDefaultModule ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"default",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"libraryExport: 'MyModule'")," - 这个 ",(0,n.kt)("strong",{parentName:"p"},"确定的模块")," 将被分配给 library target："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"var")," MyModule ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"MyModule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"libraryExport: ['MyModule', 'MySubModule']")," - 数组将被解析为要分配给 library target 的 ",(0,n.kt)("strong",{parentName:"p"},"模块路径"),"："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"var")," MySubModule ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"MyModule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"MySubModule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"使用上述指定的 ",(0,n.kt)("inlineCode",{parentName:"p"},"libraryExport")," 配置时，library 的结果可以这样使用："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"MyDefaultModule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\nMyModule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\nMySubModule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputlibrarytarget",parentName:"h2"}),(0,n.kt)("inlineCode",{parentName:"h2"},"output.libraryTarget"),(0,n.kt)("a",{href:"#outputlibrarytarget","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = 'var'")),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"请使用 ",(0,n.kt)("a",{href:"#outputlibrarytype",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.type"))," 代理，因为我们可能在未来放弃对 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.libraryTarget")," 的支持。")),(0,n.kt)("p",null,"配置如何暴露 library。可以使用下面的选项中的任意一个。注意，此选项与分配给 ",(0,n.kt)("a",{href:"#outputlibrary",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library"))," 的值一同使用。对于下面的所有示例，都假定将 ",(0,n.kt)("a",{href:"#outputlibrary",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library"))," 的值配置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"MyLibrary"),"。"),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"注意，下面的示例代码中的 ",(0,n.kt)("inlineCode",{parentName:"p"},"_entry_return_")," 是入口起点返回的值。在 bundle 本身中，它是从入口起点、由 webpack 生成的函数的输出结果。")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"expose-a-variable",parentName:"h3"}),"暴露为一个变量",(0,n.kt)("a",{href:"#expose-a-variable","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"这些选项将入口起点的返回值（例如，入口起点的任何导出值），在 bundle 包所引入的位置，赋值给 ",(0,n.kt)("a",{href:"#outputlibrary",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library"))," 提供的变量名。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"libraryTarget-var-libraryTarget-var",parentName:"h4"}),"libraryTarget: 'var' $#libraryTarget-var$",(0,n.kt)("a",{href:"#libraryTarget-var-libraryTarget-var","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"最好使用 ",(0,n.kt)("a",{href:"#type-var",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.type: 'var'")),"。")),(0,n.kt)("p",null,"当 library 加载完成，",(0,n.kt)("strong",{parentName:"p"},"入口起点的返回值"),"将分配给一个变量："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"var")," MyLibrary ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 在一个单独的 script..."),"\nMyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"libraryTarget-assign-libraryTarget-assign",parentName:"h4"}),"libraryTarget: 'assign' $#libraryTarget-assign$",(0,n.kt)("a",{href:"#libraryTarget-assign-libraryTarget-assign","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"最好使用 ",(0,n.kt)("a",{href:"#typeassign",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.type: 'assign'")),"。")),(0,n.kt)("p",null,"这将产生一个隐含的全局变量，可能会潜在地重新分配到全局中已存在的值（谨慎使用）："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"MyLibrary ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"注意，如果 ",(0,n.kt)("inlineCode",{parentName:"p"},"MyLibrary")," 在作用域中未在前面代码进行定义，则你的 library 将被设置在全局作用域内。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"libraryTarget-assign-properties-libraryTarget-assign-properties",parentName:"h4"}),"libraryTarget: 'assign-properties' $#libraryTarget-assign-properties$",(0,n.kt)("a",{href:"#libraryTarget-assign-properties-libraryTarget-assign-properties","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)(s,{text:"5.16.0+",mdxType:"Badge"}),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"最好使用 ",(0,n.kt)("a",{href:"#typeassignproperties",parentName:"p"},"output.library.type: 'assign-properties'`"),"。")),(0,n.kt)("p",null,"如果目标对象存在，则将返回值 copy 到目标对象，否则先创建目标对象："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 如果不存在的话就创建目标对象"),"\nMyLibrary ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," MyLibrary ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'undefined'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"?")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," MyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 然后复制返回值到 MyLibrary"),"\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 与 Object.assign 行为类似"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 例如，你在入口导出了一个 `hello` 函数"),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"export")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"hello"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"name"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  console",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"log"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token template-string",parentName:"code"},(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`"),(0,n.kt)("span",{className:"token string",parentName:"span"},"Hello "),(0,n.kt)("span",{className:"token interpolation",parentName:"span"},(0,n.kt)("span",{className:"token interpolation-punctuation punctuation",parentName:"span"},"${"),"name",(0,n.kt)("span",{className:"token interpolation-punctuation punctuation",parentName:"span"},"}")),(0,n.kt)("span",{className:"token template-punctuation string",parentName:"span"},"`")),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 在另一个脚本中运行 MyLibrary"),"\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 你可以像这样运行 `hello` 函数"),"\nMyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"hello"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'World'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"当使用此选项时，将 ",(0,n.kt)("a",{href:"#outputlibrary",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library"))," 设置为空，将产生一个破损的输出 bundle。")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"expose-via-object-assignment",parentName:"h3"}),"通过在对象上赋值暴露",(0,n.kt)("a",{href:"#expose-via-object-assignment","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"这些选项将入口起点的返回值（例如，入口起点的任何导出值）赋值给一个特定对象的属性（此名称由 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library")," 定义）下。"),(0,n.kt)("p",null,"如果 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library")," 未赋值为一个非空字符串，则默认行为是，将入口起点返回的所有属性都赋值给一个对象（此对象由 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.libraryTarget")," 特定），通过如下代码片段："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"e",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," a"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"for")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"var")," i ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"in")," a",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    e",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"i",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," a",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"i",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"output",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"libraryTarget",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"注意，不设置 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library")," 将导致由入口起点返回的所有属性，都会被赋值给给定的对象；这里并不会检查现有的属性名是否存在。")),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"librarytarget-this",parentName:"h4"}),"libraryTarget: 'this'",(0,n.kt)("a",{href:"#librarytarget-this","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"最好使用 ",(0,n.kt)("a",{href:"#typethis",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.type: 'this'")),"。")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"入口起点的返回值"),"将分配给 this 的一个属性（此名称由 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library")," 定义）下，",(0,n.kt)("inlineCode",{parentName:"p"},"this")," 的含义取决于你："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"this"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 在一个单独的 script..."),"\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"this"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"MyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\nMyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 如果 this 是 window"))),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"librarytarget-window",parentName:"h4"}),"libraryTarget: 'window'",(0,n.kt)("a",{href:"#librarytarget-window","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"最好使用 ",(0,n.kt)("a",{href:"#type-window",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.type: 'window'")),"。")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"入口起点的返回值"),"将使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library")," 中定义的值，分配给 ",(0,n.kt)("inlineCode",{parentName:"p"},"window")," 对象的这个属性下。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"window",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\nwindow",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"MyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"librarytarget-global",parentName:"h4"}),"libraryTarget: 'global'",(0,n.kt)("a",{href:"#librarytarget-global","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"最好使用 ",(0,n.kt)("a",{href:"#type-global",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.type: 'global'")),"。")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"入口起点的返回值"),"将使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library")," 中定义的值，分配给 ",(0,n.kt)("inlineCode",{parentName:"p"},"global")," 对象的这个属性下。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"global",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\nglobal",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"MyLibrary",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"librarytarget-commonjs",parentName:"h4"}),"libraryTarget: 'commonjs'",(0,n.kt)("a",{href:"#librarytarget-commonjs","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"最好使用 ",(0,n.kt)("a",{href:"#type-commmonjs",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.type: 'commonjs'")),"。")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"入口起点的返回值"),"将使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library")," 中定义的值，分配给 exports 对象。这个名称也意味着，模块用于 CommonJS 环境："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"exports",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"module-definition-systems",parentName:"h3"}),"模块定义系统",(0,n.kt)("a",{href:"#module-definition-systems","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"这些选项将使得 bundle 带有更完整的模块头，以确保与各种模块系统的兼容性。根据 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.libraryTarget")," 选项不同，",(0,n.kt)("inlineCode",{parentName:"p"},"output.library")," 选项将具有不同的含义。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"librarytarget-module",parentName:"h4"}),"libraryTarget: 'module'",(0,n.kt)("a",{href:"#librarytarget-module","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"最好使用 ",(0,n.kt)("a",{href:"#type-module",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.type: 'module'")),"。")),(0,n.kt)("p",null,"输出 ES 模块。请确保事先启用 ",(0,n.kt)("a",{href:"/configuration/experiments/",parentName:"p"},"experiments.outputModule"),"。"),(0,n.kt)("p",null,"需要注意的是，该功能还未完全支持，请在",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/issues/2933#issuecomment-774253975",parentName:"p"},"此处"),"跟进进度。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"librarytarget-commonjs2",parentName:"h4"}),"libraryTarget: 'commonjs2'",(0,n.kt)("a",{href:"#librarytarget-commonjs2","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"最好使用 ",(0,n.kt)("a",{href:"#type-commmonjs2",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.type: 'commonjs2'")),"。")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"入口起点的返回值"),"将分配给 ",(0,n.kt)("inlineCode",{parentName:"p"},"module.exports")," 对象。这个名称也意味着模块用于 CommonJS 环境："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"doSomething"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"注意，",(0,n.kt)("inlineCode",{parentName:"p"},"output.library")," 不能与 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.libraryTarget")," 一起使用，具体原因请参照",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/issues/11800",parentName:"p"},"此 issue"),"。"),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"想要弄清楚 CommonJS 和 CommonJS2 之间的区别？虽然它们很相似，但二者之间存在一些微妙的差异，这通常与 webpack 上下文没有关联。（更多详细信息，请",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/issues/1114",parentName:"p"},"阅读此 issue"),"。）")),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"librarytarget-amd",parentName:"h4"}),"libraryTarget: 'amd'",(0,n.kt)("a",{href:"#librarytarget-amd","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"最好使用 ",(0,n.kt)("a",{href:"#type-amd",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.type: 'amd'")),"。")),(0,n.kt)("p",null,"将你的 library 暴露为 AMD 模块。"),(0,n.kt)("p",null,"AMD 模块要求入口 chunk（例如使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"<script>")," 标签加载的第一个脚本）通过特定的属性定义，例如 ",(0,n.kt)("inlineCode",{parentName:"p"},"define")," 和 ",(0,n.kt)("inlineCode",{parentName:"p"},"require"),"，它们通常由 RequireJS 或任何兼容的模块加载器提供（例如 almond）。否则，直接加载生成的 AMD bundle 将导致报错，如 ",(0,n.kt)("inlineCode",{parentName:"p"},"define is not defined"),"。"),(0,n.kt)("p",null,"配置如下："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    libraryTarget",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'amd'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,'生成的 output 名称将被定义为 "MyLibrary"：'),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token function",parentName:"code"},"define"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"可以在 script 标签中，将 bundle 作为一个模块整体引入，并且可以像这样调用 bundle："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"MyLibrary"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// Do something with the library..."),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"如果 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library")," 未定义，将会生成以下内容。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token function",parentName:"code"},"define"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"如果直接加载 ",(0,n.kt)("inlineCode",{parentName:"p"},"<script>")," 标签，此 bundle 无法按预期运行，或者根本无法正常运行（在 almond loader 中）。只能通过文件的实际路径，在 RequireJS 兼容的异步模块加载器中运行，因此在这种情况下，如果这些设置直接暴露在服务器上，那么 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.path")," 和 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.filename")," 对于这个特定的设置可能变得很重要。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"librarytarget-amd-require",parentName:"h4"}),"libraryTarget: 'amd-require'",(0,n.kt)("a",{href:"#librarytarget-amd-require","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"最好使用 ",(0,n.kt)("a",{href:"#type-amd-require",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.type: 'amd-require'")),"。")),(0,n.kt)("p",null,"这将使用立即执行的 AMD ",(0,n.kt)("inlineCode",{parentName:"p"},"require(dependencies, factory)")," 包装器包装您的输出。"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"'amd-require'")," 目标（target）允许使用 AMD 依赖项，而无需单独的后续调用。与 ",(0,n.kt)("inlineCode",{parentName:"p"},"'amd'")," 目标（target）一样, 这取决于在加载 webpack 输出的环境中适当可用的 ",(0,n.kt)("a",{href:"https://github.com/amdjs/amdjs-api/blob/master/require.md",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"require")," function"),"。"),(0,n.kt)("p",null,"对于此 target，库名称将被忽略。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"librarytarget-umd",parentName:"h4"}),"libraryTarget: 'umd'",(0,n.kt)("a",{href:"#librarytarget-umd","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"最好使用 ",(0,n.kt)("a",{href:"#type-umd",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.type: 'umd'")),"。")),(0,n.kt)("p",null,"将你的 library 暴露为所有的模块定义下都可运行的方式。它将在 CommonJS, AMD 环境下运行，或将模块导出到 global 下的变量。了解更多请查看 ",(0,n.kt)("a",{href:"https://github.com/umdjs/umd",parentName:"p"},"UMD 仓库"),"。"),(0,n.kt)("p",null,"在这个例子中，你需要 ",(0,n.kt)("inlineCode",{parentName:"p"},"library")," 属性来命名你的模块："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    libraryTarget",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'umd'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"最终的输出结果为："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"webpackUniversalModuleDefinition"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"root",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"&&")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," module ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n    module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," define ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'function'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"&&")," define",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"amd",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"define"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," factory",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," exports",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," root",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," self ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"!==")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'undefined'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"?")," self ",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"this"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"注意，省略 ",(0,n.kt)("inlineCode",{parentName:"p"},"library")," 会导致将入口起点返回的所有属性，直接赋值给 root 对象，就像",(0,n.kt)("a",{href:"#expose-via-object-assignment",parentName:"p"},"对象分配章节"),"。例如："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    libraryTarget",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'umd'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"输出结果如下："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"webpackUniversalModuleDefinition"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"root",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"&&")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," module ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n    module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," define ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'function'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"&&")," define",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"amd",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"define"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," factory",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"else")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"var")," a ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"factory"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"for")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"var")," i ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"in")," a",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"===")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'object'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"?")," exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," root",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"i",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," a",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"i",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"typeof")," self ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"!==")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'undefined'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"?")," self ",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"this"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," _entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"从 webpack 3.1.0 开始，你可以将 ",(0,n.kt)("inlineCode",{parentName:"p"},"library")," 指定为一个对象，用于给每个 target 起不同的名称："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    library",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      root",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'MyLibrary'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      amd",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'my-library'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      commonjs",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'my-common-library'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    libraryTarget",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'umd'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"librarytarget-system",parentName:"h4"}),"libraryTarget: 'system'",(0,n.kt)("a",{href:"#librarytarget-system","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"最好使用 ",(0,n.kt)("a",{href:"#type-system",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.type: 'system'")),"。")),(0,n.kt)("p",null,"这将暴露你的 library 作为一个由 ",(0,n.kt)("a",{href:"https://github.com/systemjs/systemjs/blob/master/docs/system-register.md",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"System.register"))," 的模块。此特性首次发布于 ",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/releases/tag/v4.30.0",parentName:"p"},"webpack 4.30.0"),"。"),(0,n.kt)("p",null,"当 webpack bundle 被执行时，系统模块依赖全局的变量 ",(0,n.kt)("inlineCode",{parentName:"p"},"System"),"。编译为 ",(0,n.kt)("inlineCode",{parentName:"p"},"System.register")," 形式后，你可以使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"System.import('/bundle.js')")," 而无需额外配置，并会将你的 webpack bundle 包加载到系统模块注册表中。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    libraryTarget",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'system'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"输出："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"System",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"register"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"_export"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    setters",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token function-variable function",parentName:"code"},"execute"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"除了将 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.libraryTarget")," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"system")," 之外，还可将 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.library")," 添加到配置中，输出 bundle 的 library 名将作为 ",(0,n.kt)("inlineCode",{parentName:"p"},"System.register")," 的参数："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"System",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"register"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'my-library'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"_export"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    setters",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token function-variable function",parentName:"code"},"execute"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"你可以通过 ",(0,n.kt)("inlineCode",{parentName:"p"},"__system_context__")," 访问 ",(0,n.kt)("a",{href:"https://github.com/systemjs/systemjs/blob/master/docs/system-register.md#format-definition",parentName:"p"},"SystemJS context"),"："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 记录当前系统模块的 URL"),"\nconsole",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"log"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"__system_context__",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"url",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 导入一个系统模块，通过将当前的系统模块的 url 作为 parentUrl"),"\n__system_context__",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"import"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'./other-file.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"then"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"m"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  console",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"log"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"m",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"other-targets",parentName:"h3"}),"其他 Targets",(0,n.kt)("a",{href:"#other-targets","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"librarytarget-jsonp",parentName:"h4"}),"libraryTarget: 'jsonp'",(0,n.kt)("a",{href:"#librarytarget-jsonp","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"最好使用 ",(0,n.kt)("a",{href:"#type-jsonp",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.type: 'jsonp'")),"。")),(0,n.kt)("p",null,"这将把入口起点的返回值，包裹到一个 jsonp 包装容器中"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token function",parentName:"code"},"MyLibrary"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"_entry_return_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"你的 library 的依赖将由 ",(0,n.kt)("a",{href:"/configuration/externals/",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"externals"))," 配置定义。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputmodule",parentName:"h2"}),"output.module",(0,n.kt)("a",{href:"#outputmodule","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = false")),(0,n.kt)("p",null,"以模块类型输出 JavaScript 文件。由于此功能还处于实验阶段，默认禁用。"),(0,n.kt)("p",null,"当启用时，webpack 会在内部将 ",(0,n.kt)("a",{href:"#outputiife",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.iife"))," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),"，将 ",(0,n.kt)("a",{href:"#outputscripttype",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.scriptType"))," 为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'module'"),"，并将 ",(0,n.kt)("inlineCode",{parentName:"p"},"terserOptions.module")," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"true")),(0,n.kt)("p",null,"如果你需要使用 webpack 构建一个库以供别人使用，当 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.module")," 为 ",(0,n.kt)("inlineCode",{parentName:"p"},"true")," 时，一定要将 ",(0,n.kt)("a",{href:"#librarytarget-module",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.libraryTarget"))," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'module'"),"。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  experiments",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    outputModule",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    module",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},(0,n.kt)("inlineCode",{parentName:"p"},"output.module")," 是一个实验性的功能，想要使用的话只能通过设置 ",(0,n.kt)("a",{href:"/configuration/experiments/#experiments",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"experiments.outputModule"))," 为 ",(0,n.kt)("inlineCode",{parentName:"p"},"true"),"。目前存在",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/issues/11277#issuecomment-992565287",parentName:"p"},"一个已知问题")," 是这样的库不能被基于 webpack4（也可能是其他构建工具）的应用程序使用。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputpath",parentName:"h2"}),"output.path",(0,n.kt)("a",{href:"#outputpath","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = path.join(process.cwd(), 'dist')")),(0,n.kt)("p",null,"output 目录对应一个",(0,n.kt)("strong",{parentName:"p"},"绝对路径"),"。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," path ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'path'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\nmodule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    path",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," path",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"resolve"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"__dirname",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'dist/assets'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"注意，",(0,n.kt)("inlineCode",{parentName:"p"},"[fullhash]")," 在参数中被替换为编译过程(compilation)的 hash。详细信息请查看",(0,n.kt)("a",{href:"/guides/caching/",parentName:"p"},"指南 - 缓存"),"。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputpathinfo",parentName:"h2"}),"output.pathinfo",(0,n.kt)("a",{href:"#outputpathinfo","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean=true")," ",(0,n.kt)("inlineCode",{parentName:"p"},"string: 'verbose'")),(0,n.kt)("p",null,"告知 webpack 在 bundle 中引入「所包含模块信息」的相关注释。此选项在 ",(0,n.kt)("inlineCode",{parentName:"p"},"development")," ",(0,n.kt)("a",{href:"/configuration/mode/",parentName:"p"},"模式"),"时的默认值为 ",(0,n.kt)("inlineCode",{parentName:"p"},"true"),"，而在 ",(0,n.kt)("inlineCode",{parentName:"p"},"production")," ",(0,n.kt)("a",{href:"/configuration/mode/",parentName:"p"},"模式"),"时的默认值为 ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),"。当值为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'verbose'")," 时，会显示更多信息，如 export，运行时依赖以及 bailouts。"),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"对于在开发环境(development)下阅读生成代码时，虽然通过这些注释可以提供有用的数据信息，但在生产环境(production)下，",(0,n.kt)("strong",{parentName:"p"},"不应该"),"使用。")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    pathinfo",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"这些注释也会被添加至经过 tree shaking 后生成的 bundle 中。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputpublicpath",parentName:"h2"}),"output.publicPath",(0,n.kt)("a",{href:"#outputpublicpath","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Type:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"function"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"string")),(0,n.kt)("p",{parentName:"li"},"targets 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"web")," 与 ",(0,n.kt)("inlineCode",{parentName:"p"},"web-worker")," 时 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.publicPath")," 默认为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'auto'"),"，查看 ",(0,n.kt)("a",{href:"/guides/public-path/#Automatic-publicPath-automaticpublicPath",parentName:"p"},"该指南")," 获取其用例"))))),(0,n.kt)("p",null,"对于按需加载(on-demand-load)或加载外部资源(external resources)（如图片、文件等）来说，output.publicPath 是很重要的选项。如果指定了一个错误的值，则在加载这些资源时会收到 404 错误。"),(0,n.kt)("p",null,"此选项指定在浏览器中所引用的「此输出目录对应的",(0,n.kt)("strong",{parentName:"p"},"公开 URL"),"」。相对 URL(relative URL) 会被相对于 HTML 页面（或 ",(0,n.kt)("inlineCode",{parentName:"p"},"<base>")," 标签）解析。相对于服务的 URL(Server-relative URL)，相对于协议的 URL(protocol-relative URL) 或绝对 URL(absolute URL) 也可是可能用到的，或者有时必须用到，例如：当将资源托管到 CDN 时。"),(0,n.kt)("p",null,"该选项的值是以 runtime(运行时) 或 loader(载入时) 所创建的每个 URL 的前缀。因此，在多数情况下，",(0,n.kt)("strong",{parentName:"p"},"此选项的值都会以 ",(0,n.kt)("inlineCode",{parentName:"strong"},"/")," 结束"),"。"),(0,n.kt)("p",null,"规则如下：",(0,n.kt)("a",{href:"#outputpath",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.path"))," 中的 URL 以 HTML 页面为基准。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," path ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'path'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\nmodule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    path",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," path",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"resolve"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"__dirname",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'public/assets'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    publicPath",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'https://cdn.example.com/assets/'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"对于这个配置："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    publicPath",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'/assets/'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    chunkFilename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'[id].chunk.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"对于一个 chunk 请求，看起来像这样 ",(0,n.kt)("inlineCode",{parentName:"p"},"/assets/4.chunk.js"),"。"),(0,n.kt)("p",null,"对于一个输出 HTML 的 loader 可能会像这样输出："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-html",parentName:"pre"},(0,n.kt)("span",{className:"token tag",parentName:"code"},(0,n.kt)("span",{className:"token tag",parentName:"span"},(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"link")," ",(0,n.kt)("span",{className:"token attr-name",parentName:"span"},"href"),(0,n.kt)("span",{className:"token attr-value",parentName:"span"},(0,n.kt)("span",{className:"token punctuation attr-equals",parentName:"span"},"="),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},'"'),"/assets/spinner.gif",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},'"'))," ",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"/>")))),(0,n.kt)("p",null,"或者在加载 CSS 的一个图片时："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-css",parentName:"pre"},(0,n.kt)("span",{className:"token property",parentName:"code"},"background-image"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token url",parentName:"code"},(0,n.kt)("span",{className:"token function",parentName:"span"},"url"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"("),"/assets/spinner.gif",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},")")),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"webpack-dev-server 也会默认从 ",(0,n.kt)("inlineCode",{parentName:"p"},"publicPath")," 为基准，使用它来决定在哪个目录下启用服务，来访问 webpack 输出的文件。"),(0,n.kt)("p",null,"注意，参数中的 ",(0,n.kt)("inlineCode",{parentName:"p"},"[fullhash]")," 将会被替换为编译过程(compilation) 的 hash。详细信息请查看",(0,n.kt)("a",{href:"/guides/caching",parentName:"p"},"指南 - 缓存"),"。"),(0,n.kt)("p",null,"示例："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// One of the below"),"\n    publicPath",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'auto'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// It automatically determines the public path from either `import.meta.url`, `document.currentScript`, `<script />` or `self.location`."),"\n    publicPath",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'https://cdn.example.com/assets/'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// CDN（总是 HTTPS 协议）"),"\n    publicPath",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'//cdn.example.com/assets/'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// CDN（协议相同）"),"\n    publicPath",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'/assets/'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 相对于服务(server-relative)"),"\n    publicPath",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'assets/'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 相对于 HTML 页面"),"\n    publicPath",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'../assets/'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 相对于 HTML 页面"),"\n    publicPath",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"''"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 相对于 HTML 页面（目录相同）"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"在编译时(compile time)无法知道输出文件的 ",(0,n.kt)("inlineCode",{parentName:"p"},"publicPath")," 的情况下，可以留空，然后在入口文件(entry file)处使用",(0,n.kt)("a",{href:"https://stackoverflow.com/questions/12934929/what-are-free-variables",parentName:"p"},"自由变量(free variable)")," ",(0,n.kt)("inlineCode",{parentName:"p"},"__webpack_public_path__"),"，以便在运行时(runtime)进行动态设置。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"__webpack_public_path__ ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," myRuntimePublicPath",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 应用程序入口的其他部分"))),(0,n.kt)("p",null,"有关 ",(0,n.kt)("inlineCode",{parentName:"p"},"__webpack_public_path__")," 的更多信息，请查看",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/issues/2776#issuecomment-233208623",parentName:"p"},"此讨论"),"。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputscripttype",parentName:"h2"}),"output.scriptType",(0,n.kt)("a",{href:"#outputscripttype","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string: 'module' | 'text/javascript'")," ",(0,n.kt)("inlineCode",{parentName:"p"},"boolean = false")),(0,n.kt)("p",null,"这个配置项允许使用自定义 script 类型加载异步 chunk，例如 ",(0,n.kt)("inlineCode",{parentName:"p"},'<script type="module" ...>'),"。"),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"如果将 ",(0,n.kt)("a",{href:"#outputmodule",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.module"))," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"true"),"，",(0,n.kt)("inlineCode",{parentName:"p"},"output.scriptType")," 将会默认设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'module'")," 而不是 ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),"。")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    scriptType",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'module'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputsourcemapfilename",parentName:"h2"}),"output.sourceMapFilename",(0,n.kt)("a",{href:"#outputsourcemapfilename","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = '[file].map[query]'")),(0,n.kt)("p",null,"仅在 ",(0,n.kt)("a",{href:"/configuration/devtool/",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"devtool"))," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'source-map'")," 时有效，此选项会向硬盘写入一个输出文件。"),(0,n.kt)("p",null,"可以使用 ",(0,n.kt)("a",{href:"#outputfilename",parentName:"p"},"#output-filename")," 中的 ",(0,n.kt)("inlineCode",{parentName:"p"},"[name]"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"[id]"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"[hash]")," 和 ",(0,n.kt)("inlineCode",{parentName:"p"},"[chunkhash]")," 替换符号。除此之外，还可以使用 ",(0,n.kt)("a",{href:"/configuration/output/#template-strings",parentName:"p"},"Template strings")," 在 Filename-level 下替换。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputsourceprefix",parentName:"h2"}),"output.sourcePrefix",(0,n.kt)("a",{href:"#outputsourceprefix","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = ''")),(0,n.kt)("p",null,"修改输出 bundle 中每行的前缀。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    sourcePrefix",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'\\t'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"使用一些缩进会使 bundle 看起来更美观，但会导致多行字符串的问题。")),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"通常，你不需要修改 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.sourcePrefix"),"。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputstrictmoduleerrorhandling",parentName:"h2"}),"output.strictModuleErrorHandling",(0,n.kt)("a",{href:"#outputstrictmoduleerrorhandling","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"按照 ES Module 规范处理 module 加载时的错误，会有性能损失。"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"类型：",(0,n.kt)("inlineCode",{parentName:"li"},"boolean")),(0,n.kt)("li",{parentName:"ul"},"可用版本：5.25.0+")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    strictModuleErrorHandling",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputstrictmoduleexceptionhandling",parentName:"h2"}),"output.strictModuleExceptionHandling",(0,n.kt)("a",{href:"#outputstrictmoduleexceptionhandling","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"已废弃，请使用\n",(0,n.kt)("a",{href:"#outputstrictmoduleerrorhandling",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.strictModuleErrorHandling")),"。")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = false")),(0,n.kt)("p",null,"如果一个模块是在 ",(0,n.kt)("inlineCode",{parentName:"p"},"require")," 时抛出异常，告诉 webpack 从模块实例缓存(",(0,n.kt)("inlineCode",{parentName:"p"},"require.cache"),")中删除这个模块。"),(0,n.kt)("p",null,"出于性能原因，默认为 ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),"。"),(0,n.kt)("p",null,"当设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"false")," 时，该模块不会从缓存中删除，这将造成仅在第一次 ",(0,n.kt)("inlineCode",{parentName:"p"},"require")," 调用时抛出异常（会导致与 node.js 不兼容）。"),(0,n.kt)("p",null,"例如，设想一下 ",(0,n.kt)("inlineCode",{parentName:"p"},"module.js"),"："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"throw")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"new")," ",(0,n.kt)("span",{className:"token class-name",parentName:"code"},"Error"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'error'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"将 ",(0,n.kt)("inlineCode",{parentName:"p"},"strictModuleExceptionHandling")," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),"，只有第一个 ",(0,n.kt)("inlineCode",{parentName:"p"},"require")," 抛出异常："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token comment",parentName:"code"},"// with strictModuleExceptionHandling = false"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'module'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// <- 抛出"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'module'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// <- 不抛出"))),(0,n.kt)("p",null,"相反，将 ",(0,n.kt)("inlineCode",{parentName:"p"},"strictModuleExceptionHandling")," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"true"),"，这个模块所有的 ",(0,n.kt)("inlineCode",{parentName:"p"},"require")," 都抛出异常："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token comment",parentName:"code"},"// with strictModuleExceptionHandling = true"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'module'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// <- 抛出"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'module'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// <- 仍然抛出"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputtrustedtypes",parentName:"h2"}),"output.trustedTypes",(0,n.kt)("a",{href:"#outputtrustedtypes","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = false")," ",(0,n.kt)("inlineCode",{parentName:"p"},"string")," ",(0,n.kt)("inlineCode",{parentName:"p"},"object")),(0,n.kt)(s,{text:"5.37.0+",mdxType:"Badge"}),(0,n.kt)("p",null,"控制 ",(0,n.kt)("a",{href:"https://web.dev/trusted-types",parentName:"p"},"Trusted Types")," 兼容性。启用时，webpack 将检测 Trusted Types 支持，如果支持，则使用 Trusted Types 策略创建它动态加载的脚本 url。当应用程序在 ",(0,n.kt)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/require-trusted-types-for",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"require-trusted-types-for"))," 内容安全策略指令下运行时使用。"),(0,n.kt)("p",null,"默认为 ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),"（不兼容，脚本 URL 为字符串）。"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"设置为 ",(0,n.kt)("inlineCode",{parentName:"li"},"true")," 时，webpack 将会使用 ",(0,n.kt)("a",{href:"#outputuniquename",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"output.uniqueName"))," 作为 Trusted Types 策略名称。"),(0,n.kt)("li",{parentName:"ul"},"设置为非空字符串时，它的值将被用作策略名称。"),(0,n.kt)("li",{parentName:"ul"},"设置为一个对象时，策略名称取自对象 ",(0,n.kt)("inlineCode",{parentName:"li"},"policyName")," 属性。")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n    trustedTypes",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      policyName",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'my-application#webpack'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputumdnameddefine",parentName:"h2"}),"output.umdNamedDefine",(0,n.kt)("a",{href:"#outputumdnameddefine","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"最好使用 ",(0,n.kt)("a",{href:"#outputlibraryumdnameddefine",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library.umdNamedDefine")),"。")),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean")),(0,n.kt)("p",null,"当使用 ",(0,n.kt)("inlineCode",{parentName:"p"},'libraryTarget: "umd"')," 时，设置 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.umdNamedDefine")," 为 ",(0,n.kt)("inlineCode",{parentName:"p"},"true")," 将命名由 UMD 构建的 AMD 模块。否则将使用一个匿名的 ",(0,n.kt)("inlineCode",{parentName:"p"},"define"),"。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    umdNamedDefine",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputuniquename",parentName:"h2"}),"output.uniqueName",(0,n.kt)("a",{href:"#outputuniquename","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string")),(0,n.kt)("p",null,"在全局环境下为防止多个 webpack 运行时 冲突所使用的唯一名称。默认使用 ",(0,n.kt)("a",{href:"/configuration/output/#outputlibrary",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.library"))," 名称或者上下文中的 ",(0,n.kt)("inlineCode",{parentName:"p"},"package.json")," 的 包名称(package name)， 如果两者都不存在，值为 ",(0,n.kt)("inlineCode",{parentName:"p"},"''"),"。"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"output.uniqueName")," 将用于生成唯一全局变量:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{href:"/configuration/output/#outputchunkloadingglobal",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"output.chunkLoadingGlobal")))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    uniqueName",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'my-package-xyz'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"output-wasm-loading",parentName:"h2"}),"output.wasmLoading",(0,n.kt)("a",{href:"#output-wasm-loading","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean = false")," ",(0,n.kt)("inlineCode",{parentName:"p"},"string")),(0,n.kt)("p",null,"此选项用于设置加载 WebAssembly 模块的方式。默认可使用的方式有 ",(0,n.kt)("inlineCode",{parentName:"p"},"'fetch'"),"（web/WebWorker），",(0,n.kt)("inlineCode",{parentName:"p"},"'async-node'"),"（Node.js），其他额外方式可由插件提供。"),(0,n.kt)("p",null,"其默认值会根据 ",(0,n.kt)("a",{href:"/configuration/target/",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"target"))," 的变化而变化："),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"如果 ",(0,n.kt)("a",{href:"/configuration/target/",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"target"))," 设置为 ",(0,n.kt)("inlineCode",{parentName:"li"},"'web'"),"，",(0,n.kt)("inlineCode",{parentName:"li"},"'webworker'"),"，",(0,n.kt)("inlineCode",{parentName:"li"},"'electron-renderer'")," 或 ",(0,n.kt)("inlineCode",{parentName:"li"},"'node-webkit'")," 其中之一，其默认值为 ",(0,n.kt)("inlineCode",{parentName:"li"},"'fetch'"),"。"),(0,n.kt)("li",{parentName:"ul"},"如果 ",(0,n.kt)("a",{href:"/configuration/target/",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"target"))," 设置为 ",(0,n.kt)("inlineCode",{parentName:"li"},"'node'"),"，",(0,n.kt)("inlineCode",{parentName:"li"},"'async-node'"),"，",(0,n.kt)("inlineCode",{parentName:"li"},"'electron-main'")," 或 ",(0,n.kt)("inlineCode",{parentName:"li"},"'electron-preload'"),"，其默认值为 ",(0,n.kt)("inlineCode",{parentName:"li"},"'async-node'"),"。")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    wasmLoading",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'fetch'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"outputworkerchunkloading",parentName:"h2"}),(0,n.kt)("inlineCode",{parentName:"h2"},"output.workerChunkLoading"),(0,n.kt)("a",{href:"#outputworkerchunkloading","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string: 'require' | 'import-scripts' | 'async-node' | 'import' | 'universal'")," ",(0,n.kt)("inlineCode",{parentName:"p"},"boolean: false")),(0,n.kt)("p",null,"新选项 ",(0,n.kt)("inlineCode",{parentName:"p"},"workerChunkLoading")," 用于控制 workder 的 chunk 加载。"),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"此选项默认值取决于 ",(0,n.kt)("inlineCode",{parentName:"p"},"target")," 的设置。欲了解更多详情，请在 ",(0,n.kt)("a",{href:"https://github.com/webpack/webpack/blob/main/lib/config/defaults.js",parentName:"p"},"webpack 默认值文件中搜索")," ",(0,n.kt)("inlineCode",{parentName:"p"},'"workerChunkLoading"'),"。")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    workerChunkLoading",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))))}o.isMDXComponent=!0,e.default=o}}]);