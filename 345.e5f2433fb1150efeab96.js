"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[345],{345:function(a,e,t){t.r(e),t(7378);var n=t(2682);function p(){return p=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},p.apply(this,arguments)}function o(a){let{components:e,...t}=a;return(0,n.kt)("wrapper",p({components:e},t),(0,n.kt)("p",null,"你可能已经注意到，很少有 webpack 配置看起来完全相同。这是因为 ",(0,n.kt)("strong",{parentName:"p"},"webpack 的配置文件是 JavaScript 文件，文件内导出了一个 webpack ",(0,n.kt)("a",{href:"/configuration/",parentName:"strong"},"配置的对象"),"。")," webpack 会根据该配置定义的属性进行处理。"),(0,n.kt)("p",null,"由于 webpack 遵循 CommonJS 模块规范，因此，你",(0,n.kt)("strong",{parentName:"p"},"可以在配置中使用"),"："),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"通过 ",(0,n.kt)("inlineCode",{parentName:"li"},"require(...)")," 引入其他文件"),(0,n.kt)("li",{parentName:"ul"},"通过 ",(0,n.kt)("inlineCode",{parentName:"li"},"require(...)")," 使用 npm 下载的工具函数"),(0,n.kt)("li",{parentName:"ul"},"使用 JavaScript 控制流表达式，例如 ",(0,n.kt)("inlineCode",{parentName:"li"},"?:")," 操作符"),(0,n.kt)("li",{parentName:"ul"},"对 value 使用常量或变量赋值"),(0,n.kt)("li",{parentName:"ul"},"编写并执行函数，生成部分配置")),(0,n.kt)("p",null,"请在合适的场景，使用这些功能。"),(0,n.kt)("p",null,"虽然技术上可行，",(0,n.kt)("strong",{parentName:"p"},"但还是应避免如下操作"),"："),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"当使用 webpack CLI 工具时，访问 CLI 参数（应编写自己的 CLI 工具替代，或者",(0,n.kt)("a",{href:"/api/cli/#env",parentName:"li"},"使用 ",(0,n.kt)("inlineCode",{parentName:"a"},"--env")),"）"),(0,n.kt)("li",{parentName:"ul"},"导出不确定的结果（两次调用 webpack 应产生相同的输出文件）"),(0,n.kt)("li",{parentName:"ul"},"编写超长的配置（应将配置文件拆分成多个）")),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"此文档中得出最重要的结论是，webpack 的配置可以有许多不同的样式和风格。关键在于，为了易于维护和理解这些配置，需要在团队内部保证一致。")),(0,n.kt)("p",null,"接下来的示例中，展示了 webpack 配置如何实现既可表达，又可灵活配置，这主要得益于 ",(0,n.kt)("em",{parentName:"p"},"配置即为代码"),"："),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"introductory-configuration",parentName:"h2"}),"基本配置",(0,n.kt)("a",{href:"#introductory-configuration","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," path ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'path'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\nmodule",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  mode",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'development'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  entry",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./foo.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    path",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," path",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"resolve"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"__dirname",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'dist'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    filename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'foo.bundle.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"查看"),"：",(0,n.kt)("a",{href:"/configuration/",parentName:"p"},"配置章节"),"中所有支持的配置选项。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"multiple-targets",parentName:"h2"}),"多个 target",(0,n.kt)("a",{href:"#multiple-targets","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"除了可以将单个配置导出为 object，",(0,n.kt)("a",{href:"/configuration/configuration-types/#exporting-a-function",parentName:"p"},"function")," 或 ",(0,n.kt)("a",{href:"/configuration/configuration-types/#exporting-a-promise",parentName:"p"},"Promise")," 以外，还可以将其导出为多个配置。"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"查看"),"：",(0,n.kt)("a",{href:"/configuration/configuration-types/#exporting-multiple-configurations",parentName:"p"},"导出多个配置")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"using-other-configuration-languages",parentName:"h2"}),"使用其它配置语言",(0,n.kt)("a",{href:"#using-other-configuration-languages","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"Webpack 支持由多种编程和数据语言编写的配置文件。"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"查看"),"：",(0,n.kt)("a",{href:"/configuration/configuration-languages/",parentName:"p"},"配置语言")))}o.isMDXComponent=!0,e.default=o}}]);