<!DOCTYPE html><html lang="zh-cmn-Hans"><head><title data-rh="true">Package exports | webpack 中文文档</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="theme-color" content="#2B3A42"/><meta data-rh="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-rh="true" name="description" content="webpack 是一个模块打包器。它的主要目标是将 JavaScript 文件打包在一起，打包后的文件用于在浏览器中使用，但它也能够胜任转换、打包或包裹任何资源。"/><meta data-rh="true" property="og:site_name" content="webpack"/><meta data-rh="true" property="og:type" content="website"/><meta data-rh="true" property="og:title" content="Package exports | webpack 中文文档"/><meta data-rh="true" property="og:description" name="description" content="webpack 是一个模块打包器。它的主要目标是将 JavaScript 文件打包在一起，打包后的文件用于在浏览器中使用，但它也能够胜任转换、打包或包裹任何资源。"/><meta data-rh="true" property="og:image" content="https://webpack.js.org/icon-pwa-512x512.d3dae4189855b3a72ff9.png"/><meta data-rh="true" property="twitter:card" content="summary"/><meta data-rh="true" property="twitter:site" content="@webpack"/><meta data-rh="true" property="twitter:creator" content="@webpack"/><meta data-rh="true" property="twitter:domain" content="https://webpack.js.org/"/><meta data-rh="true" name="keywords" content="webpack5, webpack, webpack 中文文档, webpack 官方中文, webpack 5 官方中文, 印记中文, docschina, docschina.org, webpack.docschina.org, doc.react-china.org, nodejs.cn, vue.docschina.org, babel.docschina.org, parceljs.docschina.org, rollup.docschina.org, koajs.docschina.org"/><meta data-rh="true" name="mobile-web-app-capable" content="yes"/><meta data-rh="true" name="apple-mobile-web-app-capable" content="yes"/><meta data-rh="true" name="apple-mobile-web-app-status-bar-style" content="black"/><meta data-rh="true" name="apple-mobile-web-app-title" content="webpack"/><meta data-rh="true" name="msapplication-TileImage" content="/icon_150x150.png"/><meta data-rh="true" name="msapplication-TileColor" content="#465e69"/><link data-rh="true" rel="icon" type="image/x-icon" href="/favicon.f326220248556af65f41.ico"/><link data-rh="true" rel="manifest" href="/manifest.json"/><link data-rh="true" rel="canonical" href="https://webpack.docschina.org/guides/package-exports/"/><link data-rh="true" rel="icon" sizes="192x192" href="/icon_192x192.png"/><link data-rh="true" rel="icon" sizes="512x512" href="/icon_512x512.png"/><link data-rh="true" rel="apple-touch-icon" href="/icon_180x180.png"/><link data-rh="true" rel="mask-icon" href="/logo-on-white-bg.47eff95f9c01c5972f6f.svg" color="#465e69"/><link rel="stylesheet" href=/index.c114afea0778b47a418a.css /><link rel="stylesheet" href=/9517.acfe42251eae743e4e22.css /></head><body><div id="root"><div class="site"><div class="site__header"><header class="bg-blue-800 dark:bg-gray-900"><div class="flex items-center py-10 px-[16px] justify-between md:px-[24px] md:max-w-[1024px] md:mx-auto md:justify-start"><button class="bg-transparent border-none md:hidden"><svg viewBox="-62 138 25 25" width="20" height="20" class="fill-current text-white"><path fill="currentColor" d="M-60.2 140.2h20.9c1 0 1.8.8 1.8 1.8s-.8 1.8-1.8 1.8h-20.9c-1 0-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8M-60.2 148.7h20.9c1 0 1.8.8 1.8 1.8s-.8 1.8-1.8 1.8h-20.9c-1 0-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8M-60.2 157.2h20.9c1 0 1.8.8 1.8 1.8s-.8 1.8-1.8 1.8h-20.9c-1 0-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8"></path></svg></button><a class="md:mr-auto" href="/"><img class="logo" src="/site-logo.1fcab817090e78435061.svg" alt="webpack logo" width="122" height="35"/></a><nav class="hidden md:inline-grid md:grid-flow-col md:gap-x-[18px]"><a class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200" href="/concepts/">中文文档</a><a class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200" href="/contribute/">参与贡献</a><a class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200" href="/blog/">博客</a><a href="https://docschina.org" target="_blank" rel="noopener noreferrer" class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200">印记中文</a><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-gray-100 dark:text-gray-200 hover:text-blue-200" title="webpack on GitHub"><svg viewBox="0 0 24 24" aria-hidden="true" fill="currentColor" width="16"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 6.8 9.5c.5 0 .7-.2.7-.5v-1.7C6.7 20 6.1 18 6.1 18c-.4-1.2-1-1.5-1-1.5-1-.6 0-.6 0-.6 1 0 1.5 1 1.5 1 .9 1.6 2.4 1.1 3 .9 0-.7.3-1.1.6-1.4-2.2-.2-4.6-1-4.6-4.9 0-1.1.4-2 1-2.7 0-.3-.4-1.3.2-2.7 0 0 .8-.2 2.7 1a9.4 9.4 0 0 1 5 0c2-1.2 2.8-1 2.8-1 .5 1.4.1 2.4 0 2.7.7.7 1 1.6 1 2.7 0 3.8-2.3 4.7-4.5 5 .4.2.7.8.7 1.8V21c0 .3.2.6.7.5 4-1.3 6.8-5 6.8-9.5A10 10 0 0 0 12 2"></path></svg></a><a href="https://twitter.com/webpack" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-gray-100 dark:text-gray-200 hover:text-blue-200" title="webpack on Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" aria-hidden="true" fill="currentColor" width="16"><path d="M28 6.937c-.957.425-1.985.711-3.064.84a5.343 5.343 0 0 0 2.345-2.951 10.696 10.696 0 0 1-3.388 1.295 5.334 5.334 0 0 0-9.089 4.864A15.143 15.143 0 0 1 3.809 5.411a5.321 5.321 0 0 0-.721 2.683 5.33 5.33 0 0 0 2.372 4.439 5.323 5.323 0 0 1-2.416-.667v.067a5.335 5.335 0 0 0 4.279 5.23 5.336 5.336 0 0 1-2.409.092 5.34 5.34 0 0 0 4.983 3.705 10.699 10.699 0 0 1-6.625 2.284c-.43 0-.855-.025-1.273-.075a15.102 15.102 0 0 0 8.177 2.396c9.812 0 15.176-8.128 15.176-15.177 0-.231-.005-.461-.015-.69A10.855 10.855 0 0 0 28 6.937z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/webpack" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-gray-100 dark:text-gray-200 hover:text-blue-200" title="webpack on StackOverflow"><svg viewBox="0 0 24 24" aria-hidden="true" fill="currentColor" width="16"><path d="M17.4 20.2v-5.4h1.8V22H3v-7.2h1.8v5.4zM6.8 14.3l.3-1.7 8.8 1.8-.3 1.8zm1.1-4.2.8-1.6 8.1 3.8-.7 1.6zm2.3-4 1.1-1.4 7 5.8-1.2 1.4L10 6m4.7-4L20 9l-1.4 1-5.4-7 1.4-1m-8 16.5v-1.8h9v1.8z"></path></svg></a><nav class="dropdown "><button aria-haspopup="true" aria-expanded="false" aria-label="Select language"><svg viewBox="0 0 610 560" xmlns="http://www.w3.org/2000/svg" class="dropdown__language text-gray-100 hover:text-blue-200 transition-colors duration-200"><path d="m304.8 99.2-162.5-57.3v353.6l162.5-52.6z"></path><path d="m300.9 99 168.7-57.3v353.6l-168.7-52.5zm-200.7 358.4 200.7-66.9v-291.5l-200.7 66.9z" fill="currentColor"></path><path d="m392.4 461.8 28.4 46.8 15-43.5zm-223.9-262.3c-1.1-1 1.4 8.6 4.8 12 6.1 6.1 10.8 6.9 13.3 7 5.6.2 12.5-1.4 16.5-3.1s10.9-5.2 13.5-10.4c.6-1.1 2.1-3 1.1-7.5-.7-3.5-3-4.8-5.7-4.6s-11 2.4-15 3.6-12.2 3.7-15.8 4.5-11.5-.3-12.7-1.5zm101.2 114.8c-1.6-.6-34.3-14.1-38.9-16.4a368 368 0 0 0 -17.5-7.5c12.3-19 20.1-33.4 21.2-35.6 1.9-4 15-29.5 15.3-31.1s.7-7.5.4-8.9-5.1 1.3-11.6 3.5-18.9 10.2-23.7 11.2-20.1 6.8-28 9.4c-7.8 2.6-22.7 7.1-28.8 8.8-6.1 1.6-11.4 1.8-14.9 2.8 0 0 .5 4.8 1.4 6.2s4.1 5 7.9 5.9c3.8 1 10 .6 12.8-.1s7.7-3.1 8.4-4.1c.7-1.1-.3-4.3.8-5.3s16.1-4.5 21.7-6.2 27.2-9.2 30.1-8.8a916 916 0 0 1 -23.9 47.7 821 821 0 0 1 -45 63.3c-5.3 6-18 21.5-22.4 25 1.1.3 9-.4 10.4-1.3 8.9-5.5 23.8-24.1 28.6-29.7a489.1 489.1 0 0 0 36.7-49.4c1.9.8 17.6 13.6 21.7 16.4a293 293 0 0 0 23.7 13.3c3.5 1.5 16.9 7.7 17.5 5.6.7-1.8-2.3-14.1-3.9-14.7z"></path><path clip-rule="evenodd" d="m194.1 484.7a204.9 204.9 0 0 0 30.7 14.5 233.6 233.6 0 0 0 46.4 12c.5 0 16 1.9 19.2 1.9h15.7c6.1-.5 11.8-.9 17.9-1.7 4.9-.7 10.3-1.6 15.5-2.8 3.8-.9 7.8-1.7 11.7-3 3.7-1 7.8-2.4 11.8-3.8l8.2-3.1c2.3-1 5.1-2.3 7.7-3.3a243 243 0 0 0 19.2-10c2.3-1.2 7.5-5.2 10.3-5.2 3.1 0 5.2 2.8 5.2 5.2 0 5.1-6.8 6.6-9.9 8.9-3.3 2.3-7.3 4-10.8 5.9-7 3.7-14.1 6.8-20.9 9.4a251 251 0 0 1 -27.3 8.5c-3.3.7-6.6 1.6-9.9 2.1-1.7.3-19.9 3.1-24.9 3.1h-23a293.9 293.9 0 0 1 -35.1-5.2 196 196 0 0 1 -33.1-10.3c-12-4.5-24.6-10.5-36.4-18.3-2.1-1.4-2.3-2.8-2.3-4.4a5 5 0 0 1 5.1-5.1c2.4.1 8 4.2 9 4.7zm101.4-98.1-189.9 63.2v-280.1l189.9-63.2zm10.6-288.3v292.7a6 6 0 0 1 -1.2 2.6c-.3.5-1 1.2-1.6 1.4a14621 14621 0 0 1 -203.1 67.6c-2.1 0-4-1.4-5.1-3.7 0-.2-.2-.3-.2-.7v-292.8c.3-.9.5-2.1 1.2-2.8 1.4-1.9 3.8-2.3 5.4-2.8 3-1 196.1-65.8 198.9-65.8 1.9 0 5.7 1.2 5.7 4.3z" fill-rule="evenodd"></path><path clip-rule="evenodd" d="m464.3 388-158-49.1v-236l158-53.7zm10.6-345.8v352.4c-.2 4-3 5.7-5.6 5.7-2.3 0-18.6-5.6-21.4-6.4l-65.8-20.4-14.6-4.7-12.9-4c-18.6-5.7-37.6-11.5-56.3-17.8-.7-.2-2.4-2.6-2.4-3.1v-246.1c.3-.9.7-1.9 1.6-2.6 1.4-1.6 61.1-21.4 84.7-29.3 6.3-2.3 84.8-29.3 87.3-29.3 3 .1 5.4 2.3 5.4 5.6z" fill-rule="evenodd"></path><path d="m515 461.8-211.1-67.3.9-292.8 210.2 66.9z"></path><path clip-rule="evenodd" d="m408.6 232.5-20.7 50.1 38.1 11.5zm-12.4-47.2 27.2 8.2 49.5 178.6-27.9-8.5-10-36.7-57.7-17.5-12.4 29.9-27.9-8.5z" fill="currentColor" fill-rule="evenodd"></path></svg><i aria-hidden="true" class="dropdown__arrow"></i></button><div class="dropdown__list "><ul><li><a href="https://webpack.js.org/guides/package-exports/" class="px-5 block"><span>English</span></a></li><li><a href="https://webpack.docschina.org/guides/package-exports/" class="px-5 block"><span lang="zh">中文</span></a></li><li><a href="https://webpack.kr/guides/package-exports/" class="px-5 block"><span lang="ko">한국어</span></a></li></ul></div></nav></nav><div class="inline-flex items-center ml-[18px]"><button aria-label="Switch to dark theme" class="bg-transparent border-none cursor-pointer text-[16px] p-0 inline-flex items-center text-gray-100 hover:text-blue-200 transition-colors duration-200" data-testid="hello-darkness"><svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18.1406C11.6016 18.1406 11.2782 18.464 11.2782 18.8624V21.0281C11.2782 21.4265 11.6016 21.7499 12 21.7499C12.3985 21.7499 12.7219 21.4265 12.7219 21.0281V18.8624C12.7219 18.464 12.3985 18.1406 12 18.1406V18.1406Z" fill="currentColor"></path><path d="M12 2.25006C11.6016 2.25006 11.2782 2.5735 11.2782 2.97194V5.13756C11.2782 5.536 11.6016 5.85944 12 5.85944C12.3985 5.85944 12.7219 5.536 12.7219 5.13756V2.97194C12.7219 2.5735 12.3985 2.25006 12 2.25006V2.25006Z" fill="currentColor"></path><path d="M5.85936 12C5.85936 11.6015 5.53592 11.2781 5.13749 11.2781H2.97186C2.57342 11.2781 2.24999 11.6015 2.24999 12C2.24999 12.3984 2.57342 12.7218 2.97186 12.7218H5.13749C5.53592 12.7218 5.85936 12.3984 5.85936 12V12Z" fill="currentColor"></path><path d="M21.0281 11.2781H18.8625C18.4641 11.2781 18.1406 11.6015 18.1406 12C18.1406 12.3984 18.4641 12.7218 18.8625 12.7218H21.0281C21.4266 12.7218 21.75 12.3984 21.75 12C21.75 11.6015 21.4266 11.2781 21.0281 11.2781V11.2781Z" fill="currentColor"></path><path d="M7.14841 16.1298C6.95622 16.1298 6.77341 16.2048 6.63747 16.3407L5.10466 17.8735C4.96872 18.0094 4.89372 18.1923 4.89372 18.3844C4.89372 18.5766 4.96872 18.7594 5.10466 18.8954C5.2406 19.0313 5.42341 19.1063 5.6156 19.1063C5.80779 19.1063 5.9906 19.0313 6.12654 18.8954L7.65935 17.3626C7.9406 17.0813 7.9406 16.6219 7.65935 16.3407C7.52341 16.2048 7.3406 16.1298 7.14841 16.1298V16.1298Z" fill="currentColor"></path><path d="M16.8516 7.87036C17.0437 7.87036 17.2266 7.79536 17.3625 7.65942L18.8953 6.12661C19.0312 5.99067 19.1062 5.80786 19.1062 5.61567C19.1062 5.42349 19.0312 5.24067 18.8953 5.10474C18.7594 4.9688 18.5766 4.8938 18.3844 4.8938C18.1922 4.8938 18.0094 4.9688 17.8734 5.10474L16.3406 6.63755C16.2047 6.77349 16.1297 6.9563 16.1297 7.14849C16.1297 7.34067 16.2047 7.52349 16.3406 7.65942C16.4766 7.79536 16.6594 7.87036 16.8516 7.87036V7.87036Z" fill="currentColor"></path><path d="M6.12654 5.10474C5.9906 4.9688 5.80779 4.8938 5.6156 4.8938C5.42341 4.8938 5.2406 4.9688 5.10466 5.10474C4.96872 5.24067 4.89372 5.42349 4.89372 5.61567C4.89372 5.80786 4.96872 5.99067 5.10466 6.12661L6.63747 7.65942C6.77341 7.79536 6.95622 7.87036 7.14841 7.87036C7.3406 7.87036 7.52341 7.79536 7.65935 7.65942C7.79529 7.52349 7.87029 7.34067 7.87029 7.14849C7.87029 6.9563 7.79529 6.77349 7.65935 6.63755L6.12654 5.10474V5.10474Z" fill="currentColor"></path><path d="M17.3625 16.3407C17.2266 16.2048 17.0437 16.1298 16.8516 16.1298C16.6594 16.1298 16.4766 16.2048 16.3406 16.3407C16.0594 16.6219 16.0594 17.0813 16.3406 17.3626L17.8734 18.8954C18.0094 19.0313 18.1922 19.1063 18.3844 19.1063C18.5766 19.1063 18.7594 19.0313 18.8953 18.8954C19.0312 18.7594 19.1062 18.5766 19.1062 18.3844C19.1062 18.1923 19.0312 18.0094 18.8953 17.8735L17.3625 16.3407V16.3407Z" fill="currentColor"></path><path d="M12 7.5C9.52031 7.5 7.5 9.52031 7.5 12C7.5 14.4797 9.52031 16.5 12 16.5C14.4797 16.5 16.5 14.4797 16.5 12C16.5 9.52031 14.4797 7.5 12 7.5Z" fill="currentColor"></path></svg></button><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="bg-gray-100 dark:bg-gray-800 hidden md:block"><div class="md:max-w-[1024px] md:mx-auto md:grid md:grid-flow-col md:justify-end md:gap-x-[20px] md:px-[24px]" data-testid="sub-navigation"><a title="api" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/api/">API</a><a title="概念" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/concepts/">概念</a><a title="配置" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/configuration/">配置</a><a title="指南" aria-current="page" class="!text-black dark:!text-white text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/guides/">指南</a><a title="loader" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/loaders/">loader</a><a title="迁移" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/migrate/">迁移</a><a title="plugin" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/plugins/">plugin</a></div></div></header></div><div class="container site__content"><div class="sponsors"><a href="https://docschina.org" target="_blank" rel="noopener noreferrer" class="sponsors__content"><img class="sponsors__img__docschina" src="/docschina-logo.59f03f74b3c450856c01.png"/><div class="sponsors__content-cont">翻译/文档内容有任何问题，请联系我们</div><div class="wwads-cn wwads-horizontal wwads-sticky" data-id="306" style="max-width:350px"></div></a></div><nav class="sidebar site__sidebar"><div class="sidebar__inner"><div class="relative z-0 bg-white dark:bg-gray-100 "><select class="text-gray-600 text-14 px-5 py-5 appearance-none box-border border border-gray-200 border-solid flex-col flex w-full rounded-none bg-transparent bg-none"><option selected="" value="5">Webpack 5</option><option value="4">Webpack 4</option></select><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="absolute right-5 top-5 fill-current text-gray-300 z-[-1]" width="20" height="20"><path d="M4.5 7.5c.5-.4 1-.4 1.6 0l3.9 3.8 4-3.8c.4-.4 1-.4 1.5 0 .4.5.4 1.2 0 1.7l-4.7 4.5a1 1 0 0 1-1.6 0L4.5 9.2c-.4-.5-.4-1.2 0-1.7z"></path></svg></div><div class="sidebar-item sidebar-item--disabled`"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="sidebar-item__toggle" width="15" height="17" fill="#175d96"><path d="M10 3.3c-.6 0-1 .4-1.1 1.1v11.2c0 .3.2.6.4.8s.5.4.8.4c.6 0 1-.4 1.1-1.1V4.5c0-.3-.2-.6-.4-.8s-.5-.4-.8-.4z"></path></svg><a class="sidebar-item__title sidebar-link__print" href="/guides/printable/" rel="nofollow noopener noreferrer" alt="Print" title="Print" target="_blank">Print Section<img src="/icon-print.d4d2cfa27f8b9a98e34a.svg" width="27" height="20" alt="Printer Icon"/></a></div><div><div class="sidebar-item  sidebar-item--disabled"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="sidebar-item__toggle" width="15" height="17" fill="#175d96"><path d="M10 3.3c-.6 0-1 .4-1.1 1.1v11.2c0 .3.2.6.4.8s.5.4.8.4c.6 0 1-.4 1.1-1.1V4.5c0-.3-.2-.6-.4-.8s-.5-.4-.8-.4z"></path></svg><a class="sidebar-item__title" href="/guides/">指南</a></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/getting-started/">起步</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="基础设置 "><a class="" href="/guides/getting-started/#basic-setup">基础设置 </a></li><li class="sidebar-item__anchor" title="创建一个 bundle "><a class="" href="/guides/getting-started/#creating-a-bundle">创建一个 bundle </a></li><li class="sidebar-item__anchor" title="模块 "><a class="" href="/guides/getting-started/#modules">模块 </a></li><li class="sidebar-item__anchor" title="使用配置文件 "><a class="" href="/guides/getting-started/#using-a-configuration">使用配置文件 </a></li><li class="sidebar-item__anchor" title="npm scripts "><a class="" href="/guides/getting-started/#npm-scripts">npm scripts </a></li><li class="sidebar-item__anchor" title="总结 "><a class="" href="/guides/getting-started/#conclusion">总结 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/asset-management/">管理资源</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="设置 "><a class="" href="/guides/asset-management/#setup">设置 </a></li><li class="sidebar-item__anchor" title="加载 CSS "><a class="" href="/guides/asset-management/#loading-css">加载 CSS </a></li><li class="sidebar-item__anchor" title="加载图像 "><a class="" href="/guides/asset-management/#loading-images">加载图像 </a></li><li class="sidebar-item__anchor" title="加载字体 "><a class="" href="/guides/asset-management/#loading-fonts">加载字体 </a></li><li class="sidebar-item__anchor" title="加载数据 "><a class="" href="/guides/asset-management/#loading-data">加载数据 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="自定义 JSON 模块解析器 "><a class="" href="/guides/asset-management/#customize-parser-of-json-modules">自定义 JSON 模块解析器 </a></li></ul></li><li class="sidebar-item__anchor" title="全局资源 "><a class="" href="/guides/asset-management/#global-assets">全局资源 </a></li><li class="sidebar-item__anchor" title="回退处理 "><a class="" href="/guides/asset-management/#wrapping-up">回退处理 </a></li><li class="sidebar-item__anchor" title="下篇指南 "><a class="" href="/guides/asset-management/#next-guide">下篇指南 </a></li><li class="sidebar-item__anchor" title="延伸阅读 "><a class="" href="/guides/asset-management/#further-reading">延伸阅读 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/output-management/">管理输出</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="预先准备 "><a class="" href="/guides/output-management/#preparation">预先准备 </a></li><li class="sidebar-item__anchor" title="设置 HtmlWebpackPlugin "><a class="" href="/guides/output-management/#setting-up-htmlwebpackplugin">设置 HtmlWebpackPlugin </a></li><li class="sidebar-item__anchor" title="清理 /dist 文件夹 "><a class="" href="/guides/output-management/#cleaning-up-the-dist-folder">清理 /dist 文件夹 </a></li><li class="sidebar-item__anchor" title="manifest "><a class="" href="/guides/output-management/#the-manifest">manifest </a></li><li class="sidebar-item__anchor" title="总结 "><a class="" href="/guides/output-management/#conclusion">总结 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/development/">开发环境</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="使用 source map "><a class="" href="/guides/development/#using-source-maps">使用 source map </a></li><li class="sidebar-item__anchor" title="选择一个开发工具 "><a class="" href="/guides/development/#choosing-a-development-tool">选择一个开发工具 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="使用观察模式 "><a class="" href="/guides/development/#using-watch-mode">使用观察模式 </a></li><li class="sidebar-item__anchor" title="使用 webpack-dev-server "><a class="" href="/guides/development/#using-webpack-dev-server">使用 webpack-dev-server </a></li><li class="sidebar-item__anchor" title="使用 webpack-dev-middleware "><a class="" href="/guides/development/#using-webpack-dev-middleware">使用 webpack-dev-middleware </a></li></ul></li><li class="sidebar-item__anchor" title="调整文本编辑器 "><a class="" href="/guides/development/#adjusting-your-text-editor">调整文本编辑器 </a></li><li class="sidebar-item__anchor" title="总结 "><a class="" href="/guides/development/#conclusion">总结 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/code-splitting/">代码分离</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="入口起点 "><a class="" href="/guides/code-splitting/#entry-points">入口起点 </a></li><li class="sidebar-item__anchor" title="防止重复 "><a class="" href="/guides/code-splitting/#prevent-duplication">防止重复 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="入口依赖 "><a class="" href="/guides/code-splitting/#entry-dependencies">入口依赖 </a></li><li class="sidebar-item__anchor" title="SplitChunksPlugin "><a class="" href="/guides/code-splitting/#splitchunksplugin">SplitChunksPlugin </a></li></ul></li><li class="sidebar-item__anchor" title="动态导入 "><a class="" href="/guides/code-splitting/#dynamic-imports">动态导入 </a></li><li class="sidebar-item__anchor" title="预获取/预加载模块 "><a class="" href="/guides/code-splitting/#prefetchingpreloading-modules">预获取/预加载模块 </a></li><li class="sidebar-item__anchor" title="分析 bundle "><a class="" href="/guides/code-splitting/#bundle-analysis">分析 bundle </a></li><li class="sidebar-item__anchor" title="下一步 "><a class="" href="/guides/code-splitting/#next-steps">下一步 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/caching/">缓存</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="输出文件的文件名 "><a class="" href="/guides/caching/#output-filenames">输出文件的文件名 </a></li><li class="sidebar-item__anchor" title="提取引导模板 "><a class="" href="/guides/caching/#extracting-boilerplate">提取引导模板 </a></li><li class="sidebar-item__anchor" title="模块标识符 "><a class="" href="/guides/caching/#module-identifiers">模块标识符 </a></li><li class="sidebar-item__anchor" title="总结 "><a class="" href="/guides/caching/#conclusion">总结 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/author-libraries/">创建库</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="创建一个库 "><a class="" href="/guides/author-libraries/#authoring-a-library">创建一个库 </a></li><li class="sidebar-item__anchor" title="webpack 配置 "><a class="" href="/guides/author-libraries/#webpack-configuration">webpack 配置 </a></li><li class="sidebar-item__anchor" title="暴露库 "><a class="" href="/guides/author-libraries/#expose-the-library">暴露库 </a></li><li class="sidebar-item__anchor" title="外部化 lodash "><a class="" href="/guides/author-libraries/#externalize-lodash">外部化 lodash </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="外部化的限制 "><a class="" href="/guides/author-libraries/#external-limitations">外部化的限制 </a></li></ul></li><li class="sidebar-item__anchor" title="最终步骤 "><a class="" href="/guides/author-libraries/#final-steps">最终步骤 </a></li></ul></div></div><div><div class="sidebar-item  sidebar-item--disabled"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="sidebar-item__toggle" width="15" height="17" fill="#175d96"><path d="M10 3.3c-.6 0-1 .4-1.1 1.1v11.2c0 .3.2.6.4.8s.5.4.8.4c.6 0 1-.4 1.1-1.1V4.5c0-.3-.2-.6-.4-.8s-.5-.4-.8-.4z"></path></svg><a class="sidebar-item__title" href="/guides/environment-variables/">环境变量</a></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/build-performance/">构建性能</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="通用环境 "><a class="" href="/guides/build-performance/#general">通用环境 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="更新到最新版本 "><a class="" href="/guides/build-performance/#stay-up-to-date">更新到最新版本 </a></li><li class="sidebar-item__anchor" title="loader "><a class="" href="/guides/build-performance/#loaders">loader </a></li><li class="sidebar-item__anchor" title="引导（bootstrap） "><a class="" href="/guides/build-performance/#bootstrap">引导（bootstrap） </a></li><li class="sidebar-item__anchor" title="解析 "><a class="" href="/guides/build-performance/#resolving">解析 </a></li><li class="sidebar-item__anchor" title="dll "><a class="" href="/guides/build-performance/#dlls">dll </a></li><li class="sidebar-item__anchor" title="小即是快 "><a class="" href="/guides/build-performance/#smaller--faster">小即是快 </a></li><li class="sidebar-item__anchor" title="worker 池 "><a class="" href="/guides/build-performance/#worker-pool">worker 池 </a></li><li class="sidebar-item__anchor" title="持久化缓存 "><a class="" href="/guides/build-performance/#persistent-cache">持久化缓存 </a></li><li class="sidebar-item__anchor" title="自定义 plugin/loader "><a class="" href="/guides/build-performance/#custom-pluginsloaders">自定义 plugin/loader </a></li><li class="sidebar-item__anchor" title="Progress 插件 "><a class="" href="/guides/build-performance/#progress-plugin">Progress 插件 </a></li></ul></li><li class="sidebar-item__anchor" title="开发环境 "><a class="" href="/guides/build-performance/#development">开发环境 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="增量编译 "><a class="" href="/guides/build-performance/#incremental-builds">增量编译 </a></li><li class="sidebar-item__anchor" title="在内存中编译 "><a class="" href="/guides/build-performance/#compile-in-memory">在内存中编译 </a></li><li class="sidebar-item__anchor" title="加速 stats.toJson "><a class="" href="/guides/build-performance/#statstojson-speed">加速 stats.toJson </a></li><li class="sidebar-item__anchor" title="devtool "><a class="" href="/guides/build-performance/#devtool">devtool </a></li><li class="sidebar-item__anchor" title="避免使用在生产环境下才会用到的工具 "><a class="" href="/guides/build-performance/#avoid-production-specific-tooling">避免使用在生产环境下才会用到的工具 </a></li><li class="sidebar-item__anchor" title="最小化入口 chunk "><a class="" href="/guides/build-performance/#minimal-entry-chunk">最小化入口 chunk </a></li><li class="sidebar-item__anchor" title="避免额外的优化步骤 "><a class="" href="/guides/build-performance/#avoid-extra-optimization-steps">避免额外的优化步骤 </a></li><li class="sidebar-item__anchor" title="输出结果不携带路径信息 "><a class="" href="/guides/build-performance/#output-without-path-info">输出结果不携带路径信息 </a></li><li class="sidebar-item__anchor" title="Node.js 版本 8.9.10-9.11.1 "><a class="" href="/guides/build-performance/#nodejs-versions-8910-9111">Node.js 版本 8.9.10-9.11.1 </a></li><li class="sidebar-item__anchor" title="TypeScript loader "><a class="" href="/guides/build-performance/#typescript-loader">TypeScript loader </a></li></ul></li><li class="sidebar-item__anchor" title="生产环境 "><a class="" href="/guides/build-performance/#production">生产环境 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="source map "><a class="" href="/guides/build-performance/#source-maps">source map </a></li></ul></li><li class="sidebar-item__anchor" title="工具相关问题 "><a class="" href="/guides/build-performance/#specific-tooling-issues">工具相关问题 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="babel "><a class="" href="/guides/build-performance/#babel">babel </a></li><li class="sidebar-item__anchor" title="TypeScript "><a class="" href="/guides/build-performance/#typescript">TypeScript </a></li><li class="sidebar-item__anchor" title="sass "><a class="" href="/guides/build-performance/#sass">sass </a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/csp/">内容安全策略（CSP）</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="示例 "><a class="" href="/guides/csp/#examples">示例 </a></li><li class="sidebar-item__anchor" title="启用 CSP "><a class="" href="/guides/csp/#enabling-csp">启用 CSP </a></li><li class="sidebar-item__anchor" title="信任类型 "><a class="" href="/guides/csp/#trustedtypes">信任类型 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/development-vagrant/">使用 Vagrant 在虚拟机运行开发环境</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="配置项目 "><a class="" href="/guides/development-vagrant/#configuring-the-project">配置项目 </a></li><li class="sidebar-item__anchor" title="启动服务器 "><a class="" href="/guides/development-vagrant/#running-the-server">启动服务器 </a></li><li class="sidebar-item__anchor" title="配合 nginx 的高级用法 "><a class="" href="/guides/development-vagrant/#advanced-usage-with-nginx">配合 nginx 的高级用法 </a></li><li class="sidebar-item__anchor" title="总结 "><a class="" href="/guides/development-vagrant/#conclusion">总结 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/dependency-management/">依赖管理</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="带表达式的 require 语句 "><a class="" href="/guides/dependency-management/#require-with-expression">带表达式的 require 语句 </a></li><li class="sidebar-item__anchor" title="require.context "><a class="" href="/guides/dependency-management/#requirecontext">require.context </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="上下文模块 API "><a class="" href="/guides/dependency-management/#context-module-api">上下文模块 API </a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/installation/">安装</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="前提条件 "><a class="" href="/guides/installation/#prerequisites">前提条件 </a></li><li class="sidebar-item__anchor" title="本地安装 "><a class="" href="/guides/installation/#local-installation">本地安装 </a></li><li class="sidebar-item__anchor" title="全局安装 "><a class="" href="/guides/installation/#global-installation">全局安装 </a></li><li class="sidebar-item__anchor" title="最新体验版本 "><a class="" href="/guides/installation/#bleeding-edge">最新体验版本 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/hot-module-replacement/">模块热替换</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="启用 HMR "><a class="" href="/guides/hot-module-replacement/#enabling-hmr">启用 HMR </a></li><li class="sidebar-item__anchor" title="通过 Node.js API 启用 HMR "><a class="" href="/guides/hot-module-replacement/#via-the-nodejs-api">通过 Node.js API 启用 HMR </a></li><li class="sidebar-item__anchor" title="问题 "><a class="" href="/guides/hot-module-replacement/#gotchas">问题 </a></li><li class="sidebar-item__anchor" title="HMR 加载样式 "><a class="" href="/guides/hot-module-replacement/#hmr-with-stylesheets">HMR 加载样式 </a></li><li class="sidebar-item__anchor" title="其他代码和框架 "><a class="" href="/guides/hot-module-replacement/#other-code-and-frameworks">其他代码和框架 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/tree-shaking/">Tree Shaking</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="添加一个通用模块 "><a class="" href="/guides/tree-shaking/#add-a-utility">添加一个通用模块 </a></li><li class="sidebar-item__anchor" title="将文件标记为无副作用（side-effect-free） "><a class="" href="/guides/tree-shaking/#mark-the-file-as-side-effect-free">将文件标记为无副作用（side-effect-free） </a></li><li class="sidebar-item__anchor" title="解释 tree shaking 和 sideEffects "><a class="" href="/guides/tree-shaking/#clarifying-tree-shaking-and-sideeffects">解释 tree shaking 和 sideEffects </a></li><li class="sidebar-item__anchor" title="将函数调用标记为无副作用 "><a class="" href="/guides/tree-shaking/#mark-a-function-call-as-side-effect-free">将函数调用标记为无副作用 </a></li><li class="sidebar-item__anchor" title="压缩输出结果 "><a class="" href="/guides/tree-shaking/#minify-the-output">压缩输出结果 </a></li><li class="sidebar-item__anchor" title="总结 "><a class="" href="/guides/tree-shaking/#conclusion">总结 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/production/">生产环境</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="配置 "><a class="" href="/guides/production/#setup">配置 </a></li><li class="sidebar-item__anchor" title="NPM Scripts "><a class="" href="/guides/production/#npm-scripts">NPM Scripts </a></li><li class="sidebar-item__anchor" title="指定 mode "><a class="" href="/guides/production/#specify-the-mode">指定 mode </a></li><li class="sidebar-item__anchor" title="压缩(Minification) "><a class="" href="/guides/production/#minification">压缩(Minification) </a></li><li class="sidebar-item__anchor" title="源码映射(Source Mapping) "><a class="" href="/guides/production/#source-mapping">源码映射(Source Mapping) </a></li><li class="sidebar-item__anchor" title="压缩 CSS "><a class="" href="/guides/production/#minimize-css">压缩 CSS </a></li><li class="sidebar-item__anchor" title="CLI 替代选项 "><a class="" href="/guides/production/#cli-alternatives">CLI 替代选项 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/lazy-loading/">懒加载</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="示例 "><a class="" href="/guides/lazy-loading/#example">示例 </a></li><li class="sidebar-item__anchor" title="框架 "><a class="" href="/guides/lazy-loading/#frameworks">框架 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/ecma-script-modules/">ECMAScript 模块</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="导出 "><a class="" href="/guides/ecma-script-modules/#exporting">导出 </a></li><li class="sidebar-item__anchor" title="导入 "><a class="" href="/guides/ecma-script-modules/#importing">导入 </a></li><li class="sidebar-item__anchor" title="将模块标记为 ESM "><a class="" href="/guides/ecma-script-modules/#flagging-modules-as-esm">将模块标记为 ESM </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/shimming/">Shimming 预置依赖</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Shimming 预置全局变量 "><a class="" href="/guides/shimming/#shimming-globals">Shimming 预置全局变量 </a></li><li class="sidebar-item__anchor" title="细粒度 Shimming "><a class="" href="/guides/shimming/#granular-shimming">细粒度 Shimming </a></li><li class="sidebar-item__anchor" title="全局 Exports "><a class="" href="/guides/shimming/#global-exports">全局 Exports </a></li><li class="sidebar-item__anchor" title="加载 Polyfills "><a class="" href="/guides/shimming/#loading-polyfills">加载 Polyfills </a></li><li class="sidebar-item__anchor" title="进一步优化 "><a class="" href="/guides/shimming/#further-optimizations">进一步优化 </a></li><li class="sidebar-item__anchor" title="Node 内置 "><a class="" href="/guides/shimming/#node-built-ins">Node 内置 </a></li><li class="sidebar-item__anchor" title="其他工具 "><a class="" href="/guides/shimming/#other-utilities">其他工具 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/typescript/">TypeScript</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="基础配置 "><a class="" href="/guides/typescript/#basic-setup">基础配置 </a></li><li class="sidebar-item__anchor" title="loader "><a class="" href="/guides/typescript/#loader">loader </a></li><li class="sidebar-item__anchor" title="source map "><a class="" href="/guides/typescript/#source-maps">source map </a></li><li class="sidebar-item__anchor" title="客户端类型 "><a class="" href="/guides/typescript/#client-types">客户端类型 </a></li><li class="sidebar-item__anchor" title="使用第三方库 "><a class="" href="/guides/typescript/#using-third-party-libraries">使用第三方库 </a></li><li class="sidebar-item__anchor" title="导入其他资源 "><a class="" href="/guides/typescript/#importing-other-assets">导入其他资源 </a></li><li class="sidebar-item__anchor" title="构建性能 "><a class="" href="/guides/typescript/#build-performance">构建性能 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/web-workers/">Web Workers</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="语法 "><a class="" href="/guides/web-workers/#syntax">语法 </a></li><li class="sidebar-item__anchor" title="示例 "><a class="" href="/guides/web-workers/#example">示例 </a></li><li class="sidebar-item__anchor" title="Node.js "><a class="" href="/guides/web-workers/#nodejs">Node.js </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/progressive-web-application/">渐进式网络应用程序</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="现在，我们并没有运行在离线环境下 "><a class="" href="/guides/progressive-web-application/#we-dont-work-offline-now">现在，我们并没有运行在离线环境下 </a></li><li class="sidebar-item__anchor" title="添加 Workbox "><a class="" href="/guides/progressive-web-application/#adding-workbox">添加 Workbox </a></li><li class="sidebar-item__anchor" title="注册 Service Worker "><a class="" href="/guides/progressive-web-application/#registering-our-service-worker">注册 Service Worker </a></li><li class="sidebar-item__anchor" title="结论 "><a class="" href="/guides/progressive-web-application/#conclusion">结论 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/public-path/">公共路径</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="示例 "><a class="" href="/guides/public-path/#use-cases">示例 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="基于环境设置 "><a class="" href="/guides/public-path/#environment-based">基于环境设置 </a></li><li class="sidebar-item__anchor" title="在运行时设置 "><a class="" href="/guides/public-path/#on-the-fly">在运行时设置 </a></li><li class="sidebar-item__anchor" title="Automatic publicPath $#automaticpublicPath$"><a class="" href="/guides/public-path/#Automatic-publicPath-automaticpublicPath">Automatic publicPath $#automaticpublicPath$</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/integrations/">集成</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="NPM Scripts "><a class="" href="/guides/integrations/#npm-scripts">NPM Scripts </a></li><li class="sidebar-item__anchor" title="Grunt "><a class="" href="/guides/integrations/#grunt">Grunt </a></li><li class="sidebar-item__anchor" title="Gulp "><a class="" href="/guides/integrations/#gulp">Gulp </a></li><li class="sidebar-item__anchor" title="Mocha "><a class="" href="/guides/integrations/#mocha">Mocha </a></li><li class="sidebar-item__anchor" title="Karma "><a class="" href="/guides/integrations/#karma">Karma </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/asset-modules/">资源模块</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Resource 资源 "><a class="" href="/guides/asset-modules/#resource-assets">Resource 资源 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="自定义输出文件名 "><a class="" href="/guides/asset-modules/#custom-output-filename">自定义输出文件名 </a></li></ul></li><li class="sidebar-item__anchor" title="inline 资源(inlining asset) "><a class="" href="/guides/asset-modules/#inlining-assets">inline 资源(inlining asset) </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="自定义 data URI 生成器 "><a class="" href="/guides/asset-modules/#custom-data-uri-generator">自定义 data URI 生成器 </a></li></ul></li><li class="sidebar-item__anchor" title="source 资源(source asset) "><a class="" href="/guides/asset-modules/#source-assets">source 资源(source asset) </a></li><li class="sidebar-item__anchor" title="URL 资源 "><a class="" href="/guides/asset-modules/#url-assets">URL 资源 </a></li><li class="sidebar-item__anchor" title="通用资源类型 "><a class="" href="/guides/asset-modules/#general-asset-type">通用资源类型 </a></li><li class="sidebar-item__anchor" title="变更内联 loader 的语法 "><a class="" href="/guides/asset-modules/#replacing-inline-loader-syntax">变更内联 loader 的语法 </a></li><li class="sidebar-item__anchor" title="Disable emitting assets"><a class="" href="/guides/asset-modules/#Disable-emitting-assets">Disable emitting assets</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/guides/entry-advanced/">entry 高级用法</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="每个入口使用多种文件类型 "><a class="" href="/guides/entry-advanced/#multiple-file-types-per-entry">每个入口使用多种文件类型 </a></li></ul></div></div><div><div class="sidebar-item sidebar-item--open "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a aria-current="page" class="sidebar-item__title active" href="/guides/package-exports/">Package exports</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="General syntax"><a aria-current="page" class="active" href="/guides/package-exports/#General-syntax">General syntax</a></li><li class="sidebar-item__anchor" title="Alternatives"><a aria-current="page" class="active" href="/guides/package-exports/#Alternatives">Alternatives</a></li><li class="sidebar-item__anchor" title="Conditional syntax"><a aria-current="page" class="active" href="/guides/package-exports/#Conditional-syntax">Conditional syntax</a></li><li class="sidebar-item__anchor" title="Abbreviation"><a aria-current="page" class="active" href="/guides/package-exports/#Abbreviation">Abbreviation</a></li><li class="sidebar-item__anchor" title="Notes about ordering"><a aria-current="page" class="active" href="/guides/package-exports/#Notes-about-ordering">Notes about ordering</a></li><li class="sidebar-item__anchor" title="Support"><a aria-current="page" class="active" href="/guides/package-exports/#Support">Support</a></li><li class="sidebar-item__anchor" title="Conditions"><a aria-current="page" class="active" href="/guides/package-exports/#Conditions">Conditions</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Reference syntax"><a aria-current="page" class="active" href="/guides/package-exports/#Reference-syntax">Reference syntax</a></li><li class="sidebar-item__anchor" title="Optimizations"><a aria-current="page" class="active" href="/guides/package-exports/#Optimizations">Optimizations</a></li><li class="sidebar-item__anchor" title="Target environment"><a aria-current="page" class="active" href="/guides/package-exports/#Target-environment">Target environment</a></li><li class="sidebar-item__anchor" title="Conditions: Preprocessor and runtimes"><a aria-current="page" class="active" href="/guides/package-exports/#Conditions-Preprocessor-and-runtimes">Conditions: Preprocessor and runtimes</a></li><li class="sidebar-item__anchor" title="Conditions: Custom"><a aria-current="page" class="active" href="/guides/package-exports/#Conditions-Custom">Conditions: Custom</a></li></ul></li><li class="sidebar-item__anchor" title="Common patterns"><a aria-current="page" class="active" href="/guides/package-exports/#Common-patterns">Common patterns</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Target environment independent packages"><a aria-current="page" class="active" href="/guides/package-exports/#Target-environment-independent-packages">Target environment independent packages</a></li><li class="sidebar-item__anchor" title="Providing devtools or production optimizations"><a aria-current="page" class="active" href="/guides/package-exports/#Providing-devtools-or-production-optimizations">Providing devtools or production optimizations</a></li><li class="sidebar-item__anchor" title="Providing different versions depending on target environment"><a aria-current="page" class="active" href="/guides/package-exports/#Providing-different-versions-depending-on-target-environment">Providing different versions depending on target environment</a></li><li class="sidebar-item__anchor" title="Combining patterns"><a aria-current="page" class="active" href="/guides/package-exports/#Combining-patterns">Combining patterns</a></li></ul></li><li class="sidebar-item__anchor" title="Guidelines"><a aria-current="page" class="active" href="/guides/package-exports/#Guidelines">Guidelines</a></li></ul></div></div></div></nav><section class="page"><div class="markdown"><h1>Package exports</h1><div id="md-content"><p>The <code>exports</code> field in the <code>package.json</code> of a package allows to declare
which module should be used when using module requests like <code>import &quot;package&quot;</code> or <code>import &quot;package/sub/path&quot;</code>.
It replaces the default implementation that returns <code>main</code> field resp. <code>index.js</code> files for <code>&quot;package&quot;</code> and
the file system lookup for <code>&quot;package/sub/path&quot;</code>.</p><p>When the <code>exports</code> field is specified, only these module requests are available.
Any other requests will lead to a ModuleNotFound Error.</p><h2><span id="General-syntax"></span>General syntax<a href="#General-syntax" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>In general the <code>exports</code> field should contain an object
where each properties specifies a sub path of the module request.
For the examples above the following properties could be used:
<code>&quot;.&quot;</code> for <code>import &quot;package&quot;</code> and <code>&quot;./sub/path&quot;</code> for <code>import &quot;package/sub/path&quot;</code>.
Properties ending with a <code>/</code> will forward a request with this prefix to the old file system lookup algorithm.
For properties ending with <code>*</code>, <code>*</code> may take any value and any <code>*</code> in the property value is replaced with the taken value.</p><p>An example:</p><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;.&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./main.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;./sub/path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./secondary.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;./prefix/&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./directory/&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;./prefix/deep/&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./other-directory/&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;./other-prefix/*&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./yet-another/*/*.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><table><thead><tr><th>Module request</th><th>Result</th></tr></thead><tbody><tr><td data-th="Module request"><span><code>package</code></span></td><td data-th="Result"><span><code>.../package/main.js</code></span></td></tr><tr><td data-th="Module request"><span><code>package/sub/path</code></span></td><td data-th="Result"><span><code>.../package/secondary.js</code></span></td></tr><tr><td data-th="Module request"><span><code>package/prefix/some/file.js</code></span></td><td data-th="Result"><span><code>.../package/directory/some/file.js</code></span></td></tr><tr><td data-th="Module request"><span><code>package/prefix/deep/file.js</code></span></td><td data-th="Result"><span><code>.../package/other-directory/file.js</code></span></td></tr><tr><td data-th="Module request"><span><code>package/other-prefix/deep/file.js</code></span></td><td data-th="Result"><span><code>.../package/yet-another/deep/file/deep/file.js</code></span></td></tr><tr><td data-th="Module request"><span><code>package/main.js</code></span></td><td data-th="Result"><span>Error</span></td></tr></tbody></table><h2><span id="Alternatives"></span>Alternatives<a href="#Alternatives" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Instead of providing a single result, the package author may provide a list of results.
In such a scenario this list is tried in order and the first valid result will be used.</p><p>Note: Only the first valid result will be used, not all valid results.</p><p>Example:</p><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;./things/&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./good-things/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./bad-things/&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Here <code>package/things/apple</code> might be found in <code>.../package/good-things/apple</code> or in <code>.../package/bad-things/apple</code>.</p><h2><span id="Conditional-syntax"></span>Conditional syntax<a href="#Conditional-syntax" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>Instead of providing results directly in the <code>exports</code> field,
the package author may let the module system choose one based on conditions about the environment.</p><p>In this case an object mapping conditions to results should be used.
Conditions are tried in object order.
Conditions that contain invalid results are skipped.
Conditions might be nested to create a logical AND.
The last condition in the object might be the special <code>&quot;default&quot;</code> condition,
which is always matched.</p><p>Example:</p><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;.&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;red&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./stop.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;yellow&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./stop.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;green&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;free&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./drive.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wait.js&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./drive-carefully.js&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>This translates to something like:</p><pre><code class="hljs language-ts"><span class="token keyword">if</span> <span class="token punctuation">(</span>red <span class="token operator">&amp;&amp;</span> <span class="token function">valid</span><span class="token punctuation">(</span><span class="token string">&#x27;./stop.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&#x27;./stop.js&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>yellow <span class="token operator">&amp;&amp;</span> <span class="token function">valid</span><span class="token punctuation">(</span><span class="token string">&#x27;./stop.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&#x27;./stop.js&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>green<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>free <span class="token operator">&amp;&amp;</span> <span class="token function">valid</span><span class="token punctuation">(</span><span class="token string">&#x27;./drive.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&#x27;./drive.js&#x27;</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">valid</span><span class="token punctuation">(</span><span class="token string">&#x27;./wait.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&#x27;./wait.js&#x27;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">valid</span><span class="token punctuation">(</span><span class="token string">&#x27;./drive-carefully.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&#x27;./drive-carefully.js&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ModuleNotFoundError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The available conditions vary depending on the module system and tool used.</p><h2><span id="Abbreviation"></span>Abbreviation<a href="#Abbreviation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>When only a single entry (<code>&quot;.&quot;</code>) into the package should be supported the <code>{ &quot;.&quot;: ... }</code> object nesting can be omitted:</p><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.mjs&quot;</span>
<span class="token punctuation">}</span></code></pre><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;red&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./stop.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;green&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./drive.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><h2><span id="Notes-about-ordering"></span>Notes about ordering<a href="#Notes-about-ordering" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>In an object where each key is a condition, order of properties is significant. Conditions are handled in the order they are specified.</p><p>Example: <code>{ &quot;red&quot;: &quot;./stop.js&quot;, &quot;green&quot;: &quot;./drive.js&quot; }</code> != <code>{ &quot;green&quot;: &quot;./drive.js&quot;, &quot;red&quot;: &quot;./stop.js&quot; }</code> (when both <code>red</code> and <code>green</code> conditions are set, first property will be used)</p><p>In an object where each key is a subpath, order of properties (subpaths) is not significant. More specific paths are preferred over less specific ones.</p><p>Example: <code>{ &quot;./a/&quot;: &quot;./x/&quot;, &quot;./a/b/&quot;: &quot;./y/&quot;, &quot;./a/b/c&quot;: &quot;./z&quot; }</code> == <code>{ &quot;./a/b/c&quot;: &quot;./z&quot;, &quot;./a/b/&quot;: &quot;./y/&quot;, &quot;./a/&quot;: &quot;./x/&quot; }</code> (order will always be: <code>./a/b/c</code> &gt; <code>./a/b/</code> &gt; <code>./a/</code>)</p><p><code>exports</code> field is preferred over other package entry fields like <code>main</code>, <code>module</code>, <code>browser</code> or custom ones.</p><h2><span id="Support"></span>Support<a href="#Support" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><table><thead><tr><th>Feature</th><th>Supported by</th></tr></thead><tbody><tr><td data-th="Feature"><span><code>&quot;.&quot;</code> property</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall, wmr</span></td></tr><tr><td data-th="Feature"><span>normal property</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall, wmr</span></td></tr><tr><td data-th="Feature"><span>property ending with <code>/</code></span></td><td data-th="Supported by"><span>Node.js<sup>(1)</sup>, webpack, rollup, esinstall<sup>(2)</sup>, wmr<sup>(3)</sup></span></td></tr><tr><td data-th="Feature"><span>property ending with <code>*</code></span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall</span></td></tr><tr><td data-th="Feature"><span>Alternatives</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, <strike>esinstall</strike><sup>(4)</sup></span></td></tr><tr><td data-th="Feature"><span>Abbreviation only path</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall, wmr</span></td></tr><tr><td data-th="Feature"><span>Abbreviation only conditions</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall, wmr</span></td></tr><tr><td data-th="Feature"><span>Conditional syntax</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall, wmr</span></td></tr><tr><td data-th="Feature"><span>Nested conditional syntax</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, wmr<sup>(5)</sup></span></td></tr><tr><td data-th="Feature"><span>Conditions Order</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, wmr<sup>(6)</sup></span></td></tr><tr><td data-th="Feature"><span><code>&quot;default&quot;</code> condition</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall, wmr</span></td></tr><tr><td data-th="Feature"><span>Path Order</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup</span></td></tr><tr><td data-th="Feature"><span>Error when not mapped</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall, wmr<sup>(7)</sup></span></td></tr><tr><td data-th="Feature"><span>Error when mixing conditions and paths</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup</span></td></tr></tbody></table><p>(1) deprecated in Node.js, <code>*</code> should be preferred.</p><p>(2) <code>&quot;./&quot;</code> is intentionally ignored as key.</p><p>(3) The property value is ignored and property key is used as target. Effectively only allowing mappings with key and value are identical.</p><p>(4) The syntax is supported, but always the first entry is used, which makes it unusable for any practical use case.</p><p>(5) Fallback to alternative sibling parent conditions is handling incorrectly.</p><p>(6) For the <code>require</code> condition object order is handled incorrectly. This is intentionally as wmr doesn&#x27;t differ between referencing syntax.</p><p>(7) When using <code>&quot;exports&quot;: &quot;./file.js&quot;</code> abbreviation, any request e. g. <code>package/not-existing</code> will resolve to that. When not using the abbreviation, direct file access e. g. <code>package/file.js</code> will not lead to an error.</p><h2><span id="Conditions"></span>Conditions<a href="#Conditions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><h3><span id="Reference-syntax"></span>Reference syntax<a href="#Reference-syntax" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>One of these conditions is set depending on the syntax used to reference the module:</p><table><thead><tr><th>Condition</th><th>Description</th><th>Supported by</th></tr></thead><tbody><tr><td data-th="Condition"><span><code>import</code></span></td><td data-th="Description"><span>Request is issued from ESM syntax or similar.</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall<sup>(1)</sup>, wmr<sup>(1)</sup></span></td></tr><tr><td data-th="Condition"><span><code>require</code></span></td><td data-th="Description"><span>Request is issued from CommonJs/AMD syntax or similar.</span></td><td data-th="Supported by"><span>Node.js, webpack, rollup, esinstall<sup>(1)</sup>, wmr<sup>(1)</sup></span></td></tr><tr><td data-th="Condition"><span><code>style</code></span></td><td data-th="Description"><span>Request is issued from a stylesheet reference.</span></td><td></td></tr><tr><td data-th="Condition"><span><code>sass</code></span></td><td data-th="Description"><span>Request is issued from a sass stylesheet reference.</span></td><td></td></tr><tr><td data-th="Condition"><span><code>asset</code></span></td><td data-th="Description"><span>Request is issued from a asset reference.</span></td><td></td></tr><tr><td data-th="Condition"><span><code>script</code></span></td><td data-th="Description"><span>Request is issued from a normal script tag without module system.</span></td><td></td></tr></tbody></table><p>These conditions might also be set additionally:</p><table><thead><tr><th>Condition</th><th>Description</th><th>Supported by</th></tr></thead><tbody><tr><td data-th="Condition"><span><code>module</code></span></td><td data-th="Description"><span>All module syntax that allows to reference javascript supports ESM.<br/>(only combined with <code>import</code> or <code>require</code>)</span></td><td data-th="Supported by"><span>webpack, rollup, wmr</span></td></tr><tr><td data-th="Condition"><span><code>esmodules</code></span></td><td data-th="Description"><span>Always set by supported tools.</span></td><td data-th="Supported by"><span>wmr</span></td></tr><tr><td data-th="Condition"><span><code>types</code></span></td><td data-th="Description"><span>Request is issued from typescript that is interested in type declarations.</span></td><td></td></tr></tbody></table><p>(1) <code>import</code> and <code>require</code> are both set independent of referencing syntax. <code>require</code> has always lower priority.</p><h4><span id="import"></span>import<a href="#import" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>The following syntax will set the <code>import</code> condition:</p><ul><li>ESM <code>import</code> declarations in ESM</li><li>JS <code>import()</code> expression</li><li>HTML <code>&lt;script type=&quot;module&quot;&gt;</code> in HTML</li><li>HTML <code>&lt;link rel=&quot;preload/prefetch&quot;&gt;</code> in HTML</li><li>JS <code>new Worker(..., { type: &quot;module&quot; })</code></li><li>WASM <code>import</code> section</li><li>ESM HMR (webpack) <code>import.hot.accept/decline([...])</code></li><li>JS <code>Worklet.addModule</code></li><li>Using javascript as entrypoint</li></ul><h4><span id="require"></span>require<a href="#require" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>The following syntax will set the <code>require</code> condition:</p><ul><li>CommonJs <code>require(...)</code></li><li>AMD <code>define()</code></li><li>AMD <code>require([...])</code></li><li>CommonJs <code>require.resolve()</code></li><li>CommonJs (webpack) <code>require.ensure([...])</code></li><li>CommonJs (webpack) <code>require.context</code></li><li>CommonJs HMR (webpack) <code>module.hot.accept/decline([...])</code></li><li>HTML <code>&lt;script src=&quot;...&quot;&gt;</code></li></ul><h4><span id="style"></span>style<a href="#style" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>The following syntax will set the <code>style</code> condition:</p><ul><li>CSS <code>@import</code></li><li>HTML <code>&lt;link rel=&quot;stylesheet&quot;&gt;</code></li></ul><h4><span id="asset"></span>asset<a href="#asset" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>The following syntax will set the <code>asset</code> condition:</p><ul><li>CSS <code>url()</code></li><li>ESM <code>new URL(..., import.meta.url)</code></li><li>HTML <code>&lt;img src=&quot;...&quot;&gt;</code></li></ul><h4><span id="script"></span>script<a href="#script" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>The following syntax will set the <code>script</code> condition:</p><ul><li>HTML <code>&lt;script src=&quot;...&quot;&gt;</code></li></ul><p><code>script</code> should only be set when no module system is supported.
When the script is preprocessed by a system supporting CommonJs
it should set <code>require</code> instead.</p><p>This condition should be used when looking for a javascript file that can be injected
as script tag in a HTML page without additional preprocessing.</p><h3><span id="Optimizations"></span>Optimizations<a href="#Optimizations" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>The following conditions are set for various optimizations:</p><table><thead><tr><th>Condition</th><th>Description</th><th>Supported by</th></tr></thead><tbody><tr><td data-th="Condition"><span><code>production</code></span></td><td data-th="Description"><span>In a production environment.<br/>No devtooling should be included.</span></td><td data-th="Supported by"><span>webpack</span></td></tr><tr><td data-th="Condition"><span><code>development</code></span></td><td data-th="Description"><span>In a development environment.<br/>Devtooling should be included.</span></td><td data-th="Supported by"><span>webpack</span></td></tr></tbody></table><p>Note: Since <code>production</code> and <code>development</code> is not supported by everyone, no assumption should be made when none of these is set.</p><h3><span id="Target-environment"></span>Target environment<a href="#Target-environment" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>The following conditions are set depending on the target environment:</p><table><thead><tr><th>Condition</th><th>Description</th><th>Supported by</th></tr></thead><tbody><tr><td data-th="Condition"><span><code>browser</code></span></td><td data-th="Description"><span>Code will run in a browser.</span></td><td data-th="Supported by"><span>webpack, esinstall, wmr</span></td></tr><tr><td data-th="Condition"><span><code>electron</code></span></td><td data-th="Description"><span>Code will run in electron.<sup>(1)</sup></span></td><td data-th="Supported by"><span>webpack</span></td></tr><tr><td data-th="Condition"><span><code>worker</code></span></td><td data-th="Description"><span>Code will run in a (Web)Worker.<sup>(1)</sup></span></td><td data-th="Supported by"><span>webpack</span></td></tr><tr><td data-th="Condition"><span><code>worklet</code></span></td><td data-th="Description"><span>Code will run in a Worklet.<sup>(1)</sup></span></td><td data-th="Supported by"><span>-</span></td></tr><tr><td data-th="Condition"><span><code>node</code></span></td><td data-th="Description"><span>Code will run in Node.js.</span></td><td data-th="Supported by"><span>Node.js, webpack, wmr<sup>(2)</sup></span></td></tr><tr><td data-th="Condition"><span><code>deno</code></span></td><td data-th="Description"><span>Code will run in Deno.</span></td><td data-th="Supported by"><span>-</span></td></tr><tr><td data-th="Condition"><span><code>react-native</code></span></td><td data-th="Description"><span>Code will run in react-native.</span></td><td data-th="Supported by"><span>-</span></td></tr></tbody></table><p>(1) <code>electron</code>, <code>worker</code> and <code>worklet</code> comes combined with either <code>node</code> or <code>browser</code>, depending on the context.</p><p>(2) This is set for browser target environment.</p><p>Since there are multiple versions of each environment the following guidelines apply:</p><ul><li><code>node</code>: See <code>engines</code> field for compatibility.</li><li><code>browser</code>: Compatible with current Spec and stage 4 proposals at time of publishing the package. Polyfilling resp. transpiling must be handled on consumer side.<ul><li>Features that are not possible to polyfill or transpile should be used carefully as it limits the possible usage.</li></ul></li><li><code>deno</code>: TBD</li><li><code>react-native</code>: TBD</li></ul><h3><span id="Conditions-Preprocessor-and-runtimes"></span>Conditions: Preprocessor and runtimes<a href="#Conditions-Preprocessor-and-runtimes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>The following conditions are set depending on which tool preprocesses the source code.</p><table><thead><tr><th>Condition</th><th>Description</th><th>Supported by</th></tr></thead><tbody><tr><td data-th="Condition"><span><code>webpack</code></span></td><td data-th="Description"><span>Processed by webpack.</span></td><td data-th="Supported by"><span>webpack</span></td></tr></tbody></table><p>Sadly there is no <code>node-js</code> condition for Node.js as runtime.
This would simplify creating exceptions for Node.js.</p><h3><span id="Conditions-Custom"></span>Conditions: Custom<a href="#Conditions-Custom" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>The following tools support custom conditions:</p><table><thead><tr><th>Tool</th><th>Supported</th><th>Notes</th></tr></thead><tbody><tr><td data-th="Tool"><span>Node.js</span></td><td data-th="Supported"><span>yes</span></td><td data-th="Notes"><span>Use <a href="https://nodejs.org/api/cli.html#cli_c_condition_conditions_condition"><code>--conditions</code></a> CLI argument.</span></td></tr><tr><td data-th="Tool"><span>webpack</span></td><td data-th="Supported"><span>yes</span></td><td data-th="Notes"><span>Use <a href="/configuration/resolve/#resolveconditionnames"><code>resolve.conditionNames</code></a> configuration option.</span></td></tr><tr><td data-th="Tool"><span>rollup</span></td><td data-th="Supported"><span>yes</span></td><td data-th="Notes"><span>Use <code>exportConditions</code> option for <code>@rollup/plugin-node-resolve</code></span></td></tr><tr><td data-th="Tool"><span>esinstall</span></td><td data-th="Supported"><span>no</span></td><td></td></tr><tr><td data-th="Tool"><span>wmr</span></td><td data-th="Supported"><span>no</span></td><td></td></tr></tbody></table><p>For custom conditions the following naming schema is recommended:</p><p><code>&lt;company-name&gt;:&lt;condition-name&gt;</code></p><p>Examples: <code>example-corp:beta</code>, <code>google:internal</code>.</p><h2><span id="Common-patterns"></span>Common patterns<a href="#Common-patterns" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>All patterns are explained with a single <code>&quot;.&quot;</code> entry into the package, but they can be extended from multiple entries too, by repeating the pattern for each entry.</p><p>These pattern should be used as guide not as strict ruleset.
They can be adapted to the individual packages.</p><p>These pattern are based on the following list of goals/assumptions:</p><ul><li>Packages are rotting.<ul><li>We assume at some point packages are no longer being maintained, but they are continued to be used.</li><li><code>exports</code> should be written to use fallbacks for unknown future cases. <code>default</code> condition can be used for that.</li><li>As the future is unknown we assume an environment similar to browsers and module system similar to ESM.</li></ul></li><li>Not all conditions are supported by every tool.<ul><li>Fallbacks should be used to handled these cases.</li><li>We assume the following fallback make sense in general:<ul><li>ESM &gt; CommonJs</li><li>Production &gt; Development</li><li>Browser &gt; node.js</li></ul></li></ul></li></ul><p>Depending on the package intention maybe something else makes sense and in this case the patterns should be adopted to that. Example: For a command line tool a browser-like future and fallback doesn&#x27;t make a lot of sense, and in this case node.js-like environments and fallbacks should be used instead.</p><p>For complex use cases multiple patterns need to be combined by nesting these conditions.</p><h3><span id="Target-environment-independent-packages"></span>Target environment independent packages<a href="#Target-environment-independent-packages" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>These patterns make sense for packages that do not use environment specific APIs.</p><h4><span id="Providing-only-an-ESM-version"></span>Providing only an ESM version<a href="#Providing-only-an-ESM-version" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span>
<span class="token punctuation">}</span></code></pre><p>Note: Providing only a ESM comes with restrictions for node.js.
Such a package would only work in Node.js &gt;= 14 and only when using <code>import</code>.
It won&#x27;t work with <code>require()</code>.</p><h4><span id="Providing-CommonJs-and-ESM-version-stateless"></span>Providing CommonJs and ESM version (stateless)<a href="#Providing-CommonJs-and-ESM-version-stateless" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.cjs&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Most tools get the ESM version.
Node.js is an exception here.
It gets a CommonJs version when using <code>require()</code>.
This will lead to two instances of these package when referencing it with <code>require()</code> and <code>import</code>, but that doesn&#x27;t hurt as the package doesn&#x27;t have state.</p><p>The <code>module</code> condition is used as optimization when preprocessing node-targeted code with a tool that supports ESM for <code>require()</code> (like a bundler, when bundling for Node.js).
For such a tool the exception is skipped.
This is technically optional, but bundlers would include the package source code twice otherwise.</p><p>You can also use the stateless pattern if you are able to isolate your package state in JSON files.
JSON is consumable from CommonJs and ESM without polluting the graph with the other module system.</p><p>Note that here stateless also means class instances are not tested with <code>instanceof</code> as there can be two different classes because of the double module instantiation.</p><h4><span id="Providing-CommonJs-and-ESM-version-stateful"></span>Providing CommonJs and ESM version (stateful)<a href="#Providing-CommonJs-and-ESM-version-stateful" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.cjs&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><pre><code class="hljs language-js"><span class="token comment">// wrapper.js</span>
<span class="token keyword">import</span> cjs <span class="token keyword">from</span> <span class="token string">&#x27;./index.cjs&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">A</span> <span class="token operator">=</span> cjs<span class="token punctuation">.</span><span class="token constant">A</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">B</span> <span class="token operator">=</span> cjs<span class="token punctuation">.</span><span class="token constant">B</span><span class="token punctuation">;</span></code></pre><p>In a stateful package we must ensure that the package is never instantiated twice.</p><p>This isn&#x27;t a problem for most tools, but Node.js is again an exception here.
For Node.js we always use the CommonJs version and expose named exports in the ESM with a ESM wrapper.</p><p>We use the <code>module</code> condition as optimization again.</p><h4><span id="Providing-only-a-CommonJs-version"></span>Providing only a CommonJs version<a href="#Providing-only-a-CommonJs-version" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span>
<span class="token punctuation">}</span></code></pre><p>Providing <code>&quot;type&quot;: &quot;commonjs&quot;</code> helps to statically detect CommonJs files.</p><h4><span id="Providing-a-bundled-script-version-for-direct-browser-consumption"></span>Providing a bundled script version for direct browser consumption<a href="#Providing-a-bundled-script-version-for-direct-browser-consumption" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist-bundle.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Note that despite using <code>&quot;type&quot;: &quot;module&quot;</code> and <code>.js</code> for <code>dist-bundle.js</code> this file is not in ESM format.
It should use globals to allow direct consumption as script tag.</p><h3><span id="Providing-devtools-or-production-optimizations"></span>Providing devtools or production optimizations<a href="#Providing-devtools-or-production-optimizations" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>These patterns make sense when a package contains two versions, one for development and one for production.
E. g. the development version could include additional code for better error message or additional warnings.</p><h4><span id="Without-Nodejs-runtime-detection"></span>Without Node.js runtime detection<a href="#Without-Nodejs-runtime-detection" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-with-devtools.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>When the <code>development</code> condition is supported we use the version enhanced for development.
Otherwise, in production or when mode is unknown, we use the optimized version.</p><h4><span id="With-Nodejs-runtime-detection"></span>With Node.js runtime detection<a href="#With-Nodejs-runtime-detection" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-with-devtools.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-process-env.cjs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><pre><code class="hljs language-js"><span class="token comment">// wrapper-process-env.cjs</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">&#x27;development&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./index-optimized.cjs&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./index-with-devtools.cjs&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>We prefer static detection of production/development mode via the <code>production</code> or <code>development</code> condition.</p><p>Node.js allows to detection production/development mode at runtime via <code>process.env.NODE_ENV</code>, so we use that as fallback in Node.js. Sync conditional importing ESM is not possible and we don&#x27;t want to load the package twice, so we have to use CommonJs for the runtime detection.</p><p>When it&#x27;s not possible to detect mode we fallback to the production version.</p><h3><span id="Providing-different-versions-depending-on-target-environment"></span>Providing different versions depending on target environment<a href="#Providing-different-versions-depending-on-target-environment" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>A fallback environment should be chosen that makes sense for the package to support future environments.
In general a browser-like environment should be assumed.</p><h4><span id="Providing-Nodejs-WebWorker-and-browser-versions"></span>Providing Node.js, WebWorker and browser versions<a href="#Providing-Nodejs-WebWorker-and-browser-versions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-node.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;worker&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-worker.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><h4><span id="Providing-Nodejs-browser-and-electron-versions"></span>Providing Node.js, browser and electron versions<a href="#Providing-Nodejs-browser-and-electron-versions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;electron&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron-node.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-node.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><h3><span id="Combining-patterns"></span>Combining patterns<a href="#Combining-patterns" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><h4><span id="Example-1"></span>Example 1<a href="#Example-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>This is an example for a package that has optimizations for production and development usage with runtime detection for <code>process.env</code> and also ships a CommonJs and ESM version</p><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-with-devtools.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-with-devtools.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-with-devtools.cjs&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-optimized.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.cjs&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-process-env.cjs&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-with-devtools.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><h4><span id="Example-2"></span>Example 2<a href="#Example-2" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>This is an example for a package that supports Node.js, browser and electron, has optimizations for production and development usage with runtime detection for <code>process.env</code> and also ships a CommonJs and ESM version.</p><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;electron&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron-node-with-devtools.js&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-electron-node-with-devtools.js&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron-node-with-devtools.cjs&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron-node-optimized.js&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-electron-node-optimized.js&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron-node-optimized.cjs&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-electron-node-process-env.cjs&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron-with-devtools.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron-optimized.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-electron-optimized.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-node-with-devtools.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-node-with-devtools.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-node-with-devtools.cjs&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-node-optimized.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-node-optimized.js&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-node-optimized.cjs&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./wrapper-node-process-env.cjs&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-with-devtools.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-optimized.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Looks complex, yes. We were already able to reduce some complexity due to a assumption we can make: Only <code>node</code> need a CommonJs version and can detect production/development with <code>process.env</code>.</p><h2><span id="Guidelines"></span>Guidelines<a href="#Guidelines" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><ul><li>Avoid the <code>default</code> export. It&#x27;s handled differently between tooling. Only use named exports.</li><li>Never provide different APIs or semantics for different conditions.</li><li>Write your source code as ESM and transpile to CJS via babel, typescript or similar tools.</li><li>Either use <code>.cjs</code> or <code>type: &quot;commonjs&quot;</code> in package.json to clearly mark source code as CommonJs. This makes it statically detectable for tools if CommonJs or ESM is used. This is important for tools that only support ESM and no CommonJs.</li><li>ESM used in packages support the following types of requests:<ul><li>module requests are supported, pointing to other packages with a package.json.</li><li>relative requests are supported, pointing to other files within the package.<ul><li>They must not point to files outside of the package.</li></ul></li><li><code>data:</code> url requests are supported.</li><li>other absolute or server-relative requests are not supported by default, but they might be supported by some tools or environments.</li></ul></li></ul></div><div class="print:hidden"><h2>延伸阅读</h2><ul><li><a href="https://nodejs.org/api/packages.html#packages_package_entry_points" target="_blank" rel="noopener noreferrer">Package entry points in Node.js</a></li></ul></div><div class="print:hidden mt-20"><a class="text-gray-500 dark:text-gray-500 text-sm cursor-pointer font-sans hover:underline" href="https://github.com/docschina/webpack.js.org/edit/cn/src/content/guides/package-exports.mdx">编辑此页</a><span class="mx-5 text-black font-bold dark:text-white">·</span><a class="text-gray-500 dark:text-gray-500 text-sm cursor-pointer font-sans hover:underline">打印文档</a></div><div class="adjacent-links print:hidden"><div class="adjacent-links__prev"><div>« Previous</div><a class="adjacent-links__link" href="/guides/entry-advanced/">entry 高级用法</a></div></div><div data-testid="contributors" class="print:hidden"><h2 class="!font-sans !font-normal">1<!-- --> <!-- -->位贡献者</h2><div><div class="grid gap-[10px] lg:gap-[15px] grid-cols-contributors"><a href="https://github.com/sokra"><img width="45" height="45" alt="sokra" title="sokra" class="w-full rounded-full shadow" src="/icon-square-small-slack.9281492bb267314634b4.png"/></a></div></div></div></div></section></div><footer class="footer"><div class="container footer__inner"><section class="footer__left"><a class="footer__link" href="/guides/getting-started/">快速开始</a><a class="footer__link" href="/comparison/">对比</a><a href="https://privacy-policy.openjsf.org/" target="_blank" rel="noopener noreferrer" class="footer__link">Privacy Policy</a></section><section class="footer__middle"><a class="footer__icon" href="/"><img src="/icon-square-small.85ba630cf0c5f29ae3e3.svg" alt="webpack icon" width="35" height="35"/></a></section><section class="footer__right"><a href="https://webpack.threadless.com/" target="_blank" rel="noopener noreferrer" class="footer__link">周边</a><a class="footer__link" href="/awesome-webpack/">Awesome webpack</a><a class="footer__link" href="/glossary/">术语</a><a class="footer__link" href="/branding/">品牌</a><a href="https://gitter.im/webpack/webpack" target="_blank" rel="noopener noreferrer" class="footer__link">Gitter</a><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener noreferrer" class="footer__link">更新日志</a><a class="footer__link footer__license" href="/license"><img alt="Creative Commons License" src="/cc.ab77d813bf219c6e34ff.svg" width="25" height="25"/><img alt="Creative Commons License" src="/by.1360bb2e6d1fc28cdd9e.svg" width="25" height="25"/></a></section></div></footer></div></div><script src="/vendor.e63a9c1308a47f528841.js"></script><script src="/index.70c3af1da6562bc9e3bf.js"></script><script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?f92e0e48311f635665d2de225751a349";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script></body>