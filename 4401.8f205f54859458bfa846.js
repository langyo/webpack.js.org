"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4401],{4401:function(a,e,t){t.r(e),t(7378);var n=t(2682);function p(){return p=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},p.apply(this,arguments)}function s(a){let{components:e,...t}=a;return(0,n.kt)("wrapper",p({components:e},t),(0,n.kt)("p",null,"可以通过配置 ",(0,n.kt)("inlineCode",{parentName:"p"},"output")," 选项，告知 webpack 如何向硬盘写入编译文件。注意，即使可以存在多个 ",(0,n.kt)("inlineCode",{parentName:"p"},"entry")," 起点，但只能指定一个 ",(0,n.kt)("inlineCode",{parentName:"p"},"output")," 配置。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"usage",parentName:"h2"}),"用法",(0,n.kt)("a",{href:"#usage","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"在 webpack 配置中，",(0,n.kt)("inlineCode",{parentName:"p"},"output")," 属性的最低要求是，将它的值设置为一个对象，然后为将输出文件的文件名配置为一个 ",(0,n.kt)("a",{href:"/configuration/output/#outputfilename",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.filename")),"："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    filename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'bundle.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"此配置将一个单独的 ",(0,n.kt)("inlineCode",{parentName:"p"},"bundle.js")," 文件输出到 ",(0,n.kt)("inlineCode",{parentName:"p"},"dist")," 目录中。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"multiple-entry-points",parentName:"h2"}),"多个入口起点",(0,n.kt)("a",{href:"#multiple-entry-points","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,'如果配置中创建出多于一个 "chunk"（例如，使用多个入口起点或使用像 CommonsChunkPlugin 这样的插件），则应该使用 ',(0,n.kt)("a",{href:"/configuration/output/#outputfilename",parentName:"p"},"占位符(substitutions)")," 来确保每个文件具有唯一的名称。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  entry",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    app",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./src/app.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    search",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./src/search.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    filename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'[name].js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    path",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," __dirname ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"+")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'/dist'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 写入到硬盘：./dist/app.js, ./dist/search.js"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"advanced",parentName:"h2"}),"高级进阶",(0,n.kt)("a",{href:"#advanced","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"以下是对资源使用 CDN 和 hash 的复杂示例："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    path",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'/home/proj/cdn/assets/[fullhash]'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    publicPath",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'https://cdn.example.com/assets/[fullhash]/'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"如果在编译时，不知道最终输出文件的 ",(0,n.kt)("inlineCode",{parentName:"p"},"publicPath")," 是什么地址，则可以将其留空，并且在运行时通过入口起点文件中的 ",(0,n.kt)("inlineCode",{parentName:"p"},"__webpack_public_path__")," 动态设置。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"__webpack_public_path__ ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," myRuntimePublicPath",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 应用程序入口的其余部分"))))}s.isMDXComponent=!0,e.default=s}}]);