"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6822],{6822:function(e,a,n){n.r(a),n(7378);var t=n(2682);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},p.apply(this,arguments)}const s=("Badge",e=>(console.warn("Component `%s` was not imported, exported, or provided by MDXProvider as global scope","Badge"),(0,t.kt)(t.kt.Fragment,null,e.children)));function o(e){let{components:a,...n}=e;return(0,t.kt)("wrapper",p({components:a},n),(0,t.kt)("h2",null,(0,t.kt)("span",{id:"cache",parentName:"h2"}),"cache",(0,t.kt)("a",{href:"#cache","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"boolean")," ",(0,t.kt)("inlineCode",{parentName:"p"},"object")),(0,t.kt)("p",null,"缓存生成的 webpack 模块和 chunk，来改善构建速度。",(0,t.kt)("inlineCode",{parentName:"p"},"cache")," 会在",(0,t.kt)("a",{href:"/configuration/mode/#mode-development",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"开发")," 模式"),"被设置成 ",(0,t.kt)("inlineCode",{parentName:"p"},"type: 'memory'")," 而且在 ",(0,t.kt)("a",{href:"/configuration/mode/#mode-production",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"生产")," 模式")," 中被禁用。 ",(0,t.kt)("inlineCode",{parentName:"p"},"cache: true")," 与 ",(0,t.kt)("inlineCode",{parentName:"p"},"cache: { type: 'memory' }")," 配置作用一致。 传入 ",(0,t.kt)("inlineCode",{parentName:"p"},"false")," 会禁用缓存:"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token boolean",parentName:"code"},"false"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("p",null,"当将 ",(0,t.kt)("inlineCode",{parentName:"p"},"cache.type")," 设置为 ",(0,t.kt)("inlineCode",{parentName:"p"},"'filesystem'")," 是会开放更多的可配置项。"),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cacheallowcollectingmemory",parentName:"h3"}),"cache.allowCollectingMemory",(0,t.kt)("a",{href:"#cacheallowcollectingmemory","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,"收集在反序列化期间分配的未使用的内存，仅当 ",(0,t.kt)("a",{href:"#cachetype",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"cache.type"))," 设置为 ",(0,t.kt)("inlineCode",{parentName:"p"},"'filesystem'")," 时生效。这需要将数据复制到更小的缓冲区中，并有性能成本。"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Type: ",(0,t.kt)("inlineCode",{parentName:"li"},"boolean"),(0,t.kt)("ul",{parentName:"li"},(0,t.kt)("li",{parentName:"ul"},"It defaults to ",(0,t.kt)("inlineCode",{parentName:"li"},"false")," in production mode and ",(0,t.kt)("inlineCode",{parentName:"li"},"true")," in development mode."))),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)(s,{text:"5.35.0+",parentName:"li",mdxType:"Badge"}))),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'filesystem'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    allowCollectingMemory",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cachebuilddependencies",parentName:"h3"}),"cache.buildDependencies",(0,t.kt)("a",{href:"#cachebuilddependencies","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"object")),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"cache.buildDependencies")," 是一个针对构建的额外代码依赖的数组对象。webpack 将使用这些项和所有依赖项的哈希值来使文件系统缓存失效。"),(0,t.kt)("p",null,"默认是 ",(0,t.kt)("inlineCode",{parentName:"p"},"webpack/lib")," 来获取 webpack 的所有依赖项。"),(0,t.kt)("aside",{className:"tip"},(0,t.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,t.kt)("p",{parentName:"aside"},"推荐在 webpack 配置中设置 ",(0,t.kt)("inlineCode",{parentName:"p"},"cache.buildDependencies.config: [__filename]")," 来获取最新配置以及所有依赖项。")),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    buildDependencies",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"// This makes all dependencies of this file - build dependencies"),"\n      config",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"["),"__filename",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"// 默认情况下 webpack 与 loader 是构建依赖。"),"\n    ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cachecachedirectory",parentName:"h3"}),"cache.cacheDirectory",(0,t.kt)("a",{href:"#cachecachedirectory","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"string")),(0,t.kt)("p",null,"缓存的。默认为 ",(0,t.kt)("inlineCode",{parentName:"p"},"node_modules/.cache/webpack"),"。"),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"cache.cacheDirectory")," 选项仅当 ",(0,t.kt)("a",{href:"#cachetype",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"cache.type"))," 被设置成 ",(0,t.kt)("inlineCode",{parentName:"p"},"'filesystem'")," 才可用。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,t.kt)("span",{className:"token keyword",parentName:"code"},"const")," path ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token function",parentName:"code"},"require"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.kt)("span",{className:"token string",parentName:"code"},"'path'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\nmodule",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'filesystem'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    cacheDirectory",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," path",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.kt)("span",{className:"token function",parentName:"code"},"resolve"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"("),"__dirname",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'.temp_cache'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("aside",{className:"warning"},(0,t.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,t.kt)("p",{parentName:"aside"},"最终的缓存目标是 ",(0,t.kt)("inlineCode",{parentName:"p"},"cache.cacheDirectory")," + ",(0,t.kt)("inlineCode",{parentName:"p"},"cache.name")," 的混合。")),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cachecachelocation",parentName:"h3"}),"cache.cacheLocation",(0,t.kt)("a",{href:"#cachecachelocation","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"string")),(0,t.kt)("p",null,"缓存的路径。默认值为 ",(0,t.kt)("inlineCode",{parentName:"p"},"path.resolve(cache.cacheDirectory, cache.name)"),"."),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,t.kt)("span",{className:"token keyword",parentName:"code"},"const")," path ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token function",parentName:"code"},"require"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,t.kt)("span",{className:"token string",parentName:"code"},"'path'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\nmodule",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'filesystem'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    cacheLocation",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," path",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,t.kt)("span",{className:"token function",parentName:"code"},"resolve"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"("),"__dirname",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'.test_cache'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cachecacheunaffected",parentName:"h3"}),"cache.cacheUnaffected",(0,t.kt)("a",{href:"#cachecacheunaffected","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,"对未改变的模块进行缓存计算，只引用未改变的模块。它只能在 ",(0,t.kt)("a",{href:"#cachetype",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"cache.type"))," 值为 ",(0,t.kt)("inlineCode",{parentName:"p"},"'memory'")," 时使用，除此之外，必须启用 ",(0,t.kt)("a",{href:"/configuration/experiments/#experimentscacheunaffected",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"experiments.cacheUnaffected"))," 配置项。"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"类型：",(0,t.kt)("inlineCode",{parentName:"li"},"boolean")),(0,t.kt)("li",{parentName:"ul"},"v5.54.0+")),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'memory'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    cacheUnaffected",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cachecompression",parentName:"h3"}),"cache.compression",(0,t.kt)("a",{href:"#cachecompression","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"false | 'gzip' | 'brotli'")),(0,t.kt)(s,{text:"5.42.0+",mdxType:"Badge"}),(0,t.kt)("p",null,"用于缓存文件的压缩类型。",(0,t.kt)("inlineCode",{parentName:"p"},"development")," 模式下默认为 ",(0,t.kt)("inlineCode",{parentName:"p"},"false"),"，",(0,t.kt)("inlineCode",{parentName:"p"},"production")," 模式下默认为 ",(0,t.kt)("inlineCode",{parentName:"p"},"'gzip'"),"。"),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"cache.compression")," 配置项仅在 ",(0,t.kt)("a",{href:"#cachetype",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"cache.type"))," 设为 ",(0,t.kt)("inlineCode",{parentName:"p"},"'filesystem'")," 时可用。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'filesystem'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    compression",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'gzip'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cachehashalgorithm",parentName:"h3"}),"cache.hashAlgorithm",(0,t.kt)("a",{href:"#cachehashalgorithm","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"string")),(0,t.kt)("p",null,"用于哈希生成的算法。详情请参阅 ",(0,t.kt)("a",{href:"https://nodejs.org/api/crypto.html",parentName:"p"},"Node.js crypto"),"。默认值为 ",(0,t.kt)("inlineCode",{parentName:"p"},"md4"),"."),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"cache.hashAlgorithm")," 选项仅当 ",(0,t.kt)("a",{href:"#cachetype",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"cache.type"))," 设置成 ",(0,t.kt)("inlineCode",{parentName:"p"},"'filesystem'")," 才可配置。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'filesystem'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    hashAlgorithm",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'md4'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cacheidletimeout",parentName:"h3"}),"cache.idleTimeout",(0,t.kt)("a",{href:"#cacheidletimeout","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"number = 60000")),(0,t.kt)("p",null,"时间以毫秒为单位。",(0,t.kt)("inlineCode",{parentName:"p"},"cache.idleTimeout")," 表示缓存存储发生的时间间隔。"),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"cache.idleTimeout")," 配置项仅在 [",(0,t.kt)("inlineCode",{parentName:"p"},"cache.type"),"] ",(0,t.kt)("inlineCode",{parentName:"p"},"'filesystem'")," 时生效。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"//.."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'filesystem'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    idleTimeout",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token number",parentName:"code"},"60000"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cacheidletimeoutafterlargechanges",parentName:"h3"}),"cache.idleTimeoutAfterLargeChanges",(0,t.kt)("a",{href:"#cacheidletimeoutafterlargechanges","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"number = 1000")),(0,t.kt)(s,{text:"5.41.0+",mdxType:"Badge"}),(0,t.kt)("p",null,"以毫秒为单位。",(0,t.kt)("inlineCode",{parentName:"p"},"cache.idleTimeoutAfterLargeChanges")," 是当检测到较大的更改时，缓存存储应在此之后发生的时间段。"),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"cache.idleTimeoutAfterLargeChanges")," 仅在 ",(0,t.kt)("a",{href:"#cachetype",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"cache.type"))," 设为 ",(0,t.kt)("inlineCode",{parentName:"p"},"'filesystem'")," 时可用。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"//.."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'filesystem'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    idleTimeoutAfterLargeChanges",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token number",parentName:"code"},"1000"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cacheidletimeoutforinitialstore",parentName:"h3"}),"cache.idleTimeoutForInitialStore",(0,t.kt)("a",{href:"#cacheidletimeoutforinitialstore","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"number = 5000")),(0,t.kt)("p",null,"单位毫秒。 ",(0,t.kt)("inlineCode",{parentName:"p"},"cache.idleTimeoutForInitialStore")," 是在初始缓存存储发生后的时间段。"),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"cache.idleTimeoutForInitialStore")," 配置项仅在 [",(0,t.kt)("inlineCode",{parentName:"p"},"cache.type"),"] ",(0,t.kt)("inlineCode",{parentName:"p"},"'filesystem'")," 时生效。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"//.."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'filesystem'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    idleTimeoutForInitialStore",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token number",parentName:"code"},"0"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cachemanagedpaths",parentName:"h3"}),"cache.managedPaths",(0,t.kt)("a",{href:"#cachemanagedpaths","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"[string] = ['./node_modules']")),(0,t.kt)("aside",{className:"warning"},(0,t.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,t.kt)("p",{parentName:"aside"},"已迁移到 ",(0,t.kt)("a",{href:"/configuration/other-options/#managedpaths",parentName:"p"},"snapshot.managedPaths"))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"cache.managedPaths")," 是仅托管路径的包管理器数组。webpack 将避免将他们进行哈希和时间戳处理，假设版本是唯一的，并将其用作快照（用于内存和文件系统缓存）。"),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cachemaxage",parentName:"h3"}),"cache.maxAge",(0,t.kt)("a",{href:"#cachemaxage","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"number = 5184000000")),(0,t.kt)(s,{text:"5.30.0+",mdxType:"Badge"}),(0,t.kt)("p",null,"允许未使用的缓存留在文件系统缓存中的时间（以毫秒为单位）；默认为一个月。"),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"cache.maxAge")," 仅在 ",(0,t.kt)("a",{href:"#cachetype",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"cache.type"))," 设置为 ",(0,t.kt)("inlineCode",{parentName:"p"},"'filesystem'")," 时生效。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'filesystem'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    maxAge",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token number",parentName:"code"},"5184000000"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cachemaxgenerations",parentName:"h3"}),"cache.maxGenerations",(0,t.kt)("a",{href:"#cachemaxgenerations","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"number")),(0,t.kt)(s,{text:"5.30.0+",mdxType:"Badge"}),(0,t.kt)("p",null,"定义内存缓存中未使用的缓存项的生命周期。"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},(0,t.kt)("inlineCode",{parentName:"p"},"cache.maxGenerations: 1"),": 在一次编译中未使用的缓存被删除。")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},(0,t.kt)("inlineCode",{parentName:"p"},"cache.maxGenerations: Infinity"),": 缓存将永远保存。"))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"cache.maxGenerations")," 配置项仅在 ",(0,t.kt)("a",{href:"#cachetype",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"cache.type"))," 设置为 ",(0,t.kt)("inlineCode",{parentName:"p"},"'memory'")," 时有效。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'memory'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    maxGenerations",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token number",parentName:"code"},"Infinity"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cachemaxMemoryGenerations-cachemaxMemorygenerations",parentName:"h3"}),"cache.maxMemoryGenerations $#cachemaxMemorygenerations$",(0,t.kt)("a",{href:"#cachemaxMemoryGenerations-cachemaxMemorygenerations","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"number")),(0,t.kt)(s,{text:"5.30.0+",mdxType:"Badge"}),(0,t.kt)("p",null,"定义内存缓存中未使用的缓存项的生命周期。"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},(0,t.kt)("inlineCode",{parentName:"p"},"cache.maxMemoryGenerations: 0"),": 持久化缓存不会使用额外的内存缓存。它只将项目缓存到内存中，直到它们被序列化到磁盘。一旦序列化，下一次读取将再次从磁盘反序列化它们。这种模式将最小化内存使用，但会带来性能成本。")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},(0,t.kt)("inlineCode",{parentName:"p"},"cache.maxMemoryGenerations: 1"),": 这将从内存缓存中清除已序列化且在至少一次编译中未使用的项。当再次使用它们时，它们将从磁盘反序列化。这种模式将最小化内存使用量，同时仍将活动项保留在内存缓存中。")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},(0,t.kt)("inlineCode",{parentName:"p"},"cache.maxMemoryGenerations"),": 大于 0 的小数字将为 GC 操作带来性能成本。它会随着数字的增加而降低。")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},(0,t.kt)("inlineCode",{parentName:"p"},"cache.maxMemoryGenerations"),": ",(0,t.kt)("inlineCode",{parentName:"p"},"development")," 模式下默认为 10，",(0,t.kt)("inlineCode",{parentName:"p"},"production")," 模式下默认为 ",(0,t.kt)("inlineCode",{parentName:"p"},"Infinity"),"。"))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"cache.maxMemoryGenerations")," 配置项仅在 ",(0,t.kt)("a",{href:"#cachetype",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"cache.type"))," 设置为 ",(0,t.kt)("inlineCode",{parentName:"p"},"'filesystem'")," 时有效。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'filesystem'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    maxMemoryGenerations",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token number",parentName:"code"},"Infinity"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cachememorycacheunaffected",parentName:"h3"}),"cache.memoryCacheUnaffected",(0,t.kt)("a",{href:"#cachememorycacheunaffected","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,"对未改变的模块进行缓存计算，并且只引用内存中未改变的模块。它只能在 ",(0,t.kt)("a",{href:"#cachetype",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"cache.type"))," 值为 ",(0,t.kt)("inlineCode",{parentName:"p"},"'filesystem'")," 时使用，除此之外，必须启用 ",(0,t.kt)("a",{href:"/configuration/experiments/#experimentscacheunaffected",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"experiments.cacheUnaffected"))," 配置项。"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"类型：",(0,t.kt)("inlineCode",{parentName:"li"},"boolean")),(0,t.kt)("li",{parentName:"ul"},"v5.54.0+")),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'filesystem'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    memoryCacheUnaffected",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cachename",parentName:"h3"}),"cache.name",(0,t.kt)("a",{href:"#cachename","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"string")),(0,t.kt)("p",null,"缓存的名称。不同的名字会导致不同的的共存的缓存。默认值为 ",(0,t.kt)("inlineCode",{parentName:"p"},"${config.name}-${config.mode}"),"。使用 ",(0,t.kt)("inlineCode",{parentName:"p"},"cache.name")," 当你有多份配置的时候，是比较合理的因为会有配置会有独立的缓存。"),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"cache.name")," 选项仅当 ",(0,t.kt)("a",{href:"#cachetype",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"cache.type"))," 被设置成 ",(0,t.kt)("inlineCode",{parentName:"p"},"'filesystem'")," 的时候可进行配置。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'filesystem'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    name",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'AppBuildCache'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cacheprofile",parentName:"h3"}),"cache.profile",(0,t.kt)("a",{href:"#cacheprofile","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"boolean = false")),(0,t.kt)("p",null,"跟踪并记录各个 ",(0,t.kt)("inlineCode",{parentName:"p"},"'filesystem'")," 缓存项的详细时间信息。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'filesystem'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    profile",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cachestore",parentName:"h3"}),"cache.store",(0,t.kt)("a",{href:"#cachestore","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"string = 'pack': 'pack'")),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"cache.store")," 告诉 webpack 什么时候将数据存放在文件系统中。"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("inlineCode",{parentName:"li"},"'pack'"),": 当编译器闲置时候，将缓存数据都存放在一个文件中")),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"cache.store")," 选项仅当 ",(0,t.kt)("a",{href:"#cachetype",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"cache.type"))," 设置成 ",(0,t.kt)("inlineCode",{parentName:"p"},"'filesystem'")," 才可配置。"),(0,t.kt)("aside",{className:"warning"},(0,t.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,t.kt)("p",{parentName:"aside"},(0,t.kt)("inlineCode",{parentName:"p"},"pack")," 是 webpack 5.0.x 起唯一支持的类型")),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'filesystem'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    store",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'pack'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cachetype",parentName:"h3"}),"cache.type",(0,t.kt)("a",{href:"#cachetype","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"string: 'memory' | 'filesystem'")),(0,t.kt)("p",null,"将 ",(0,t.kt)("inlineCode",{parentName:"p"},"cache")," 类型设置为内存或者文件系统。",(0,t.kt)("inlineCode",{parentName:"p"},"memory")," 选项很简单，它告诉 webpack 在内存中存储缓存，不允许额外的配置："),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'memory'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"cacheversion",parentName:"h3"}),"cache.version",(0,t.kt)("a",{href:"#cacheversion","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"string = ''")),(0,t.kt)("p",null,"缓存数据的版本。不同版本不会允许重用缓存和重载当前的内容。当配置以一种无法重用缓存的方式改变时，要更新缓存的版本。这会让缓存失效。"),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"cache.version")," 选项仅当 ",(0,t.kt)("a",{href:"#cachetype",parentName:"p"},(0,t.kt)("inlineCode",{parentName:"a"},"cache.type"))," 设置成 ",(0,t.kt)("inlineCode",{parentName:"p"},"'filesystem'")," 才可配置。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,t.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  cache",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    type",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'filesystem'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    version",(0,t.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'your_version'"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,t.kt)("aside",{className:"warning"},(0,t.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,t.kt)("p",{parentName:"aside"},"在具有不同选项的调用之间不要共享缓存。")),(0,t.kt)("h2",null,(0,t.kt)("span",{id:"setup-cache-in-cicd-system",parentName:"h2"}),"在 CI/CD 系统中设置缓存",(0,t.kt)("a",{href:"#setup-cache-in-cicd-system","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,"文件系统缓存允许在 CI 的构建之间共享缓存。为了设置设置缓存："),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"CI 应该有一个在构建之间共享缓存的配置项。"),(0,t.kt)("li",{parentName:"ul"},"CI 应该在相同的绝对路径中运行任务。这非常重要，因为 webpack 缓存文件存储绝对路径。")),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"GitLab-CICD",parentName:"h3"}),"GitLab CI/CD",(0,t.kt)("a",{href:"#GitLab-CICD","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("p",null,"以下是一些通用配置"),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-yaml",parentName:"pre"},(0,t.kt)("span",{className:"token key atrule",parentName:"code"},"variables"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},":"),"\n  ",(0,t.kt)("span",{className:"token comment",parentName:"code"},'# 兜底使用 "main" 分支缓存，要求 GitLab Runner 版本为 13.4'),"\n  ",(0,t.kt)("span",{className:"token key atrule",parentName:"code"},"CACHE_FALLBACK_KEY"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},":")," main\n\n",(0,t.kt)("span",{className:"token comment",parentName:"code"},"# 这是 webpack 构建任务"),"\n",(0,t.kt)("span",{className:"token key atrule",parentName:"code"},"build-job"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},":"),"\n  ",(0,t.kt)("span",{className:"token key atrule",parentName:"code"},"cache"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},":"),"\n    ",(0,t.kt)("span",{className:"token key atrule",parentName:"code"},"key"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token string",parentName:"code"},"'$CI_COMMIT_REF_SLUG'")," ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"# 分支/tag 名称"),"\n    ",(0,t.kt)("span",{className:"token key atrule",parentName:"code"},"paths"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},":"),"\n      ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"# 缓存文件夹"),"\n      ",(0,t.kt)("span",{className:"token comment",parentName:"code"},'# 确保在这个任务中没有运行 "npm ci" 或者更改默认缓存文件夹'),"\n      ",(0,t.kt)("span",{className:"token comment",parentName:"code"},'# 否则 "npm ci" 将会删除缓存文件'),"\n      ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"-")," node_modules/.cache/webpack/")),(0,t.kt)("h3",null,(0,t.kt)("span",{id:"Github-actions",parentName:"h3"}),"Github actions",(0,t.kt)("a",{href:"#Github-actions","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,t.kt)("span",{className:"header-link",parentName:"a"}))),(0,t.kt)("pre",null,(0,t.kt)("code",{className:"hljs language-yaml",parentName:"pre"},(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"-")," ",(0,t.kt)("span",{className:"token key atrule",parentName:"code"},"uses"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},":")," actions/cache@v3\n  ",(0,t.kt)("span",{className:"token key atrule",parentName:"code"},"with"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},":"),"\n    ",(0,t.kt)("span",{className:"token comment",parentName:"code"},"# 缓存文件夹"),"\n    ",(0,t.kt)("span",{className:"token key atrule",parentName:"code"},"path"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},":")," node_modules/.cache/webpack/\n    ",(0,t.kt)("span",{className:"token key atrule",parentName:"code"},"key"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},":")," $",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"{")," GITHUB_REF_NAME ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"-"),"webpack",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"-"),"build\n    ",(0,t.kt)("span",{className:"token comment",parentName:"code"},'# 兜底使用 "main" 分支缓存'),"\n    ",(0,t.kt)("span",{className:"token key atrule",parentName:"code"},"restore-keys"),(0,t.kt)("span",{className:"token punctuation",parentName:"code"},":")," ",(0,t.kt)("span",{className:"token punctuation",parentName:"code"},"|"),(0,t.kt)("span",{className:"token scalar string",parentName:"code"},"\n      main-webpack-build"))))}o.isMDXComponent=!0,a.default=o}}]);