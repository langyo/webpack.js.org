"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5030],{5030:function(e,a,t){t.r(a),t(7378);var n=t(2682);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},p.apply(this,arguments)}const s=("Badge",e=>(console.warn("Component `%s` was not imported, exported, or provided by MDXProvider as global scope","Badge"),(0,n.kt)(n.kt.Fragment,null,e.children)));function o(e){let{components:a,...t}=e;return(0,n.kt)("wrapper",p({components:a},t),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"externals")," 配置选项提供了「从输出的 bundle 中排除依赖」的方法。相反，所创建的 bundle 依赖于那些存在于用户环境(consumer's environment)中的依赖。此功能通常对 ",(0,n.kt)("strong",{parentName:"p"},"library 开发人员"),"来说是最有用的，然而也会有各种各样的应用程序用到它。"),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"externals",parentName:"h2"}),"externals",(0,n.kt)("a",{href:"#externals","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string")," ",(0,n.kt)("inlineCode",{parentName:"p"},"object")," ",(0,n.kt)("inlineCode",{parentName:"p"},"function")," ",(0,n.kt)("inlineCode",{parentName:"p"},"RegExp")," ",(0,n.kt)("inlineCode",{parentName:"p"},"[string, object, function, RegExp]")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"防止"),"将某些 ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," 的包(package)",(0,n.kt)("strong",{parentName:"p"},"打包"),"到 bundle 中，而是在运行时(runtime)再去从外部获取这些",(0,n.kt)("em",{parentName:"p"},"扩展依赖(external dependencies)"),"。"),(0,n.kt)("p",null,"例如，从 CDN 引入 ",(0,n.kt)("a",{href:"https://jquery.com/",parentName:"p"},"jQuery"),"，而不是把它打包："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"index.html")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-html",parentName:"pre"},(0,n.kt)("span",{className:"token tag",parentName:"code"},(0,n.kt)("span",{className:"token tag",parentName:"span"},(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"<"),"script"),"\n  ",(0,n.kt)("span",{className:"token attr-name",parentName:"span"},"src"),(0,n.kt)("span",{className:"token attr-value",parentName:"span"},(0,n.kt)("span",{className:"token punctuation attr-equals",parentName:"span"},"="),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},'"'),"https://code.jquery.com/jquery-3.1.0.js",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},'"')),"\n  ",(0,n.kt)("span",{className:"token attr-name",parentName:"span"},"integrity"),(0,n.kt)("span",{className:"token attr-value",parentName:"span"},(0,n.kt)("span",{className:"token punctuation attr-equals",parentName:"span"},"="),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},'"'),"sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk=",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},'"')),"\n  ",(0,n.kt)("span",{className:"token attr-name",parentName:"span"},"crossorigin"),(0,n.kt)("span",{className:"token attr-value",parentName:"span"},(0,n.kt)("span",{className:"token punctuation attr-equals",parentName:"span"},"="),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},'"'),"anonymous",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},'"')),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},">")),(0,n.kt)("span",{className:"token script",parentName:"code"}),(0,n.kt)("span",{className:"token tag",parentName:"code"},(0,n.kt)("span",{className:"token tag",parentName:"span"},(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"</"),"script"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},">")))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    jquery",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'jQuery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"这样就剥离了那些不需要改动的依赖模块，换句话，下面展示的代码还可以正常运行："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," $ ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'jquery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"$"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"上面 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack.config.js")," 中 ",(0,n.kt)("inlineCode",{parentName:"p"},"externals")," 下指定的属性名称 ",(0,n.kt)("inlineCode",{parentName:"p"},"jquery")," 表示 ",(0,n.kt)("inlineCode",{parentName:"p"},"import $ from 'jquery'")," 中的模块 ",(0,n.kt)("inlineCode",{parentName:"p"},"jquery")," 应该从打包产物中排除。 为了替换这个模块，",(0,n.kt)("inlineCode",{parentName:"p"},"jQuery")," 值将用于检索全局 ",(0,n.kt)("inlineCode",{parentName:"p"},"jQuery")," 变量，因为默认的外部库类型是 ",(0,n.kt)("inlineCode",{parentName:"p"},"var"),"，请参阅 ",(0,n.kt)("a",{href:"#externalstype",parentName:"p"},"externalsType"),"。"),(0,n.kt)("p",null,"虽然我们在上面展示了一个使用外部全局变量的示例，但实际上可以以以下任何形式使用外部变量：全局变量、CommonJS、AMD、ES2015 模块，在 ",(0,n.kt)("a",{href:"#externalstype",parentName:"p"},"externalsType")," 中查看更多信息。"),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"string",parentName:"h3"}),"字符串",(0,n.kt)("a",{href:"#string","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"根据 ",(0,n.kt)("a",{href:"#externalstype",parentName:"p"},"externalsType"),"，这可能是全局变量的名称（参见 ",(0,n.kt)("a",{href:"#externalsTypeglobal",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"'global'")),"、",(0,n.kt)("a",{href:"#externalsTypethis",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"'this'")),"、",(0,n.kt)("a",{href:"#externalsTypevar",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"'var '")),", ",(0,n.kt)("a",{href:"#externalsTypewindow",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"'window'")),") 或模块的名称（参见 ",(0,n.kt)("inlineCode",{parentName:"p"},"amd"),", ",(0,n.kt)("a",{href:"#externalsTypecommonjs",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"commonjs")),", ",(0,n.kt)("a",{href:"#externalsTypemodule",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"module")),", ",(0,n.kt)("inlineCode",{parentName:"p"},"umd"),")。"),(0,n.kt)("p",null,"如果你只定义 1 个 external，您也可以使用快捷语法："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'jquery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"equals to"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    jquery",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'jquery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"您可以使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"${externalsType} ${libraryName}")," 语法为外部指定 ",(0,n.kt)("a",{href:"#externalstype",parentName:"p"},"外部库类型"),"。 它将覆盖 ",(0,n.kt)("a",{href:"#externalstype",parentName:"p"},"externalsType")," 选项中指定的默认外部库类型。"),(0,n.kt)("p",null,"例如，如果外部库是一个 ",(0,n.kt)("a",{href:"#externalsTypecommonjs",parentName:"p"},"CommonJS 模块"),"，你可以指定"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    jquery",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'commonjs jquery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"string",parentName:"h3"}),"[string]",(0,n.kt)("a",{href:"#string","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    subtract",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'./math'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'subtract'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"subtract: ['./math', 'subtract']")," 允许你选择模块的一部分，其中 ",(0,n.kt)("inlineCode",{parentName:"p"},"./math")," 是模块，并且你的包只需要 ",(0,n.kt)("inlineCode",{parentName:"p"},"subtract")," 变量下的子集。"),(0,n.kt)("p",null,"当 ",(0,n.kt)("inlineCode",{parentName:"p"},"externalsType")," 为 ",(0,n.kt)("inlineCode",{parentName:"p"},"commonjs")," 时，此示例将转换为 ",(0,n.kt)("inlineCode",{parentName:"p"},"require('./math').subtract;"),"，而当 ",(0,n.kt)("inlineCode",{parentName:"p"},"externalsType")," 为 ",(0,n.kt)("inlineCode",{parentName:"p"},"window")," 时，此示例将转换为 ",(0,n.kt)("inlineCode",{parentName:"p"},'window["./math"]["subtract"];')),(0,n.kt)("p",null,"与 ",(0,n.kt)("a",{href:"#string",parentName:"p"},"string 语法")," 类似，你可以使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"${externalsType} ${libraryName}")," 语法在数组的第一项中指定外部库类型，例如："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    subtract",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'commonjs ./math'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'subtract'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"object",parentName:"h3"}),"对象",(0,n.kt)("a",{href:"#object","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"带有 ",(0,n.kt)("inlineCode",{parentName:"p"},"{ root, amd, commonjs, ... }")," 的对象只允许用于 ",(0,n.kt)("a",{href:"/configuration/output/#outputlibrarytarget",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"libraryTarget: 'umd'"))," 和 [",(0,n.kt)("inlineCode",{parentName:"p"},"externalsType: 'umd'"),"](#externalstype）。其他库的 target 不允许这样做。")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    react",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'react'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 或者"),"\n\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    lodash",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      commonjs",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'lodash'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      amd",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'lodash'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      root",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'_'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 指向全局变量"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 或者"),"\n\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    subtract",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      root",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'math'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'subtract'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"此语法用于描述外部 library 所有可用的访问方式。这里 ",(0,n.kt)("inlineCode",{parentName:"p"},"lodash")," 这个外部 library 可以在 AMD 和 CommonJS 模块系统中通过 ",(0,n.kt)("inlineCode",{parentName:"p"},"lodash")," 访问，但在全局变量形式下用 ",(0,n.kt)("inlineCode",{parentName:"p"},"_")," 访问。",(0,n.kt)("inlineCode",{parentName:"p"},"subtract")," 可以通过全局 ",(0,n.kt)("inlineCode",{parentName:"p"},"math")," 对象下的属性 ",(0,n.kt)("inlineCode",{parentName:"p"},"subtract")," 访问（例如 ",(0,n.kt)("inlineCode",{parentName:"p"},"window['math']['subtract']"),"）。"),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"function",parentName:"h3"}),"函数",(0,n.kt)("a",{href:"#function","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"function ({ context, request, contextInfo, getResolve }, callback)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"function ({ context, request, contextInfo, getResolve }) => promise")," ",(0,n.kt)(s,{text:"5.15.0+",parentName:"li",mdxType:"Badge"}))),(0,n.kt)("p",null,"对于 webpack 外部化，通过定义函数来控制行为，可能会很有帮助。例如，",(0,n.kt)("a",{href:"https://www.npmjs.com/package/webpack-node-externals",parentName:"p"},"webpack-node-externals")," 能够排除 ",(0,n.kt)("inlineCode",{parentName:"p"},"node_modules")," 目录中所有模块，还提供一些选项，比如白名单 package(whitelist package)。"),(0,n.kt)("p",null,"函数接收两个入参："),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"ctx")," (",(0,n.kt)("inlineCode",{parentName:"li"},"object"),")：包含文件详情的对象。",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"ctx.context")," (",(0,n.kt)("inlineCode",{parentName:"li"},"string"),"): 包含引用的文件目录。"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"ctc.request")," (",(0,n.kt)("inlineCode",{parentName:"li"},"string"),"): 被请求引入的路径。"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"ctx.contextInfo")," (",(0,n.kt)("inlineCode",{parentName:"li"},"object"),"): 包含 issuer 的信息（如，layer 和 compiler）"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"ctx.getResolve")," ",(0,n.kt)(s,{text:"5.15.0+",parentName:"li",mdxType:"Badge"}),": 获取当前解析器选项的解析函数。"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"callback")," (",(0,n.kt)("inlineCode",{parentName:"li"},"function (err, result, type)"),"): 用于指明模块如何被外部化的回调函数")),(0,n.kt)("p",null,"回调函数接收三个入参："),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"err")," (",(0,n.kt)("inlineCode",{parentName:"li"},"Error"),"): 被用于表明在外部外引用的时候是否会产生错误。如果有错误，这将会是唯一被用到的参数。"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"result")," (",(0,n.kt)("inlineCode",{parentName:"li"},"string")," ",(0,n.kt)("inlineCode",{parentName:"li"},"[string]")," ",(0,n.kt)("inlineCode",{parentName:"li"},"object"),"): 描述外部化的模块。可以接受其它标准化外部化模块格式，(",(0,n.kt)("a",{href:"#string",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"string")),", ",(0,n.kt)("a",{href:"#string",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"[string]")),"，或 ",(0,n.kt)("a",{href:"#object",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"object")),")。"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"type")," (",(0,n.kt)("inlineCode",{parentName:"li"},"string"),"): 可选的参数，用于指明模块的 ",(0,n.kt)("a",{href:"#externalstype",parentName:"li"},"external type"),"（如果它没在 ",(0,n.kt)("inlineCode",{parentName:"li"},"result")," 参数中被指明）。")),(0,n.kt)("p",null,"作为例子，要外部化所有匹配一个正则表达式的引入，你可以像下面那样处理："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n    ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"{")," context",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," request ",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," callback"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token regex",parentName:"code"},"/^yourregex$/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"test"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"request",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 使用 request 路径，将一个 commonjs 模块外部化"),"\n        ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"callback"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"null"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'commonjs '")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"+")," request",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 继续下一步且不外部化引用"),"\n      ",(0,n.kt)("span",{className:"token function",parentName:"code"},"callback"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"其它例子使用不同的模块格式："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n    ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"ctx",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," callback"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 该外部化的模块，是一个 `commonjs2` 的模块，且放在 `@scope/library` 目录中"),"\n      ",(0,n.kt)("span",{className:"token function",parentName:"code"},"callback"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"null"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'@scope/library'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'commonjs2'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n    ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"ctx",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," callback"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 该外部化模块是一个全局变量叫作 `nameOfGlobal`."),"\n      ",(0,n.kt)("span",{className:"token function",parentName:"code"},"callback"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"null"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'nameOfGlobal'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n    ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"ctx",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," callback"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 该外部化模块是一个在`@scope/library`模块里的命名导出（named export）。"),"\n      ",(0,n.kt)("span",{className:"token function",parentName:"code"},"callback"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"null"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'@scope/library'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'namedexport'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'commonjs'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n    ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"ctx",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," callback"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 外部化模块是一个 UMD 模块"),"\n      ",(0,n.kt)("span",{className:"token function",parentName:"code"},"callback"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"null"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        root",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'componentsGlobal'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        commonjs",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'@scope/components'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        commonjs2",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'@scope/components'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        amd",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'components'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"regexp",parentName:"h3"}),"RegExp",(0,n.kt)("a",{href:"#regexp","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"匹配给定正则表达式的每个依赖，都将从输出 bundle 中排除。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token regex",parentName:"code"},"/^(jquery|\\$)$/i"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"这个示例中，所有名为 ",(0,n.kt)("inlineCode",{parentName:"p"},"jQuery")," 的依赖（忽略大小写），或者 ",(0,n.kt)("inlineCode",{parentName:"p"},"$"),"，都会被外部化。"),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"combining-syntaxes",parentName:"h3"}),"混用语法",(0,n.kt)("a",{href:"#combining-syntaxes","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"有时你需要混用上面介绍的语法。这可以像以下这样操作："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 字符串"),"\n      react",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'react'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 对象"),"\n      lodash",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        commonjs",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'lodash'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        amd",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'lodash'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n        root",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'_'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// indicates global variable"),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 字符串数组"),"\n      subtract",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'./math'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'subtract'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 函数"),"\n    ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"function")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"{")," context",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," request ",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," callback"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"if")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token regex",parentName:"code"},"/^yourregex$/"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"test"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"request",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"callback"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"null"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'commonjs '")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"+")," request",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),"\n      ",(0,n.kt)("span",{className:"token function",parentName:"code"},"callback"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// 正则表达式"),"\n    ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"/"),(0,n.kt)("span",{className:"token operator",parentName:"code"},"^"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"jquery",(0,n.kt)("span",{className:"token operator",parentName:"code"},"|"),"\\$",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"$",(0,n.kt)("span",{className:"token operator",parentName:"code"},"/"),"i",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"如果你指定的 ",(0,n.kt)("inlineCode",{parentName:"p"},"externals")," 未使用类型，则会使用",(0,n.kt)("a",{href:"/configuration/externals/#externalstype",parentName:"p"},"默认类型"),"。例如 ",(0,n.kt)("inlineCode",{parentName:"p"},"externals: { react: 'react' }")," 会被替换成 ",(0,n.kt)("inlineCode",{parentName:"p"},"externals: { react: 'commonjs-module react' }"),"。")),(0,n.kt)("p",null,"关于如何使用此 externals 配置的更多信息，请参考 ",(0,n.kt)("a",{href:"/guides/author-libraries",parentName:"p"},"如何编写 library"),"。"),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"bylayer",parentName:"h3"}),"byLayer",(0,n.kt)("a",{href:"#bylayer","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"function")," ",(0,n.kt)("inlineCode",{parentName:"p"},"object")),(0,n.kt)("p",null,"按层指定 externals："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    byLayer",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      layer",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n        external1",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'var 43'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"externalstype",parentName:"h2"}),"externalsType",(0,n.kt)("a",{href:"#externalstype","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = 'var'")),(0,n.kt)("p",null,"指定 externals 的默认类型。当 external 被设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"amd"),"，",(0,n.kt)("inlineCode",{parentName:"p"},"umd"),"，",(0,n.kt)("inlineCode",{parentName:"p"},"system")," 以及 ",(0,n.kt)("inlineCode",{parentName:"p"},"jsonp")," 时，",(0,n.kt)("a",{href:"/configuration/output/#outputlibrarytarget",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.libraryTarget"))," 的值也应相同。例如，你只能在 ",(0,n.kt)("inlineCode",{parentName:"p"},"amd")," 库中使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"amd")," 的 externals。"),(0,n.kt)("p",null,"支持的类型如下："),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"'amd'")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"'amd-require'")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"'assign'")," - same as ",(0,n.kt)("inlineCode",{parentName:"li"},"'var'")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{href:"#externalsTypecommonjs",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"'commonjs'"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"'commonjs-module'")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{href:"#externalsTypeglobal",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"'global'"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"'import'")," - uses ",(0,n.kt)("inlineCode",{parentName:"li"},"import()")," to load a native EcmaScript module (async module)"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"'jsonp'")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{href:"#externalsTypemodule",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"'module'"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{href:"#externalsTypenode-commonjs",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"'node-commonjs'"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{href:"#externalsTypepromise",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"'promise'"))," - 与 ",(0,n.kt)("inlineCode",{parentName:"li"},"'var'")," 相同，但是会 await 结果（适用于 async 模块）"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{href:"#externalsTypeself",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"'self'"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"'system'")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{href:"#externalsTypescript",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"'script'"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{href:"#externalsTypethis",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"'this'"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"'umd'")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"'umd2'")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{href:"#externalsTypevar",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"'var'"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{href:"#externalsTypewindow",parentName:"li"},(0,n.kt)("inlineCode",{parentName:"a"},"'window'")))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"//..."),"\n  externalsType",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'promise'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"externalsTypecommonjs",parentName:"h3"}),"externalsType.commonjs",(0,n.kt)("a",{href:"#externalsTypecommonjs","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"将外部的默认类型指定为“commonjs”。Webpack 将为模块中使用的外部生成类似 ",(0,n.kt)("inlineCode",{parentName:"p"},"const X = require('...')")," 的代码。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"example",parentName:"h4"}),"示例",(0,n.kt)("a",{href:"#example","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," fs ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'fs-extra'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  externalsType",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'commonjs'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'fs-extra'"),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'fs-extra'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"将会转换为类似下面的代码："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," fs ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"require"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'fs-extra'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"请注意，输出产物中会有一个 ",(0,n.kt)("inlineCode",{parentName:"p"},"require()"),"。"),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"externalsTypeglobal",parentName:"h3"}),"externalsType.global",(0,n.kt)("a",{href:"#externalsTypeglobal","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"将外部的默认类型指定为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'global'"),"。Webpack 会将 external 作为全局变量读取到 ",(0,n.kt)("a",{href:"/configuration/output/#outputglobalobject",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"globalObject")),"。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"example",parentName:"h4"}),"示例",(0,n.kt)("a",{href:"#example","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," jq ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'jquery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"jq"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  externalsType",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'global'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    jquery",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'$'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    globalObject",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'global'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"将会转换为类似下面的代码："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," jq ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," global",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'$'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"jq"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"externalsTypemodule",parentName:"h3"}),"externalsType.module",(0,n.kt)("a",{href:"#externalsTypemodule","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"将 externals 类型设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'module'"),"，webpack 将会在 module 中为外部引用生成形如 ",(0,n.kt)("inlineCode",{parentName:"p"},"import * as X from '...'")," 的代码。"),(0,n.kt)("p",null,"确保首先把 ",(0,n.kt)("a",{href:"/configuration/experiments/#experimentsoutputModule",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"experiments.outputModule"))," 设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"true"),", 否则 webpack 将会报错。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"Example",parentName:"h4"}),"Example",(0,n.kt)("a",{href:"#Example","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," jq ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'jquery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"jq"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  experiments",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    outputModule",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  externalsType",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'module'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    jquery",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'jquery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"将会转换为类似下面的代码："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"*")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"as")," __WEBPACK_EXTERNAL_MODULE_jquery__ ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'jquery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," jq ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," __WEBPACK_EXTERNAL_MODULE_jquery__",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'default'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"jq"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"请注意，输出产物中会有一个 ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," 语句。"),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"externalsTypenode-commonjs",parentName:"h3"}),"externalsType.node-commonjs",(0,n.kt)("a",{href:"#externalsTypenode-commonjs","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"将 externals 类型设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'node-commonjs'"),"，webpack 将从 ",(0,n.kt)("inlineCode",{parentName:"p"},"module")," 中导入 ",(0,n.kt)("inlineCode",{parentName:"p"},"createRequire")," 来构造一个 require 函数，用于加载模块中使用的外部对象。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"Example-1",parentName:"h4"}),"Example",(0,n.kt)("a",{href:"#Example-1","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," jq ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'jquery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"jq"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"export ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  experiments",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    outputModule",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  externalsType",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'node-commonjs'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    jquery",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'jquery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"将会转换为类似下面的代码："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{")," createRequire ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'module'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n\n",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," jq ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token function",parentName:"code"},"createRequire"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"meta",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"url",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'jquery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"jq"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"请注意，输出包中会有一个 ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," 语句。"),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"externalsTypepromise",parentName:"h3"}),"externalsType.promise",(0,n.kt)("a",{href:"#externalsTypepromise","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"将外部的默认类型指定为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'promise'"),"。Webpack 会将 external 读取为全局变量（类似于 ",(0,n.kt)("a",{href:"#externalsTypevar",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"'var'")),"）并为它执行 ",(0,n.kt)("inlineCode",{parentName:"p"},"await"),"。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"Example-2",parentName:"h4"}),"Example",(0,n.kt)("a",{href:"#Example-2","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," jq ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'jquery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"jq"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  externalsType",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'promise'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    jquery",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'$'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"将会转换为类似下面的代码："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," jq ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"await")," $",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"jq"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"externalsTypeself",parentName:"h3"}),"externalsType.self",(0,n.kt)("a",{href:"#externalsTypeself","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"将外部的默认类型指定为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'self'"),"。 Webpack 会将 external 作为 ",(0,n.kt)("inlineCode",{parentName:"p"},"self")," 对象上的全局变量读取。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"example",parentName:"h4"}),"示例",(0,n.kt)("a",{href:"#example","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," jq ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'jquery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"jq"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  externalsType",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'self'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    jquery",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'$'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"将会转换为类似下面的代码："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," jq ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," self",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'$'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"jq"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"externalsTypescript",parentName:"h3"}),"externalsType.script",(0,n.kt)("a",{href:"#externalsTypescript","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"将 external 的默认类型指定为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'script'"),"。Webpack 会将 external 作为脚本加载，并使用 HTML ",(0,n.kt)("inlineCode",{parentName:"p"},"<script>")," 元素暴露预定义的全局变量。",(0,n.kt)("inlineCode",{parentName:"p"},"<script>")," 标签将在脚本加载后被移除。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"syntax",parentName:"h4"}),"Syntax",(0,n.kt)("a",{href:"#syntax","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  externalsType",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'script'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    packageName",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n      ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'http://example.com/script.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'global'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'property'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'property'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// properties are optional"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"如果你不打算定义任何属性，你可以使用简写形式："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  externalsType",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'script'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    packageName",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'global@http://example.com/script.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// no properties here"),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"请注意，",(0,n.kt)("a",{href:"/configuration/output/#outputpublicpath",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"output.publicPath"))," 不会被添加到提供的 URL 中。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"example",parentName:"h4"}),"示例",(0,n.kt)("a",{href:"#example","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"从 CDN 加载 ",(0,n.kt)("inlineCode",{parentName:"p"},"lodash"),"："),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  externalsType",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'script'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    lodash",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'https://cdn.jsdelivr.net/npm/lodash@4.17.19/lodash.min.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'_'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"然后，代码中使用方式如下："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," _ ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'lodash'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\nconsole",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"log"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"head"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token number",parentName:"code"},"1"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"2"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"3"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"下面示例是针对上面示例新增了属性配置："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  externalsType",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'script'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    lodash",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n      ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'https://cdn.jsdelivr.net/npm/lodash@4.17.19/lodash.min.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'_'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n      ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'head'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"当你 ",(0,n.kt)("inlineCode",{parentName:"p"},"import 'loadsh'")," 时，局部变量 ",(0,n.kt)("inlineCode",{parentName:"p"},"head")," 和全局变量 ",(0,n.kt)("inlineCode",{parentName:"p"},"window._")," 都会被暴露："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," head ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'lodash'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\nconsole",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"log"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token function",parentName:"code"},"head"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token number",parentName:"code"},"1"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"2"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"3"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// logs 1 here"),"\nconsole",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"log"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"window",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"_",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"head"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'a'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},",")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'b'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";")," ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// logs a here"))),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"当加载带有 HTML ",(0,n.kt)("inlineCode",{parentName:"p"},"<script>")," 标签的代码时，webpack 的 runtime 将试图寻找一个已经存在的 ",(0,n.kt)("inlineCode",{parentName:"p"},"<script>")," 标签，此标签需与 ",(0,n.kt)("inlineCode",{parentName:"p"},"src")," 的属性相匹配，或者具有特定的 ",(0,n.kt)("inlineCode",{parentName:"p"},"data-webpack")," 属性。对于 chunk 加载来说，",(0,n.kt)("inlineCode",{parentName:"p"},"data-webpack")," 属性的值为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'[output.uniqueName]:chunk-[chunkId]'"),"，而 external 脚本的值为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'[output.uniqueName]:[global]'"),"。")),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"像 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.chunkLoadTimeout"),"，",(0,n.kt)("inlineCode",{parentName:"p"},"output.crossOriginLoading")," 以及 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.scriptType")," 等选项也会对这种方式加载的 external 脚本产生影响。")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"externalsTypethis",parentName:"h3"}),"externalsType.this",(0,n.kt)("a",{href:"#externalsTypethis","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"将 external 的默认类型指定为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'this'"),"。Webpack 会将 external 作为 ",(0,n.kt)("inlineCode",{parentName:"p"},"this")," 对象上的全局变量读取。"),(0,n.kt)("p",null,"示例 $#example$"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," jq ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'jquery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"jq"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  externalsType",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'this'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    jquery",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'$'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"将会转换为类似下面的代码："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," jq ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"this"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'$'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"jq"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"externalsTypevar",parentName:"h3"}),"externalsType.var",(0,n.kt)("a",{href:"#externalsTypevar","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"将 external 的默认类型指定为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'var'"),"。Webpack 会将 external 作为全局变量读取。"),(0,n.kt)("p",null,"示例 $#example$"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," jq ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'jquery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"jq"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  externalsType",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'var'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    jquery",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'$'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"将会转换为类似下面的代码："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," jq ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," $",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"jq"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"externalsTypewindow",parentName:"h3"}),"externalsType.window",(0,n.kt)("a",{href:"#externalsTypewindow","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"将 external 的默认类型指定为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'window'"),"。Webpack 会将 external 作为 ",(0,n.kt)("inlineCode",{parentName:"p"},"window")," 对象上的全局变量读取。"),(0,n.kt)("p",null,"示例 $#example$"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"import")," jq ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"from")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'jquery'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"jq"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  externalsType",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'window'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  externals",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    jquery",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'$'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"将会转换为类似下面的代码："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},(0,n.kt)("span",{className:"token keyword",parentName:"code"},"const")," jq ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," window",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),(0,n.kt)("span",{className:"token string",parentName:"code"},"'$'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token function",parentName:"code"},"jq"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token string",parentName:"code"},"'.my-element'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function",parentName:"code"},"animate"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token comment",parentName:"code"},"/* ... */"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"externalsPresets",parentName:"h2"}),"externalsPresets",(0,n.kt)("a",{href:"#externalsPresets","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"object")),(0,n.kt)("p",null,"为特定的 target 启用 externals 的 preset。"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"选项"),(0,n.kt)("th",{parentName:"tr"},"描述"),(0,n.kt)("th",{parentName:"tr"},"输入类型"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"electron"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"将 main 和预加载上下文中常见的 electron 内置模块视为 external 模块（如 ",(0,n.kt)("inlineCode",{parentName:"span"},"electron"),"，",(0,n.kt)("inlineCode",{parentName:"span"},"ipc")," 或 ",(0,n.kt)("inlineCode",{parentName:"span"},"shell"),"），使用时通过 ",(0,n.kt)("inlineCode",{parentName:"span"},"require()")," 加载。")),(0,n.kt)("td",{"data-th":"输入类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"electronMain"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"将 main 上下文中的 electron 内置模块视为 external 模块（如 ",(0,n.kt)("inlineCode",{parentName:"span"},"app"),"，",(0,n.kt)("inlineCode",{parentName:"span"},"ipc-main")," 或 ",(0,n.kt)("inlineCode",{parentName:"span"},"shell"),"），使用时通过 ",(0,n.kt)("inlineCode",{parentName:"span"},"require()")," 加载。")),(0,n.kt)("td",{"data-th":"输入类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"electronPreload"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"将预加载上下文的 electron 内置模块视为 external 模块（如 ",(0,n.kt)("inlineCode",{parentName:"span"},"web-frame"),"，",(0,n.kt)("inlineCode",{parentName:"span"},"ipc-renderer")," 或 ",(0,n.kt)("inlineCode",{parentName:"span"},"shell"),"），使用时通过 ",(0,n.kt)("inlineCode",{parentName:"span"},"require()")," 加载。")),(0,n.kt)("td",{"data-th":"输入类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"electronRenderer"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"将 renderer 上下文的 electron 内置模块视为 external 模块（如 ",(0,n.kt)("inlineCode",{parentName:"span"},"web-frame"),"、",(0,n.kt)("inlineCode",{parentName:"span"},"ipc-renderer")," 或 ",(0,n.kt)("inlineCode",{parentName:"span"},"shell"),"），使用时通过 ",(0,n.kt)("inlineCode",{parentName:"span"},"require()")," 加载。")),(0,n.kt)("td",{"data-th":"输入类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"node"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"将 node.js 的内置模块视为 external 模块（如 ",(0,n.kt)("inlineCode",{parentName:"span"},"fs"),"，",(0,n.kt)("inlineCode",{parentName:"span"},"path")," 或 ",(0,n.kt)("inlineCode",{parentName:"span"},"vm"),"），使用时通过 ",(0,n.kt)("inlineCode",{parentName:"span"},"require()")," 加载。")),(0,n.kt)("td",{"data-th":"输入类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"nwjs"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"将 ",(0,n.kt)("inlineCode",{parentName:"span"},"NW.js")," 遗留的 ",(0,n.kt)("inlineCode",{parentName:"span"},"nw.gui")," 模块视为 external 模块，使用时通过 ",(0,n.kt)("inlineCode",{parentName:"span"},"require()")," 加载。")),(0,n.kt)("td",{"data-th":"输入类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"web"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"将 ",(0,n.kt)("inlineCode",{parentName:"span"},"http(s)://...")," 以及 ",(0,n.kt)("inlineCode",{parentName:"span"},"std:...")," 视为 external 模块，使用时通过 ",(0,n.kt)("inlineCode",{parentName:"span"},"import")," 加载。",(0,n.kt)("strong",{parentName:"span"},"（注意，这将改变执行顺序，因为 external 代码会在该块中的其他代码执行前被执行）"),"。")),(0,n.kt)("td",{"data-th":"输入类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"选项",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"webAsync"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"将 'http(s)://...' 以及 'std:...' 的引用视为 external 模块，使用时通过 ",(0,n.kt)("inlineCode",{parentName:"span"},"async import()")," 加载。",(0,n.kt)("strong",{parentName:"span"},"（注意，此 external 类型为 ",(0,n.kt)("inlineCode",{parentName:"strong"},"async")," 模块，它对执行会产生各种副作用）"),"。")),(0,n.kt)("td",{"data-th":"输入类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean"))))),(0,n.kt)("p",null,"Note that if you're going to output ES Modules with those node.js-related presets, webpack will set the default ",(0,n.kt)("inlineCode",{parentName:"p"},"externalsType")," to ",(0,n.kt)("a",{href:"#externalsTypenode-commonjs",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"node-commonjs"))," which would use ",(0,n.kt)("inlineCode",{parentName:"p"},"createRequire")," to construct a require function instead of using ",(0,n.kt)("inlineCode",{parentName:"p"},"require()"),"."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Example")),(0,n.kt)("p",null,"使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"node")," 的 preset 不会构建内置模块，而会将其视为 external 模块，使用时通过 ",(0,n.kt)("inlineCode",{parentName:"p"},"require()")," 加载。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"// ..."),"\n  externalsPresets",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    node",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token boolean",parentName:"code"},"true"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))))}o.isMDXComponent=!0,a.default=o}}]);