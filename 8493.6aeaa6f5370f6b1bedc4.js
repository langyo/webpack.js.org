"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8493],{8493:function(a,e,t){t.r(e),t(7378);var n=t(2682);function p(){return p=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},p.apply(this,arguments)}function r(a){let{components:e,...t}=a;return(0,n.kt)("wrapper",p({components:e},t),(0,n.kt)("p",null,"为了更合适且方便地使用配置，可以在 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack.config.js")," 中对 webpack 进行配置。CLI 中传入的任何参数会在配置文件中映射为对应的参数。"),(0,n.kt)("p",null,"如果你还没有安装过 webpack 和 CLI，请先阅读 ",(0,n.kt)("a",{href:"/guides/installation",parentName:"p"},"安装指南"),"。"),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"如果你想使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"npx")," 来运行 webpack，请确保你已经安装了 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack-cli"),"。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"commands",parentName:"h2"}),"命令",(0,n.kt)("a",{href:"#commands","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"webpack-cli 提供了许多命令来使 webpack 的工作变得更简单。默认情况下，webpack 提供了以下命令："),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"Command"),(0,n.kt)("th",{parentName:"tr"},"Usage"),(0,n.kt)("th",{parentName:"tr"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Command",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("a",{href:"#build",parentName:"span"},(0,n.kt)("inlineCode",{parentName:"a"},"build")))),(0,n.kt)("td",{"data-th":"Usage",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"build|bundle|b [entries...] [options]"))),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"Run webpack (default command, can be omitted)."))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Command",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("a",{href:"#configtest",parentName:"span"},(0,n.kt)("inlineCode",{parentName:"a"},"configtest")))),(0,n.kt)("td",{"data-th":"Usage",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"configtest|t [config-path]"))),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"Validate a webpack configuration."))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Command",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("a",{href:"#help",parentName:"span"},(0,n.kt)("inlineCode",{parentName:"a"},"help")))),(0,n.kt)("td",{"data-th":"Usage",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"help|h [command] [option]"))),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"Display help for commands and options."))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Command",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("a",{href:"#info",parentName:"span"},(0,n.kt)("inlineCode",{parentName:"a"},"info")))),(0,n.kt)("td",{"data-th":"Usage",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"info|i [options]"))),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"Outputs information about your system."))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Command",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("a",{href:"#init",parentName:"span"},(0,n.kt)("inlineCode",{parentName:"a"},"init")))),(0,n.kt)("td",{"data-th":"Usage",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"init|create|c|new|n [generation-path] [options]"))),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"Initialize a new webpack project."))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Command",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("a",{href:"#loader",parentName:"span"},(0,n.kt)("inlineCode",{parentName:"a"},"loader")))),(0,n.kt)("td",{"data-th":"Usage",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"loader|l [output-path] [options]"))),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"Scaffold a loader."))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Command",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("a",{href:"#plugin",parentName:"span"},(0,n.kt)("inlineCode",{parentName:"a"},"plugin")))),(0,n.kt)("td",{"data-th":"Usage",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"plugin|p [output-path] [options]"))),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"Scaffold a plugin."))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Command",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("a",{href:"#serve",parentName:"span"},(0,n.kt)("inlineCode",{parentName:"a"},"serve")))),(0,n.kt)("td",{"data-th":"Usage",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"serve|server|s [options]"))),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"Run the ",(0,n.kt)("inlineCode",{parentName:"span"},"webpack-dev-server"),"."))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Command",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("a",{href:"#version",parentName:"span"},(0,n.kt)("inlineCode",{parentName:"a"},"version")))),(0,n.kt)("td",{"data-th":"Usage",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"version|v [commands...]"))),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"Output the version number of ",(0,n.kt)("inlineCode",{parentName:"span"},"webpack"),", ",(0,n.kt)("inlineCode",{parentName:"span"},"webpack-cli")," and ",(0,n.kt)("inlineCode",{parentName:"span"},"webpack-dev-server"),"."))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Command",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("a",{href:"#watch",parentName:"span"},(0,n.kt)("inlineCode",{parentName:"a"},"watch")))),(0,n.kt)("td",{"data-th":"Usage",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"watch|w [entries...] [options]"))),(0,n.kt)("td",{"data-th":"Description",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"Run webpack and watch for files changes."))))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"build",parentName:"h3"}),"Build",(0,n.kt)("a",{href:"#build","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"运行 webpack（默认命令，可用输出文件）。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack build ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"options",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"示例")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack build --config ./webpack.config.js --stats verbose")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"init",parentName:"h3"}),"Init",(0,n.kt)("a",{href:"#init","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"用于初始化一个新的 webpack 项目。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack init ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"generation-path",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"options",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"example")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack init ./my-app --force --template",(0,n.kt)("span",{className:"token operator",parentName:"code"},"="),"default")),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"generation-path",parentName:"h4"}),"生成路径",(0,n.kt)("a",{href:"#generation-path","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"生成配置的位置。默认为 ",(0,n.kt)("inlineCode",{parentName:"p"},"process.cwd()"),"。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"options",parentName:"h4"}),"配置",(0,n.kt)("a",{href:"#options","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("inlineCode",{parentName:"strong"},"-t"),", ",(0,n.kt)("inlineCode",{parentName:"strong"},"--template"))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = 'default'")),(0,n.kt)("p",null,"要生成的模板名称。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("inlineCode",{parentName:"strong"},"-f"),", ",(0,n.kt)("inlineCode",{parentName:"strong"},"--force"))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"boolean")),(0,n.kt)("p",null,"不输入配置项就生成一个项目。该配置启用时所有命令行配置项将使用默认值。"),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"点击 ",(0,n.kt)("a",{href:"https://github.com/webpack/webpack-cli/blob/master/packages/generators/INIT.md",parentName:"p"},"这里")," 获取 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack init")," 命令的完整文档。")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"loader",parentName:"h3"}),"Loader",(0,n.kt)("a",{href:"#loader","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"初始化一个 loader。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack loader ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"output-path",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"options",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"示例")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack loader ./my-loader --template",(0,n.kt)("span",{className:"token operator",parentName:"code"},"="),"default")),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"outputpath",parentName:"h4"}),"Output Path",(0,n.kt)("a",{href:"#outputpath","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"输出文件夹，例如 ",(0,n.kt)("inlineCode",{parentName:"p"},"./loader-name"),"。"),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"options",parentName:"h4"}),"Options",(0,n.kt)("a",{href:"#options","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("inlineCode",{parentName:"strong"},"-t"),", ",(0,n.kt)("inlineCode",{parentName:"strong"},"--template"))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = 'default'")),(0,n.kt)("p",null,"模板类型。"),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"plugin",parentName:"h3"}),"Plugin",(0,n.kt)("a",{href:"#plugin","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"初始化一个插件。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack plugin ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"output-path",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"options",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"示例")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack plugin ./my-plugin --template",(0,n.kt)("span",{className:"token operator",parentName:"code"},"="),"default")),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"outputpath",parentName:"h4"}),"Output Path",(0,n.kt)("a",{href:"#outputpath","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"输出文件夹，例如 ",(0,n.kt)("inlineCode",{parentName:"p"},"./plugin-name"),"."),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"options",parentName:"h4"}),"Options",(0,n.kt)("a",{href:"#options","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("inlineCode",{parentName:"strong"},"-t"),", ",(0,n.kt)("inlineCode",{parentName:"strong"},"--template"))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string = 'default'")),(0,n.kt)("p",null,"模板类型。"),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"info",parentName:"h3"}),"Info",(0,n.kt)("a",{href:"#info","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"输出你的系统信息。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack info ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"options",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"示例")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack info --output json --addition-package postcss")),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"optionsforinfo",parentName:"h4"}),"info 配置项",(0,n.kt)("a",{href:"#optionsforinfo","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("inlineCode",{parentName:"strong"},"-a"),", ",(0,n.kt)("inlineCode",{parentName:"strong"},"--additional-package"))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string")),(0,n.kt)("p",null,"在输出信息中添加额外的包。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"example")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack info --additional-package postcss")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("inlineCode",{parentName:"strong"},"-o"),", ",(0,n.kt)("inlineCode",{parentName:"strong"},"--output"))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"string : 'json' | 'markdown'")),(0,n.kt)("p",null,"获取指定格式的输出。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"示例")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack info --output markdown")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"configtest",parentName:"h3"}),"Configtest",(0,n.kt)("a",{href:"#configtest","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"校验 webpack 配置。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack configtest ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"config-path",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"示例")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack configtest ./webpack.config.js")),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"configpath",parentName:"h4"}),"Config Path",(0,n.kt)("a",{href:"#configpath","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"你的 webpack 配置文件路径。默认为 ",(0,n.kt)("inlineCode",{parentName:"p"},"./webpack.config.js"),"。"),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"serve",parentName:"h3"}),"Serve",(0,n.kt)("a",{href:"#serve","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"运行 webpack 开发服务器。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack serve ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"options",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"示例")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack serve --static --open")),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"查看 ",(0,n.kt)("a",{href:"https://github.com/webpack/webpack-cli/blob/master/SERVE-OPTIONS-v4.md",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"webpack serve")," 命令的所有可用配置项")," 和 ",(0,n.kt)("a",{href:"/configuration/dev-server",parentName:"p"},"webpack-dev-server 的相关文档"),"。")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"watch",parentName:"h3"}),"Watch",(0,n.kt)("a",{href:"#watch","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"运行 webpack 并且监听文件变化。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack ",(0,n.kt)("span",{className:"token function",parentName:"code"},"watch")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"options",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"示例")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack ",(0,n.kt)("span",{className:"token function",parentName:"code"},"watch")," --mode development")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"flags",parentName:"h2"}),"Flags",(0,n.kt)("a",{href:"#flags","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"默认情况下，webpack 提供了以下 flag："),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"Flag / 别名"),(0,n.kt)("th",{parentName:"tr"},"类型"),(0,n.kt)("th",{parentName:"tr"},"描述"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--entry"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"string[]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"应用程序的入口文件，例如 ",(0,n.kt)("inlineCode",{parentName:"span"},"./src/main.js")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--config, -c"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"string[]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"提供 webpack 配置文件的路径，例如 ",(0,n.kt)("inlineCode",{parentName:"span"},"./webpack.config.js")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--config-name"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"string[]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"要使用的配置名"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--name"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"string")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"配置名称，在加载多个配置时使用"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--color"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"启用控制台颜色"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--merge, -m"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"使用 webpack-merge 合并两个配置文件，例如 ",(0,n.kt)("inlineCode",{parentName:"span"},"-c ./webpack.config.js -c ./webpack.test.config.js")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--env"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"string[]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"当它是一个函数时，传递给配置的环境变量"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--progress"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean, string")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"在构建过程中打印编译进度"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--help"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"输出所有支持的 flag 和命令"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--output-path, -o"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"string")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"webpack 生成文件的输出位置，例如 ",(0,n.kt)("inlineCode",{parentName:"span"},"./dist")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--target, -t"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"string[]")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"设置要构建的 target"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--watch, -w"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"监听文件变化"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--watch-options-stdin"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"stdin stream 结束时，停止监听"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--hot, -h"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"启用 HMR"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--devtool, -d"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"string")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"控制是否生成 source map，以及如何生成"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--prefetch"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"string")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"预先发生请求"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--json, -j"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean, string")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"将结果打印成 JSON 格式或存储在文件中"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--mode"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"string")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"定义 webpack 所需的 mode"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--version, -v"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"获取当前 cli 版本"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--stats"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean, string")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"它告诉 webpack 如何处理 stats"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag / 别名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--analyze"))),(0,n.kt)("td",{"data-th":"类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"boolean")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"它调用 ",(0,n.kt)("inlineCode",{parentName:"span"},"webpack-bundle-analyzer")," 插件来获取 bundle 信息"))))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"negated-flags",parentName:"h3"}),"Negated Flags",(0,n.kt)("a",{href:"#negated-flags","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"Flag"),(0,n.kt)("th",{parentName:"tr"},"描述"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"--no-color")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"禁用控制台颜色"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"--no-hot")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"如果你通过配置启用了 HMR，则禁用它"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"--no-stats")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"禁用任何由 webpack emit 出来的 stats"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"--no-watch")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"禁用文件变更的监听"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Flag",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"--no-devtool")),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"禁止生成 source maps"))))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"core-flags",parentName:"h3"}),"核心 Flags",(0,n.kt)("a",{href:"#core-flags","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"从 CLI v4 和 webpack v5 开始，CLI 将采用从 webpack 的 core 中导入整个配置的模式，允许 CLI 调整几乎所有配置项。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"链接中是 webpack v5 和 CLI v4 支持的所有核心 flag 列表 - ",(0,n.kt)("a",{href:"https://github.com/webpack/webpack-cli/blob/master/OPTIONS.md",parentName:"strong"},"详戳"))),(0,n.kt)("p",null,"例如，如果你想在项目中启用性能提示，你需在配置中使用",(0,n.kt)("a",{href:"/configuration/performance/#performancehints",parentName:"p"},"此"),"选项，而如果使用核心 flag，你可以这样做："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --performance-hints warning")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"usage",parentName:"h2"}),"用法",(0,n.kt)("a",{href:"#usage","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"with-configuration-file",parentName:"h3"}),"使用配置文件",(0,n.kt)("a",{href:"#with-configuration-file","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"--config webpack.config.js",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"))),(0,n.kt)("p",null,"配置文件中的相关选项，请参阅",(0,n.kt)("a",{href:"/configuration",parentName:"p"},"配置"),"。"),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"without-configuration-file",parentName:"h3"}),"不使用配置文件",(0,n.kt)("a",{href:"#without-configuration-file","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --entry ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"<"),"entry",(0,n.kt)("span",{className:"token operator",parentName:"code"},">")," --output-path ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"<"),"output-path",(0,n.kt)("span",{className:"token operator",parentName:"code"},">"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"example")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --entry ./first.js --entry ./second.js --output-path /build")),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"entry",parentName:"h4"}),"entry",(0,n.kt)("a",{href:"#entry","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"构建项目时入口可以配置一个文件名或一组被命名过的文件名。你可以传递多个入口（每个入口在启动时加载）。\n如下是通过 CLI 指定 entry 的多种方式："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack ./first-entry.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --entry ./first-entry.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack ./first-entry.js ./other-entry.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --entry ./first-entry.js ./other-entry.js")),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack [command] [entries...] [option]")," 语法，主要是因为某些选项支持接受多个值。因此，你可以用 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack --target node ./entry.js")," 表示 ",(0,n.kt)("inlineCode",{parentName:"p"},"target: ['node', './entry.js']"),"。")),(0,n.kt)("h4",null,(0,n.kt)("span",{id:"output-path",parentName:"h4"}),"output-path",(0,n.kt)("a",{href:"#output-path","aria-hidden":"true",tabIndex:"-1",parentName:"h4"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"用于存储构建后的文件路径。它将映射到配置选项 ",(0,n.kt)("inlineCode",{parentName:"p"},"output.path"),"。"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"示例")),(0,n.kt)("p",null,"假设你的项目结构像下面这样："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},(0,n.kt)("span",{className:"token builtin class-name",parentName:"code"},"."),"\n├── dist\n├── index.html\n└── src\n    ├── index.js\n    ├── index2.js\n    └── others.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack ./src/index.js --output-path dist")),(0,n.kt)("p",null,"这将对源码进行打包，其入口为 ",(0,n.kt)("inlineCode",{parentName:"p"},"index.js"),"，且 bundle 文件的输出路径为 ",(0,n.kt)("inlineCode",{parentName:"p"},"dist"),"。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"asset main.js ",(0,n.kt)("span",{className:"token number",parentName:"code"},"142")," bytes ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"compared ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"for")," emit",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"minimized",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"name: main",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n./src/index.js ",(0,n.kt)("span",{className:"token number",parentName:"code"},"30")," bytes ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n./src/others.js ",(0,n.kt)("span",{className:"token number",parentName:"code"},"1")," bytes ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\nwebpack ",(0,n.kt)("span",{className:"token number",parentName:"code"},"5.1"),".0 compiled successfully ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"in")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"187")," ms")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack ./src/index.js ./src/others2.js --output-path dist/")),(0,n.kt)("p",null,"以多个入口的方式打包文件"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"asset main.js ",(0,n.kt)("span",{className:"token number",parentName:"code"},"142")," bytes ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"compared ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"for")," emit",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"minimized",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),"name: main",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")"),"\n./src/index.js ",(0,n.kt)("span",{className:"token number",parentName:"code"},"30")," bytes ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n./src/others2.js ",(0,n.kt)("span",{className:"token number",parentName:"code"},"1")," bytes ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\n./src/others.js ",(0,n.kt)("span",{className:"token number",parentName:"code"},"1")," bytes ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"built",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"code generated",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),"\nwebpack ",(0,n.kt)("span",{className:"token number",parentName:"code"},"5.1"),".0 compiled successfully ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"in")," ",(0,n.kt)("span",{className:"token number",parentName:"code"},"198")," ms")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"default-configurations",parentName:"h2"}),"默认配置",(0,n.kt)("a",{href:"#default-configurations","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"CLI 会在你的项目路径中寻找默认配置，以下是 CLI 采集到的配置文件。"),(0,n.kt)("p",null,"此处按顺序递增进行优先级查询："),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"示例 —— 配置文件的查找顺序 .webpack/webpackfile > .webpack/webpack.config.js > webpack.config.js")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-txt",parentName:"pre"},"'webpack.config',\n'.webpack/webpack.config',\n'.webpack/webpackfile',\n")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"common-options",parentName:"h2"}),"通用配置",(0,n.kt)("a",{href:"#common-options","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"注意，命令行接口（Command Line Interface）参数的优先级，高于配置文件参数。例如，如果将 ",(0,n.kt)("a",{href:"/configuration/mode/#usage",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},'--mode="production"'))," 传入 webpack CLI，而配置文件使用的是 ",(0,n.kt)("inlineCode",{parentName:"p"},"development"),"，最终会使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"production"),"。")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"help",parentName:"h3"}),"help",(0,n.kt)("a",{href:"#help","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"列出命令行可用的基础命令和 flag")),(0,n.kt)("p",null,"通过 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack help [command] [option]")," 以及 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack [command] --help")," 均可获得帮助信息："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --help\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"# or"),"\n\nnpx webpack ",(0,n.kt)("span",{className:"token builtin class-name",parentName:"code"},"help"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"列出所有 cli 支持的命令和 flag")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --help",(0,n.kt)("span",{className:"token operator",parentName:"code"},"="),"verbose")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"查看特定命令或选项的帮助"),"："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack ",(0,n.kt)("span",{className:"token builtin class-name",parentName:"code"},"help")," --mode")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"version",parentName:"h3"}),"version",(0,n.kt)("a",{href:"#version","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"显示已安装的 package 以及子 package 的版本"),"。"),(0,n.kt)("p",null,"如需检查你正在使用的 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack")," 和 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack-cli")," 的版本，只需运行如下命令："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --version\n\n",(0,n.kt)("span",{className:"token comment",parentName:"code"},"# or"),"\n\nnpx webpack version")),(0,n.kt)("p",null,"运行结果如下："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"webpack ",(0,n.kt)("span",{className:"token number",parentName:"code"},"5.31"),".2\nwebpack-cli ",(0,n.kt)("span",{className:"token number",parentName:"code"},"4.6"),".0")),(0,n.kt)("p",null,"若已安装 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack-dev-server"),"，其版本信息会一并输出："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"webpack ",(0,n.kt)("span",{className:"token number",parentName:"code"},"5.31"),".2\nwebpack-cli ",(0,n.kt)("span",{className:"token number",parentName:"code"},"4.6"),".0\nwebpack-dev-server ",(0,n.kt)("span",{className:"token number",parentName:"code"},"3.11"),".2")),(0,n.kt)("p",null,"如需检查 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack-cli")," 子包的版本（如 ",(0,n.kt)("inlineCode",{parentName:"p"},"@webpack-cli/info"),"），只需运行如下命令："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack info --version")),(0,n.kt)("p",null,"运行结果如下："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"@webpack-cli/info ",(0,n.kt)("span",{className:"token number",parentName:"code"},"1.2"),".3\nwebpack ",(0,n.kt)("span",{className:"token number",parentName:"code"},"5.31"),".2\nwebpack-cli ",(0,n.kt)("span",{className:"token number",parentName:"code"},"4.6"),".0\nwebpack-dev-server ",(0,n.kt)("span",{className:"token number",parentName:"code"},"3.11"),".2")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"config",parentName:"h3"}),"config",(0,n.kt)("a",{href:"#config","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"使用配置文件进行构建")),(0,n.kt)("p",null,"配置文件默认为 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack.config.js"),"，还可以指定其它的",(0,n.kt)("a",{href:"/configuration",parentName:"p"},"配置"),"文件。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --config example.config.js")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"config-name",parentName:"h3"}),"config-name",(0,n.kt)("a",{href:"#config-name","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"如果你的配置文件导出了多个配置，你可以使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"--config-name")," 来指定要运行的配置。"),(0,n.kt)("p",null,"如果你的 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack.config.js")," 如下："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-js",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),"exports ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"["),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      filename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./dist-first.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'first'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    entry",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./src/first.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    mode",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'development'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      filename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./dist-second.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'second'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    entry",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./src/second.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    mode",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'development'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    output",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n      filename",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./dist-third.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    name",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'third'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    entry",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'./src/third.js'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    mode",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'none'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n    stats",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'verbose'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"]"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("p",null,"并且只想运行第二个配置项："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --config-name second")),(0,n.kt)("p",null,"你也可以传递多个值来实现："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --config-name first --config-name second")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"merge",parentName:"h3"}),"merge",(0,n.kt)("a",{href:"#merge","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"你可以通过 ",(0,n.kt)("inlineCode",{parentName:"p"},"--merge")," 选项来合并两个或多个不同的 webpack 配置："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --config ./first.js --config ./second.js --merge")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"json",parentName:"h3"}),"json",(0,n.kt)("a",{href:"#json","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"以 JSON 格式输出 webpack 的运行结果")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --json")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"如果你想把 stats 数据存储为 JSON 而非输出，你可以使用：")),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --json stats.json")),(0,n.kt)("p",null,"在其他情况下，webpack 会打印出 bundle、chunk 以及 timing 细节的 stats 信息。使用此选项，会输出 JSON 对象。这个输出结果可以被 webpack 的 ",(0,n.kt)("a",{href:"https://webpack.github.io/analyse/",parentName:"p"},"analyse 工具"),"，或者 chrisbateman 的 ",(0,n.kt)("a",{href:"https://chrisbateman.github.io/webpack-visualizer/",parentName:"p"},"webpack-visualizer"),"，再或者 th0r 的 ",(0,n.kt)("a",{href:"https://github.com/webpack-contrib/webpack-bundle-analyzer",parentName:"p"},"webpack-bundle-analyzer")," 所识别。analyse 工具会接收 JSON，并以图形的形式展示所有构建的细节。"),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"请查阅 ",(0,n.kt)("a",{href:"/api/stats",parentName:"p"},"stats 数据 api"),"，了解更多关于生成的 stats 数据。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"environment-options",parentName:"h2"}),"Environment 选项",(0,n.kt)("a",{href:"#environment-options","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"当 webpack 配置",(0,n.kt)("a",{href:"/configuration/configuration-types/#exporting-a-function",parentName:"p"},"导出为函数时"),'，会接收到一个 "environment" 的参数。'),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"env",parentName:"h3"}),"env",(0,n.kt)("a",{href:"#env","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --env production    ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"# env.production = true"))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"--env")," 参数可以接收多个值："),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"Invocation"),(0,n.kt)("th",{parentName:"tr"},"Resulting environment"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Invocation",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"npx webpack --env prod"))),(0,n.kt)("td",{"data-th":"Resulting environment",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"{ prod: true }")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Invocation",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"npx webpack --env prod --env min"))),(0,n.kt)("td",{"data-th":"Resulting environment",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"{ prod: true, min: true }")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Invocation",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"npx webpack --env platform=app --env production"))),(0,n.kt)("td",{"data-th":"Resulting environment",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},'{ platform: "app", production: true }')))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Invocation",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"npx webpack --env foo=bar=app"))),(0,n.kt)("td",{"data-th":"Resulting environment",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},'{ foo: "bar=app"}')))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"Invocation",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},'npx webpack --env app.platform="staging" --env app.name="test"'))),(0,n.kt)("td",{"data-th":"Resulting environment",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},'{ app: { platform: "staging", name: "test" }')))))),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"如果你想将一个变量设置为空字符串（",(0,n.kt)("inlineCode",{parentName:"p"},'""'),"），你可能需要在终端上转义字符，就像这样：",(0,n.kt)("inlineCode",{parentName:"p"},'npx webpack --env foo=\\"\\"'))),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"请查阅 ",(0,n.kt)("a",{href:"/guides/environment-variables/",parentName:"p"},"environment 变量指南"),"了解更多信息及用法。")),(0,n.kt)("p",null,"除了上面所说的自定义 ",(0,n.kt)("inlineCode",{parentName:"p"},"env")," 变量，在你的 webpack 配置中也使用了一些 ",(0,n.kt)("inlineCode",{parentName:"p"},"env")," 内置变量："),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"变量名"),(0,n.kt)("th",{parentName:"tr"},"描述"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"变量名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"WEBPACK_SERVE"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"如果使用了 ",(0,n.kt)("inlineCode",{parentName:"span"},"serve|server|s"),"，则为 ",(0,n.kt)("inlineCode",{parentName:"span"},"true"),"。"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"变量名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"WEBPACK_BUILD"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"如果使用了 ",(0,n.kt)("inlineCode",{parentName:"span"},"build|bundle|b"),"，则为 ",(0,n.kt)("inlineCode",{parentName:"span"},"true"),"。"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"变量名",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"WEBPACK_WATCH"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"如果使用了 ",(0,n.kt)("inlineCode",{parentName:"span"},"--watch|watch|w"),"，则为 ",(0,n.kt)("inlineCode",{parentName:"span"},"true"),"。"))))),(0,n.kt)("p",null,"请注意你不能在 bundle 代码中使用这些内置环境变量。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-javascript",parentName:"pre"},"module",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token function-variable function",parentName:"code"},"exports")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"("),(0,n.kt)("span",{className:"token parameter",parentName:"code"},"env",(0,n.kt)("span",{className:"token punctuation",parentName:"span"},",")," argv"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},")")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"=>")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token keyword",parentName:"code"},"return")," ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n    mode",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," env",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"."),(0,n.kt)("span",{className:"token constant",parentName:"code"},"WEBPACK_SERVE")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},"?")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'development'")," ",(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},"'production'"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},";"))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"node-env",parentName:"h3"}),"node-env",(0,n.kt)("a",{href:"#node-env","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"你可以使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"--node-env")," 选项来设置 ",(0,n.kt)("inlineCode",{parentName:"p"},"process.env.NODE_ENV"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --node-env production   ",(0,n.kt)("span",{className:"token comment",parentName:"code"},"# process.env.NODE_ENV = 'production'"))),(0,n.kt)("aside",{className:"tip"},(0,n.kt)("h6",{className:"tip__prefix",parentName:"aside"},"提示"),(0,n.kt)("p",{parentName:"aside"},"如果你不明确的设置 mode，",(0,n.kt)("inlineCode",{parentName:"p"},"mode")," 选项的值会被 ",(0,n.kt)("inlineCode",{parentName:"p"},"--node-env")," 覆盖。例如 ",(0,n.kt)("inlineCode",{parentName:"p"},"--node-env production")," 时，会把 ",(0,n.kt)("inlineCode",{parentName:"p"},"process.env.NODE_ENV")," 和 ",(0,n.kt)("inlineCode",{parentName:"p"},"mode")," 均设置为 ",(0,n.kt)("inlineCode",{parentName:"p"},"'production'"),"。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"configuration-options",parentName:"h2"}),"配置选项",(0,n.kt)("a",{href:"#configuration-options","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"参数"),(0,n.kt)("th",{parentName:"tr"},"说明"),(0,n.kt)("th",{parentName:"tr"},"输入类型"),(0,n.kt)("th",{parentName:"tr"},"默认值"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"参数",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--config"))),(0,n.kt)("td",{"data-th":"说明",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"配置文件的路径")),(0,n.kt)("td",{"data-th":"输入类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"string[]")),(0,n.kt)("td",{"data-th":"默认值",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("a",{href:"/api/cli/#default-configurations",parentName:"span"},"默认配置")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"参数",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--config-name"))),(0,n.kt)("td",{"data-th":"说明",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"要使用的配置名")),(0,n.kt)("td",{"data-th":"输入类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"string[]")),(0,n.kt)("td",{parentName:"tr"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"参数",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--env"))),(0,n.kt)("td",{"data-th":"说明",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"当配置文件为函数时，environment 将作为参数传递给配置")),(0,n.kt)("td",{"data-th":"输入类型",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"string[]")),(0,n.kt)("td",{parentName:"tr"})))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"analyzing-bundle",parentName:"h2"}),"分析 Bundle",(0,n.kt)("a",{href:"#analyzing-bundle","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"你可以使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack-bundle-analyzer")," 插件来分析你 webpack 输出的 bundle。你还可以通过 CLI 的 ",(0,n.kt)("inlineCode",{parentName:"p"},"--analyze")," flag 调用它"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --analyze")),(0,n.kt)("aside",{className:"warning"},(0,n.kt)("h6",{className:"warning__prefix",parentName:"aside"},"警告"),(0,n.kt)("p",{parentName:"aside"},"请确保你的项目中安装了 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack-bundle-analyzer"),"，否则 CLI 会提示你安装它。")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"progress",parentName:"h2"}),"Progress",(0,n.kt)("a",{href:"#progress","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"如需查看 webpack 的编译进度，你可以使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"--progress")," flag。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --progress")),(0,n.kt)("p",null,"如需收集编译过程中每一步的 profile 数据，你可以将 ",(0,n.kt)("inlineCode",{parentName:"p"},"profile")," 作为值传递给 ",(0,n.kt)("inlineCode",{parentName:"p"},"--progress")," flag。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack --progress",(0,n.kt)("span",{className:"token operator",parentName:"code"},"="),"profile")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"pass-cli-arguments-to-nodejs",parentName:"h2"}),"将 CLI 参数传递给 Node.js",(0,n.kt)("a",{href:"#pass-cli-arguments-to-nodejs","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"将参数直接传递给 Node.js 进程，你可以使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"NODE_OPTIONS")," 选项。"),(0,n.kt)("p",null,"例如，将 Node.js 进程的内存限制增加到 4 GB。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},(0,n.kt)("span",{className:"token assign-left variable",parentName:"code"},"NODE_OPTIONS"),(0,n.kt)("span",{className:"token operator",parentName:"code"},"="),(0,n.kt)("span",{className:"token string",parentName:"code"},'"--max-old-space-size=4096"')," webpack")),(0,n.kt)("p",null,"此外，你也可以将多个选项传递给 Node.js 进程。"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},(0,n.kt)("span",{className:"token assign-left variable",parentName:"code"},"NODE_OPTIONS"),(0,n.kt)("span",{className:"token operator",parentName:"code"},"="),(0,n.kt)("span",{className:"token string",parentName:"code"},'"--max-old-space-size=4096 -r /path/to/preload/file.js"')," webpack")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"exit-codes-and-their-meanings",parentName:"h2"}),"退出代码及其含义",(0,n.kt)("a",{href:"#exit-codes-and-their-meanings","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"退出代码"),(0,n.kt)("th",{parentName:"tr"},"描述"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"退出代码",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"0"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"成功"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"退出代码",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"1"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"webpack Error"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"退出代码",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"2"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"配置/选项问题，或者内部错误"))))),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"cli-environment-variables",parentName:"h2"}),"CLI 环境变量",(0,n.kt)("a",{href:"#cli-environment-variables","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr"},"环境变量"),(0,n.kt)("th",{parentName:"tr"},"描述"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"环境变量",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"WEBPACK_CLI_SKIP_IMPORT_LOCAL"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"设置为 ",(0,n.kt)("inlineCode",{parentName:"span"},"true")," 时将不会使用 ",(0,n.kt)("inlineCode",{parentName:"span"},"webpack-cli")," 本地实例。"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"环境变量",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"WEBPACK_CLI_FORCE_LOAD_ESM_CONFIG"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"设置为 ",(0,n.kt)("inlineCode",{parentName:"span"},"true")," 则强制加载 ESM 配置。"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"环境变量",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("a",{href:"#webpack_package",parentName:"span"},(0,n.kt)("inlineCode",{parentName:"a"},"WEBPACK_PACKAGE")))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"在 CLI 中使用自定义 webpack 版本。"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"环境变量",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"WEBPACK_DEV_SERVER_PACKAGE"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"在 CLI 中使用自定义 webpack-dev-server 版本。"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{"data-th":"环境变量",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"WEBPACK_CLI_HELP_WIDTH"))),(0,n.kt)("td",{"data-th":"描述",parentName:"tr"},(0,n.kt)("span",{parentName:"td"},"用于帮助输出的自定义宽度。"))))),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},(0,n.kt)("span",{className:"token assign-left variable",parentName:"code"},"WEBPACK_CLI_FORCE_LOAD_ESM_CONFIG"),(0,n.kt)("span",{className:"token operator",parentName:"code"},"="),"true npx webpack --config ./webpack.config.esm")),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"webpack_package",parentName:"h3"}),"WEBPACK_PACKAGE",(0,n.kt)("a",{href:"#webpack_package","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"在 CLI 中使用自定义 webpack 版本。在你的 ",(0,n.kt)("inlineCode",{parentName:"p"},"package.json")," 中配置以下内容："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-json",parentName:"pre"},(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"{"),"\n  ",(0,n.kt)("span",{className:"token property",parentName:"code"},'"webpack"'),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"^4.0.0"'),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token property",parentName:"code"},'"webpack-5"'),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"npm:webpack@^5.32.0"'),(0,n.kt)("span",{className:"token punctuation",parentName:"code"},","),"\n  ",(0,n.kt)("span",{className:"token property",parentName:"code"},'"webpack-cli"'),(0,n.kt)("span",{className:"token operator",parentName:"code"},":")," ",(0,n.kt)("span",{className:"token string",parentName:"code"},'"^4.5.0"'),"\n",(0,n.kt)("span",{className:"token punctuation",parentName:"code"},"}"))),(0,n.kt)("p",null,"使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack v4.0.0"),"："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},"npx webpack")),(0,n.kt)("p",null,"使用 ",(0,n.kt)("inlineCode",{parentName:"p"},"webpack v5.32.0"),"："),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},(0,n.kt)("span",{className:"token assign-left variable",parentName:"code"},"WEBPACK_PACKAGE"),(0,n.kt)("span",{className:"token operator",parentName:"code"},"="),"webpack-5 npx webpack")),(0,n.kt)("h2",null,(0,n.kt)("span",{id:"Troubleshooting",parentName:"h2"}),"Troubleshooting",(0,n.kt)("a",{href:"#Troubleshooting","aria-hidden":"true",tabIndex:"-1",parentName:"h2"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("h3",null,(0,n.kt)("span",{id:"TypeError-ERR_UNKNOWN_FILE_EXTENSION-Unknown-file-extension-ts-for-webpackconfigts",parentName:"h3"}),'TypeError [ERR_UNKNOWN_FILE_EXTENSION]: Unknown file extension ".ts" for ./webpack.config.ts',(0,n.kt)("a",{href:"#TypeError-ERR_UNKNOWN_FILE_EXTENSION-Unknown-file-extension-ts-for-webpackconfigts","aria-hidden":"true",tabIndex:"-1",parentName:"h3"},(0,n.kt)("span",{className:"header-link",parentName:"a"}))),(0,n.kt)("p",null,"You might encounter this error in the case of using native ESM in TypeScript (i.e. ",(0,n.kt)("inlineCode",{parentName:"p"},'type: "module"')," in ",(0,n.kt)("inlineCode",{parentName:"p"},"package.json"),")."),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"webpack-cli")," supports configuration in both ",(0,n.kt)("inlineCode",{parentName:"p"},"CommonJS")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"ESM")," format, at first it tries to load a configuration using ",(0,n.kt)("inlineCode",{parentName:"p"},"require()"),", once it fails with an error code of ",(0,n.kt)("inlineCode",{parentName:"p"},"'ERR_REQUIRE_ESM'")," (a special code for this case) it would try to load the configuration using ",(0,n.kt)("inlineCode",{parentName:"p"},"import()"),".\nHowever, the ",(0,n.kt)("inlineCode",{parentName:"p"},"import()")," method won't work with ",(0,n.kt)("inlineCode",{parentName:"p"},"ts-node")," without ",(0,n.kt)("a",{href:"https://nodejs.org/api/esm.html#esm_experimental_loaders",parentName:"p"},"loader hooks")," enabled (described at ",(0,n.kt)("a",{href:"https://github.com/TypeStrong/ts-node/issues/1007",parentName:"p"},(0,n.kt)("inlineCode",{parentName:"a"},"TypeStrong/ts-node#1007")),")."),(0,n.kt)("p",null,"To fix the error above use the following command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{className:"hljs language-bash",parentName:"pre"},(0,n.kt)("span",{className:"token assign-left variable",parentName:"code"},"NODE_OPTIONS"),(0,n.kt)("span",{className:"token operator",parentName:"code"},"="),(0,n.kt)("span",{className:"token string",parentName:"code"},'"--loader ts-node/esm"')," npx webpack --entry ./src/index.js --mode production")),(0,n.kt)("p",null,"For more information, see our documentation on ",(0,n.kt)("a",{href:"/configuration/configuration-languages/#typescript",parentName:"p"},"writing a webpack configuration in ",(0,n.kt)("inlineCode",{parentName:"a"},"TypeScript")),"."))}r.isMDXComponent=!0,e.default=r}}]);