<!DOCTYPE html><html lang="zh-cmn-Hans"><head><title data-rh="true">Combined printable page | webpack 中文文档</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="theme-color" content="#2B3A42"/><meta data-rh="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-rh="true" name="robots" content="noindex,nofollow"/><meta data-rh="true" name="description" content="webpack 是一个模块打包器。它的主要目标是将 JavaScript 文件打包在一起，打包后的文件用于在浏览器中使用，但它也能够胜任转换、打包或包裹任何资源。"/><meta data-rh="true" property="og:site_name" content="webpack"/><meta data-rh="true" property="og:type" content="website"/><meta data-rh="true" property="og:title" content="Combined printable page | webpack 中文文档"/><meta data-rh="true" property="og:description" name="description" content="webpack 是一个模块打包器。它的主要目标是将 JavaScript 文件打包在一起，打包后的文件用于在浏览器中使用，但它也能够胜任转换、打包或包裹任何资源。"/><meta data-rh="true" property="og:image" content="https://webpack.js.org/icon-pwa-512x512.d3dae4189855b3a72ff9.png"/><meta data-rh="true" property="twitter:card" content="summary"/><meta data-rh="true" property="twitter:site" content="@webpack"/><meta data-rh="true" property="twitter:creator" content="@webpack"/><meta data-rh="true" property="twitter:domain" content="https://webpack.js.org/"/><meta data-rh="true" name="keywords" content="webpack5, webpack, webpack 中文文档, webpack 官方中文, webpack 5 官方中文, 印记中文, docschina, docschina.org, webpack.docschina.org, doc.react-china.org, nodejs.cn, vue.docschina.org, babel.docschina.org, parceljs.docschina.org, rollup.docschina.org, koajs.docschina.org"/><meta data-rh="true" name="mobile-web-app-capable" content="yes"/><meta data-rh="true" name="apple-mobile-web-app-capable" content="yes"/><meta data-rh="true" name="apple-mobile-web-app-status-bar-style" content="black"/><meta data-rh="true" name="apple-mobile-web-app-title" content="webpack"/><meta data-rh="true" name="msapplication-TileImage" content="/icon_150x150.png"/><meta data-rh="true" name="msapplication-TileColor" content="#465e69"/><link data-rh="true" rel="icon" type="image/x-icon" href="/favicon.f326220248556af65f41.ico"/><link data-rh="true" rel="manifest" href="/manifest.json"/><link data-rh="true" rel="canonical" href="https://webpack.docschina.org/configuration/printable/"/><link data-rh="true" rel="icon" sizes="192x192" href="/icon_192x192.png"/><link data-rh="true" rel="icon" sizes="512x512" href="/icon_512x512.png"/><link data-rh="true" rel="apple-touch-icon" href="/icon_180x180.png"/><link data-rh="true" rel="mask-icon" href="/logo-on-white-bg.47eff95f9c01c5972f6f.svg" color="#465e69"/><link rel="stylesheet" href=/index.c114afea0778b47a418a.css /><link rel="stylesheet" href=/9517.acfe42251eae743e4e22.css /></head><body><div id="root"><div class="site"><div class="site__header"><header class="bg-blue-800 dark:bg-gray-900"><div class="flex items-center py-10 px-[16px] justify-between md:px-[24px] md:max-w-[1024px] md:mx-auto md:justify-start"><button class="bg-transparent border-none md:hidden"><svg viewBox="-62 138 25 25" width="20" height="20" class="fill-current text-white"><path fill="currentColor" d="M-60.2 140.2h20.9c1 0 1.8.8 1.8 1.8s-.8 1.8-1.8 1.8h-20.9c-1 0-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8M-60.2 148.7h20.9c1 0 1.8.8 1.8 1.8s-.8 1.8-1.8 1.8h-20.9c-1 0-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8M-60.2 157.2h20.9c1 0 1.8.8 1.8 1.8s-.8 1.8-1.8 1.8h-20.9c-1 0-1.8-.8-1.8-1.8s.8-1.8 1.8-1.8"></path></svg></button><a class="md:mr-auto" href="/"><img class="logo" src="/site-logo.1fcab817090e78435061.svg" alt="webpack logo" width="122" height="35"/></a><nav class="hidden md:inline-grid md:grid-flow-col md:gap-x-[18px]"><a class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200" href="/concepts/">中文文档</a><a class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200" href="/contribute/">参与贡献</a><a class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200" href="/blog/">博客</a><a href="https://docschina.org" target="_blank" rel="noopener noreferrer" class="text-gray-100 dark:text-gray-100 text-sm font-light uppercase hover:text-blue-200">印记中文</a><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-gray-100 dark:text-gray-200 hover:text-blue-200" title="webpack on GitHub"><svg viewBox="0 0 24 24" aria-hidden="true" fill="currentColor" width="16"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 6.8 9.5c.5 0 .7-.2.7-.5v-1.7C6.7 20 6.1 18 6.1 18c-.4-1.2-1-1.5-1-1.5-1-.6 0-.6 0-.6 1 0 1.5 1 1.5 1 .9 1.6 2.4 1.1 3 .9 0-.7.3-1.1.6-1.4-2.2-.2-4.6-1-4.6-4.9 0-1.1.4-2 1-2.7 0-.3-.4-1.3.2-2.7 0 0 .8-.2 2.7 1a9.4 9.4 0 0 1 5 0c2-1.2 2.8-1 2.8-1 .5 1.4.1 2.4 0 2.7.7.7 1 1.6 1 2.7 0 3.8-2.3 4.7-4.5 5 .4.2.7.8.7 1.8V21c0 .3.2.6.7.5 4-1.3 6.8-5 6.8-9.5A10 10 0 0 0 12 2"></path></svg></a><a href="https://twitter.com/webpack" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-gray-100 dark:text-gray-200 hover:text-blue-200" title="webpack on Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" aria-hidden="true" fill="currentColor" width="16"><path d="M28 6.937c-.957.425-1.985.711-3.064.84a5.343 5.343 0 0 0 2.345-2.951 10.696 10.696 0 0 1-3.388 1.295 5.334 5.334 0 0 0-9.089 4.864A15.143 15.143 0 0 1 3.809 5.411a5.321 5.321 0 0 0-.721 2.683 5.33 5.33 0 0 0 2.372 4.439 5.323 5.323 0 0 1-2.416-.667v.067a5.335 5.335 0 0 0 4.279 5.23 5.336 5.336 0 0 1-2.409.092 5.34 5.34 0 0 0 4.983 3.705 10.699 10.699 0 0 1-6.625 2.284c-.43 0-.855-.025-1.273-.075a15.102 15.102 0 0 0 8.177 2.396c9.812 0 15.176-8.128 15.176-15.177 0-.231-.005-.461-.015-.69A10.855 10.855 0 0 0 28 6.937z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/webpack" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-gray-100 dark:text-gray-200 hover:text-blue-200" title="webpack on StackOverflow"><svg viewBox="0 0 24 24" aria-hidden="true" fill="currentColor" width="16"><path d="M17.4 20.2v-5.4h1.8V22H3v-7.2h1.8v5.4zM6.8 14.3l.3-1.7 8.8 1.8-.3 1.8zm1.1-4.2.8-1.6 8.1 3.8-.7 1.6zm2.3-4 1.1-1.4 7 5.8-1.2 1.4L10 6m4.7-4L20 9l-1.4 1-5.4-7 1.4-1m-8 16.5v-1.8h9v1.8z"></path></svg></a><nav class="dropdown "><button aria-haspopup="true" aria-expanded="false" aria-label="Select language"><svg viewBox="0 0 610 560" xmlns="http://www.w3.org/2000/svg" class="dropdown__language text-gray-100 hover:text-blue-200 transition-colors duration-200"><path d="m304.8 99.2-162.5-57.3v353.6l162.5-52.6z"></path><path d="m300.9 99 168.7-57.3v353.6l-168.7-52.5zm-200.7 358.4 200.7-66.9v-291.5l-200.7 66.9z" fill="currentColor"></path><path d="m392.4 461.8 28.4 46.8 15-43.5zm-223.9-262.3c-1.1-1 1.4 8.6 4.8 12 6.1 6.1 10.8 6.9 13.3 7 5.6.2 12.5-1.4 16.5-3.1s10.9-5.2 13.5-10.4c.6-1.1 2.1-3 1.1-7.5-.7-3.5-3-4.8-5.7-4.6s-11 2.4-15 3.6-12.2 3.7-15.8 4.5-11.5-.3-12.7-1.5zm101.2 114.8c-1.6-.6-34.3-14.1-38.9-16.4a368 368 0 0 0 -17.5-7.5c12.3-19 20.1-33.4 21.2-35.6 1.9-4 15-29.5 15.3-31.1s.7-7.5.4-8.9-5.1 1.3-11.6 3.5-18.9 10.2-23.7 11.2-20.1 6.8-28 9.4c-7.8 2.6-22.7 7.1-28.8 8.8-6.1 1.6-11.4 1.8-14.9 2.8 0 0 .5 4.8 1.4 6.2s4.1 5 7.9 5.9c3.8 1 10 .6 12.8-.1s7.7-3.1 8.4-4.1c.7-1.1-.3-4.3.8-5.3s16.1-4.5 21.7-6.2 27.2-9.2 30.1-8.8a916 916 0 0 1 -23.9 47.7 821 821 0 0 1 -45 63.3c-5.3 6-18 21.5-22.4 25 1.1.3 9-.4 10.4-1.3 8.9-5.5 23.8-24.1 28.6-29.7a489.1 489.1 0 0 0 36.7-49.4c1.9.8 17.6 13.6 21.7 16.4a293 293 0 0 0 23.7 13.3c3.5 1.5 16.9 7.7 17.5 5.6.7-1.8-2.3-14.1-3.9-14.7z"></path><path clip-rule="evenodd" d="m194.1 484.7a204.9 204.9 0 0 0 30.7 14.5 233.6 233.6 0 0 0 46.4 12c.5 0 16 1.9 19.2 1.9h15.7c6.1-.5 11.8-.9 17.9-1.7 4.9-.7 10.3-1.6 15.5-2.8 3.8-.9 7.8-1.7 11.7-3 3.7-1 7.8-2.4 11.8-3.8l8.2-3.1c2.3-1 5.1-2.3 7.7-3.3a243 243 0 0 0 19.2-10c2.3-1.2 7.5-5.2 10.3-5.2 3.1 0 5.2 2.8 5.2 5.2 0 5.1-6.8 6.6-9.9 8.9-3.3 2.3-7.3 4-10.8 5.9-7 3.7-14.1 6.8-20.9 9.4a251 251 0 0 1 -27.3 8.5c-3.3.7-6.6 1.6-9.9 2.1-1.7.3-19.9 3.1-24.9 3.1h-23a293.9 293.9 0 0 1 -35.1-5.2 196 196 0 0 1 -33.1-10.3c-12-4.5-24.6-10.5-36.4-18.3-2.1-1.4-2.3-2.8-2.3-4.4a5 5 0 0 1 5.1-5.1c2.4.1 8 4.2 9 4.7zm101.4-98.1-189.9 63.2v-280.1l189.9-63.2zm10.6-288.3v292.7a6 6 0 0 1 -1.2 2.6c-.3.5-1 1.2-1.6 1.4a14621 14621 0 0 1 -203.1 67.6c-2.1 0-4-1.4-5.1-3.7 0-.2-.2-.3-.2-.7v-292.8c.3-.9.5-2.1 1.2-2.8 1.4-1.9 3.8-2.3 5.4-2.8 3-1 196.1-65.8 198.9-65.8 1.9 0 5.7 1.2 5.7 4.3z" fill-rule="evenodd"></path><path clip-rule="evenodd" d="m464.3 388-158-49.1v-236l158-53.7zm10.6-345.8v352.4c-.2 4-3 5.7-5.6 5.7-2.3 0-18.6-5.6-21.4-6.4l-65.8-20.4-14.6-4.7-12.9-4c-18.6-5.7-37.6-11.5-56.3-17.8-.7-.2-2.4-2.6-2.4-3.1v-246.1c.3-.9.7-1.9 1.6-2.6 1.4-1.6 61.1-21.4 84.7-29.3 6.3-2.3 84.8-29.3 87.3-29.3 3 .1 5.4 2.3 5.4 5.6z" fill-rule="evenodd"></path><path d="m515 461.8-211.1-67.3.9-292.8 210.2 66.9z"></path><path clip-rule="evenodd" d="m408.6 232.5-20.7 50.1 38.1 11.5zm-12.4-47.2 27.2 8.2 49.5 178.6-27.9-8.5-10-36.7-57.7-17.5-12.4 29.9-27.9-8.5z" fill="currentColor" fill-rule="evenodd"></path></svg><i aria-hidden="true" class="dropdown__arrow"></i></button><div class="dropdown__list "><ul><li><a href="https://webpack.js.org/configuration/printable/" class="px-5 block"><span>English</span></a></li><li><a href="https://webpack.docschina.org/configuration/printable/" class="px-5 block"><span lang="zh">中文</span></a></li><li><a href="https://webpack.kr/configuration/printable/" class="px-5 block"><span lang="ko">한국어</span></a></li></ul></div></nav></nav><div class="inline-flex items-center ml-[18px]"><button aria-label="Switch to dark theme" class="bg-transparent border-none cursor-pointer text-[16px] p-0 inline-flex items-center text-gray-100 hover:text-blue-200 transition-colors duration-200" data-testid="hello-darkness"><svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18.1406C11.6016 18.1406 11.2782 18.464 11.2782 18.8624V21.0281C11.2782 21.4265 11.6016 21.7499 12 21.7499C12.3985 21.7499 12.7219 21.4265 12.7219 21.0281V18.8624C12.7219 18.464 12.3985 18.1406 12 18.1406V18.1406Z" fill="currentColor"></path><path d="M12 2.25006C11.6016 2.25006 11.2782 2.5735 11.2782 2.97194V5.13756C11.2782 5.536 11.6016 5.85944 12 5.85944C12.3985 5.85944 12.7219 5.536 12.7219 5.13756V2.97194C12.7219 2.5735 12.3985 2.25006 12 2.25006V2.25006Z" fill="currentColor"></path><path d="M5.85936 12C5.85936 11.6015 5.53592 11.2781 5.13749 11.2781H2.97186C2.57342 11.2781 2.24999 11.6015 2.24999 12C2.24999 12.3984 2.57342 12.7218 2.97186 12.7218H5.13749C5.53592 12.7218 5.85936 12.3984 5.85936 12V12Z" fill="currentColor"></path><path d="M21.0281 11.2781H18.8625C18.4641 11.2781 18.1406 11.6015 18.1406 12C18.1406 12.3984 18.4641 12.7218 18.8625 12.7218H21.0281C21.4266 12.7218 21.75 12.3984 21.75 12C21.75 11.6015 21.4266 11.2781 21.0281 11.2781V11.2781Z" fill="currentColor"></path><path d="M7.14841 16.1298C6.95622 16.1298 6.77341 16.2048 6.63747 16.3407L5.10466 17.8735C4.96872 18.0094 4.89372 18.1923 4.89372 18.3844C4.89372 18.5766 4.96872 18.7594 5.10466 18.8954C5.2406 19.0313 5.42341 19.1063 5.6156 19.1063C5.80779 19.1063 5.9906 19.0313 6.12654 18.8954L7.65935 17.3626C7.9406 17.0813 7.9406 16.6219 7.65935 16.3407C7.52341 16.2048 7.3406 16.1298 7.14841 16.1298V16.1298Z" fill="currentColor"></path><path d="M16.8516 7.87036C17.0437 7.87036 17.2266 7.79536 17.3625 7.65942L18.8953 6.12661C19.0312 5.99067 19.1062 5.80786 19.1062 5.61567C19.1062 5.42349 19.0312 5.24067 18.8953 5.10474C18.7594 4.9688 18.5766 4.8938 18.3844 4.8938C18.1922 4.8938 18.0094 4.9688 17.8734 5.10474L16.3406 6.63755C16.2047 6.77349 16.1297 6.9563 16.1297 7.14849C16.1297 7.34067 16.2047 7.52349 16.3406 7.65942C16.4766 7.79536 16.6594 7.87036 16.8516 7.87036V7.87036Z" fill="currentColor"></path><path d="M6.12654 5.10474C5.9906 4.9688 5.80779 4.8938 5.6156 4.8938C5.42341 4.8938 5.2406 4.9688 5.10466 5.10474C4.96872 5.24067 4.89372 5.42349 4.89372 5.61567C4.89372 5.80786 4.96872 5.99067 5.10466 6.12661L6.63747 7.65942C6.77341 7.79536 6.95622 7.87036 7.14841 7.87036C7.3406 7.87036 7.52341 7.79536 7.65935 7.65942C7.79529 7.52349 7.87029 7.34067 7.87029 7.14849C7.87029 6.9563 7.79529 6.77349 7.65935 6.63755L6.12654 5.10474V5.10474Z" fill="currentColor"></path><path d="M17.3625 16.3407C17.2266 16.2048 17.0437 16.1298 16.8516 16.1298C16.6594 16.1298 16.4766 16.2048 16.3406 16.3407C16.0594 16.6219 16.0594 17.0813 16.3406 17.3626L17.8734 18.8954C18.0094 19.0313 18.1922 19.1063 18.3844 19.1063C18.5766 19.1063 18.7594 19.0313 18.8953 18.8954C19.0312 18.7594 19.1062 18.5766 19.1062 18.3844C19.1062 18.1923 19.0312 18.0094 18.8953 17.8735L17.3625 16.3407V16.3407Z" fill="currentColor"></path><path d="M12 7.5C9.52031 7.5 7.5 9.52031 7.5 12C7.5 14.4797 9.52031 16.5 12 16.5C14.4797 16.5 16.5 14.4797 16.5 12C16.5 9.52031 14.4797 7.5 12 7.5Z" fill="currentColor"></path></svg></button><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="bg-gray-100 dark:bg-gray-800 hidden md:block"><div class="md:max-w-[1024px] md:mx-auto md:grid md:grid-flow-col md:justify-end md:gap-x-[20px] md:px-[24px]" data-testid="sub-navigation"><a title="api" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/api/">API</a><a title="概念" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/concepts/">概念</a><a title="配置" aria-current="page" class="!text-black dark:!text-white text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/configuration/">配置</a><a title="指南" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/guides/">指南</a><a title="loader" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/loaders/">loader</a><a title="迁移" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/migrate/">迁移</a><a title="plugin" class="text-blue-400 py-5 text-sm capitalize hover:text-black dark:hover:text-white" href="/plugins/">plugin</a></div></div></header></div><div class="container site__content"><div class="sponsors"><a href="https://docschina.org" target="_blank" rel="noopener noreferrer" class="sponsors__content"><img class="sponsors__img__docschina" src="/docschina-logo.59f03f74b3c450856c01.png"/><div class="sponsors__content-cont">翻译/文档内容有任何问题，请联系我们</div><div class="wwads-cn wwads-horizontal wwads-sticky" data-id="306" style="max-width:350px"></div></a></div><nav class="sidebar site__sidebar"><div class="sidebar__inner"><div class="relative z-0 bg-white dark:bg-gray-100 "><select class="text-gray-600 text-14 px-5 py-5 appearance-none box-border border border-gray-200 border-solid flex-col flex w-full rounded-none bg-transparent bg-none"><option selected="" value="5">Webpack 5</option><option value="4">Webpack 4</option></select><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="absolute right-5 top-5 fill-current text-gray-300 z-[-1]" width="20" height="20"><path d="M4.5 7.5c.5-.4 1-.4 1.6 0l3.9 3.8 4-3.8c.4-.4 1-.4 1.5 0 .4.5.4 1.2 0 1.7l-4.7 4.5a1 1 0 0 1-1.6 0L4.5 9.2c-.4-.5-.4-1.2 0-1.7z"></path></svg></div><div class="sidebar-item sidebar-item--disabled`"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="sidebar-item__toggle" width="15" height="17" fill="#175d96"><path d="M10 3.3c-.6 0-1 .4-1.1 1.1v11.2c0 .3.2.6.4.8s.5.4.8.4c.6 0 1-.4 1.1-1.1V4.5c0-.3-.2-.6-.4-.8s-.5-.4-.8-.4z"></path></svg><a class="sidebar-item__title sidebar-link__print" href="/configuration/printable/" rel="nofollow noopener noreferrer" alt="Print" title="Print" target="_blank">Print Section<img src="/icon-print.d4d2cfa27f8b9a98e34a.svg" width="27" height="20" alt="Printer Icon"/></a></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/">配置</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="使用不同的配置文件 "><a aria-current="page" class="active" href="/configuration/#use-different-configuration-file">使用不同的配置文件 </a></li><li class="sidebar-item__anchor" title="设置一个新的 webpack 项目 "><a aria-current="page" class="active" href="/configuration/#set-up-a-new-webpack-project">设置一个新的 webpack 项目 </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/configuration-languages/">Configuration Languages</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="TypeScript "><a class="" href="/configuration/configuration-languages/#typescript">TypeScript </a></li><li class="sidebar-item__anchor" title="CoffeeScript "><a class="" href="/configuration/configuration-languages/#coffeescript">CoffeeScript </a></li><li class="sidebar-item__anchor" title="Babel and JSX "><a class="" href="/configuration/configuration-languages/#babel-and-jsx">Babel and JSX </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/configuration-types/">Configuration Types</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="导出函数 "><a class="" href="/configuration/configuration-types/#exporting-a-function">导出函数 </a></li><li class="sidebar-item__anchor" title="导出 Promise "><a class="" href="/configuration/configuration-types/#exporting-a-promise">导出 Promise </a></li><li class="sidebar-item__anchor" title="导出多种配置 "><a class="" href="/configuration/configuration-types/#exporting-multiple-configurations">导出多种配置 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="dependencies "><a class="" href="/configuration/configuration-types/#dependencies">dependencies </a></li><li class="sidebar-item__anchor" title="parallelism "><a class="" href="/configuration/configuration-types/#parallelism">parallelism </a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/entry-context/">入口和上下文</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="context "><a class="" href="/configuration/entry-context/#context">context </a></li><li class="sidebar-item__anchor" title="entry "><a class="" href="/configuration/entry-context/#entry">entry </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Naming "><a class="" href="/configuration/entry-context/#naming">Naming </a></li><li class="sidebar-item__anchor" title="Entry descriptor "><a class="" href="/configuration/entry-context/#entry-descriptor">Entry descriptor </a></li><li class="sidebar-item__anchor" title="Output filename "><a class="" href="/configuration/entry-context/#output-filename">Output filename </a></li><li class="sidebar-item__anchor" title="Dependencies "><a class="" href="/configuration/entry-context/#dependencies">Dependencies </a></li><li class="sidebar-item__anchor" title="Dynamic entry "><a class="" href="/configuration/entry-context/#dynamic-entry">Dynamic entry </a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/mode/">模式(Mode)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="用法 "><a class="" href="/configuration/mode/#usage">用法 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Mode: development "><a class="" href="/configuration/mode/#mode-development">Mode: development </a></li><li class="sidebar-item__anchor" title="Mode: production "><a class="" href="/configuration/mode/#mode-production">Mode: production </a></li><li class="sidebar-item__anchor" title="Mode: none "><a class="" href="/configuration/mode/#mode-none">Mode: none </a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/output/">Output</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="assetModuleFilename "><a class="" href="/configuration/output/#outputassetmodulefilename">assetModuleFilename </a></li><li class="sidebar-item__anchor" title="asyncChunks"><a class="" href="/configuration/output/#outputasyncChunks">asyncChunks</a></li><li class="sidebar-item__anchor" title="auxiliaryComment "><a class="" href="/configuration/output/#outputauxiliarycomment">auxiliaryComment </a></li><li class="sidebar-item__anchor" title="charset "><a class="" href="/configuration/output/#outputcharset">charset </a></li><li class="sidebar-item__anchor" title="chunkFilename "><a class="" href="/configuration/output/#outputchunkfilename">chunkFilename </a></li><li class="sidebar-item__anchor" title="chunkFormat "><a class="" href="/configuration/output/#outputchunkformat">chunkFormat </a></li><li class="sidebar-item__anchor" title="chunkLoadTimeout $#outputchunkLoadtimeout$"><a class="" href="/configuration/output/#outputchunkLoadTimeout-outputchunkLoadtimeout">chunkLoadTimeout $#outputchunkLoadtimeout$</a></li><li class="sidebar-item__anchor" title="chunkLoadingGlobal "><a class="" href="/configuration/output/#outputchunkloadingglobal">chunkLoadingGlobal </a></li><li class="sidebar-item__anchor" title="chunkLoading "><a class="" href="/configuration/output/#outputchunkloading">chunkLoading </a></li><li class="sidebar-item__anchor" title="clean "><a class="" href="/configuration/output/#outputclean">clean </a></li><li class="sidebar-item__anchor" title="compareBeforeEmit "><a class="" href="/configuration/output/#outputcomparebeforeemit">compareBeforeEmit </a></li><li class="sidebar-item__anchor" title="crossOriginLoading "><a class="" href="/configuration/output/#outputcrossoriginloading">crossOriginLoading </a></li><li class="sidebar-item__anchor" title="devtoolFallbackModuleFilenameTemplate "><a class="" href="/configuration/output/#outputdevtoolfallbackmodulefilenametemplate">devtoolFallbackModuleFilenameTemplate </a></li><li class="sidebar-item__anchor" title="devtoolModuleFilenameTemplate "><a class="" href="/configuration/output/#outputdevtoolmodulefilenametemplate">devtoolModuleFilenameTemplate </a></li><li class="sidebar-item__anchor" title="devtoolNamespace "><a class="" href="/configuration/output/#outputdevtoolnamespace">devtoolNamespace </a></li><li class="sidebar-item__anchor" title="enabledChunkLoadingTypes "><a class="" href="/configuration/output/#outputenabledchunkloadingtypes">enabledChunkLoadingTypes </a></li><li class="sidebar-item__anchor" title="enabledLibraryTypes "><a class="" href="/configuration/output/#outputenabledlibrarytypes">enabledLibraryTypes </a></li><li class="sidebar-item__anchor" title="enabledWasmLoadingTypes "><a class="" href="/configuration/output/#outputenabledwasmloadingtypes">enabledWasmLoadingTypes </a></li><li class="sidebar-item__anchor" title="filename "><a class="" href="/configuration/output/#outputfilename">filename </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Template strings "><a class="" href="/configuration/output/#template-strings">Template strings </a></li></ul></li><li class="sidebar-item__anchor" title="globalObject "><a class="" href="/configuration/output/#outputglobalobject">globalObject </a></li><li class="sidebar-item__anchor" title="hashDigest "><a class="" href="/configuration/output/#outputhashdigest">hashDigest </a></li><li class="sidebar-item__anchor" title="hashDigestLength "><a class="" href="/configuration/output/#outputhashdigestlength">hashDigestLength </a></li><li class="sidebar-item__anchor" title="hashFunction "><a class="" href="/configuration/output/#outputhashfunction">hashFunction </a></li><li class="sidebar-item__anchor" title="hashSalt "><a class="" href="/configuration/output/#outputhashsalt">hashSalt </a></li><li class="sidebar-item__anchor" title="hotUpdateChunkFilename "><a class="" href="/configuration/output/#outputhotupdatechunkfilename">hotUpdateChunkFilename </a></li><li class="sidebar-item__anchor" title="hotUpdateGlobal "><a class="" href="/configuration/output/#outputhotupdateglobal">hotUpdateGlobal </a></li><li class="sidebar-item__anchor" title="hotUpdateMainFilename "><a class="" href="/configuration/output/#outputhotupdatemainfilename">hotUpdateMainFilename </a></li><li class="sidebar-item__anchor" title="iife "><a class="" href="/configuration/output/#outputiife">iife </a></li><li class="sidebar-item__anchor" title="importFunctionName"><a class="" href="/configuration/output/#outputimportFunctionName">importFunctionName</a></li><li class="sidebar-item__anchor" title="library "><a class="" href="/configuration/output/#outputlibrary">library </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="output.library.name "><a class="" href="/configuration/output/#outputlibraryname">output.library.name </a></li><li class="sidebar-item__anchor" title="output.library.type "><a class="" href="/configuration/output/#outputlibrarytype">output.library.type </a></li><li class="sidebar-item__anchor" title="output.library.export "><a class="" href="/configuration/output/#outputlibraryexport">output.library.export </a></li><li class="sidebar-item__anchor" title="output.library.auxiliaryComment "><a class="" href="/configuration/output/#outputlibraryauxiliarycomment">output.library.auxiliaryComment </a></li><li class="sidebar-item__anchor" title="output.library.umdNamedDefine "><a class="" href="/configuration/output/#outputlibraryumdnameddefine">output.library.umdNamedDefine </a></li></ul></li><li class="sidebar-item__anchor" title="libraryExport "><a class="" href="/configuration/output/#outputlibraryexport">libraryExport </a></li><li class="sidebar-item__anchor" title="libraryTarget "><a class="" href="/configuration/output/#outputlibrarytarget">libraryTarget </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="暴露为一个变量 "><a class="" href="/configuration/output/#expose-a-variable">暴露为一个变量 </a></li><li class="sidebar-item__anchor" title="通过在对象上赋值暴露 "><a class="" href="/configuration/output/#expose-via-object-assignment">通过在对象上赋值暴露 </a></li><li class="sidebar-item__anchor" title="模块定义系统 "><a class="" href="/configuration/output/#module-definition-systems">模块定义系统 </a></li><li class="sidebar-item__anchor" title="其他 Targets "><a class="" href="/configuration/output/#other-targets">其他 Targets </a></li></ul></li><li class="sidebar-item__anchor" title="module "><a class="" href="/configuration/output/#outputmodule">module </a></li><li class="sidebar-item__anchor" title="path "><a class="" href="/configuration/output/#outputpath">path </a></li><li class="sidebar-item__anchor" title="pathinfo "><a class="" href="/configuration/output/#outputpathinfo">pathinfo </a></li><li class="sidebar-item__anchor" title="publicPath "><a class="" href="/configuration/output/#outputpublicpath">publicPath </a></li><li class="sidebar-item__anchor" title="scriptType "><a class="" href="/configuration/output/#outputscripttype">scriptType </a></li><li class="sidebar-item__anchor" title="sourceMapFilename "><a class="" href="/configuration/output/#outputsourcemapfilename">sourceMapFilename </a></li><li class="sidebar-item__anchor" title="sourcePrefix "><a class="" href="/configuration/output/#outputsourceprefix">sourcePrefix </a></li><li class="sidebar-item__anchor" title="strictModuleErrorHandling "><a class="" href="/configuration/output/#outputstrictmoduleerrorhandling">strictModuleErrorHandling </a></li><li class="sidebar-item__anchor" title="strictModuleExceptionHandling "><a class="" href="/configuration/output/#outputstrictmoduleexceptionhandling">strictModuleExceptionHandling </a></li><li class="sidebar-item__anchor" title="trustedTypes "><a class="" href="/configuration/output/#outputtrustedtypes">trustedTypes </a></li><li class="sidebar-item__anchor" title="umdNamedDefine "><a class="" href="/configuration/output/#outputumdnameddefine">umdNamedDefine </a></li><li class="sidebar-item__anchor" title="uniqueName "><a class="" href="/configuration/output/#outputuniquename">uniqueName </a></li><li class="sidebar-item__anchor" title="wasmLoading "><a class="" href="/configuration/output/#output-wasm-loading">wasmLoading </a></li><li class="sidebar-item__anchor" title="workerChunkLoading "><a class="" href="/configuration/output/#outputworkerchunkloading">workerChunkLoading </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/module/">Module</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="generator "><a class="" href="/configuration/module/#modulegenerator">generator </a></li><li class="sidebar-item__anchor" title="parser "><a class="" href="/configuration/module/#moduleparser">parser </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="module.parser.javascript "><a class="" href="/configuration/module/#moduleparserjavascript">module.parser.javascript </a></li></ul></li><li class="sidebar-item__anchor" title="noParse "><a class="" href="/configuration/module/#modulenoparse">noParse </a></li><li class="sidebar-item__anchor" title="unsafeCache "><a class="" href="/configuration/module/#moduleunsafecache">unsafeCache </a></li><li class="sidebar-item__anchor" title="rules "><a class="" href="/configuration/module/#modulerules">rules </a></li><li class="sidebar-item__anchor" title="Rule "><a class="" href="/configuration/module/#rule">Rule </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Rule 条件 "><a class="" href="/configuration/module/#rule-conditions">Rule 条件 </a></li><li class="sidebar-item__anchor" title="Rule 结果 "><a class="" href="/configuration/module/#rule-results">Rule 结果 </a></li></ul></li><li class="sidebar-item__anchor" title="嵌套的 Rule "><a class="" href="/configuration/module/#nested-rules">嵌套的 Rule </a></li><li class="sidebar-item__anchor" title="Rule.enforce "><a class="" href="/configuration/module/#ruleenforce">Rule.enforce </a></li><li class="sidebar-item__anchor" title="Rule.exclude "><a class="" href="/configuration/module/#ruleexclude">Rule.exclude </a></li><li class="sidebar-item__anchor" title="Rule.include "><a class="" href="/configuration/module/#ruleinclude">Rule.include </a></li><li class="sidebar-item__anchor" title="Rule.issuer "><a class="" href="/configuration/module/#ruleissuer">Rule.issuer </a></li><li class="sidebar-item__anchor" title="Rule.issuerLayer "><a class="" href="/configuration/module/#ruleissuerlayer">Rule.issuerLayer </a></li><li class="sidebar-item__anchor" title="Rule.layer "><a class="" href="/configuration/module/#rulelayer">Rule.layer </a></li><li class="sidebar-item__anchor" title="Rule.loader "><a class="" href="/configuration/module/#ruleloader">Rule.loader </a></li><li class="sidebar-item__anchor" title="Rule.loaders "><a class="" href="/configuration/module/#ruleloaders">Rule.loaders </a></li><li class="sidebar-item__anchor" title="Rule.mimetype "><a class="" href="/configuration/module/#rulemimetype">Rule.mimetype </a></li><li class="sidebar-item__anchor" title="Rule.oneOf "><a class="" href="/configuration/module/#ruleoneof">Rule.oneOf </a></li><li class="sidebar-item__anchor" title="Rule.options / Rule.query "><a class="" href="/configuration/module/#ruleoptions--rulequery">Rule.options / Rule.query </a></li><li class="sidebar-item__anchor" title="Rule.parser "><a class="" href="/configuration/module/#ruleparser">Rule.parser </a></li><li class="sidebar-item__anchor" title="Rule.parser.dataUrlCondition "><a class="" href="/configuration/module/#ruleparserdataurlcondition">Rule.parser.dataUrlCondition </a></li><li class="sidebar-item__anchor" title="Rule.generator "><a class="" href="/configuration/module/#rulegenerator">Rule.generator </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Rule.generator.dataUrl "><a class="" href="/configuration/module/#rulegeneratordataurl">Rule.generator.dataUrl </a></li><li class="sidebar-item__anchor" title="Rule.generator.emit "><a class="" href="/configuration/module/#rulegeneratoremit">Rule.generator.emit </a></li><li class="sidebar-item__anchor" title="Rule.generator.filename "><a class="" href="/configuration/module/#rulegeneratorfilename">Rule.generator.filename </a></li><li class="sidebar-item__anchor" title="Rule.generator.publicPath "><a class="" href="/configuration/module/#rulegeneratorpublichpath">Rule.generator.publicPath </a></li><li class="sidebar-item__anchor" title="Rule.generator.outputPath "><a class="" href="/configuration/module/#rulegeneratoroutputpath">Rule.generator.outputPath </a></li></ul></li><li class="sidebar-item__anchor" title="Rule.resource "><a class="" href="/configuration/module/#ruleresource">Rule.resource </a></li><li class="sidebar-item__anchor" title="Rule.resourceQuery "><a class="" href="/configuration/module/#ruleresourcequery">Rule.resourceQuery </a></li><li class="sidebar-item__anchor" title="Rule.parser.parse "><a class="" href="/configuration/module/#ruleparserparse">Rule.parser.parse </a></li><li class="sidebar-item__anchor" title="Rule.rules "><a class="" href="/configuration/module/#rulerules">Rule.rules </a></li><li class="sidebar-item__anchor" title="Rule.scheme "><a class="" href="/configuration/module/#rulescheme">Rule.scheme </a></li><li class="sidebar-item__anchor" title="Rule.sideEffects "><a class="" href="/configuration/module/#rulesideeffects">Rule.sideEffects </a></li><li class="sidebar-item__anchor" title="Rule.test "><a class="" href="/configuration/module/#ruletest">Rule.test </a></li><li class="sidebar-item__anchor" title="Rule.type "><a class="" href="/configuration/module/#ruletype">Rule.type </a></li><li class="sidebar-item__anchor" title="Rule.use "><a class="" href="/configuration/module/#ruleuse">Rule.use </a></li><li class="sidebar-item__anchor" title="Rule.resolve "><a class="" href="/configuration/module/#ruleresolve">Rule.resolve </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="resolve.fullySpecified "><a class="" href="/configuration/module/#resolve-fully-specified">resolve.fullySpecified </a></li></ul></li><li class="sidebar-item__anchor" title="Condition "><a class="" href="/configuration/module/#condition">Condition </a></li><li class="sidebar-item__anchor" title="UseEntry "><a class="" href="/configuration/module/#useentry">UseEntry </a></li><li class="sidebar-item__anchor" title="模块上下文(Module Contexts) "><a class="" href="/configuration/module/#module-contexts">模块上下文(Module Contexts) </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/resolve/">解析(Resolve)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="resolve "><a class="" href="/configuration/resolve/#resolve">resolve </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="resolve.alias "><a class="" href="/configuration/resolve/#resolvealias">resolve.alias </a></li><li class="sidebar-item__anchor" title="resolve.aliasFields "><a class="" href="/configuration/resolve/#resolvealiasfields">resolve.aliasFields </a></li><li class="sidebar-item__anchor" title="resolve.cacheWithContext "><a class="" href="/configuration/resolve/#resolvecachewithcontext">resolve.cacheWithContext </a></li><li class="sidebar-item__anchor" title="resolve.conditionNames "><a class="" href="/configuration/resolve/#resolveconditionnames">resolve.conditionNames </a></li><li class="sidebar-item__anchor" title="resolve.descriptionFiles"><a class="" href="/configuration/resolve/#resolvedescriptionFiles">resolve.descriptionFiles</a></li><li class="sidebar-item__anchor" title="resolve.enforceExtension "><a class="" href="/configuration/resolve/#resolveenforceextension">resolve.enforceExtension </a></li><li class="sidebar-item__anchor" title="resolve.extensionAlias"><a class="" href="/configuration/resolve/#resolveextensionAlias">resolve.extensionAlias</a></li><li class="sidebar-item__anchor" title="resolve.extensions"><a class="" href="/configuration/resolve/#resolveextensions">resolve.extensions</a></li><li class="sidebar-item__anchor" title="resolve.fallback "><a class="" href="/configuration/resolve/#resolvefallback">resolve.fallback </a></li><li class="sidebar-item__anchor" title="resolve.mainFields "><a class="" href="/configuration/resolve/#resolvemainfields">resolve.mainFields </a></li><li class="sidebar-item__anchor" title="resolve.mainFiles "><a class="" href="/configuration/resolve/#resolvemainfiles">resolve.mainFiles </a></li><li class="sidebar-item__anchor" title="resolve.exportsFields "><a class="" href="/configuration/resolve/#resolveexportsfields">resolve.exportsFields </a></li><li class="sidebar-item__anchor" title="resolve.modules "><a class="" href="/configuration/resolve/#resolvemodules">resolve.modules </a></li><li class="sidebar-item__anchor" title="resolve.unsafeCache "><a class="" href="/configuration/resolve/#resolveunsafecache">resolve.unsafeCache </a></li><li class="sidebar-item__anchor" title="resolve.useSyncFileSystemCalls "><a class="" href="/configuration/resolve/#resolveusesyncfilesystemcalls">resolve.useSyncFileSystemCalls </a></li><li class="sidebar-item__anchor" title="resolve.plugins "><a class="" href="/configuration/resolve/#resolveplugins">resolve.plugins </a></li><li class="sidebar-item__anchor" title="resolve.preferRelative "><a class="" href="/configuration/resolve/#resolvepreferrelative">resolve.preferRelative </a></li><li class="sidebar-item__anchor" title="resolve.preferAbsolute"><a class="" href="/configuration/resolve/#resolvepreferAbsolute">resolve.preferAbsolute</a></li><li class="sidebar-item__anchor" title="resolve.symlinks "><a class="" href="/configuration/resolve/#resolvesymlinks">resolve.symlinks </a></li><li class="sidebar-item__anchor" title="resolve.cachePredicate "><a class="" href="/configuration/resolve/#resolvecachepredicate">resolve.cachePredicate </a></li><li class="sidebar-item__anchor" title="resolve.restrictions "><a class="" href="/configuration/resolve/#resolverestrictions">resolve.restrictions </a></li><li class="sidebar-item__anchor" title="resolve.roots "><a class="" href="/configuration/resolve/#resolveroots">resolve.roots </a></li><li class="sidebar-item__anchor" title="resolve.importsFields"><a class="" href="/configuration/resolve/#resolveimportsFields">resolve.importsFields</a></li><li class="sidebar-item__anchor" title="resolve.byDependency "><a class="" href="/configuration/resolve/#resolvebydependency">resolve.byDependency </a></li></ul></li><li class="sidebar-item__anchor" title="resolveLoader "><a class="" href="/configuration/resolve/#resolveloader">resolveLoader </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/optimization/">优化(Optimization)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="optimization.chunkIds "><a class="" href="/configuration/optimization/#optimizationchunkids">optimization.chunkIds </a></li><li class="sidebar-item__anchor" title="optimization.concatenateModules "><a class="" href="/configuration/optimization/#optimizationconcatenatemodules">optimization.concatenateModules </a></li><li class="sidebar-item__anchor" title="optimization.emitOnErrors "><a class="" href="/configuration/optimization/#optimizationemitonerrors">optimization.emitOnErrors </a></li><li class="sidebar-item__anchor" title="optimization.flagIncludedChunks "><a class="" href="/configuration/optimization/#optimizationflagincludedchunks">optimization.flagIncludedChunks </a></li><li class="sidebar-item__anchor" title="optimization.innerGraph "><a class="" href="/configuration/optimization/#optimizationinnergraph">optimization.innerGraph </a></li><li class="sidebar-item__anchor" title="optimization.mangleExports "><a class="" href="/configuration/optimization/#optimizationmangleexports">optimization.mangleExports </a></li><li class="sidebar-item__anchor" title="optimization.mangleWasmImports "><a class="" href="/configuration/optimization/#optimizationmanglewasmimports">optimization.mangleWasmImports </a></li><li class="sidebar-item__anchor" title="optimization.mergeDuplicateChunks "><a class="" href="/configuration/optimization/#optimizationmergeduplicatechunks">optimization.mergeDuplicateChunks </a></li><li class="sidebar-item__anchor" title="optimization.minimize "><a class="" href="/configuration/optimization/#optimizationminimize">optimization.minimize </a></li><li class="sidebar-item__anchor" title="optimization.minimizer "><a class="" href="/configuration/optimization/#optimizationminimizer">optimization.minimizer </a></li><li class="sidebar-item__anchor" title="optimization.moduleIds "><a class="" href="/configuration/optimization/#optimizationmoduleids">optimization.moduleIds </a></li><li class="sidebar-item__anchor" title="optimization.nodeEnv "><a class="" href="/configuration/optimization/#optimizationnodeenv">optimization.nodeEnv </a></li><li class="sidebar-item__anchor" title="optimization.portableRecords "><a class="" href="/configuration/optimization/#optimizationportablerecords">optimization.portableRecords </a></li><li class="sidebar-item__anchor" title="optimization.providedExports "><a class="" href="/configuration/optimization/#optimizationprovidedexports">optimization.providedExports </a></li><li class="sidebar-item__anchor" title="optimization.realContentHash "><a class="" href="/configuration/optimization/#optimizationrealcontenthash">optimization.realContentHash </a></li><li class="sidebar-item__anchor" title="optimization.removeAvailableModules "><a class="" href="/configuration/optimization/#optimizationremoveavailablemodules">optimization.removeAvailableModules </a></li><li class="sidebar-item__anchor" title="optimization.removeEmptyChunks "><a class="" href="/configuration/optimization/#optimizationremoveemptychunks">optimization.removeEmptyChunks </a></li><li class="sidebar-item__anchor" title="optimization.runtimeChunk "><a class="" href="/configuration/optimization/#optimizationruntimechunk">optimization.runtimeChunk </a></li><li class="sidebar-item__anchor" title="optimization.sideEffects "><a class="" href="/configuration/optimization/#optimizationsideeffects">optimization.sideEffects </a></li><li class="sidebar-item__anchor" title="optimization.splitChunks "><a class="" href="/configuration/optimization/#optimizationsplitchunks">optimization.splitChunks </a></li><li class="sidebar-item__anchor" title="optimization.usedExports "><a class="" href="/configuration/optimization/#optimizationusedexports">optimization.usedExports </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/plugins/">插件(Plugins)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="plugins "><a class="" href="/configuration/plugins/#plugins">plugins </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/dev-server/">DevServer</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="devServer "><a class="" href="/configuration/dev-server/#devserver">devServer </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Usage via CLI "><a class="" href="/configuration/dev-server/#usage-via-cli">Usage via CLI </a></li><li class="sidebar-item__anchor" title="Usage via API "><a class="" href="/configuration/dev-server/#usageviaapi">Usage via API </a></li></ul></li><li class="sidebar-item__anchor" title="allowedHosts "><a class="" href="/configuration/dev-server/#devserverallowedhosts">allowedHosts </a></li><li class="sidebar-item__anchor" title="bonjour "><a class="" href="/configuration/dev-server/#devserverbonjour">bonjour </a></li><li class="sidebar-item__anchor" title="client "><a class="" href="/configuration/dev-server/#devserverclient">client </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="logging "><a class="" href="/configuration/dev-server/#logging">logging </a></li><li class="sidebar-item__anchor" title="overlay "><a class="" href="/configuration/dev-server/#overlay">overlay </a></li><li class="sidebar-item__anchor" title="progress "><a class="" href="/configuration/dev-server/#progress">progress </a></li><li class="sidebar-item__anchor" title="reconnect "><a class="" href="/configuration/dev-server/#reconnect">reconnect </a></li><li class="sidebar-item__anchor" title="webSocketTransport "><a class="" href="/configuration/dev-server/#websockettransport">webSocketTransport </a></li><li class="sidebar-item__anchor" title="webSocketURL "><a class="" href="/configuration/dev-server/#websocketurl">webSocketURL </a></li></ul></li><li class="sidebar-item__anchor" title="compress "><a class="" href="/configuration/dev-server/#devservercompress">compress </a></li><li class="sidebar-item__anchor" title="devMiddleware "><a class="" href="/configuration/dev-server/#devserverdevmiddleware">devMiddleware </a></li><li class="sidebar-item__anchor" title="http2 "><a class="" href="/configuration/dev-server/#devserverhttp2">http2 </a></li><li class="sidebar-item__anchor" title="https "><a class="" href="/configuration/dev-server/#devserverhttps">https </a></li><li class="sidebar-item__anchor" title="headers "><a class="" href="/configuration/dev-server/#devserverheaders">headers </a></li><li class="sidebar-item__anchor" title="historyApiFallback "><a class="" href="/configuration/dev-server/#devserverhistoryapifallback">historyApiFallback </a></li><li class="sidebar-item__anchor" title="host "><a class="" href="/configuration/dev-server/#devserverhost">host </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="local-ip "><a class="" href="/configuration/dev-server/#localip">local-ip </a></li><li class="sidebar-item__anchor" title="local-ipv4"><a class="" href="/configuration/dev-server/#local-ipv4">local-ipv4</a></li><li class="sidebar-item__anchor" title="local-ipv6"><a class="" href="/configuration/dev-server/#local-ipv6">local-ipv6</a></li></ul></li><li class="sidebar-item__anchor" title="hot "><a class="" href="/configuration/dev-server/#devserverhot">hot </a></li><li class="sidebar-item__anchor" title="ipc "><a class="" href="/configuration/dev-server/#devserveripc">ipc </a></li><li class="sidebar-item__anchor" title="liveReload "><a class="" href="/configuration/dev-server/#devserverlivereload">liveReload </a></li><li class="sidebar-item__anchor" title="magicHtml "><a class="" href="/configuration/dev-server/#devservermagichtml">magicHtml </a></li><li class="sidebar-item__anchor" title="onAfterSetupMiddleware "><a class="" href="/configuration/dev-server/#devserveronaftersetupmiddleware">onAfterSetupMiddleware </a></li><li class="sidebar-item__anchor" title="onBeforeSetupMiddleware "><a class="" href="/configuration/dev-server/#devserveronbeforesetupmiddleware">onBeforeSetupMiddleware </a></li><li class="sidebar-item__anchor" title="onListening "><a class="" href="/configuration/dev-server/#devserveronlistening">onListening </a></li><li class="sidebar-item__anchor" title="open "><a class="" href="/configuration/dev-server/#devserveropen">open </a></li><li class="sidebar-item__anchor" title="port "><a class="" href="/configuration/dev-server/#devserverport">port </a></li><li class="sidebar-item__anchor" title="proxy "><a class="" href="/configuration/dev-server/#devserverproxy">proxy </a></li><li class="sidebar-item__anchor" title="server "><a class="" href="/configuration/dev-server/#devserverserver">server </a></li><li class="sidebar-item__anchor" title="setupExitSignals "><a class="" href="/configuration/dev-server/#devserversetupexitsignals">setupExitSignals </a></li><li class="sidebar-item__anchor" title="setupMiddlewares "><a class="" href="/configuration/dev-server/#devserversetupmiddlewares">setupMiddlewares </a></li><li class="sidebar-item__anchor" title="static "><a class="" href="/configuration/dev-server/#devserverstatic">static </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="directory "><a class="" href="/configuration/dev-server/#directory">directory </a></li><li class="sidebar-item__anchor" title="staticOptions"><a class="" href="/configuration/dev-server/#staticOptions">staticOptions</a></li><li class="sidebar-item__anchor" title="publicPath "><a class="" href="/configuration/dev-server/#publicpath">publicPath </a></li><li class="sidebar-item__anchor" title="serveIndex "><a class="" href="/configuration/dev-server/#serveindex">serveIndex </a></li><li class="sidebar-item__anchor" title="watch "><a class="" href="/configuration/dev-server/#watch">watch </a></li></ul></li><li class="sidebar-item__anchor" title="watchFiles "><a class="" href="/configuration/dev-server/#devserverwatchfiles">watchFiles </a></li><li class="sidebar-item__anchor" title="webSocketServer "><a class="" href="/configuration/dev-server/#devserverwebsocketserver">webSocketServer </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/cache/">Cache</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="cache "><a class="" href="/configuration/cache/#cache">cache </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="cache.allowCollectingMemory "><a class="" href="/configuration/cache/#cacheallowcollectingmemory">cache.allowCollectingMemory </a></li><li class="sidebar-item__anchor" title="cache.buildDependencies "><a class="" href="/configuration/cache/#cachebuilddependencies">cache.buildDependencies </a></li><li class="sidebar-item__anchor" title="cache.cacheDirectory "><a class="" href="/configuration/cache/#cachecachedirectory">cache.cacheDirectory </a></li><li class="sidebar-item__anchor" title="cache.cacheLocation "><a class="" href="/configuration/cache/#cachecachelocation">cache.cacheLocation </a></li><li class="sidebar-item__anchor" title="cache.cacheUnaffected "><a class="" href="/configuration/cache/#cachecacheunaffected">cache.cacheUnaffected </a></li><li class="sidebar-item__anchor" title="cache.compression "><a class="" href="/configuration/cache/#cachecompression">cache.compression </a></li><li class="sidebar-item__anchor" title="cache.hashAlgorithm "><a class="" href="/configuration/cache/#cachehashalgorithm">cache.hashAlgorithm </a></li><li class="sidebar-item__anchor" title="cache.idleTimeout "><a class="" href="/configuration/cache/#cacheidletimeout">cache.idleTimeout </a></li><li class="sidebar-item__anchor" title="cache.idleTimeoutAfterLargeChanges "><a class="" href="/configuration/cache/#cacheidletimeoutafterlargechanges">cache.idleTimeoutAfterLargeChanges </a></li><li class="sidebar-item__anchor" title="cache.idleTimeoutForInitialStore "><a class="" href="/configuration/cache/#cacheidletimeoutforinitialstore">cache.idleTimeoutForInitialStore </a></li><li class="sidebar-item__anchor" title="cache.managedPaths "><a class="" href="/configuration/cache/#cachemanagedpaths">cache.managedPaths </a></li><li class="sidebar-item__anchor" title="cache.maxAge "><a class="" href="/configuration/cache/#cachemaxage">cache.maxAge </a></li><li class="sidebar-item__anchor" title="cache.maxGenerations "><a class="" href="/configuration/cache/#cachemaxgenerations">cache.maxGenerations </a></li><li class="sidebar-item__anchor" title="cache.maxMemoryGenerations $#cachemaxMemorygenerations$"><a class="" href="/configuration/cache/#cachemaxMemoryGenerations-cachemaxMemorygenerations">cache.maxMemoryGenerations $#cachemaxMemorygenerations$</a></li><li class="sidebar-item__anchor" title="cache.memoryCacheUnaffected "><a class="" href="/configuration/cache/#cachememorycacheunaffected">cache.memoryCacheUnaffected </a></li><li class="sidebar-item__anchor" title="cache.name "><a class="" href="/configuration/cache/#cachename">cache.name </a></li><li class="sidebar-item__anchor" title="cache.profile "><a class="" href="/configuration/cache/#cacheprofile">cache.profile </a></li><li class="sidebar-item__anchor" title="cache.store "><a class="" href="/configuration/cache/#cachestore">cache.store </a></li><li class="sidebar-item__anchor" title="cache.type"><a class="" href="/configuration/cache/#cachetype">cache.type</a></li><li class="sidebar-item__anchor" title="cache.version "><a class="" href="/configuration/cache/#cacheversion">cache.version </a></li></ul></li><li class="sidebar-item__anchor" title="在 CI/CD 系统中设置缓存 "><a class="" href="/configuration/cache/#setup-cache-in-cicd-system">在 CI/CD 系统中设置缓存 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="GitLab CI/CD"><a class="" href="/configuration/cache/#GitLab-CICD">GitLab CI/CD</a></li><li class="sidebar-item__anchor" title="Github actions"><a class="" href="/configuration/cache/#Github-actions">Github actions</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/devtool/">Devtool</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="devtool "><a class="" href="/configuration/devtool/#devtool">devtool </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="品质说明(quality) "><a class="" href="/configuration/devtool/#qualities">品质说明(quality) </a></li><li class="sidebar-item__anchor" title="对于开发环境 "><a class="" href="/configuration/devtool/#development">对于开发环境 </a></li><li class="sidebar-item__anchor" title="特定场景 "><a class="" href="/configuration/devtool/#special-cases">特定场景 </a></li><li class="sidebar-item__anchor" title="对于生产环境 "><a class="" href="/configuration/devtool/#production">对于生产环境 </a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/target/">构建目标(Targets)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="target "><a class="" href="/configuration/target/#target">target </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="string "><a class="" href="/configuration/target/#string">string </a></li><li class="sidebar-item__anchor" title="[string] "><a class="" href="/configuration/target/#string">[string] </a></li><li class="sidebar-item__anchor" title="false "><a class="" href="/configuration/target/#false">false </a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/watch/">watch 和 watchOptions</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="watch "><a class="" href="/configuration/watch/#watch">watch </a></li><li class="sidebar-item__anchor" title="watchOptions "><a class="" href="/configuration/watch/#watchoptions">watchOptions </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="watchOptions.aggregateTimeout "><a class="" href="/configuration/watch/#watchoptionsaggregatetimeout">watchOptions.aggregateTimeout </a></li><li class="sidebar-item__anchor" title="watchOptions.ignored "><a class="" href="/configuration/watch/#watchoptionsignored">watchOptions.ignored </a></li><li class="sidebar-item__anchor" title="watchOptions.poll "><a class="" href="/configuration/watch/#watchoptionspoll">watchOptions.poll </a></li><li class="sidebar-item__anchor" title="watchOptions.followSymlinks "><a class="" href="/configuration/watch/#watchoptionsfollowsymlinks">watchOptions.followSymlinks </a></li><li class="sidebar-item__anchor" title="watchOptions.stdin "><a class="" href="/configuration/watch/#watchoptionsstdin">watchOptions.stdin </a></li></ul></li><li class="sidebar-item__anchor" title="故障排除 "><a class="" href="/configuration/watch/#troubleshooting">故障排除 </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="发现修改，但并未做处理 "><a class="" href="/configuration/watch/#changes-seen-but-not-processed">发现修改，但并未做处理 </a></li><li class="sidebar-item__anchor" title="没有足够的文件观察者 "><a class="" href="/configuration/watch/#not-enough-watchers">没有足够的文件观察者 </a></li><li class="sidebar-item__anchor" title="macOS fsevents Bug "><a class="" href="/configuration/watch/#macos-fsevents-bug">macOS fsevents Bug </a></li><li class="sidebar-item__anchor" title="Windows Paths "><a class="" href="/configuration/watch/#windows-paths">Windows Paths </a></li><li class="sidebar-item__anchor" title="Vim "><a class="" href="/configuration/watch/#vim">Vim </a></li><li class="sidebar-item__anchor" title="在 WebStorm 中保存 "><a class="" href="/configuration/watch/#saving-in-webstorm">在 WebStorm 中保存 </a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/externals/">外部扩展(Externals)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="externals "><a class="" href="/configuration/externals/#externals">externals </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="字符串 "><a class="" href="/configuration/externals/#string">字符串 </a></li><li class="sidebar-item__anchor" title="[string] "><a class="" href="/configuration/externals/#string">[string] </a></li><li class="sidebar-item__anchor" title="对象 "><a class="" href="/configuration/externals/#object">对象 </a></li><li class="sidebar-item__anchor" title="函数 "><a class="" href="/configuration/externals/#function">函数 </a></li><li class="sidebar-item__anchor" title="RegExp "><a class="" href="/configuration/externals/#regexp">RegExp </a></li><li class="sidebar-item__anchor" title="混用语法 "><a class="" href="/configuration/externals/#combining-syntaxes">混用语法 </a></li><li class="sidebar-item__anchor" title="byLayer "><a class="" href="/configuration/externals/#bylayer">byLayer </a></li></ul></li><li class="sidebar-item__anchor" title="externalsType "><a class="" href="/configuration/externals/#externalstype">externalsType </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="externalsType.commonjs"><a class="" href="/configuration/externals/#externalsTypecommonjs">externalsType.commonjs</a></li><li class="sidebar-item__anchor" title="externalsType.global"><a class="" href="/configuration/externals/#externalsTypeglobal">externalsType.global</a></li><li class="sidebar-item__anchor" title="externalsType.module"><a class="" href="/configuration/externals/#externalsTypemodule">externalsType.module</a></li><li class="sidebar-item__anchor" title="externalsType.node-commonjs"><a class="" href="/configuration/externals/#externalsTypenode-commonjs">externalsType.node-commonjs</a></li><li class="sidebar-item__anchor" title="externalsType.promise"><a class="" href="/configuration/externals/#externalsTypepromise">externalsType.promise</a></li><li class="sidebar-item__anchor" title="externalsType.self"><a class="" href="/configuration/externals/#externalsTypeself">externalsType.self</a></li><li class="sidebar-item__anchor" title="externalsType.script"><a class="" href="/configuration/externals/#externalsTypescript">externalsType.script</a></li><li class="sidebar-item__anchor" title="externalsType.this"><a class="" href="/configuration/externals/#externalsTypethis">externalsType.this</a></li><li class="sidebar-item__anchor" title="externalsType.var"><a class="" href="/configuration/externals/#externalsTypevar">externalsType.var</a></li><li class="sidebar-item__anchor" title="externalsType.window"><a class="" href="/configuration/externals/#externalsTypewindow">externalsType.window</a></li></ul></li><li class="sidebar-item__anchor" title="externalsPresets"><a class="" href="/configuration/externals/#externalsPresets">externalsPresets</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/performance/">Performance</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="performance "><a class="" href="/configuration/performance/#performance">performance </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="performance.assetFilter "><a class="" href="/configuration/performance/#performanceassetfilter">performance.assetFilter </a></li><li class="sidebar-item__anchor" title="performance.hints "><a class="" href="/configuration/performance/#performancehints">performance.hints </a></li><li class="sidebar-item__anchor" title="performance.maxAssetSize "><a class="" href="/configuration/performance/#performancemaxassetsize">performance.maxAssetSize </a></li><li class="sidebar-item__anchor" title="performance.maxEntrypointSize "><a class="" href="/configuration/performance/#performancemaxentrypointsize">performance.maxEntrypointSize </a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/node/">Node</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="node "><a class="" href="/configuration/node/#node">node </a></li><li class="sidebar-item__anchor" title="global "><a class="" href="/configuration/node/#nodeglobal">global </a></li><li class="sidebar-item__anchor" title="__filename "><a class="" href="/configuration/node/#node__filename">__filename </a></li><li class="sidebar-item__anchor" title="__dirname "><a class="" href="/configuration/node/#node__dirname">__dirname </a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/stats/">Stats 对象</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Stats Presets "><a class="" href="/configuration/stats/#stats-presets">Stats Presets </a></li><li class="sidebar-item__anchor" title="Stats "><a class="" href="/configuration/stats/#stats">Stats </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="stats.all "><a class="" href="/configuration/stats/#statsall">stats.all </a></li><li class="sidebar-item__anchor" title="stats.assets "><a class="" href="/configuration/stats/#statsassets">stats.assets </a></li><li class="sidebar-item__anchor" title="stats.assetsSort "><a class="" href="/configuration/stats/#statsassetssort">stats.assetsSort </a></li><li class="sidebar-item__anchor" title="stats.builtAt "><a class="" href="/configuration/stats/#statsbuiltat">stats.builtAt </a></li><li class="sidebar-item__anchor" title="stats.moduleAssets "><a class="" href="/configuration/stats/#statsmoduleassets">stats.moduleAssets </a></li><li class="sidebar-item__anchor" title="stats.assetsSpace "><a class="" href="/configuration/stats/#statsassetsspace">stats.assetsSpace </a></li><li class="sidebar-item__anchor" title="stats.modulesSpace "><a class="" href="/configuration/stats/#statsmodulesspace">stats.modulesSpace </a></li><li class="sidebar-item__anchor" title="stats.chunkModulesSpace "><a class="" href="/configuration/stats/#statschunkmodulesspace">stats.chunkModulesSpace </a></li><li class="sidebar-item__anchor" title="stats.nestedModules "><a class="" href="/configuration/stats/#statsnestedmodules">stats.nestedModules </a></li><li class="sidebar-item__anchor" title="stats.nestedModulesSpace "><a class="" href="/configuration/stats/#statsnestedmodulesspace">stats.nestedModulesSpace </a></li><li class="sidebar-item__anchor" title="stats.cached "><a class="" href="/configuration/stats/#statscached">stats.cached </a></li><li class="sidebar-item__anchor" title="stats.cachedModules "><a class="" href="/configuration/stats/#statscachedmodules">stats.cachedModules </a></li><li class="sidebar-item__anchor" title="stats.runtimeModules "><a class="" href="/configuration/stats/#statsruntimemodules">stats.runtimeModules </a></li><li class="sidebar-item__anchor" title="stats.dependentModules "><a class="" href="/configuration/stats/#statsdependentmodules">stats.dependentModules </a></li><li class="sidebar-item__anchor" title="stats.groupAssetsByChunk "><a class="" href="/configuration/stats/#statsgroupassetsbychunk">stats.groupAssetsByChunk </a></li><li class="sidebar-item__anchor" title="stats.groupAssetsByEmitStatus "><a class="" href="/configuration/stats/#statsgroupassetsbyemitstatus">stats.groupAssetsByEmitStatus </a></li><li class="sidebar-item__anchor" title="stats.groupAssetsByExtension "><a class="" href="/configuration/stats/#statsgroupassetsbyextension">stats.groupAssetsByExtension </a></li><li class="sidebar-item__anchor" title="stats.groupAssetsByInfo "><a class="" href="/configuration/stats/#statsgroupassetsbyinfo">stats.groupAssetsByInfo </a></li><li class="sidebar-item__anchor" title="stats.groupAssetsByPath "><a class="" href="/configuration/stats/#statsgroupassetsbypath">stats.groupAssetsByPath </a></li><li class="sidebar-item__anchor" title="stats.groupModulesByAttributes "><a class="" href="/configuration/stats/#statsgroupmodulesbyattributes">stats.groupModulesByAttributes </a></li><li class="sidebar-item__anchor" title="stats.groupModulesByCacheStatus "><a class="" href="/configuration/stats/#statsgroupmodulesbycachestatus">stats.groupModulesByCacheStatus </a></li><li class="sidebar-item__anchor" title="stats.groupModulesByExtension "><a class="" href="/configuration/stats/#statsgroupmodulesbyextension">stats.groupModulesByExtension </a></li><li class="sidebar-item__anchor" title="stats.groupModulesByLayer "><a class="" href="/configuration/stats/#statsgroupmodulesbylayer">stats.groupModulesByLayer </a></li><li class="sidebar-item__anchor" title="stats.groupModulesByPath "><a class="" href="/configuration/stats/#statsgroupmodulesbypath">stats.groupModulesByPath </a></li><li class="sidebar-item__anchor" title="stats.groupModulesByType "><a class="" href="/configuration/stats/#statsgroupmodulesbytype">stats.groupModulesByType </a></li><li class="sidebar-item__anchor" title="stats.groupReasonsByOrigin "><a class="" href="/configuration/stats/#statsgroupreasonsbyorigin">stats.groupReasonsByOrigin </a></li><li class="sidebar-item__anchor" title="stats.cachedAssets "><a class="" href="/configuration/stats/#statscachedassets">stats.cachedAssets </a></li><li class="sidebar-item__anchor" title="stats.children "><a class="" href="/configuration/stats/#statschildren">stats.children </a></li><li class="sidebar-item__anchor" title="stats.chunks "><a class="" href="/configuration/stats/#statschunks">stats.chunks </a></li><li class="sidebar-item__anchor" title="stats.chunkGroups "><a class="" href="/configuration/stats/#statschunkgroups">stats.chunkGroups </a></li><li class="sidebar-item__anchor" title="stats.chunkModules "><a class="" href="/configuration/stats/#statschunkmodules">stats.chunkModules </a></li><li class="sidebar-item__anchor" title="stats.chunkOrigins "><a class="" href="/configuration/stats/#statschunkorigins">stats.chunkOrigins </a></li><li class="sidebar-item__anchor" title="stats.chunksSort "><a class="" href="/configuration/stats/#statschunkssort">stats.chunksSort </a></li><li class="sidebar-item__anchor" title="stats.context "><a class="" href="/configuration/stats/#statscontext">stats.context </a></li><li class="sidebar-item__anchor" title="stats.colors "><a class="" href="/configuration/stats/#statscolors">stats.colors </a></li><li class="sidebar-item__anchor" title="stats.depth "><a class="" href="/configuration/stats/#statsdepth">stats.depth </a></li><li class="sidebar-item__anchor" title="stats.entrypoints "><a class="" href="/configuration/stats/#statsentrypoints">stats.entrypoints </a></li><li class="sidebar-item__anchor" title="stats.env "><a class="" href="/configuration/stats/#statsenv">stats.env </a></li><li class="sidebar-item__anchor" title="stats.orphanModules "><a class="" href="/configuration/stats/#statsorphanmodules">stats.orphanModules </a></li><li class="sidebar-item__anchor" title="stats.errors "><a class="" href="/configuration/stats/#statserrors">stats.errors </a></li><li class="sidebar-item__anchor" title="stats.errorDetails "><a class="" href="/configuration/stats/#statserrordetails">stats.errorDetails </a></li><li class="sidebar-item__anchor" title="stats.errorStack "><a class="" href="/configuration/stats/#statserrorstack">stats.errorStack </a></li><li class="sidebar-item__anchor" title="stats.excludeAssets "><a class="" href="/configuration/stats/#statsexcludeassets">stats.excludeAssets </a></li><li class="sidebar-item__anchor" title="stats.excludeModules "><a class="" href="/configuration/stats/#statsexcludemodules">stats.excludeModules </a></li><li class="sidebar-item__anchor" title="stats.exclude "><a class="" href="/configuration/stats/#statsexclude">stats.exclude </a></li><li class="sidebar-item__anchor" title="stats.hash "><a class="" href="/configuration/stats/#statshash">stats.hash </a></li><li class="sidebar-item__anchor" title="stats.logging "><a class="" href="/configuration/stats/#statslogging">stats.logging </a></li><li class="sidebar-item__anchor" title="stats.loggingDebug "><a class="" href="/configuration/stats/#statsloggingdebug">stats.loggingDebug </a></li><li class="sidebar-item__anchor" title="stats.loggingTrace "><a class="" href="/configuration/stats/#statsloggingtrace">stats.loggingTrace </a></li><li class="sidebar-item__anchor" title="stats.modules "><a class="" href="/configuration/stats/#statsmodules">stats.modules </a></li><li class="sidebar-item__anchor" title="stats.modulesSort "><a class="" href="/configuration/stats/#statsmodulessort">stats.modulesSort </a></li><li class="sidebar-item__anchor" title="stats.moduleTrace "><a class="" href="/configuration/stats/#statsmoduletrace">stats.moduleTrace </a></li><li class="sidebar-item__anchor" title="stats.optimizationBailout "><a class="" href="/configuration/stats/#statsoptimizationbailout">stats.optimizationBailout </a></li><li class="sidebar-item__anchor" title="stats.outputPath "><a class="" href="/configuration/stats/#statsoutputpath">stats.outputPath </a></li><li class="sidebar-item__anchor" title="stats.performance "><a class="" href="/configuration/stats/#statsperformance">stats.performance </a></li><li class="sidebar-item__anchor" title="stats.preset "><a class="" href="/configuration/stats/#statspreset">stats.preset </a></li><li class="sidebar-item__anchor" title="stats.providedExports "><a class="" href="/configuration/stats/#statsprovidedexports">stats.providedExports </a></li><li class="sidebar-item__anchor" title="stats.errorsCount "><a class="" href="/configuration/stats/#statserrorscount">stats.errorsCount </a></li><li class="sidebar-item__anchor" title="stats.warningsCount "><a class="" href="/configuration/stats/#statswarningscount">stats.warningsCount </a></li><li class="sidebar-item__anchor" title="stats.publicPath "><a class="" href="/configuration/stats/#statspublicpath">stats.publicPath </a></li><li class="sidebar-item__anchor" title="stats.reasons "><a class="" href="/configuration/stats/#statsreasons">stats.reasons </a></li><li class="sidebar-item__anchor" title="stats.reasonsSpace "><a class="" href="/configuration/stats/#statsreasonspace">stats.reasonsSpace </a></li><li class="sidebar-item__anchor" title="stats.relatedAssets "><a class="" href="/configuration/stats/#statsrelatedassets">stats.relatedAssets </a></li><li class="sidebar-item__anchor" title="stats.source "><a class="" href="/configuration/stats/#statssource">stats.source </a></li><li class="sidebar-item__anchor" title="stats.timings "><a class="" href="/configuration/stats/#statstimings">stats.timings </a></li><li class="sidebar-item__anchor" title="stats.ids "><a class="" href="/configuration/stats/#statsids">stats.ids </a></li><li class="sidebar-item__anchor" title="stats.usedExports "><a class="" href="/configuration/stats/#statsusedexports">stats.usedExports </a></li><li class="sidebar-item__anchor" title="stats.version "><a class="" href="/configuration/stats/#statsversion">stats.version </a></li><li class="sidebar-item__anchor" title="stats.chunkGroupAuxiliary "><a class="" href="/configuration/stats/#statschunkgroupauxiliary">stats.chunkGroupAuxiliary </a></li><li class="sidebar-item__anchor" title="stats.chunkGroupChildren "><a class="" href="/configuration/stats/#statschunkgroupchildren">stats.chunkGroupChildren </a></li><li class="sidebar-item__anchor" title="stats.chunkGroupMaxAssets "><a class="" href="/configuration/stats/#statschunkgroupmaxassets">stats.chunkGroupMaxAssets </a></li><li class="sidebar-item__anchor" title="stats.warnings "><a class="" href="/configuration/stats/#statswarnings">stats.warnings </a></li><li class="sidebar-item__anchor" title="stats.warningsFilter "><a class="" href="/configuration/stats/#statswarningsfilter">stats.warningsFilter </a></li><li class="sidebar-item__anchor" title="stats.chunkRelations "><a class="" href="/configuration/stats/#statschunkrelations">stats.chunkRelations </a></li><li class="sidebar-item__anchor" title="字段排序 "><a class="" href="/configuration/stats/#sorting-fields">字段排序 </a></li><li class="sidebar-item__anchor" title="扩展统计信息行为 "><a class="" href="/configuration/stats/#extending-stats-behaviours">扩展统计信息行为 </a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/experiments/">实验特性(Experiments)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="experiments "><a class="" href="/configuration/experiments/#experiments">experiments </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="experiments.backCompat "><a class="" href="/configuration/experiments/#experimentsbackcompat">experiments.backCompat </a></li><li class="sidebar-item__anchor" title="experiments.buildHttp "><a class="" href="/configuration/experiments/#experimentsbuildhttp">experiments.buildHttp </a></li><li class="sidebar-item__anchor" title="experiments.css "><a class="" href="/configuration/experiments/#experimentscss">experiments.css </a></li><li class="sidebar-item__anchor" title="experiments.cacheUnaffected "><a class="" href="/configuration/experiments/#experimentscacheunaffected">experiments.cacheUnaffected </a></li><li class="sidebar-item__anchor" title="experiments.futureDefaults "><a class="" href="/configuration/experiments/#experimentsfuturedefaults">experiments.futureDefaults </a></li><li class="sidebar-item__anchor" title="experiments.lazyCompilation "><a class="" href="/configuration/experiments/#experimentslazycompilation">experiments.lazyCompilation </a></li><li class="sidebar-item__anchor" title="experiments.outputModule"><a class="" href="/configuration/experiments/#experimentsoutputModule">experiments.outputModule</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="m9.2 4.5 4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0"></path></svg><a class="sidebar-item__title" href="/configuration/other-options/">其它选项</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="amd "><a class="" href="/configuration/other-options/#amd">amd </a></li><li class="sidebar-item__anchor" title="bail "><a class="" href="/configuration/other-options/#bail">bail </a></li><li class="sidebar-item__anchor" title="dependencies "><a class="" href="/configuration/other-options/#dependencies">dependencies </a></li><li class="sidebar-item__anchor" title="ignoreWarnings "><a class="" href="/configuration/other-options/#ignorewarnings">ignoreWarnings </a></li><li class="sidebar-item__anchor" title="infrastructureLogging "><a class="" href="/configuration/other-options/#infrastructurelogging">infrastructureLogging </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="appendOnly "><a class="" href="/configuration/other-options/#appendonly">appendOnly </a></li><li class="sidebar-item__anchor" title="colors "><a class="" href="/configuration/other-options/#colors">colors </a></li><li class="sidebar-item__anchor" title="console "><a class="" href="/configuration/other-options/#console">console </a></li><li class="sidebar-item__anchor" title="debug "><a class="" href="/configuration/other-options/#debug">debug </a></li><li class="sidebar-item__anchor" title="level "><a class="" href="/configuration/other-options/#level">level </a></li><li class="sidebar-item__anchor" title="stream "><a class="" href="/configuration/other-options/#stream">stream </a></li></ul></li><li class="sidebar-item__anchor" title="loader"><a class="" href="/configuration/other-options/#loader">loader</a></li><li class="sidebar-item__anchor" title="name "><a class="" href="/configuration/other-options/#name">name </a></li><li class="sidebar-item__anchor" title="parallelism "><a class="" href="/configuration/other-options/#parallelism">parallelism </a></li><li class="sidebar-item__anchor" title="profile "><a class="" href="/configuration/other-options/#profile">profile </a></li><li class="sidebar-item__anchor" title="recordsInputPath "><a class="" href="/configuration/other-options/#recordsinputpath">recordsInputPath </a></li><li class="sidebar-item__anchor" title="recordsOutputPath "><a class="" href="/configuration/other-options/#recordsoutputpath">recordsOutputPath </a></li><li class="sidebar-item__anchor" title="recordsPath "><a class="" href="/configuration/other-options/#recordspath">recordsPath </a></li><li class="sidebar-item__anchor" title="snapshot "><a class="" href="/configuration/other-options/#snapshot">snapshot </a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="buildDependencies "><a class="" href="/configuration/other-options/#build-dependencies">buildDependencies </a></li><li class="sidebar-item__anchor" title="immutablePaths "><a class="" href="/configuration/other-options/#immutable-paths">immutablePaths </a></li><li class="sidebar-item__anchor" title="managedPaths "><a class="" href="/configuration/other-options/#managedpaths">managedPaths </a></li><li class="sidebar-item__anchor" title="managedPaths"><a class="" href="/configuration/other-options/#managedPaths">managedPaths</a></li><li class="sidebar-item__anchor" title="module "><a class="" href="/configuration/other-options/#module">module </a></li><li class="sidebar-item__anchor" title="resolve "><a class="" href="/configuration/other-options/#resolve">resolve </a></li><li class="sidebar-item__anchor" title="resolveBuildDependencies "><a class="" href="/configuration/other-options/#resolve-build-dependencies">resolveBuildDependencies </a></li></ul></li></ul></div></div></div></nav><section class="page"><div class="markdown"><h1>Printable</h1><div id="md-content"><h1><span id="配置"></span>配置<a href="#%E9%85%8D%E7%BD%AE" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>webpack 开箱即用，可以无需使用任何配置文件。然而，webpack 会假定项目的入口起点为 <code>src/index.js</code>，然后会在 <code>dist/main.js</code> 输出结果，并且在生产环境开启压缩和优化。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p><a href="https://createapp.dev/webpack">createapp.dev</a> 是一个创建自定义 webpack 配置的在线工具。它允许你选择各种特性，其将会被添加到最后的配置文件中。它也会基于生成的 webpack 配置初始化一个示例项目，你可以在浏览器中查看该项目并且下载。</p></aside><p>通常你的项目还需要继续扩展此能力，为此你可以在项目根目录下创建一个 <code>webpack.config.js</code> 文件，然后 webpack 会自动使用它。</p><p>下面指定了所有可用的配置选项。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>刚开始学习 webpack？请查看我们提供的指南，从 webpack 一些 <a href="/concepts">核心概念</a> 开始学习吧！</p></aside><h2><span id="use-different-configuration-file"></span>使用不同的配置文件<a href="#use-different-configuration-file" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>如果出于某些原因，需要根据特定情况使用不同的配置文件，则可以通过在命令行中使用 <code>--config</code> 标志修改。</p><p><strong>package.json</strong></p><pre><code class="hljs language-json"><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config prod.config.js&quot;</span>
<span class="token punctuation">}</span></code></pre><h2><span id="set-up-a-new-webpack-project"></span>设置一个新的 webpack 项目<a href="#set-up-a-new-webpack-project" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><aside class="warning"><h6 class="warning__prefix">警告</h6><p>在应用 <a href="/contribute/writing-a-plugin/#configuration-defaults">插件默认值</a> 之后，webpack 将应用配置默认值。</p></aside><p>Webpack 有大量的配置项，可能会让你不知所措，请利用 <a href="/api/cli/#init">webpack-cli 的 init 命令</a>，它可以根据你的项目需求快速生成 webpack 配置文件，它会在创建配置文件之前询问你几个问题。</p><pre><code class="hljs language-bash">npx webpack init</code></pre><p>如果尚未在项目或全局安装 <code>@webpack-cli/generators</code>，npx 可能会提示你安装。根据你在配置生成过程中的选择，你也可能会安装额外的 package 到你的项目中。</p><pre><code class="hljs language-bash">$ npx webpack init

<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> For using this <span class="token builtin class-name">command</span> you need to install: <span class="token string">&#x27;@webpack-cli/generators&#x27;</span> package.
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Would you like to <span class="token function">install</span> <span class="token string">&#x27;@webpack-cli/generators&#x27;</span> package? <span class="token punctuation">(</span>That will run <span class="token string">&#x27;npm install -D @webpack-cli/generators&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>Y/n<span class="token punctuation">)</span>
devDependencies:
+ @webpack-cli/generators <span class="token number">2.5</span>.0
? Which of the following JS solutions <span class="token keyword">do</span> you want to use? ES6
? Do you want to use webpack-dev-server? Yes
? Do you want to simplify the creation of HTML files <span class="token keyword">for</span> your bundle? Yes
? Do you want to <span class="token function">add</span> PWA support? No
? Which of the following CSS solutions <span class="token keyword">do</span> you want to use? CSS only
? Will you be using PostCSS <span class="token keyword">in</span> your project? Yes
? Do you want to extract CSS <span class="token keyword">for</span> every file? Only <span class="token keyword">for</span> Production
? Do you like to <span class="token function">install</span> prettier to <span class="token function">format</span> generated configuration? Yes
? Pick a package manager: <span class="token function">pnpm</span>
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> ℹ INFO  Initialising project<span class="token punctuation">..</span>.

devDependencies:
+ @babel/core <span class="token number">7.19</span>.3
+ @babel/preset-env <span class="token number">7.19</span>.4
+ autoprefixer <span class="token number">10.4</span>.12
+ babel-loader <span class="token number">8.2</span>.5
+ css-loader <span class="token number">6.7</span>.1
+ html-webpack-plugin <span class="token number">5.5</span>.0
+ mini-css-extract-plugin <span class="token number">2.6</span>.1
+ postcss <span class="token number">8.4</span>.17
+ postcss-loader <span class="token number">7.0</span>.1
+ prettier <span class="token number">2.7</span>.1
+ style-loader <span class="token number">3.3</span>.1
+ webpack-dev-server <span class="token number">4.11</span>.1
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Project has been initialised with webpack<span class="token operator">!</span></code></pre><h1><span id="Configuration-Languages"></span>Configuration Languages<a href="#Configuration-Languages" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>Webpack 支持使用多种编程语言和数据描述格式来编写配置文件。在 <a href="https://github.com/gulpjs/interpret">node-interpret</a> 中你可以找到当前所支持的文件类型列表，通过 <a href="https://github.com/gulpjs/interpret">node-interpret</a>，webpack 能够处理这些类型的配置文件。</p><h2><span id="typescript"></span>TypeScript<a href="#typescript" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>要使用 <a href="https://www.typescriptlang.org/">Typescript</a> 来编写 webpack 配置，你需要先安装必要的依赖，比如 Typescript 以及其相应的类型声明，类型声明可以从 <a href="https://definitelytyped.org/">DefinitelyTyped</a> 项目中获取，依赖安装如下所示：</p><pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev typescript ts-node @types/node @types/webpack
<span class="token comment"># 如果使用版本低于 v4.7.0 的 webpack-dev-server，还需要安装以下依赖</span>
<span class="token function">npm</span> <span class="token function">install</span> --save-dev @types/webpack-dev-server</code></pre><p>完成依赖安装后便可以开始编写配置文件，示例如下：</p><p><strong>webpack.config.ts</strong></p><pre><code class="hljs language-typescript"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> path <span class="token keyword">from</span> <span class="token string">&#x27;path&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> webpack <span class="token keyword">from</span> <span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">;</span>
<span class="token comment">// in case you run into any typescript error when configuring `devServer`</span>
<span class="token keyword">import</span> <span class="token string">&#x27;webpack-dev-server&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> config<span class="token operator">:</span> webpack<span class="token punctuation">.</span>Configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&#x27;production&#x27;</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token string">&#x27;./foo.js&#x27;</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;dist&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">&#x27;foo.bundle.js&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> config<span class="token punctuation">;</span></code></pre><p>该示例需要 typescript 版本在 2.7 及以上，并在 <code>tsconfig.json</code> 文件的 compilerOptions 中添加 <code>esModuleInterop</code> 和 <code>allowSyntheticDefaultImports</code> 两个配置项。</p><p>值得注意的是你需要确保 <code>tsconfig.json</code> 的 <code>compilerOptions</code> 中 <code>module</code> 选项的值为 <code>commonjs</code>,否则 webpack 的运行会失败报错，因为 <code>ts-node</code> 不支持 <code>commonjs</code> 以外的其他模块规范。</p><p>你可以通过三个途径来完成 module 的设置：</p><ul><li>直接修改 <code>tsconfig.json</code> 文件</li><li>修改 <code>tsconfig.json</code> 并且添加 <code>ts-node</code> 的设置。</li><li>使用 <code>tsconfig-paths</code></li></ul><p><strong>第一种方法</strong>就是打开你的 <code>tsconfig.json</code> 文件，找到 <code>compilerOptions</code> 的配置，然后设置 <code>target</code> 和 <code>module</code> 的选项分别为 <code>&quot;ES5&quot;</code> 和 <code>&quot;CommonJs&quot;</code> (在 <code>target</code> 设置为 <code>es5</code> 时你也可以不显示编写 <code>module</code> 配置)。</p><p><strong>第二种方法</strong> 就是添加 ts-node 设置：</p><p>你可以为 <code>tsc</code> 保持 <code>&quot;module&quot;: &quot;ESNext&quot;</code>配置，如果你是用 webpack 或者其他构建工具的话，为 ts-node 设置一个重载（override）。<a href="https://typestrong.org/ts-node/docs/imports/">ts-node 配置项</a></p><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ESNext&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ts-node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CommonJS&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p><strong>第三种方法</strong>需要先安装 <code>tsconfig-paths</code> 这个 npm 包，如下所示：</p><pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev tsconfig-paths</code></pre><p>安装后你可以为 webpack 配置创建一个单独的 TypeScript 配置文件，示例如下：</p><p><strong>tsconfig-for-webpack-config.json</strong></p><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es5&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>ts-node 可以根据 <code>tsconfig-paths</code> 提供的环境变量 <code>process.env.TS_NODE_PROJECT</code> 来找到 <code>tsconfig.json</code> 文件路径。</p></aside><p><code>process.env.TS_NODE_PROJECT</code> 变量的设置如下所示:</p><p><strong>package.json</strong></p><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env TS_NODE_PROJECT=\&quot;tsconfig-for-webpack-config.json\&quot; webpack&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>之所以要添加 <code>cross-env</code>，是因为我们在直接使用 <code>TS_NODE_PROJECT</code> 时遇到过 <code>&quot;TS_NODE_PROJECT&quot; unrecognized command</code> 报错的反馈，添加 <code>cross-env</code> 之后该问题也似乎得到了解决，你可以查看<a href="https://github.com/webpack/webpack.js.org/issues/2733">这个 issue</a>获取到关于该问题的更多信息。</p><h2><span id="coffeescript"></span>CoffeeScript<a href="#coffeescript" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>与 <code>Typescript</code> 类似，在使用 CoffeeScript 前需要先安装其依赖，如下所示:</p><pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev coffeescript</code></pre><p>完成安装之后便可以开始编写 webpack 配置，示例如下:</p><p><strong>webpack.config.coffee</strong></p><pre><code class="hljs language-coffeescript">HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)
webpack = require(&#x27;webpack&#x27;)
path = require(&#x27;path&#x27;)

config =
  mode: &#x27;production&#x27;
  entry: &#x27;./path/to/my/entry/file.js&#x27;
  output:
    path: path.resolve(__dirname, &#x27;dist&#x27;)
    filename: &#x27;my-first-webpack.bundle.js&#x27;
  module: rules: [ {
    test: /\.(js|jsx)$/
    use: &#x27;babel-loader&#x27;
  } ]
  plugins: [
    new HtmlWebpackPlugin(template: &#x27;./src/index.html&#x27;)
  ]

module.exports = config
</code></pre><h2><span id="babel-and-jsx"></span>Babel and JSX<a href="#babel-and-jsx" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>下述的示例中使用了 JSX（用于 React 的 JavaScript 标记语言）和 babel 来创建格式为 json 的 webpack 配置文件。</p><blockquote><p>感谢 <a href="https://twitter.com/_developit">Jason Miller</a> 提供示例代码</p></blockquote><p>首先，需要安装一些必要依赖，如下所示:</p><pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev babel-register jsxobj babel-preset-es2015</code></pre><p><strong>.babelrc</strong></p><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;es2015&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre><p><strong>webpack.config.babel.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">import</span> jsxobj <span class="token keyword">from</span> <span class="token string">&#x27;jsxobj&#x27;</span><span class="token punctuation">;</span>

<span class="token comment">// 插件引入示例</span>
<span class="token keyword">const</span> <span class="token function-variable function">CustomPlugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>config<span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">&#x27;custom-plugin&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>webpack target<span class="token operator">=</span><span class="token string">&quot;web&quot;</span> watch mode<span class="token operator">=</span><span class="token string">&quot;production&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>entry path<span class="token operator">=</span><span class="token string">&quot;src/index.js&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>resolve<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>alias
        <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">{</span>
          react<span class="token operator">:</span> <span class="token string">&#x27;preact-compat&#x27;</span><span class="token punctuation">,</span>
          <span class="token string">&#x27;react-dom&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;preact-compat&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>resolve<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>plugins<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>CustomPlugin foo<span class="token operator">=</span><span class="token string">&quot;bar&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>plugins<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>webpack<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>如果你在其他地方也使用了 Babel 并且 <code>modules</code> 的值设置为 <code>false</code>，则必须维护两份 <code>.babelrc</code> 的文件，或者你也可以将上述示例中的 <code>import jsxobj from &#x27;jsxobj&#x27;;</code> 替换为 <code>const jsxobj = require(&#x27;jsxobj&#x27;);</code> 并将新的 <code>export</code> 语法替换为 <code>module.exports</code>，因为尽管 Node 目前已经支持了 ES6 的许多新特性，但是仍然没有支持 ES6 的模块语法。</p><h1><span id="Configuration-Types"></span>Configuration Types<a href="#Configuration-Types" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>除了导出单个配置外，还有一些能满足更多需求的使用方式。</p><h2><span id="exporting-a-function"></span>导出函数<a href="#exporting-a-function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>你可能会遇到需要区分<a href="/guides/development">开发</a>环境和<a href="/guides/production">生产</a>环境的情况。有很多种方式可以做到这一点。其中一种选择是由 webpack 配置导出一个函数而非对象，这个函数包含两个参数：</p><ul><li>参数一是环境（environment）。请查阅 <a href="/api/cli/#environment-options">environment 选项文档</a>了解更多。</li><li>参数二是传递给 webpack 的配置项，其中包含 <a href="/api/cli/#flags"><code>output-path</code></a> 和 <a href="/api/cli/#flags"><code>mode</code></a> 等。</li></ul><pre><code class="hljs language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">module.exports = {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">module.exports = function(env, argv) {
</span><span class="token prefix inserted">+</span><span class="token line">  return {
</span><span class="token prefix inserted">+</span><span class="token line">    mode: env.production ? &#x27;production&#x27; : &#x27;development&#x27;,
</span><span class="token prefix inserted">+</span><span class="token line">    devtool: env.production ? &#x27;source-map&#x27; : &#x27;eval&#x27;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    plugins: [
</span><span class="token prefix unchanged"> </span><span class="token line">      new TerserPlugin({
</span><span class="token prefix unchanged"> </span><span class="token line">        terserOptions: {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          compress: argv.mode === &#x27;production&#x27; // only if `--mode production` was passed
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">        }
</span><span class="token prefix unchanged"> </span><span class="token line">      })
</span><span class="token prefix unchanged"> </span><span class="token line">    ]
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  };
</span></span>};</code></pre><h2><span id="exporting-a-promise"></span>导出 Promise<a href="#exporting-a-promise" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>当需要异步加载配置变量时，webpack 将执行函数并导出一个配置文件，同时返回一个 Promise。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>支持使用 <code>Promise.all([/* Your promises */])</code> 导出多个 Promise。</p></aside><pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        entry<span class="token operator">:</span> <span class="token string">&#x27;./app.js&#x27;</span><span class="token punctuation">,</span>
        <span class="token comment">/* ... */</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>只有通过 webpack 命令行工具返回的 <code>Promise</code> 才生效。<a href="/api/node/#webpack"><code>webpack()</code></a> 只接受对象。</p></aside><h2><span id="exporting-multiple-configurations"></span>导出多种配置<a href="#exporting-multiple-configurations" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>除了导出单个配置对象/函数，你可能也会需要导出多种配置（webpack 3.1.0 起支持）。当运行 webpack 时，所有配置项都会构建。比如，对于多 <a href="/configuration/output/#outputlibrarytarget">targets</a>（如 AMD 和 CommonJS）<a href="/guides/author-libraries">构建 library</a> 时会非常有用。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;./dist-amd.js&#x27;</span><span class="token punctuation">,</span>
      libraryTarget<span class="token operator">:</span> <span class="token string">&#x27;amd&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&#x27;amd&#x27;</span><span class="token punctuation">,</span>
    entry<span class="token operator">:</span> <span class="token string">&#x27;./app.js&#x27;</span><span class="token punctuation">,</span>
    mode<span class="token operator">:</span> <span class="token string">&#x27;production&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;./dist-commonjs.js&#x27;</span><span class="token punctuation">,</span>
      libraryTarget<span class="token operator">:</span> <span class="token string">&#x27;commonjs&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&#x27;commonjs&#x27;</span><span class="token punctuation">,</span>
    entry<span class="token operator">:</span> <span class="token string">&#x27;./app.js&#x27;</span><span class="token punctuation">,</span>
    mode<span class="token operator">:</span> <span class="token string">&#x27;production&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>如果你只传了一个 <a href="/api/cli/#configuration-options"><code>--config-name</code></a> 名字标识，webpack 将只会构建指定的配置项。</p></aside><h3><span id="dependencies"></span>dependencies<a href="#dependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>以防你的某个配置依赖于另一个配置的输出，你可以使用一个 <a href="/configuration/other-options/#dependencies"><code>dependencies</code></a> 列表指定一个依赖列表。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#x27;client&#x27;</span><span class="token punctuation">,</span>
    target<span class="token operator">:</span> <span class="token string">&#x27;web&#x27;</span><span class="token punctuation">,</span>
    <span class="token comment">// …</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#x27;server&#x27;</span><span class="token punctuation">,</span>
    target<span class="token operator">:</span> <span class="token string">&#x27;node&#x27;</span><span class="token punctuation">,</span>
    dependencies<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;client&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><h3><span id="parallelism"></span>parallelism<a href="#parallelism" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>如果你导出了多个配置，你可以在配置中使用 <code>parallelism</code> 选项来指定编译的最大并发数。</p><ul><li>类型：<code>number</code></li><li>支持版本：5.22.0+</li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token comment">//config-1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token comment">//config-2</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>parallelism <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></code></pre><h1><span id="入口和上下文"></span>入口和上下文<a href="#%E5%85%A5%E5%8F%A3%E5%92%8C%E4%B8%8A%E4%B8%8B%E6%96%87" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>入口对象是用于 webpack 查找开始构建 bundle 的地方。上下文是入口文件所处的目录的绝对路径的字符串。</p><h2><span id="context"></span>context<a href="#context" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code></p><p>基础目录，<strong>绝对路径</strong>，用于从配置中解析入口点(entry point)和 加载器(loader)。</p><pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  context<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;app&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>默认使用 Node.js 进程的当前工作目录，但是推荐在配置中传入一个值。这使得你的配置独立于 CWD(current working directory, 当前工作目录)。</p><hr/><h2><span id="entry"></span>entry<a href="#entry" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code> <code>[string]</code> <code>object = { &lt;key&gt; string | [string] | object = { import string | [string], dependOn string | [string], filename string, layer string }}</code> <code>(function() =&gt; string | [string] | object = { &lt;key&gt; string | [string] } | object = { import string | [string], dependOn string | [string], filename string })</code></p><p>开始应用程序打包过程的一个或多个起点。如果传入数组，则会处理所有条目。</p><p>动态加载的模块 <strong>不是</strong> 入口起点。</p><p>一个需要考虑的规则：每个 HTML 页面都有一个入口起点。单页应用(SPA)：一个入口起点，多页应用(MPA)：多个入口起点。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    home<span class="token operator">:</span> <span class="token string">&#x27;./home.js&#x27;</span><span class="token punctuation">,</span>
    about<span class="token operator">:</span> <span class="token string">&#x27;./about.js&#x27;</span><span class="token punctuation">,</span>
    contact<span class="token operator">:</span> <span class="token string">&#x27;./contact.js&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="naming"></span>Naming<a href="#naming" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>如果传入一个字符串或字符串数组，chunk 会被命名为 <code>main</code>。如果传入一个对象，则每个属性的键(key)会是 chunk 的名称，该属性的值描述了 chunk 的入口点。</p><h3><span id="entry-descriptor"></span>Entry descriptor<a href="#entry-descriptor" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>如果传入一个对象，对象的属性的值可以是一个字符串、字符串数组或者一个描述符(descriptor):</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    home<span class="token operator">:</span> <span class="token string">&#x27;./home.js&#x27;</span><span class="token punctuation">,</span>
    shared<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;react-dom&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;redux&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;react-redux&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    catalog<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#x27;./catalog.js&#x27;</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;pages/catalog.js&#x27;</span><span class="token punctuation">,</span>
      dependOn<span class="token operator">:</span> <span class="token string">&#x27;shared&#x27;</span><span class="token punctuation">,</span>
      chunkLoading<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// Disable chunks that are loaded on demand and put everything in the main chunk.</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    personal<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#x27;./personal.js&#x27;</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">&#x27;pages/personal.js&#x27;</span><span class="token punctuation">,</span>
      dependOn<span class="token operator">:</span> <span class="token string">&#x27;shared&#x27;</span><span class="token punctuation">,</span>
      chunkLoading<span class="token operator">:</span> <span class="token string">&#x27;jsonp&#x27;</span><span class="token punctuation">,</span>
      asyncChunks<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Create async chunks that are loaded on demand.</span>
      layer<span class="token operator">:</span> <span class="token string">&#x27;name of layer&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// set the layer for an entry point</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>描述符语法可以用来传入额外的选项给入口。</p><h3><span id="output-filename"></span>Output filename<a href="#output-filename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>默认情况下，入口 chunk 的输出文件名是从 <a href="/configuration/output/#outputfilename"><code>output.filename</code></a> 中提取出来的，但你可以为特定的入口指定一个自定义的输出文件名。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token operator">:</span> <span class="token string">&#x27;./app.js&#x27;</span><span class="token punctuation">,</span>
    home<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#x27;./contact.js&#x27;</span><span class="token punctuation">,</span> filename<span class="token operator">:</span> <span class="token string">&#x27;pages/[name].js&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    about<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#x27;./about.js&#x27;</span><span class="token punctuation">,</span> filename<span class="token operator">:</span> <span class="token string">&#x27;pages/[name].js&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>描述符语法在这里被用来将 <code>filename</code>—选项传递给指定的入口点。</p><h3><span id="dependencies"></span>Dependencies<a href="#dependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>默认情况下，每个入口 chunk 保存了全部其用的模块(modules)。使用 <code>dependOn</code> 选项你可以与另一个入口 chunk 共享模块:</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#x27;./app.js&#x27;</span><span class="token punctuation">,</span> dependOn<span class="token operator">:</span> <span class="token string">&#x27;react-vendors&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&#x27;react-vendors&#x27;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;react-dom&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;prop-types&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><code>app</code> 这个 chunk 就不会包含 <code>react-vendors</code> 拥有的模块了.</p><p><code>dependOn</code> 选项的也可以为字符串数组：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    moment<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#x27;moment-mini&#x27;</span><span class="token punctuation">,</span> runtime<span class="token operator">:</span> <span class="token string">&#x27;runtime&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    reactvendors<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">import</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;react-dom&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> runtime<span class="token operator">:</span> <span class="token string">&#x27;runtime&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    testapp<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#x27;./wwwroot/component/TestApp.tsx&#x27;</span><span class="token punctuation">,</span>
      dependOn<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;reactvendors&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;moment&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>此外，你还可以使用数组为每个入口指定多个文件：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">import</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;./app.js&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;./app2.js&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dependOn<span class="token operator">:</span> <span class="token string">&#x27;react-vendors&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&#x27;react-vendors&#x27;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;react&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;react-dom&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;prop-types&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="dynamic-entry"></span>Dynamic entry<a href="#dynamic-entry" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>如果传入一个函数，那么它将会在每次 <a href="/api/compiler-hooks/#make">make</a> 事件中被调用。</p><blockquote><p>要注意的是，<code>make</code> 事件在 webpack 启动和每当 <a href="/configuration/watch/">监听文件变化</a> 时都会触发。</p></blockquote><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  <span class="token function-variable function">entry</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#x27;./demo&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>或者</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  <span class="token function-variable function">entry</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;./demo&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;./demo2&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>例如，你可以使用动态入口来从外部来源（远程服务器，文件系统内容或者数据库）获取真正的入口：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">entry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fetchPathsFromSomeExternalSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回一个会被用像 [&#x27;src/main-layout.js&#x27;, &#x27;src/admin-layout.js&#x27;] 的东西 resolve 的 promise</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>当和 <a href="/configuration/output/#outputlibrary"><code>output.library</code></a> 选项结合：如果传入的是一个数组，只有数组的最后一个条目会被导出。</p><h1><span id="模式Mode"></span>模式(Mode)<a href="#%E6%A8%A1%E5%BC%8FMode" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>提供 <code>mode</code> 配置选项，告知 webpack 使用相应模式的内置优化。</p><p><code>string = &#x27;production&#x27;: &#x27;none&#x27; | &#x27;development&#x27; | &#x27;production&#x27;</code></p><h2><span id="usage"></span>用法<a href="#usage" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>只需在配置对象中提供 <code>mode</code> 选项：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&#x27;development&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>或者从 <a href="/api/cli/">CLI</a> 参数中传递：</p><pre><code class="hljs language-bash">webpack --mode<span class="token operator">=</span>development</code></pre><p>支持以下字符串值：</p><table><thead><tr><th>选项</th><th>描述</th></tr></thead><tbody><tr><td data-th="选项"><span><code>development</code></span></td><td data-th="描述"><span>会将 <code>DefinePlugin</code> 中 <code>process.env.NODE_ENV</code> 的值设置为 <code>development</code>. 为模块和 chunk 启用有效的名。</span></td></tr><tr><td data-th="选项"><span><code>production</code></span></td><td data-th="描述"><span>会将 <code>DefinePlugin</code> 中 <code>process.env.NODE_ENV</code> 的值设置为 <code>production</code>。为模块和 chunk 启用确定性的混淆名称，<code>FlagDependencyUsagePlugin</code>，<code>FlagIncludedChunksPlugin</code>，<code>ModuleConcatenationPlugin</code>，<code>NoEmitOnErrorsPlugin</code> 和 <code>TerserPlugin</code> 。</span></td></tr><tr><td data-th="选项"><span><code>none</code></span></td><td data-th="描述"><span>不使用任何默认优化选项</span></td></tr></tbody></table><p>如果没有设置，webpack 会给 <code>mode</code> 的默认值设置为 <code>production</code>。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>如果 <code>mode</code> 未通过配置或 CLI 赋值，CLI 将使用可能有效的 <code>NODE_ENV</code> 值作为 <code>mode</code>。</p></aside><h3><span id="mode-development"></span>Mode: development<a href="#mode-development" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><pre><code class="hljs language-js"><span class="token comment">// webpack.development.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&#x27;development&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="mode-production"></span>Mode: production<a href="#mode-production" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><pre><code class="hljs language-js"><span class="token comment">// webpack.production.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&#x27;production&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="mode-none"></span>Mode: none<a href="#mode-none" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><pre><code class="hljs language-js"><span class="token comment">// webpack.custom.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&#x27;none&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>如果要根据 <em>webpack.config.js</em> 中的 <strong>mode</strong> 变量更改打包行为，则必须将配置导出为函数，而不是导出对象：</p><pre><code class="hljs language-javascript"><span class="token keyword">var</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">&#x27;./app.js&#x27;</span><span class="token punctuation">,</span>
  <span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env<span class="token punctuation">,</span> argv</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>argv<span class="token punctuation">.</span>mode <span class="token operator">===</span> <span class="token string">&#x27;development&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span>devtool <span class="token operator">=</span> <span class="token string">&#x27;source-map&#x27;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>argv<span class="token punctuation">.</span>mode <span class="token operator">===</span> <span class="token string">&#x27;production&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h1><span id="Output"></span>Output<a href="#Output" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p><code>output</code> 位于对象最顶级键(key)，包括了一组选项，指示 webpack 如何去输出、以及在哪里输出你的「bundle、asset 和其他你所打包或使用 webpack 载入的任何内容」。</p><h2><span id="outputassetmodulefilename"></span>output.assetModuleFilename<a href="#outputassetmodulefilename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string = &#x27;[hash][ext][query]&#x27;</code></p><p>与 <a href="#outputfilename"><code>output.filename</code></a> 相同，不过应用于 <a href="/guides/asset-modules/">Asset Modules</a>。</p><p>对从数据 URI 替换构建的静态资源，<code>[name]</code>, <code>[file]</code>, <code>[query]</code>, <code>[fragment]</code>, <code>[base]</code> 与 <code>[path]</code> 为空字符串。</p><h2><span id="outputasyncChunks"></span>output.asyncChunks<a href="#outputasyncChunks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = true</code></p><p>创建按需加载的异步 chunk。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    asyncChunks<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputauxiliarycomment"></span>output.auxiliaryComment<a href="#outputauxiliarycomment" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最好使用 <a href="#outputlibraryauxiliarycomment"><code>output.library.auxiliaryComment</code></a>。</p></aside><p><code>string</code> <code>object</code></p><p>在和 <a href="#outputlibrary"><code>output.library</code></a> 和 <a href="#outputlibrarytarget"><code>output.libraryTarget</code></a> 一起使用时，此选项允许用户向导出容器(export wrapper)中插入注释。要为 <code>libraryTarget</code> 每种类型都插入相同的注释，将 <code>auxiliaryComment</code> 设置为一个字符串：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token string">&#x27;someLibName&#x27;</span><span class="token punctuation">,</span>
    libraryTarget<span class="token operator">:</span> <span class="token string">&#x27;umd&#x27;</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">&#x27;someLibName.js&#x27;</span><span class="token punctuation">,</span>
    auxiliaryComment<span class="token operator">:</span> <span class="token string">&#x27;Test Comment&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>将会生成如下：</p><p><strong>someLibName.js</strong></p><pre><code class="hljs language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">webpackUniversalModuleDefinition</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> factory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Test Comment</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Test Comment</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">&#x27;function&#x27;</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span>
    <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Test Comment</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span>
    exports<span class="token punctuation">[</span><span class="token string">&#x27;someLibName&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Test Comment</span>
  <span class="token keyword">else</span> root<span class="token punctuation">[</span><span class="token string">&#x27;someLibName&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span>root<span class="token punctuation">[</span><span class="token string">&#x27;_&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">__WEBPACK_EXTERNAL_MODULE_1__</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>对于 <code>libraryTarget</code> 每种类型的注释进行更细粒度地控制，请传入一个对象：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    auxiliaryComment<span class="token operator">:</span> <span class="token punctuation">{</span>
      root<span class="token operator">:</span> <span class="token string">&#x27;Root Comment&#x27;</span><span class="token punctuation">,</span>
      commonjs<span class="token operator">:</span> <span class="token string">&#x27;CommonJS Comment&#x27;</span><span class="token punctuation">,</span>
      commonjs2<span class="token operator">:</span> <span class="token string">&#x27;CommonJS2 Comment&#x27;</span><span class="token punctuation">,</span>
      amd<span class="token operator">:</span> <span class="token string">&#x27;AMD Comment&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputcharset"></span>output.charset<a href="#outputcharset" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = true</code></p><p>告诉 webpack 为 HTML 的 <code>&lt;script&gt;</code> 标签添加 <code>charset=&quot;utf-8&quot;</code> 标识。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>尽管 <code>&lt;script&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#Deprecated_attributes">已弃用</a>了 <code>charset</code> 属性，当 webpack 还是默认添加了它，目的是与非现代浏览器兼容。</p></aside><h2><span id="outputchunkfilename"></span>output.chunkFilename<a href="#outputchunkfilename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string = &#x27;[id].js&#x27;</code> <code>function (pathData, assetInfo) =&gt; string</code></p><p>此选项决定了非初始（non-initial）chunk 文件的名称。有关可取的值的详细信息，请查看 <a href="#outputfilename"><code>output.filename</code></a> 选项。</p><p>注意，这些文件名需要在运行时根据 chunk 发送的请求去生成。因此，需要在 webpack runtime 输出 bundle 值时，将 chunk id 的值对应映射到占位符(如 <code>[name]</code> 和 <code>[chunkhash]</code>)。这会增加文件大小，并且在任何 chunk 的占位符值修改后，都会使 bundle 失效。</p><p>默认使用 <code>[id].js</code> 或从 <a href="#outputfilename"><code>output.filename</code></a> 中推断出的值（<code>[name]</code> 会被预先替换为 <code>[id]</code> 或 <code>[id].</code>）。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    chunkFilename<span class="token operator">:</span> <span class="token string">&#x27;[id].js&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Usage as a function:</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">chunkFilename</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">pathData</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> pathData<span class="token punctuation">.</span>chunk<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&#x27;main&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;[name].js&#x27;</span> <span class="token operator">:</span> <span class="token string">&#x27;[name]/[name].js&#x27;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputchunkformat"></span>output.chunkFormat<a href="#outputchunkformat" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>false</code> <code>string: &#x27;array-push&#x27; | &#x27;commonjs&#x27; | &#x27;module&#x27; | &lt;any string&gt;</code></p><p>chunk 的格式（formats 默认包含 <code>&#x27;array-push&#x27;</code> (web/WebWorker)、<code>&#x27;commonjs&#x27;</code> (node.js)、<code>&#x27;module&#x27;</code> (ESM)，还有其他情况可由插件添加）。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>The default value of this option depends on the <a href="/configuration/target/"><code>target</code></a> and <a href="#outputmodule"><code>output.module</code></a> setting. For more details, search for <code>&quot;chunkFormat&quot;</code> <a href="https://github.com/webpack/webpack/blob/main/lib/config/defaults.js">in the webpack defaults</a>.</p></aside><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    chunkFormat<span class="token operator">:</span> <span class="token string">&#x27;commonjs&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputchunkLoadTimeout-outputchunkLoadtimeout"></span>output.chunkLoadTimeout $#outputchunkLoadtimeout$<a href="#outputchunkLoadTimeout-outputchunkLoadtimeout" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>number = 120000</code></p><p>chunk 请求到期之前的毫秒数，默认为 120000。从 webpack 2.6.0 开始支持此选项。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    chunkLoadTimeout<span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputchunkloadingglobal"></span>output.chunkLoadingGlobal<a href="#outputchunkloadingglobal" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string = &#x27;webpackChunkwebpack&#x27;</code></p><p>webpack 用于加载 chunk 的全局变量。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    chunkLoadingGlobal<span class="token operator">:</span> <span class="token string">&#x27;myCustomFunc&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputchunkloading"></span>output.chunkLoading<a href="#outputchunkloading" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>false</code> <code>string: &#x27;jsonp&#x27; | &#x27;import-scripts&#x27; | &#x27;require&#x27; | &#x27;async-node&#x27; | &#x27;import&#x27; | &lt;any string&gt;</code></p><p>加载 chunk 的方法（默认值有 <code>&#x27;jsonp&#x27;</code> (web)、<code>&#x27;import&#x27;</code> (ESM)、<code>&#x27;importScripts&#x27;</code> (WebWorker)、<code>&#x27;require&#x27;</code> (sync node.js)、<code>&#x27;async-node&#x27;</code> (async node.js)，还有其他值可由插件添加)。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>The default value of this option depends on the <a href="/configuration/target/"><code>target</code></a> and <a href="#outputchunkformat"><code>chunkFormat </code></a>setting. For more details, search for <code>&quot;chunkLoading&quot;</code> <a href="https://github.com/webpack/webpack/blob/main/lib/config/defaults.js">in the webpack defaults</a>.</p></aside><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    chunkLoading<span class="token operator">:</span> <span class="token string">&#x27;async-node&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputclean"></span>output.clean<a href="#outputclean" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><span class="badge">5.20.0+</span><p><code>boolean</code> <code>{ dry?: boolean, keep?: RegExp | string | ((filename: string) =&gt; boolean) }</code></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    clean<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 在生成文件之前清空 output 目录</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    clean<span class="token operator">:</span> <span class="token punctuation">{</span>
      dry<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 打印而不是删除应该移除的静态资源</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    clean<span class="token operator">:</span> <span class="token punctuation">{</span>
      keep<span class="token operator">:</span> <span class="token regex">/ignored\/dir\//</span><span class="token punctuation">,</span> <span class="token comment">// 保留 &#x27;ignored/dir&#x27; 下的静态资源</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 或者</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    clean<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">keep</span><span class="token punctuation">(</span><span class="token parameter">asset</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> asset<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#x27;ignored/dir&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>你也可以使用钩子函数：</p><pre><code class="hljs language-javascript">webpack<span class="token punctuation">.</span>CleanPlugin<span class="token punctuation">.</span><span class="token function">getCompilationHooks</span><span class="token punctuation">(</span>compilation<span class="token punctuation">)</span><span class="token punctuation">.</span>keep<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span>
  <span class="token string">&#x27;Test&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">asset</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/ignored\/dir\//</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>asset<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="outputcomparebeforeemit"></span>output.compareBeforeEmit<a href="#outputcomparebeforeemit" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = true</code></p><p>告知 webpack 在写入到输出文件系统时检查输出的文件是否已经存在并且拥有相同内容。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>当在磁盘中已经存在有相同内容的文件时，webpack 将不会写入输出文件。</p></aside><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    compareBeforeEmit<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputcrossoriginloading"></span>output.crossOriginLoading<a href="#outputcrossoriginloading" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = false</code> <code>string: &#x27;anonymous&#x27; | &#x27;use-credentials&#x27;</code></p><p>告诉 webpack 启用 <a href="https://developer.mozilla.org/en/docs/Web/HTML/Element/script#attr-crossorigin">cross-origin 属性</a> 加载 chunk。仅在 <a href="/configuration/target/"><code>target</code></a> 设置为 <code>&#x27;web&#x27;</code> 时生效，通过使用 JSONP 来添加脚本标签，实现按需加载模块。</p><ul><li><code>&#x27;anonymous&#x27;</code> - <strong>不带凭据(credential)</strong> 启用跨域加载</li><li><code>&#x27;use-credentials&#x27;</code> - <strong>携带凭据(credential)</strong> 启用跨域加载</li></ul><h2><span id="outputdevtoolfallbackmodulefilenametemplate"></span>output.devtoolFallbackModuleFilenameTemplate<a href="#outputdevtoolfallbackmodulefilenametemplate" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code> <code>function (info)</code></p><p>当上面的模板字符串或函数产生重复时使用的备用内容。</p><p>查看 <a href="#outputdevtoolmodulefilenametemplate"><code>output.devtoolModuleFilenameTemplate</code></a>。</p><h2><span id="outputdevtoolmodulefilenametemplate"></span>output.devtoolModuleFilenameTemplate<a href="#outputdevtoolmodulefilenametemplate" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string = &#x27;webpack://[namespace]/[resource-path]?[loaders]&#x27;</code> <code>function (info) =&gt; string</code></p><p>此选项仅在 「<a href="/configuration/devtool"><code>devtool</code></a> 使用了需要模块名称的选项」时使用。</p><p>自定义每个 source map 的 <code>sources</code> 数组中使用的名称。可以通过传递模板字符串(template string)或者函数来完成。例如，当使用 <code>devtool: &#x27;eval&#x27;</code>，默认值是：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    devtoolModuleFilenameTemplate<span class="token operator">:</span>
      <span class="token string">&#x27;webpack://[namespace]/[resource-path]?[loaders]&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>模板字符串(template string)中做以下替换（通过 webpack 内部的 <a href="https://github.com/webpack/webpack/blob/main/lib/ModuleFilenameHelpers.js"><code>ModuleFilenameHelpers</code></a>）：</p><table><thead><tr><th>Template</th><th>Description</th></tr></thead><tbody><tr><td data-th="Template"><span>[absolute-resource-path]</span></td><td data-th="Description"><span>绝对路径文件名</span></td></tr><tr><td data-th="Template"><span>[all-loaders]</span></td><td data-th="Description"><span>自动和显式的 loader，并且参数取决于第一个 loader 名称</span></td></tr><tr><td data-th="Template"><span>[hash]</span></td><td data-th="Description"><span>模块标识符的 hash</span></td></tr><tr><td data-th="Template"><span>[id]</span></td><td data-th="Description"><span>模块标识符</span></td></tr><tr><td data-th="Template"><span>[loaders]</span></td><td data-th="Description"><span>显式的 loader，并且参数取决于第一个 loader 名称</span></td></tr><tr><td data-th="Template"><span>[resource]</span></td><td data-th="Description"><span>用于解析文件的路径和用于第一个 loader 的任意查询参数</span></td></tr><tr><td data-th="Template"><span>[resource-path]</span></td><td data-th="Description"><span>不带任何查询参数，用于解析文件的路径</span></td></tr><tr><td data-th="Template"><span>[namespace]</span></td><td data-th="Description"><span>模块命名空间。在构建成为一个 library 之后，通常也是 library 名称，否则为空</span></td></tr></tbody></table><p>当使用一个函数，同样的选项要通过 <code>info</code> 参数并使用驼峰式(camel-cased)：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">devtoolModuleFilenameTemplate</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">webpack:///</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>info<span class="token punctuation">.</span>resourcePath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>info<span class="token punctuation">.</span>loaders<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>如果多个模块产生相同的名称，使用 <a href="#outputdevtoolfallbackmodulefilenametemplate"><code>output.devtoolFallbackModuleFilenameTemplate</code></a> 来代替这些模块。</p><h2><span id="outputdevtoolnamespace"></span>output.devtoolNamespace<a href="#outputdevtoolnamespace" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code></p><p>此选项确定 <a href="#outputdevtoolmodulefilenametemplate"><code>output.devtoolModuleFilenameTemplate</code></a> 使用的模块名称空间。未指定时的默认值为：<a href="#outputuniquename"><code>output.uniqueName</code></a>。在加载多个通过 webpack 构建的 library 时，用于防止 source map 中源文件路径冲突。</p><p>例如，如果你有两个 library，分别使用命名空间 <code>library1</code> 和 <code>library2</code>，并且都有一个文件 <code>./src/index.js</code>（可能具有不同内容），它们会将这些文件暴露为 <code>webpack://library1/./src/index.js</code> 和 <code>webpack://library2/./src/index.js</code>。</p><h2><span id="outputenabledchunkloadingtypes"></span><code>output.enabledChunkLoadingTypes</code><a href="#outputenabledchunkloadingtypes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>[string: &#x27;jsonp&#x27; | &#x27;import-scripts&#x27; | &#x27;require&#x27; | &#x27;async-node&#x27; | &lt;any string&gt;]</code></p><p>允许入口点使用的 chunk 加载类型列表。将被 webpack 自动填充。只有当使用一个函数作为入口配置项并从那里返回 chunkLoading 配置项时才需要。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    enabledChunkLoadingTypes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;jsonp&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;require&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputenabledlibrarytypes"></span><code>output.enabledLibraryTypes</code><a href="#outputenabledlibrarytypes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>[string]</code></p><p>入口点可用的 library 类型列表.</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    enabledLibraryTypes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;module&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputenabledwasmloadingtypes"></span><code>output.enabledWasmLoadingTypes</code><a href="#outputenabledwasmloadingtypes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>[string]</code></p><p>用于设置入口支持的 wasm 加载类型的列表。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    enabledWasmLoadingTypes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;fetch&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

## <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">output.environment</span><span class="token template-punctuation string">`</span></span> $#outputenvironment$

告诉 webpack 在生成的运行时代码中可以使用哪个版本的 <span class="token constant">ES</span> 特性。

<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>`javascript
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    environment<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// The environment supports arrow functions (&#x27;() =&gt; { ... }&#x27;).</span>
      arrowFunction<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// The environment supports BigInt as literal (123n).</span>
      bigIntLiteral<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// The environment supports const and let for variable declarations.</span>
      <span class="token keyword">const</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// The environment supports destructuring (&#x27;{ a, b } = obj&#x27;).</span>
      destructuring<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// The environment supports an async import() function to import EcmaScript modules.</span>
      dynamicImport<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// The environment supports &#x27;for of&#x27; iteration (&#x27;for (const x of array) { ... }&#x27;).</span>
      forOf<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// The environment supports ECMAScript Module syntax to import ECMAScript modules (import ... from &#x27;...&#x27;).</span>
      module<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// The environment supports optional chaining (&#x27;obj?.a&#x27; or &#x27;obj?.()&#x27;).</span>
      optionalChaining<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// The environment supports template literals.</span>
      templateLiteral<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputfilename"></span>output.filename<a href="#outputfilename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code> <code>function (pathData, assetInfo) =&gt; string</code></p><p>此选项决定了每个输出 bundle 的名称。这些 bundle 将写入到 <a href="#outputpath"><code>output.path</code></a> 选项指定的目录下。</p><p>对于单个<a href="/configuration/entry-context#entry"><code>入口</code></a>起点，filename 会是一个静态名称。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&#x27;bundle.js&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>然而，当通过多个入口起点(entry point)、代码拆分(code splitting)或各种插件(plugin)创建多个 bundle，应该使用以下一种替换方式，来赋予每个 bundle 一个唯一的名称……</p><p>使用入口名称：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&#x27;[name].bundle.js&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>使用内部 chunk id</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&#x27;[id].bundle.js&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>使用由生成的内容产生的 hash：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&#x27;[contenthash].bundle.js&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>结合多个替换组合使用：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&#x27;[name].[contenthash].bundle.js&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>使用函数返回 filename：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">filename</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">pathData</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> pathData<span class="token punctuation">.</span>chunk<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&#x27;main&#x27;</span> <span class="token operator">?</span> <span class="token string">&#x27;[name].js&#x27;</span> <span class="token operator">:</span> <span class="token string">&#x27;[name]/[name].js&#x27;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>请确保已阅读过 <a href="/guides/caching">指南 - 缓存</a> 的详细信息。这里涉及更多步骤，不仅仅是设置此选项。</p><p>注意此选项被称为文件名，但是你还是可以使用像 <code>&#x27;js/[name]/bundle.js&#x27;</code> 这样的文件夹结构。</p><p>注意，此选项不会影响那些「按需加载 chunk」的输出文件。它只影响最初加载的输出文件。对于按需加载的 chunk 文件，请使用 <a href="#outputchunkfilename"><code>output.chunkFilename</code></a> 选项来控制输出。通过 loader 创建的文件也不受影响。在这种情况下，你必须尝试 loader 特定的可用选项。</p><h3><span id="template-strings"></span>Template strings<a href="#template-strings" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>可以使用以下替换模板字符串（通过 webpack 内部的<a href="https://github.com/webpack/webpack/blob/main/lib/TemplatedPathPlugin.js"><code>TemplatedPathPlugin</code></a>）:</p><p>可在编译层面进行替换的内容：</p><table><thead><tr><th>模板</th><th>描述</th></tr></thead><tbody><tr><td data-th="模板"><span>[fullhash]</span></td><td data-th="描述"><span>compilation 完整的 hash 值</span></td></tr><tr><td data-th="模板"><span>[hash]</span></td><td data-th="描述"><span>同上，但已弃用</span></td></tr></tbody></table><p>可在 chunk 层面进行替换的内容：</p><table><thead><tr><th>模板</th><th>描述</th></tr></thead><tbody><tr><td data-th="模板"><span>[id]</span></td><td data-th="描述"><span>此 chunk 的 ID</span></td></tr><tr><td data-th="模板"><span>[name]</span></td><td data-th="描述"><span>如果设置，则为此 chunk 的名称，否则使用 chunk 的 ID</span></td></tr><tr><td data-th="模板"><span>[chunkhash]</span></td><td data-th="描述"><span>此 chunk 的 hash 值，包含该 chunk 的所有元素</span></td></tr><tr><td data-th="模板"><span>[contenthash]</span></td><td data-th="描述"><span>此 chunk 的 hash 值，只包括该内容类型的元素（受 <code>optimization.realContentHash</code> 影响）</span></td></tr></tbody></table><p>可在模块层面替换的内容：</p><table><thead><tr><th>模板</th><th>描述</th></tr></thead><tbody><tr><td data-th="模板"><span>[id]</span></td><td data-th="描述"><span>模块的 ID</span></td></tr><tr><td data-th="模板"><span>[moduleid]</span></td><td data-th="描述"><span>同上，但已弃用</span></td></tr><tr><td data-th="模板"><span>[hash]</span></td><td data-th="描述"><span>模块的 Hash 值</span></td></tr><tr><td data-th="模板"><span>[modulehash]</span></td><td data-th="描述"><span>同上，但已弃用</span></td></tr><tr><td data-th="模板"><span>[contenthash]</span></td><td data-th="描述"><span>模块内容的 Hash 值</span></td></tr></tbody></table><p>可在文件层面替换的内容：</p><table><thead><tr><th>模板</th><th>描述</th></tr></thead><tbody><tr><td data-th="模板"><span>[file]</span></td><td data-th="描述"><span>filename 和路径，不含 query 或 fragment</span></td></tr><tr><td data-th="模板"><span>[query]</span></td><td data-th="描述"><span>带前缀 <code>?</code> 的 query</span></td></tr><tr><td data-th="模板"><span>[fragment]</span></td><td data-th="描述"><span>带前缀 <code>#</code> 的 fragment</span></td></tr><tr><td data-th="模板"><span>[base]</span></td><td data-th="描述"><span>只有 filename（包含扩展名），不含 path</span></td></tr><tr><td data-th="模板"><span>[filebase]</span></td><td data-th="描述"><span>同上，但已弃用</span></td></tr><tr><td data-th="模板"><span>[path]</span></td><td data-th="描述"><span>只有 path，不含 filename</span></td></tr><tr><td data-th="模板"><span>[name]</span></td><td data-th="描述"><span>只有 filename，不含扩展名或 path</span></td></tr><tr><td data-th="模板"><span>[ext]</span></td><td data-th="描述"><span>带前缀 <code>.</code> 的扩展名（对 <a href="#outputfilename">output.filename</a> 不可用）</span></td></tr></tbody></table><p>可在 URL 层面替换的内容：</p><table><thead><tr><th>模块</th><th>描述</th></tr></thead><tbody><tr><td data-th="模块"><span>[url]</span></td><td data-th="描述"><span>URL</span></td></tr></tbody></table><aside class="tip"><h6 class="tip__prefix">提示</h6><p><code>[file]</code> 等价于 <code>[path][base]</code>。<code>[base]</code> 等价于 <code>[name][ext]</code>。完整的路径为 <code>[path][name][ext][query][fragment]</code> 或 <code>[path][base][query][fragment]</code> 或 <code>[file][query][fragment]</code>。</p></aside><p><code>[hash]</code>，<code>[contenthash]</code> 或者 <code>[chunkhash]</code> 的长度可以使用 <code>[hash:16]</code>（默认为 20）来指定。或者，通过指定<a href="#outputhashdigestlength"><code>output.hashDigestLength</code></a> 在全局配置长度。</p><p>当你要在实际文件名中使用占位符时，webpack 会过滤出需要替换的占位符。例如，输出一个文件 <code>[name].js</code>， 你必须通过在括号之间添加反斜杠来转义<code>[name]</code>占位符。 因此，<code>[\name\]</code> 生成 <code>[name]</code> 而不是 <code>name</code>。</p><p>例如：<code>[\id\]</code> 生成 <code>[id]</code> 而不是 <code>id</code>。</p><p>如果将这个选项设为一个函数，函数将返回一个包含上面表格中含有替换信息数据的对象。
替换也会被应用到返回的字符串中。
传递的对象将具有如下类型（取决于上下文的属性）：</p><pre><code class="hljs language-typescript"><span class="token keyword">type</span> <span class="token class-name">PathData</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  hash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function-variable function">hashWithLength</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  chunk<span class="token operator">:</span> Chunk <span class="token operator">|</span> ChunkPathData<span class="token punctuation">;</span>
  <span class="token keyword">module</span><span class="token operator">:</span> Module <span class="token operator">|</span> ModulePathData<span class="token punctuation">;</span>
  contentHashType<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  contentHash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function-variable function">contentHashWithLength</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  filename<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  runtime<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> SortableSet<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  chunkGraph<span class="token operator">:</span> ChunkGraph<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">ChunkPathData</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  hash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function-variable function">hashWithLength</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  contentHash<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  contentHashWithLength<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">ModulePathData</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  hash<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function-variable function">hashWithLength</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>在某些上下文中，属性将使用 JavaScript 代码表达式代替原始值。在此情况下，<code>WithLength</code> 变量是可用的，应该使用它来代替对原始值的分片操作。</p></aside><h2><span id="outputglobalobject"></span>output.globalObject<a href="#outputglobalobject" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string = &#x27;self&#x27;</code></p><p>当输出为 library 时，尤其是当 <code>libraryTarget</code> 为 <code>&#x27;umd&#x27;</code>时，此选项将决定使用哪个全局对象来挂载 library。为了使 UMD 构建在浏览器和 Node.js 上均可用，应将 <code>output.globalObject</code> 选项设置为 <code>&#x27;this&#x27;</code>。对于类似 web 的目标，默认为 <code>self</code>。</p><p>入口点的返回值将会使用 <code>output.library.name</code> 赋值给全局对象。依赖于 <code>target</code> 配置项，全局对象将会发生对应的改变，例如：<code>self</code>, <code>global</code> 或者 <code>globalThis</code>。</p><p>示例：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token string">&#x27;myLib&#x27;</span><span class="token punctuation">,</span>
    libraryTarget<span class="token operator">:</span> <span class="token string">&#x27;umd&#x27;</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">&#x27;myLib.js&#x27;</span><span class="token punctuation">,</span>
    globalObject<span class="token operator">:</span> <span class="token string">&#x27;this&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputhashdigest"></span>output.hashDigest<a href="#outputhashdigest" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string = &#x27;hex&#x27;</code></p><p>在生成 hash 时使用的编码方式。支持 Node.js <a href="https://nodejs.org/api/buffer.html#buffers-and-character-encodings"><code>hash.digest</code></a> 的所有编码。对文件名使用 <code>&#x27;base64&#x27;</code>，可能会出现问题，因为 base64 字母表中具有 <code>/</code> 这个字符(character)。同样的，<code>&#x27;latin1&#x27;</code> 规定可以含有任何字符(character)。</p><h2><span id="outputhashdigestlength"></span>output.hashDigestLength<a href="#outputhashdigestlength" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>number = 20</code></p><p>散列摘要的前缀长度。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>针对 <code>webpack v5.65.0+</code>，在 <a href="/configuration/experiments/#experimentsfuturedefaults"><code>experiments.futureDefaults</code></a> 启用时，<code>hashDigestLength</code> 配置项会以 <code>16</code> 作为默认值。</p></aside><h2><span id="outputhashfunction"></span>output.hashFunction<a href="#outputhashfunction" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string = &#x27;md4&#x27;</code> <code>function</code></p><p>散列算法。支持 Node.JS <a href="https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options"><code>crypto.createHash</code></a> 的所有功能。从 <code>4.0.0-alpha2</code> 开始，<code>hashFunction</code> 现在可以是一个返回自定义 hash 的构造函数。出于性能原因，你可以提供一个不加密的哈希函数(non-crypto hash function)。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    hashFunction<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;metrohash&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MetroHash64<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>确保 hash 函数有可访问的 <code>update</code> 和 <code>digest</code> 方法。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>从 <code>webpack v5.54.0+</code> 起，<code>hashFunction</code> 支持将 <code>xxhash64</code> 作为更快的算法，当启用 <a href="/configuration/experiments/#experimentsfuturedefaults"><code>experiments.futureDefaults</code></a> 时，此算法将被默认使用。</p></aside><h2><span id="outputhashsalt"></span>output.hashSalt<a href="#outputhashsalt" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>一个可选的加盐值，通过 Node.JS <a href="https://nodejs.org/api/crypto.html#crypto_hash_update_data_inputencoding"><code>hash.update</code></a> 来更新哈希。</p><h2><span id="outputhotupdatechunkfilename"></span>output.hotUpdateChunkFilename<a href="#outputhotupdatechunkfilename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string = &#x27;[id].[fullhash].hot-update.js&#x27;</code></p><p>自定义热更新 chunk 的文件名。可选的值的详细信息，请查看 <a href="#outputfilename"><code>output.filename</code></a> 选项。</p><p>其中值唯一的占位符是 <code>[id]</code> 和 <code>[fullhash]</code>，其默认为：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    hotUpdateChunkFilename<span class="token operator">:</span> <span class="token string">&#x27;[id].[fullhash].hot-update.js&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>通常，你不需要修改 <code>output.hotUpdateChunkFilename</code>.</p></aside><h2><span id="outputhotupdateglobal"></span>output.hotUpdateGlobal<a href="#outputhotupdateglobal" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code></p><p>只在 <a href="/configuration/target/"><code>target</code></a> 设置为 <code>&#x27;web&#x27;</code> 时使用，用于加载热更新(hot update)的 JSONP 函数。</p><p>JSONP 函数用于异步加载(async load)热更新(hot-update) chunk。</p><p>欲了解详情，请查阅 <a href="#outputchunkloadingglobal"><code>output.chunkLoadingGlobal</code></a>。</p><h2><span id="outputhotupdatemainfilename"></span>output.hotUpdateMainFilename<a href="#outputhotupdatemainfilename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string = &#x27;[runtime].[fullhash].hot-update.json&#x27;</code> <code>function</code></p><p>自定义热更新的主文件名(main filename)。<code>[fullhash]</code> 和 <code>[runtime]</code> 均可作为占位符。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>通常，你不需要修改 <code>output.hotUpdateMainFilename</code>.</p></aside><h2><span id="outputiife"></span><code>output.iife</code><a href="#outputiife" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = true</code></p><p>告诉 webpack 添加 <a href="https://developer.mozilla.org/en-US/docs/Glossary/IIFE">IIFE</a> 外层包裹生成的代码.</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    iife<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputimportFunctionName"></span>output.importFunctionName<a href="#outputimportFunctionName" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string = &#x27;import&#x27;</code></p><p>内部 <code>import()</code> 函数的名称. 可用于 polyfilling, 例如 通过 <a href="https://github.com/GoogleChromeLabs/dynamic-import-polyfill"><code>dynamic-import-polyfill</code></a>.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    importFunctionName<span class="token operator">:</span> <span class="token string">&#x27;__import__&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputlibrary"></span>output.library<a href="#outputlibrary" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>输出一个库，为你的入口做导出。</p><ul><li>类型：<code>string | string[] | object</code></li></ul><p>一起来看一个简单的示例。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  entry<span class="token operator">:</span> <span class="token string">&#x27;./src/index.js&#x27;</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>假设你在 <code>src/index.js</code> 的入口中导出了如下函数：</p><pre><code class="hljs language-js"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>此时，变量 <code>MyLibrary</code> 将与你的入口文件所导出的文件进行绑定，下面是如何使用 webpack 构建的库的实现：</p><pre><code class="hljs language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://example.org/path/to/my-library.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  MyLibrary<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code></pre><p>在上面的例子中，我们为 <code>entry</code> 设置了一个入口文件，然而 webpack 可以接受 <a href="/configuration/entry-context/#entry">多个入口</a>，例如一个 <code>array</code> 或者一个 <code>object</code>。</p><ol><li><p>如果你将 <code>entry</code> 设置为一个 <code>array</code>，那么只有数组中的最后一个会被暴露。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  entry<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;./src/a.js&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;./src/b.js&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 只有在 b.js 中导出的内容才会被暴露</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li><li><p>如果你将 <code>entry</code> 设置为一个 <code>object</code>，所以入口都可以通过 <code>library</code> 的 <code>array</code> 语法暴露：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> <span class="token string">&#x27;./src/a.js&#x27;</span><span class="token punctuation">,</span>
    b<span class="token operator">:</span> <span class="token string">&#x27;./src/b.js&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&#x27;[name].js&#x27;</span><span class="token punctuation">,</span>
    library<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;[name]&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// name is a placeholder here</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>假设 <code>a.js</code> 与 <code>b.js</code> 导出名为 <code>hello</code> 的函数，这就是如何使用这些库的方法：</p><pre><code class="hljs language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://example.org/path/to/a.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://example.org/path/to/b.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  MyLibrary<span class="token punctuation">.</span>a<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  MyLibrary<span class="token punctuation">.</span>b<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code></pre><p>查看 <a href="https://github.com/webpack/webpack/tree/main/examples/multi-part-library">示例</a> 获取更多内容。</p><p>请注意，如果你打算在每个入口点配置 library 配置项的话，以上配置将不能按照预期执行。这里是如何 <a href="/concepts/entry-points/#entry-description-object">在每个入口点下</a> 做的方法：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    main<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#x27;./src/index.js&#x27;</span><span class="token punctuation">,</span>
      library<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// `output.library` 下的所有配置项可以在这里使用</span>
        name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;umd&#x27;</span><span class="token punctuation">,</span>
        umdNamedDefine<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    another<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#x27;./src/another.js&#x27;</span><span class="token punctuation">,</span>
      library<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&#x27;AnotherLibrary&#x27;</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;commonjs2&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ol><h3><span id="outputlibraryname"></span>output.library.name<a href="#outputlibraryname" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>指定库的名称。</p><ul><li><p>类型：</p><pre><code class="hljs language-ts"><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">{</span>amd<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> commonjs<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> root<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span></code></pre></li></ul><h3><span id="outputlibrarytype"></span>output.library.type<a href="#outputlibrarytype" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>配置将库暴露的方式。</p><ul><li><p>类型：<code>string</code></p><p>类型默认包括 <code>&#x27;var&#x27;</code>、 <code>&#x27;module&#x27;</code>、 <code>&#x27;assign&#x27;</code>、 <code>&#x27;assign-properties&#x27;</code>、 <code>&#x27;this&#x27;</code>、 <code>&#x27;window&#x27;</code>、 <code>&#x27;self&#x27;</code>、 <code>&#x27;global&#x27;</code>、 <code>&#x27;commonjs&#x27;</code>、 <code>&#x27;commonjs2&#x27;</code>、 <code>&#x27;commonjs-module&#x27;</code>、 <code>&#x27;commonjs-static&#x27;</code>、 <code>&#x27;amd&#x27;</code>、 <code>&#x27;amd-require&#x27;</code>、 <code>&#x27;umd&#x27;</code>、 <code>&#x27;umd2&#x27;</code>、 <code>&#x27;jsonp&#x27;</code> 以及 <code>&#x27;system&#x27;</code>，除此之外也可以通过插件添加。</p></li></ul><p>对于接下来的示例，我们将会使用 <code>_entry_return_</code> 表示被入口点返回的值。</p><h4><span id="exposeavariable"></span>Expose a Variable<a href="#exposeavariable" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>These options assign the return value of the entry point (e.g. whatever the entry point exported) to the name provided by <a href="#outputlibraryname"><code>output.library.name</code></a> at whatever scope the bundle was included at.</p><h5><span id="type-var"></span>type: &#x27;var&#x27;<a href="#type-var" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;var&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>让你的库加载之后，<strong>入口起点的返回值</strong> 将会被赋值给一个变量：</p><pre><code class="hljs language-javascript"><span class="token keyword">var</span> MyLibrary <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

<span class="token comment">// 在加载了 `MyLibrary` 的单独脚本中</span>
MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h5><span id="typeassign"></span>type: &#x27;assign&#x27;<a href="#typeassign" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;assign&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>这将生成一个隐含的全局变量，它有可能重新分配一个现有的值（请谨慎使用）：</p><pre><code class="hljs language-javascript">MyLibrary <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span></code></pre><p>请注意，如果 <code>MyLibrary</code> 没有在你的库之前定义，那么它将会被设置在全局作用域。</p><h5><span id="typeassignproperties"></span>type: &#x27;assign-properties&#x27;<a href="#typeassignproperties" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><span class="badge">5.16.0+</span><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;assign-properties&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>与 <a href="#typeassign"><code>type: &#x27;assign&#x27;</code></a> 相似但是更安全，因为如果 <code>MyLibrary</code> 已经存在的话，它将被重用：</p><pre><code class="hljs language-js"><span class="token comment">// 仅在当其不存在是创建 MyLibrary</span>
MyLibrary <span class="token operator">=</span> <span class="token keyword">typeof</span> MyLibrary <span class="token operator">===</span> <span class="token string">&#x27;undefined&#x27;</span> <span class="token operator">?</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">:</span> MyLibrary<span class="token punctuation">;</span>
<span class="token comment">// 然后复制返回值到 MyLibrary</span>
<span class="token comment">// 与 Object.assign 行为类似</span>

<span class="token comment">// 例如，你像下面这样在你的入口导出一个 `hello` 函数</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 在另外一个已经加载 MyLibrary 的脚本中</span>
<span class="token comment">// 你可以像这样运行 `hello` 函数</span>
MyLibrary<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token string">&#x27;World&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4><span id="exposeviaobjectassignment"></span>Expose Via Object Assignment<a href="#exposeviaobjectassignment" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>这些配置项分配入口点的返回值（例如：无论入口点导出的什么内容）到一个名为 <a href="#outputlibraryname"><code>output.library.name</code></a> 的对象中。</p><h5><span id="typethis"></span>type: &#x27;this&#x27;<a href="#typethis" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;this&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>入口起点的返回值</strong> 将会被赋值给 this 对象下的 <code>output.library.name</code> 属性。<code>this</code> 的含义取决于你：</p><pre><code class="hljs language-javascript"><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

<span class="token comment">// 在一个单独的脚本中</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果 `this` 为 window 对象</span></code></pre><h5><span id="type-window"></span>type: &#x27;window&#x27;<a href="#type-window" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;window&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>入口起点的返回值</strong> 将会被赋值给 <code>window</code> 对象下的 <code>output.library.name</code>。</p><pre><code class="hljs language-javascript">window<span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

window<span class="token punctuation">.</span>MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h5><span id="type-global"></span>type: &#x27;global&#x27;<a href="#type-global" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;global&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>入口起点的返回值</strong> 将会被复制给全局对象下的 <code>output.library.name</code>。取决于 <a href="/configuration/target/"><code>target</code></a> 值，全局对象可以分别改变,例如，<code>self</code>、<code>global</code> 或者 <code>globalThis</code>。</p><pre><code class="hljs language-javascript">global<span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

global<span class="token punctuation">.</span>MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h5><span id="type-commmonjs"></span>type: &#x27;commonjs&#x27;<a href="#type-commmonjs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;commonjs&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>入口起点的返回值</strong> 将使用 <code>output.library.name</code> 赋值给 <code>exports</code> 对象。顾名思义，这是在 CommonJS 环境中使用。</p><pre><code class="hljs language-javascript">exports<span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>注意，不设置 <code>output.library.name</code> 将导致入口起点返回的所有属性都被赋值给给定的对象；不检查现有的属性名。</p></aside><h4><span id="moduledefinitionsystems"></span>Module Definition Systems<a href="#moduledefinitionsystems" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>这些配置项将生成一个带有完整 header 的 bundle，以确保与各种模块系统兼容。<code>output.library.name</code> 配置项在不同的 <code>output.library.type</code> 中有不同的含义。</p><h5><span id="type-module"></span>type: &#x27;module&#x27;<a href="#type-module" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  experiments<span class="token operator">:</span> <span class="token punctuation">{</span>
    outputModule<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// do not specify a `name` here</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;module&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>输出 ES 模块。</p><p>然而该特性仍然是实验性的，并且没有完全支持，所以请确保事先启用 <a href="/configuration/experiments/">experiments.outputModule</a>。除此之外，你可以在 <a href="https://github.com/webpack/webpack/issues/2933#issuecomment-774253975">这里</a> 追踪开发进度。</p><h5><span id="type-commmonjs2"></span>type: &#x27;commonjs2&#x27;<a href="#type-commmonjs2" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// note there&#x27;s no `name` here</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;commonjs2&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>入口起点的返回值</strong> 将会被赋值给 <code>module.exports</code>。顾名思义，这是在 Node.js（CommonJS）环境中使用的：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>如果我们指定 <code>output.library.name</code> 为 <code>type: commmonjs2</code>，你的入口起点的返回值将会被赋值给 <code>module.exports.[output.library.name]</code>。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>在考虑 CommonJS 与 CommonJS2 之间的区别？虽然它们很相似，但是它们之间有一些细微的差别，这些差别在 webpack 的上下文中通常是不相关的。（要获取更多详细内容，请 <a href="https://github.com/webpack/webpack/issues/1114">阅读这个 issue</a>。）</p></aside><h5><span id="type-commonjsstatic"></span>type: &#x27;commonjs-static&#x27;<a href="#type-commonjsstatic" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><span class="badge">5.66.0+</span><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// note there&#x27;s no `name` here</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;commonjs-static&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>单个导出将被设置为 <code>module.exports</code> 中的属性。名称中的 &quot;static&quot; 是指输出是静态可分析的，因此具名导出可以通过 Node.js 导入到 ESM 中：</p><p>输入：</p><pre><code class="hljs language-javascript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p>输出：</p><pre><code class="hljs language-javascript"><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// …</span>

exports<span class="token punctuation">.</span>doSomething <span class="token operator">=</span> __webpack_exports__<span class="token punctuation">.</span>doSomething<span class="token punctuation">;</span></code></pre><p>Consumption (CommonJS):</p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span> doSomething <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./output.cjs&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// doSomething =&gt; [Function: doSomething]</span></code></pre><p>Consumption (ESM):</p><pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> doSomething <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./output.cjs&#x27;</span><span class="token punctuation">;</span> <span class="token comment">// doSomething =&gt; [Function: doSomething]</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>当源代码是用 ESM 编写的，并且输出应该兼容 CJS 和 ESM 时，这是很有用的。获取更多详情，请阅读该 <a href="https://github.com/webpack/webpack/issues/14998">issue</a> 或者 <a href="https://dev.to/jakobjingleheimer/configuring-commonjs-es-modules-for-nodejs-12ed">这篇文档</a>（尤其是 <a href="https://dev.to/jakobjingleheimer/configuring-commonjs-es-modules-for-nodejs-12ed#publish-only-a-cjs-distribution-with-property-exports">这个章节</a>）。</p></aside><h5><span id="type-amd"></span>type: &#x27;amd&#x27;<a href="#type-amd" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>可以将你的库暴露为 AMD 模块。</p><p>AMD module 要求入口 chunk（例如，第一个通过 <code>&lt;script&gt;</code> 标签加载的脚本）使用特定的属性来定义, 例如 <code>define</code> 与 <code>require</code>，这通常由 RequireJS 或任何兼容的 loader（如 almond）提供。否则，直接加载产生的 AMD bundle 将导致一个错误，如 <code>define is not defined</code>。</p><p>按照下面的配置</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;amd&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>生成的输出将被定义为 <code>&quot;MyLibrary&quot;</code>，例如：</p><pre><code class="hljs language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>该 bundle 可以使用 script 标签引入，并且可以被这样引入：</p><pre><code class="hljs language-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">MyLibrary</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something with the library...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>如果没有定义 <code>output.library.name</code> 的话，会生成以下内容。</p><pre><code class="hljs language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>如果使用一个 <code>&lt;script&gt;</code> 标签直接加载。它只能通过 RequireJS 兼容的异步模块 loader 通过文件的实际路径工作，所以在这种情况下，如果 <code>output.path</code> 与 <code>output.filename</code> 直接在服务端暴露，那么对于这种特殊设置可能会变得很重要。</p><h5><span id="type-amd-require"></span>type: &#x27;amd-require&#x27;<a href="#type-amd-require" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;amd-require&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>它会用一个立即执行的 AMD <code>require(dependencies, factory)</code> 包装器来打包输出。</p><p><code>&#x27;amd-require&#x27;</code> 类型允许使用 AMD 的依赖，而不需要单独的后续调用。与 <code>&#x27;amd&#x27;</code> 类型一样，这取决于在加载 webpack 输出的环境中适当的 <a href="https://github.com/amdjs/amdjs-api/blob/master/require.md"><code>require</code> 函数</a> 是否可用。</p><p>使用该类型的话，不能使用库的名称。</p><h5><span id="type-umd"></span>type: &#x27;umd&#x27;<a href="#type-umd" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>这将在所有模块定义下暴露你的库, 允许它与 CommonJS、AMD 和作为全局变量工作。可以查看 <a href="https://github.com/umdjs/umd">UMD Repository</a> 获取更多内容。</p><p>在这种情况下，你需要使用 <code>library.name</code> 属性命名你的模块：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;umd&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>最终的输出为：</p><pre><code class="hljs language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">webpackUniversalModuleDefinition</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> factory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">&#x27;function&#x27;</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span> <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span> exports<span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> root<span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>global<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>请注意，根据 <a href="#expose-via-object-assignment">对象赋值部分</a>，省略 <code>library.name</code> 将导致入口起点返回的所有属性直接赋值给根对象。示例：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    libraryTarget<span class="token operator">:</span> <span class="token string">&#x27;umd&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>输出将会是：</p><pre><code class="hljs language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">webpackUniversalModuleDefinition</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> factory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">&#x27;function&#x27;</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span> <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> a<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span> <span class="token operator">?</span> exports <span class="token operator">:</span> root<span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>global<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>你可以为 <code>library.name</code> 指定一个对象，每个目标的名称不同：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token punctuation">{</span>
        root<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
        amd<span class="token operator">:</span> <span class="token string">&#x27;my-library&#x27;</span><span class="token punctuation">,</span>
        commonjs<span class="token operator">:</span> <span class="token string">&#x27;my-common-library&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;umd&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h5><span id="type-system"></span>type: &#x27;system&#x27;<a href="#type-system" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><p>这将会把你的库暴露为一个 <a href="https://github.com/systemjs/systemjs/blob/master/docs/system-register.md"><code>System.register</code></a> 模块。这个特性最初是在 <a href="https://github.com/webpack/webpack/releases/tag/v4.30.0">webpack 4.30.0</a> 中发布。</p><p>System 模块要求当 webpack bundle 执行时，全局变量 <code>System</code> 出现在浏览器中。编译的 <code>System.register</code> 格式允许你在没有额外配置的情况下使用 <code>System.import(&#x27;/bundle.js&#x27;)</code>，并将你的 webpack bundle 加载到系统模块注册表中。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;system&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>输出：</p><pre><code class="hljs language-javascript">System<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">__WEBPACK_DYNAMIC_EXPORT__<span class="token punctuation">,</span> __system_context__</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">execute</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>除了设置 <code>output.library.type</code> 为 <code>system</code>，还要将 <code>output.library.name</code> 添加到配置中，输出的 bundle 将以库名作为 <code>System.register</code> 的参数：</p><pre><code class="hljs language-javascript">System<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>
  <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">__WEBPACK_DYNAMIC_EXPORT__<span class="token punctuation">,</span> __system_context__</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">execute</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4><span id="othertypes"></span>Other Types<a href="#othertypes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><h5><span id="type-jsonp"></span>type: &#x27;jsonp&#x27;<a href="#type-jsonp" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h5><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;jsonp&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>这将把入口起点的返回值包装到 jsonp 包装器中。</p><pre><code class="hljs language-javascript"><span class="token function">MyLibrary</span><span class="token punctuation">(</span>_entry_return_<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>你的库的依赖将由 <a href="/configuration/externals/"><code>externals</code></a> 配置定义。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>阅读 <a href="/guides/author-libraries/">authoring libraries guide</a> 指南获取更多关于 <code>output.library.name</code> 与 <code>output.library.type</code> 的相关信息。</p></aside><h3><span id="outputlibraryexport"></span>output.library.export<a href="#outputlibraryexport" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>指定哪一个导出应该被暴露为一个库。</p><ul><li>类型：<code>string | string[]</code></li></ul><p>默认为 <code>undefined</code>，将会导出整个（命名空间）对象。下面的例子演示了使用 <a href="#type-var"><code>output.library.type: &#x27;var&#x27;</code></a> 配置项产生的作用。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;var&#x27;</span><span class="token punctuation">,</span>
      <span class="token keyword">export</span><span class="token operator">:</span> <span class="token string">&#x27;default&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>入口起点的默认导出将会被赋值为库名称：</p><pre><code class="hljs language-js"><span class="token comment">// 如果入口有一个默认导出</span>
<span class="token keyword">var</span> MyLibrary <span class="token operator">=</span> _entry_return_<span class="token punctuation">.</span>default<span class="token punctuation">;</span></code></pre><p>你也可以向 <code>output.library.export</code> 传递一个数组，它将被解析为一个要分配给库名的模块的路径：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;var&#x27;</span><span class="token punctuation">,</span>
      <span class="token keyword">export</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;default&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;subModule&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>这里就是库代码：</p><pre><code class="hljs language-js"><span class="token keyword">var</span> MyLibrary <span class="token operator">=</span> _entry_return_<span class="token punctuation">.</span>default<span class="token punctuation">.</span>subModule<span class="token punctuation">;</span></code></pre><h3><span id="outputlibraryauxiliarycomment"></span>output.library.auxiliaryComment<a href="#outputlibraryauxiliarycomment" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>在 UMD 包装器中添加注释。</p><ul><li>类型：<code>string | { amd?: string, commonjs?: string, commonjs2?: string, root?: string }</code></li></ul><p>为每个 <code>umd</code> 类型插入相同的注释，将 <code>auxiliaryComment</code> 设置为 string。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  mode<span class="token operator">:</span> <span class="token string">&#x27;development&#x27;</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;umd&#x27;</span><span class="token punctuation">,</span>
      auxiliaryComment<span class="token operator">:</span> <span class="token string">&#x27;Test Comment&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>这将产生以下结果：</p><pre><code class="hljs language-js"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">webpackUniversalModuleDefinition</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> factory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//Test Comment</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//Test Comment</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">&#x27;function&#x27;</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span> <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//Test Comment</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span> exports<span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//Test Comment</span>
  <span class="token keyword">else</span> root<span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>对于细粒度控制，可以传递一个对象：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  mode<span class="token operator">:</span> <span class="token string">&#x27;development&#x27;</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;umd&#x27;</span><span class="token punctuation">,</span>
      auxiliaryComment<span class="token operator">:</span> <span class="token punctuation">{</span>
        root<span class="token operator">:</span> <span class="token string">&#x27;Root Comment&#x27;</span><span class="token punctuation">,</span>
        commonjs<span class="token operator">:</span> <span class="token string">&#x27;CommonJS Comment&#x27;</span><span class="token punctuation">,</span>
        commonjs2<span class="token operator">:</span> <span class="token string">&#x27;CommonJS2 Comment&#x27;</span><span class="token punctuation">,</span>
        amd<span class="token operator">:</span> <span class="token string">&#x27;AMD Comment&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="outputlibraryumdnameddefine"></span>output.library.umdNamedDefine<a href="#outputlibraryumdnameddefine" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>当使用 <code>output.library.type: &quot;umd&quot;</code> 时，将 <code>output.library.umdNamedDefine</code> 设置为 <code>true</code> 将会把 AMD 模块命名为 UMD 构建。否则使用匿名 <code>define</code>。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;umd&#x27;</span><span class="token punctuation">,</span>
      umdNamedDefine<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>AMD module 将会是这样：</p><pre><code class="hljs language-js"><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="outputlibraryexport"></span>output.libraryExport<a href="#outputlibraryexport" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><aside class="warning"><h6 class="warning__prefix">警告</h6><p>我们可能会停止对此的支持，所以最好使用 <a href="#outputlibraryexport">output.library.export</a>，其作用与 <code>libraryExport</code> 一致。</p></aside><p><code>string</code> <code>[string]</code></p><p>通过配置 <code>libraryTarget</code> 决定暴露哪些模块。默认情况下为 <code>undefined</code>，如果你将 <code>libraryTarget</code> 设置为空字符串，则与默认情况具有相同的行为。例如，如果设置为 <code>&#x27;&#x27;</code>，将导出整个（命名空间）对象。下述 demo 演示了当设置 <code>libraryTarget: &#x27;var&#x27;</code> 时的效果。</p><p>支持以下配置：</p><p><code>libraryExport: &#x27;default&#x27;</code> - <strong>入口的默认导出</strong>将分配给 library target：</p><pre><code class="hljs language-javascript"><span class="token comment">// if your entry has a default export of `MyDefaultModule`</span>
<span class="token keyword">var</span> MyDefaultModule <span class="token operator">=</span> _entry_return_<span class="token punctuation">.</span>default<span class="token punctuation">;</span></code></pre><p><code>libraryExport: &#x27;MyModule&#x27;</code> - 这个 <strong>确定的模块</strong> 将被分配给 library target：</p><pre><code class="hljs language-javascript"><span class="token keyword">var</span> MyModule <span class="token operator">=</span> _entry_return_<span class="token punctuation">.</span>MyModule<span class="token punctuation">;</span></code></pre><p><code>libraryExport: [&#x27;MyModule&#x27;, &#x27;MySubModule&#x27;]</code> - 数组将被解析为要分配给 library target 的 <strong>模块路径</strong>：</p><pre><code class="hljs language-javascript"><span class="token keyword">var</span> MySubModule <span class="token operator">=</span> _entry_return_<span class="token punctuation">.</span>MyModule<span class="token punctuation">.</span>MySubModule<span class="token punctuation">;</span></code></pre><p>使用上述指定的 <code>libraryExport</code> 配置时，library 的结果可以这样使用：</p><pre><code class="hljs language-javascript">MyDefaultModule<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MyModule<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MySubModule<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="outputlibrarytarget"></span><code>output.libraryTarget</code><a href="#outputlibrarytarget" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string = &#x27;var&#x27;</code></p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>请使用 <a href="#outputlibrarytype"><code>output.library.type</code></a> 代理，因为我们可能在未来放弃对 <code>output.libraryTarget</code> 的支持。</p></aside><p>配置如何暴露 library。可以使用下面的选项中的任意一个。注意，此选项与分配给 <a href="#outputlibrary"><code>output.library</code></a> 的值一同使用。对于下面的所有示例，都假定将 <a href="#outputlibrary"><code>output.library</code></a> 的值配置为 <code>MyLibrary</code>。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>注意，下面的示例代码中的 <code>_entry_return_</code> 是入口起点返回的值。在 bundle 本身中，它是从入口起点、由 webpack 生成的函数的输出结果。</p></aside><h3><span id="expose-a-variable"></span>暴露为一个变量<a href="#expose-a-variable" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>这些选项将入口起点的返回值（例如，入口起点的任何导出值），在 bundle 包所引入的位置，赋值给 <a href="#outputlibrary"><code>output.library</code></a> 提供的变量名。</p><h4><span id="libraryTarget-var-libraryTarget-var"></span>libraryTarget: &#x27;var&#x27; $#libraryTarget-var$<a href="#libraryTarget-var-libraryTarget-var" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最好使用 <a href="#type-var"><code>output.library.type: &#x27;var&#x27;</code></a>。</p></aside><p>当 library 加载完成，<strong>入口起点的返回值</strong>将分配给一个变量：</p><pre><code class="hljs language-javascript"><span class="token keyword">var</span> MyLibrary <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

<span class="token comment">// 在一个单独的 script...</span>
MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4><span id="libraryTarget-assign-libraryTarget-assign"></span>libraryTarget: &#x27;assign&#x27; $#libraryTarget-assign$<a href="#libraryTarget-assign-libraryTarget-assign" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最好使用 <a href="#typeassign"><code>output.library.type: &#x27;assign&#x27;</code></a>。</p></aside><p>这将产生一个隐含的全局变量，可能会潜在地重新分配到全局中已存在的值（谨慎使用）：</p><pre><code class="hljs language-javascript">MyLibrary <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span></code></pre><p>注意，如果 <code>MyLibrary</code> 在作用域中未在前面代码进行定义，则你的 library 将被设置在全局作用域内。</p><h4><span id="libraryTarget-assign-properties-libraryTarget-assign-properties"></span>libraryTarget: &#x27;assign-properties&#x27; $#libraryTarget-assign-properties$<a href="#libraryTarget-assign-properties-libraryTarget-assign-properties" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><span class="badge">5.16.0+</span><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最好使用 <a href="#typeassignproperties">output.library.type: &#x27;assign-properties&#x27;`</a>。</p></aside><p>如果目标对象存在，则将返回值 copy 到目标对象，否则先创建目标对象：</p><pre><code class="hljs language-js"><span class="token comment">// 如果不存在的话就创建目标对象</span>
MyLibrary <span class="token operator">=</span> <span class="token keyword">typeof</span> MyLibrary <span class="token operator">===</span> <span class="token string">&#x27;undefined&#x27;</span> <span class="token operator">?</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">:</span> MyLibrary<span class="token punctuation">;</span>
<span class="token comment">// 然后复制返回值到 MyLibrary</span>
<span class="token comment">// 与 Object.assign 行为类似</span>

<span class="token comment">// 例如，你在入口导出了一个 `hello` 函数</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 在另一个脚本中运行 MyLibrary</span>
<span class="token comment">// 你可以像这样运行 `hello` 函数</span>
MyLibrary<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token string">&#x27;World&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>当使用此选项时，将 <a href="#outputlibrary"><code>output.library</code></a> 设置为空，将产生一个破损的输出 bundle。</p></aside><h3><span id="expose-via-object-assignment"></span>通过在对象上赋值暴露<a href="#expose-via-object-assignment" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>这些选项将入口起点的返回值（例如，入口起点的任何导出值）赋值给一个特定对象的属性（此名称由 <code>output.library</code> 定义）下。</p><p>如果 <code>output.library</code> 未赋值为一个非空字符串，则默认行为是，将入口起点返回的所有属性都赋值给一个对象（此对象由 <code>output.libraryTarget</code> 特定），通过如下代码片段：</p><pre><code class="hljs language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>output<span class="token punctuation">.</span>libraryTarget<span class="token punctuation">,</span> _entry_return_<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>注意，不设置 <code>output.library</code> 将导致由入口起点返回的所有属性，都会被赋值给给定的对象；这里并不会检查现有的属性名是否存在。</p></aside><h4><span id="librarytarget-this"></span>libraryTarget: &#x27;this&#x27;<a href="#librarytarget-this" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最好使用 <a href="#typethis"><code>output.library.type: &#x27;this&#x27;</code></a>。</p></aside><p><strong>入口起点的返回值</strong>将分配给 this 的一个属性（此名称由 <code>output.library</code> 定义）下，<code>this</code> 的含义取决于你：</p><pre><code class="hljs language-javascript"><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

<span class="token comment">// 在一个单独的 script...</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果 this 是 window</span></code></pre><h4><span id="librarytarget-window"></span>libraryTarget: &#x27;window&#x27;<a href="#librarytarget-window" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最好使用 <a href="#type-window"><code>output.library.type: &#x27;window&#x27;</code></a>。</p></aside><p><strong>入口起点的返回值</strong>将使用 <code>output.library</code> 中定义的值，分配给 <code>window</code> 对象的这个属性下。</p><pre><code class="hljs language-javascript">window<span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

window<span class="token punctuation">.</span>MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4><span id="librarytarget-global"></span>libraryTarget: &#x27;global&#x27;<a href="#librarytarget-global" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最好使用 <a href="#type-global"><code>output.library.type: &#x27;global&#x27;</code></a>。</p></aside><p><strong>入口起点的返回值</strong>将使用 <code>output.library</code> 中定义的值，分配给 <code>global</code> 对象的这个属性下。</p><pre><code class="hljs language-javascript">global<span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

global<span class="token punctuation">.</span>MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4><span id="librarytarget-commonjs"></span>libraryTarget: &#x27;commonjs&#x27;<a href="#librarytarget-commonjs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最好使用 <a href="#type-commmonjs"><code>output.library.type: &#x27;commonjs&#x27;</code></a>。</p></aside><p><strong>入口起点的返回值</strong>将使用 <code>output.library</code> 中定义的值，分配给 exports 对象。这个名称也意味着，模块用于 CommonJS 环境：</p><pre><code class="hljs language-javascript">exports<span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3><span id="module-definition-systems"></span>模块定义系统<a href="#module-definition-systems" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>这些选项将使得 bundle 带有更完整的模块头，以确保与各种模块系统的兼容性。根据 <code>output.libraryTarget</code> 选项不同，<code>output.library</code> 选项将具有不同的含义。</p><h4><span id="librarytarget-module"></span>libraryTarget: &#x27;module&#x27;<a href="#librarytarget-module" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最好使用 <a href="#type-module"><code>output.library.type: &#x27;module&#x27;</code></a>。</p></aside><p>输出 ES 模块。请确保事先启用 <a href="/configuration/experiments/">experiments.outputModule</a>。</p><p>需要注意的是，该功能还未完全支持，请在<a href="https://github.com/webpack/webpack/issues/2933#issuecomment-774253975">此处</a>跟进进度。</p><h4><span id="librarytarget-commonjs2"></span>libraryTarget: &#x27;commonjs2&#x27;<a href="#librarytarget-commonjs2" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最好使用 <a href="#type-commmonjs2"><code>output.library.type: &#x27;commonjs2&#x27;</code></a>。</p></aside><p><strong>入口起点的返回值</strong>将分配给 <code>module.exports</code> 对象。这个名称也意味着模块用于 CommonJS 环境：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>注意，<code>output.library</code> 不能与 <code>output.libraryTarget</code> 一起使用，具体原因请参照<a href="https://github.com/webpack/webpack/issues/11800">此 issue</a>。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>想要弄清楚 CommonJS 和 CommonJS2 之间的区别？虽然它们很相似，但二者之间存在一些微妙的差异，这通常与 webpack 上下文没有关联。（更多详细信息，请<a href="https://github.com/webpack/webpack/issues/1114">阅读此 issue</a>。）</p></aside><h4><span id="librarytarget-amd"></span>libraryTarget: &#x27;amd&#x27;<a href="#librarytarget-amd" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最好使用 <a href="#type-amd"><code>output.library.type: &#x27;amd&#x27;</code></a>。</p></aside><p>将你的 library 暴露为 AMD 模块。</p><p>AMD 模块要求入口 chunk（例如使用 <code>&lt;script&gt;</code> 标签加载的第一个脚本）通过特定的属性定义，例如 <code>define</code> 和 <code>require</code>，它们通常由 RequireJS 或任何兼容的模块加载器提供（例如 almond）。否则，直接加载生成的 AMD bundle 将导致报错，如 <code>define is not defined</code>。</p><p>配置如下：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
    libraryTarget<span class="token operator">:</span> <span class="token string">&#x27;amd&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>生成的 output 名称将被定义为 &quot;MyLibrary&quot;：</p><pre><code class="hljs language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>可以在 script 标签中，将 bundle 作为一个模块整体引入，并且可以像这样调用 bundle：</p><pre><code class="hljs language-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">MyLibrary</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something with the library...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>如果 <code>output.library</code> 未定义，将会生成以下内容。</p><pre><code class="hljs language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>如果直接加载 <code>&lt;script&gt;</code> 标签，此 bundle 无法按预期运行，或者根本无法正常运行（在 almond loader 中）。只能通过文件的实际路径，在 RequireJS 兼容的异步模块加载器中运行，因此在这种情况下，如果这些设置直接暴露在服务器上，那么 <code>output.path</code> 和 <code>output.filename</code> 对于这个特定的设置可能变得很重要。</p><h4><span id="librarytarget-amd-require"></span>libraryTarget: &#x27;amd-require&#x27;<a href="#librarytarget-amd-require" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最好使用 <a href="#type-amd-require"><code>output.library.type: &#x27;amd-require&#x27;</code></a>。</p></aside><p>这将使用立即执行的 AMD <code>require(dependencies, factory)</code> 包装器包装您的输出。</p><p><code>&#x27;amd-require&#x27;</code> 目标（target）允许使用 AMD 依赖项，而无需单独的后续调用。与 <code>&#x27;amd&#x27;</code> 目标（target）一样, 这取决于在加载 webpack 输出的环境中适当可用的 <a href="https://github.com/amdjs/amdjs-api/blob/master/require.md"><code>require</code> function</a>。</p><p>对于此 target，库名称将被忽略。</p><h4><span id="librarytarget-umd"></span>libraryTarget: &#x27;umd&#x27;<a href="#librarytarget-umd" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最好使用 <a href="#type-umd"><code>output.library.type: &#x27;umd&#x27;</code></a>。</p></aside><p>将你的 library 暴露为所有的模块定义下都可运行的方式。它将在 CommonJS, AMD 环境下运行，或将模块导出到 global 下的变量。了解更多请查看 <a href="https://github.com/umdjs/umd">UMD 仓库</a>。</p><p>在这个例子中，你需要 <code>library</code> 属性来命名你的模块：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
    libraryTarget<span class="token operator">:</span> <span class="token string">&#x27;umd&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>最终的输出结果为：</p><pre><code class="hljs language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">webpackUniversalModuleDefinition</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> factory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">&#x27;function&#x27;</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span> <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span> exports<span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> root<span class="token punctuation">[</span><span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> self <span class="token operator">!==</span> <span class="token string">&#x27;undefined&#x27;</span> <span class="token operator">?</span> self <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>注意，省略 <code>library</code> 会导致将入口起点返回的所有属性，直接赋值给 root 对象，就像<a href="#expose-via-object-assignment">对象分配章节</a>。例如：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    libraryTarget<span class="token operator">:</span> <span class="token string">&#x27;umd&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>输出结果如下：</p><pre><code class="hljs language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">webpackUniversalModuleDefinition</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> factory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">&#x27;function&#x27;</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span> <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> a<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span> <span class="token operator">?</span> exports <span class="token operator">:</span> root<span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> self <span class="token operator">!==</span> <span class="token string">&#x27;undefined&#x27;</span> <span class="token operator">?</span> self <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>从 webpack 3.1.0 开始，你可以将 <code>library</code> 指定为一个对象，用于给每个 target 起不同的名称：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    library<span class="token operator">:</span> <span class="token punctuation">{</span>
      root<span class="token operator">:</span> <span class="token string">&#x27;MyLibrary&#x27;</span><span class="token punctuation">,</span>
      amd<span class="token operator">:</span> <span class="token string">&#x27;my-library&#x27;</span><span class="token punctuation">,</span>
      commonjs<span class="token operator">:</span> <span class="token string">&#x27;my-common-library&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    libraryTarget<span class="token operator">:</span> <span class="token string">&#x27;umd&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4><span id="librarytarget-system"></span>libraryTarget: &#x27;system&#x27;<a href="#librarytarget-system" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最好使用 <a href="#type-system"><code>output.library.type: &#x27;system&#x27;</code></a>。</p></aside><p>这将暴露你的 library 作为一个由 <a href="https://github.com/systemjs/systemjs/blob/master/docs/system-register.md"><code>System.register</code></a> 的模块。此特性首次发布于 <a href="https://github.com/webpack/webpack/releases/tag/v4.30.0">webpack 4.30.0</a>。</p><p>当 webpack bundle 被执行时，系统模块依赖全局的变量 <code>System</code>。编译为 <code>System.register</code> 形式后，你可以使用 <code>System.import(&#x27;/bundle.js&#x27;)</code> 而无需额外配置，并会将你的 webpack bundle 包加载到系统模块注册表中。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    libraryTarget<span class="token operator">:</span> <span class="token string">&#x27;system&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>输出：</p><pre><code class="hljs language-javascript">System<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_export</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    setters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">execute</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>除了将 <code>output.libraryTarget</code> 设置为 <code>system</code> 之外，还可将 <code>output.library</code> 添加到配置中，输出 bundle 的 library 名将作为 <code>System.register</code> 的参数：</p><pre><code class="hljs language-javascript">System<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&#x27;my-library&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_export</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    setters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">execute</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>你可以通过 <code>__system_context__</code> 访问 <a href="https://github.com/systemjs/systemjs/blob/master/docs/system-register.md#format-definition">SystemJS context</a>：</p><pre><code class="hljs language-javascript"><span class="token comment">// 记录当前系统模块的 URL</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__system_context__<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 导入一个系统模块，通过将当前的系统模块的 url 作为 parentUrl</span>
__system_context__<span class="token punctuation">.</span><span class="token function">import</span><span class="token punctuation">(</span><span class="token string">&#x27;./other-file.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3><span id="other-targets"></span>其他 Targets<a href="#other-targets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><h4><span id="librarytarget-jsonp"></span>libraryTarget: &#x27;jsonp&#x27;<a href="#librarytarget-jsonp" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最好使用 <a href="#type-jsonp"><code>output.library.type: &#x27;jsonp&#x27;</code></a>。</p></aside><p>这将把入口起点的返回值，包裹到一个 jsonp 包装容器中</p><pre><code class="hljs language-javascript"><span class="token function">MyLibrary</span><span class="token punctuation">(</span>_entry_return_<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>你的 library 的依赖将由 <a href="/configuration/externals/"><code>externals</code></a> 配置定义。</p><h2><span id="outputmodule"></span>output.module<a href="#outputmodule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = false</code></p><p>以模块类型输出 JavaScript 文件。由于此功能还处于实验阶段，默认禁用。</p><p>当启用时，webpack 会在内部将 <a href="#outputiife"><code>output.iife</code></a> 设置为 <code>false</code>，将 <a href="#outputscripttype"><code>output.scriptType</code></a> 为 <code>&#x27;module&#x27;</code>，并将 <code>terserOptions.module</code> 设置为 <code>true</code></p><p>如果你需要使用 webpack 构建一个库以供别人使用，当 <code>output.module</code> 为 <code>true</code> 时，一定要将 <a href="#librarytarget-module"><code>output.libraryTarget</code></a> 设置为 <code>&#x27;module&#x27;</code>。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  experiments<span class="token operator">:</span> <span class="token punctuation">{</span>
    outputModule<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    module<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p><code>output.module</code> 是一个实验性的功能，想要使用的话只能通过设置 <a href="/configuration/experiments/#experiments"><code>experiments.outputModule</code></a> 为 <code>true</code>。目前存在<a href="https://github.com/webpack/webpack/issues/11277#issuecomment-992565287">一个已知问题</a> 是这样的库不能被基于 webpack4（也可能是其他构建工具）的应用程序使用。</p></aside><h2><span id="outputpath"></span>output.path<a href="#outputpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string = path.join(process.cwd(), &#x27;dist&#x27;)</code></p><p>output 目录对应一个<strong>绝对路径</strong>。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;dist/assets&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>注意，<code>[fullhash]</code> 在参数中被替换为编译过程(compilation)的 hash。详细信息请查看<a href="/guides/caching/">指南 - 缓存</a>。</p><h2><span id="outputpathinfo"></span>output.pathinfo<a href="#outputpathinfo" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean=true</code> <code>string: &#x27;verbose&#x27;</code></p><p>告知 webpack 在 bundle 中引入「所包含模块信息」的相关注释。此选项在 <code>development</code> <a href="/configuration/mode/">模式</a>时的默认值为 <code>true</code>，而在 <code>production</code> <a href="/configuration/mode/">模式</a>时的默认值为 <code>false</code>。当值为 <code>&#x27;verbose&#x27;</code> 时，会显示更多信息，如 export，运行时依赖以及 bailouts。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>对于在开发环境(development)下阅读生成代码时，虽然通过这些注释可以提供有用的数据信息，但在生产环境(production)下，<strong>不应该</strong>使用。</p></aside><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    pathinfo<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>这些注释也会被添加至经过 tree shaking 后生成的 bundle 中。</p></aside><h2><span id="outputpublicpath"></span>output.publicPath<a href="#outputpublicpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><ul><li><p>Type:</p><ul><li><p><code>function</code></p></li><li><p><code>string</code></p><p>targets 设置为 <code>web</code> 与 <code>web-worker</code> 时 <code>output.publicPath</code> 默认为 <code>&#x27;auto&#x27;</code>，查看 <a href="/guides/public-path/#Automatic-publicPath-automaticpublicPath">该指南</a> 获取其用例</p></li></ul></li></ul><p>对于按需加载(on-demand-load)或加载外部资源(external resources)（如图片、文件等）来说，output.publicPath 是很重要的选项。如果指定了一个错误的值，则在加载这些资源时会收到 404 错误。</p><p>此选项指定在浏览器中所引用的「此输出目录对应的<strong>公开 URL</strong>」。相对 URL(relative URL) 会被相对于 HTML 页面（或 <code>&lt;base&gt;</code> 标签）解析。相对于服务的 URL(Server-relative URL)，相对于协议的 URL(protocol-relative URL) 或绝对 URL(absolute URL) 也可是可能用到的，或者有时必须用到，例如：当将资源托管到 CDN 时。</p><p>该选项的值是以 runtime(运行时) 或 loader(载入时) 所创建的每个 URL 的前缀。因此，在多数情况下，<strong>此选项的值都会以 <code>/</code> 结束</strong>。</p><p>规则如下：<a href="#outputpath"><code>output.path</code></a> 中的 URL 以 HTML 页面为基准。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;public/assets&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    publicPath<span class="token operator">:</span> <span class="token string">&#x27;https://cdn.example.com/assets/&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>对于这个配置：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token operator">:</span> <span class="token string">&#x27;/assets/&#x27;</span><span class="token punctuation">,</span>
    chunkFilename<span class="token operator">:</span> <span class="token string">&#x27;[id].chunk.js&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>对于一个 chunk 请求，看起来像这样 <code>/assets/4.chunk.js</code>。</p><p>对于一个输出 HTML 的 loader 可能会像这样输出：</p><pre><code class="hljs language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/assets/spinner.gif<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></code></pre><p>或者在加载 CSS 的一个图片时：</p><pre><code class="hljs language-css"><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>/assets/spinner.gif<span class="token punctuation">)</span></span><span class="token punctuation">;</span></code></pre><p>webpack-dev-server 也会默认从 <code>publicPath</code> 为基准，使用它来决定在哪个目录下启用服务，来访问 webpack 输出的文件。</p><p>注意，参数中的 <code>[fullhash]</code> 将会被替换为编译过程(compilation) 的 hash。详细信息请查看<a href="/guides/caching">指南 - 缓存</a>。</p><p>示例：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// One of the below</span>
    publicPath<span class="token operator">:</span> <span class="token string">&#x27;auto&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// It automatically determines the public path from either `import.meta.url`, `document.currentScript`, `&lt;script /&gt;` or `self.location`.</span>
    publicPath<span class="token operator">:</span> <span class="token string">&#x27;https://cdn.example.com/assets/&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// CDN（总是 HTTPS 协议）</span>
    publicPath<span class="token operator">:</span> <span class="token string">&#x27;//cdn.example.com/assets/&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// CDN（协议相同）</span>
    publicPath<span class="token operator">:</span> <span class="token string">&#x27;/assets/&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// 相对于服务(server-relative)</span>
    publicPath<span class="token operator">:</span> <span class="token string">&#x27;assets/&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// 相对于 HTML 页面</span>
    publicPath<span class="token operator">:</span> <span class="token string">&#x27;../assets/&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// 相对于 HTML 页面</span>
    publicPath<span class="token operator">:</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// 相对于 HTML 页面（目录相同）</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>在编译时(compile time)无法知道输出文件的 <code>publicPath</code> 的情况下，可以留空，然后在入口文件(entry file)处使用<a href="https://stackoverflow.com/questions/12934929/what-are-free-variables">自由变量(free variable)</a> <code>__webpack_public_path__</code>，以便在运行时(runtime)进行动态设置。</p><pre><code class="hljs language-javascript">__webpack_public_path__ <span class="token operator">=</span> myRuntimePublicPath<span class="token punctuation">;</span>

<span class="token comment">// 应用程序入口的其他部分</span></code></pre><p>有关 <code>__webpack_public_path__</code> 的更多信息，请查看<a href="https://github.com/webpack/webpack/issues/2776#issuecomment-233208623">此讨论</a>。</p><h2><span id="outputscripttype"></span>output.scriptType<a href="#outputscripttype" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string: &#x27;module&#x27; | &#x27;text/javascript&#x27;</code> <code>boolean = false</code></p><p>这个配置项允许使用自定义 script 类型加载异步 chunk，例如 <code>&lt;script type=&quot;module&quot; ...&gt;</code>。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>如果将 <a href="#outputmodule"><code>output.module</code></a> 设置为 <code>true</code>，<code>output.scriptType</code> 将会默认设置为 <code>&#x27;module&#x27;</code> 而不是 <code>false</code>。</p></aside><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    scriptType<span class="token operator">:</span> <span class="token string">&#x27;module&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputsourcemapfilename"></span>output.sourceMapFilename<a href="#outputsourcemapfilename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string = &#x27;[file].map[query]&#x27;</code></p><p>仅在 <a href="/configuration/devtool/"><code>devtool</code></a> 设置为 <code>&#x27;source-map&#x27;</code> 时有效，此选项会向硬盘写入一个输出文件。</p><p>可以使用 <a href="#outputfilename">#output-filename</a> 中的 <code>[name]</code>, <code>[id]</code>, <code>[hash]</code> 和 <code>[chunkhash]</code> 替换符号。除此之外，还可以使用 <a href="/configuration/output/#template-strings">Template strings</a> 在 Filename-level 下替换。</p><h2><span id="outputsourceprefix"></span>output.sourcePrefix<a href="#outputsourceprefix" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string = &#x27;&#x27;</code></p><p>修改输出 bundle 中每行的前缀。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    sourcePrefix<span class="token operator">:</span> <span class="token string">&#x27;\t&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>使用一些缩进会使 bundle 看起来更美观，但会导致多行字符串的问题。</p></aside><aside class="tip"><h6 class="tip__prefix">提示</h6><p>通常，你不需要修改 <code>output.sourcePrefix</code>。</p></aside><h2><span id="outputstrictmoduleerrorhandling"></span>output.strictModuleErrorHandling<a href="#outputstrictmoduleerrorhandling" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>按照 ES Module 规范处理 module 加载时的错误，会有性能损失。</p><ul><li>类型：<code>boolean</code></li><li>可用版本：5.25.0+</li></ul><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    strictModuleErrorHandling<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputstrictmoduleexceptionhandling"></span>output.strictModuleExceptionHandling<a href="#outputstrictmoduleexceptionhandling" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><aside class="warning"><h6 class="warning__prefix">警告</h6><p>已废弃，请使用
<a href="#outputstrictmoduleerrorhandling"><code>output.strictModuleErrorHandling</code></a>。</p></aside><p><code>boolean = false</code></p><p>如果一个模块是在 <code>require</code> 时抛出异常，告诉 webpack 从模块实例缓存(<code>require.cache</code>)中删除这个模块。</p><p>出于性能原因，默认为 <code>false</code>。</p><p>当设置为 <code>false</code> 时，该模块不会从缓存中删除，这将造成仅在第一次 <code>require</code> 调用时抛出异常（会导致与 node.js 不兼容）。</p><p>例如，设想一下 <code>module.js</code>：</p><pre><code class="hljs language-javascript"><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#x27;error&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>将 <code>strictModuleExceptionHandling</code> 设置为 <code>false</code>，只有第一个 <code>require</code> 抛出异常：</p><pre><code class="hljs language-javascript"><span class="token comment">// with strictModuleExceptionHandling = false</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;module&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;- 抛出</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;module&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;- 不抛出</span></code></pre><p>相反，将 <code>strictModuleExceptionHandling</code> 设置为 <code>true</code>，这个模块所有的 <code>require</code> 都抛出异常：</p><pre><code class="hljs language-javascript"><span class="token comment">// with strictModuleExceptionHandling = true</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;module&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;- 抛出</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;module&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;- 仍然抛出</span></code></pre><h2><span id="outputtrustedtypes"></span>output.trustedTypes<a href="#outputtrustedtypes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = false</code> <code>string</code> <code>object</code></p><span class="badge">5.37.0+</span><p>控制 <a href="https://web.dev/trusted-types">Trusted Types</a> 兼容性。启用时，webpack 将检测 Trusted Types 支持，如果支持，则使用 Trusted Types 策略创建它动态加载的脚本 url。当应用程序在 <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/require-trusted-types-for"><code>require-trusted-types-for</code></a> 内容安全策略指令下运行时使用。</p><p>默认为 <code>false</code>（不兼容，脚本 URL 为字符串）。</p><ul><li>设置为 <code>true</code> 时，webpack 将会使用 <a href="#outputuniquename"><code>output.uniqueName</code></a> 作为 Trusted Types 策略名称。</li><li>设置为非空字符串时，它的值将被用作策略名称。</li><li>设置为一个对象时，策略名称取自对象 <code>policyName</code> 属性。</li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    trustedTypes<span class="token operator">:</span> <span class="token punctuation">{</span>
      policyName<span class="token operator">:</span> <span class="token string">&#x27;my-application#webpack&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputumdnameddefine"></span>output.umdNamedDefine<a href="#outputumdnameddefine" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最好使用 <a href="#outputlibraryumdnameddefine"><code>output.library.umdNamedDefine</code></a>。</p></aside><p><code>boolean</code></p><p>当使用 <code>libraryTarget: &quot;umd&quot;</code> 时，设置 <code>output.umdNamedDefine</code> 为 <code>true</code> 将命名由 UMD 构建的 AMD 模块。否则将使用一个匿名的 <code>define</code>。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    umdNamedDefine<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputuniquename"></span>output.uniqueName<a href="#outputuniquename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code></p><p>在全局环境下为防止多个 webpack 运行时 冲突所使用的唯一名称。默认使用 <a href="/configuration/output/#outputlibrary"><code>output.library</code></a> 名称或者上下文中的 <code>package.json</code> 的 包名称(package name)， 如果两者都不存在，值为 <code>&#x27;&#x27;</code>。</p><p><code>output.uniqueName</code> 将用于生成唯一全局变量:</p><ul><li><a href="/configuration/output/#outputchunkloadingglobal"><code>output.chunkLoadingGlobal</code></a></li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    uniqueName<span class="token operator">:</span> <span class="token string">&#x27;my-package-xyz&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="output-wasm-loading"></span>output.wasmLoading<a href="#output-wasm-loading" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = false</code> <code>string</code></p><p>此选项用于设置加载 WebAssembly 模块的方式。默认可使用的方式有 <code>&#x27;fetch&#x27;</code>（web/WebWorker），<code>&#x27;async-node&#x27;</code>（Node.js），其他额外方式可由插件提供。</p><p>其默认值会根据 <a href="/configuration/target/"><code>target</code></a> 的变化而变化：</p><ul><li>如果 <a href="/configuration/target/"><code>target</code></a> 设置为 <code>&#x27;web&#x27;</code>，<code>&#x27;webworker&#x27;</code>，<code>&#x27;electron-renderer&#x27;</code> 或 <code>&#x27;node-webkit&#x27;</code> 其中之一，其默认值为 <code>&#x27;fetch&#x27;</code>。</li><li>如果 <a href="/configuration/target/"><code>target</code></a> 设置为 <code>&#x27;node&#x27;</code>，<code>&#x27;async-node&#x27;</code>，<code>&#x27;electron-main&#x27;</code> 或 <code>&#x27;electron-preload&#x27;</code>，其默认值为 <code>&#x27;async-node&#x27;</code>。</li></ul><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    wasmLoading<span class="token operator">:</span> <span class="token string">&#x27;fetch&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="outputworkerchunkloading"></span><code>output.workerChunkLoading</code><a href="#outputworkerchunkloading" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string: &#x27;require&#x27; | &#x27;import-scripts&#x27; | &#x27;async-node&#x27; | &#x27;import&#x27; | &#x27;universal&#x27;</code> <code>boolean: false</code></p><p>新选项 <code>workerChunkLoading</code> 用于控制 workder 的 chunk 加载。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>此选项默认值取决于 <code>target</code> 的设置。欲了解更多详情，请在 <a href="https://github.com/webpack/webpack/blob/main/lib/config/defaults.js">webpack 默认值文件中搜索</a> <code>&quot;workerChunkLoading&quot;</code>。</p></aside><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    workerChunkLoading<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h1><span id="Module"></span>Module<a href="#Module" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>这些选项决定了如何处理项目中的<a href="/concepts/modules">不同类型的模块</a>。</p><h2><span id="modulegenerator"></span>module.generator<a href="#modulegenerator" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><span class="badge">5.12.0+</span><p>可以使用 <code>module.generator</code> 在一个地方配置所有生成器的选项。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    generator<span class="token operator">:</span> <span class="token punctuation">{</span>
      asset<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// asseet 模块的 generator 选项</span>

        <span class="token comment">// 自定义 asset 模块的 publicPath，自 webpack 5.28.0 起可用</span>
        publicPath<span class="token operator">:</span> <span class="token string">&#x27;assets/&#x27;</span><span class="token punctuation">,</span>

        <span class="token comment">// 将静态资源输出到相对于 &#x27;output.path&#x27; 的指定文件夹中，webpack 5.67.0 后可用</span>
        outputPath<span class="token operator">:</span> <span class="token string">&#x27;cdn-assets/&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;asset/inline&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// asset/内联模块的 generator 选项</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;asset/resource&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// asset/资源模块的 generator 选项</span>

        <span class="token comment">// 自定义 asset/resource 模块的 publicPath，自 webpack 5.28.0 起可用</span>
        publicPath<span class="token operator">:</span> <span class="token string">&#x27;assets/&#x27;</span><span class="token punctuation">,</span>

        <span class="token comment">// 将静态资源输出到相对于 &#x27;output.path&#x27; 的指定文件夹中，webpack 5.67.0 后可用</span>
        outputPath<span class="token operator">:</span> <span class="token string">&#x27;cdn-assets/&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      javascript<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 该模块类型尚不支持 generator 选项</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;javascript/auto&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 同上</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;javascript/dynamic&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 同上</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;javascript/esm&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 同上</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 其他...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="moduleparser"></span>module.parser<a href="#moduleparser" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><span class="badge">5.12.0+</span><p>类似于 <a href="#modulegenerator"><code>module.generator</code></a>，你可以用 <code>module.parser</code> 在一个地方配置所有解析器的选项。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token punctuation">{</span>
      asset<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 资产模块的 parser 选项</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;asset/inline&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 该模块类型尚不支持 parser 选项</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;asset/resource&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 同上</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;asset/source&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 同上</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      javascript<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// javascript 模块的解析器选项</span>
        <span class="token comment">// 例如，启用解析 require.ensure 语法的功能</span>
        requireEnsure<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;javascript/auto&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 同上</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;javascript/dynamic&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 同上</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;javascript/esm&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 同上</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 其他...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="moduleparserjavascript"></span>module.parser.javascript<a href="#moduleparserjavascript" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>JavaScript parser 的配置项。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token punctuation">{</span>
      javascript<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        commonjsMagicComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>允许在 <a href="/configuration/module/#ruleparser"><code>Rule.parser</code></a> 中配置这些选项。也可以是特定模块。</p><h4><span id="moduleparserjavascriptcommonjsmagiccomments"></span>module.parser.javascript.commonjsMagicComments<a href="#moduleparserjavascriptcommonjsmagiccomments" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>为 CommonJS 启用 <a href="/api/module-methods/#magic-comments">魔法注释</a>。</p><ul><li><p>类型：<code>boolean</code></p></li><li><p>可用版本：5.17.0+</p></li><li><p>示例：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token punctuation">{</span>
      javascript<span class="token operator">:</span> <span class="token punctuation">{</span>
        commonjsMagicComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><p>请注意，目前只支持 <code>webpackIgnore</code> 注释：</p><pre><code class="hljs language-js"><span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token comment">/* webpackIgnore: true */</span> <span class="token string">&#x27;x&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4><span id="moduleparserjavascriptdynamicImportMode"></span>module.parser.javascript.dynamicImportMode<a href="#moduleparserjavascriptdynamicImportMode" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>指定动态导入的全局模式。</p><ul><li><p>类型：<code>&#x27;eager&#x27; | &#x27;weak&#x27; | &#x27;lazy&#x27; | &#x27;lazy-once&#x27;</code></p></li><li><p>可用版本：5.73.0+</p></li><li><p>示例：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token punctuation">{</span>
      javascript<span class="token operator">:</span> <span class="token punctuation">{</span>
        dynamicImportMode<span class="token operator">:</span> <span class="token string">&#x27;lazy&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><h4><span id="moduleparserjavascriptdynamicImportPrefetch"></span>module.parser.javascript.dynamicImportPrefetch<a href="#moduleparserjavascriptdynamicImportPrefetch" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>指定动态导入的全局 prefetch。</p><ul><li><p>类型：<code> number | boolean</code></p></li><li><p>可用版本：5.73.0+</p></li><li><p>示例：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token punctuation">{</span>
      javascript<span class="token operator">:</span> <span class="token punctuation">{</span>
        dynamicImportPrefetch<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><h4><span id="moduleparserjavascriptdynamicImportPreload"></span>module.parser.javascript.dynamicImportPreload<a href="#moduleparserjavascriptdynamicImportPreload" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>指定动态导入的全局 preload。</p><ul><li><p>类型：<code> number | boolean</code></p></li><li><p>可用版本：5.73.0+</p></li><li><p>示例：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token punctuation">{</span>
      javascript<span class="token operator">:</span> <span class="token punctuation">{</span>
        dynamicImportPreload<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><h4><span id="moduleparserjavascriptexportsPresence"></span>module.parser.javascript.exportsPresence<a href="#moduleparserjavascriptexportsPresence" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>指出在 <code>\&quot;import ... from ...\&quot;</code> 与 <code>\&quot;export ... from ...\&quot;</code> 中无效导出名称的行为。</p><ul><li><p>类型：<code>&#x27;error&#x27; | &#x27;warn&#x27; | &#x27;auto&#x27; | false</code></p></li><li><p>可用版本：5.62.0+</p></li><li><p>示例：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token punctuation">{</span>
      javascript<span class="token operator">:</span> <span class="token punctuation">{</span>
        exportsPresence<span class="token operator">:</span> <span class="token string">&#x27;error&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><h4><span id="moduleparserjavascriptimportexportspresence"></span>module.parser.javascript.importExportsPresence<a href="#moduleparserjavascriptimportexportspresence" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>指出在 <code>\&quot;import ... from ...\&quot;</code> 中无效导出名称的行为。</p><ul><li><p>类型：<code>&#x27;error&#x27; | &#x27;warn&#x27; | &#x27;auto&#x27; | false</code></p></li><li><p>可用版本：5.62.0+</p></li><li><p>示例：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token punctuation">{</span>
      javascript<span class="token operator">:</span> <span class="token punctuation">{</span>
        importExportsPresence<span class="token operator">:</span> <span class="token string">&#x27;error&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><h4><span id="moduleparserjavascriptimportMeta"></span>module.parser.javascript.importMeta<a href="#moduleparserjavascriptimportMeta" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Enable or disable evaluating <code>import.meta</code>.</p><ul><li><p>类型：<code>boolean = true</code></p></li><li><p>可用版本：5.68.0+</p></li><li><p>示例：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token punctuation">{</span>
      javascript<span class="token operator">:</span> <span class="token punctuation">{</span>
        importMeta<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><h4><span id="moduleparserjavascriptimportMetaContext"></span>module.parser.javascript.importMetaContext<a href="#moduleparserjavascriptimportMetaContext" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>启用/禁用 <a href="/api/module-variables/#importmetawebpackContext"><code>import.meta.webpackContext</code></a> 分析。</p><ul><li><p>类型：<code>boolean</code></p></li><li><p>可用版本：5.70.0+</p></li><li><p>示例：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token punctuation">{</span>
      javascript<span class="token operator">:</span> <span class="token punctuation">{</span>
        importMetaContext<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><h4><span id="moduleparserjavascriptreexportExportsPresence"></span>module.parser.javascript.reexportExportsPresence<a href="#moduleparserjavascriptreexportExportsPresence" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>指出在 <code>\&quot;export ... from ...\&quot;</code> 中无效导出名称的行为。当在 TypeScript 重新导出类型，从 <code>\&quot;export ... from ...\&quot;</code> 迁移到 <code>\&quot;export type ... from ...\&quot;</code> 时禁用该配置项是有用的。</p><ul><li><p>类型：<code>&#x27;error&#x27; | &#x27;warn&#x27; | &#x27;auto&#x27; | false</code></p></li><li><p>可用版本：5.62.0+</p></li><li><p>示例：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token punctuation">{</span>
      javascript<span class="token operator">:</span> <span class="token punctuation">{</span>
        reexportExportsPresence<span class="token operator">:</span> <span class="token string">&#x27;error&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><h4><span id="moduleparserjavascripturl"></span>module.parser.javascript.url<a href="#moduleparserjavascripturl" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>启用 <code>new URL()</code> 语法解析。</p><ul><li><p>类型：<code>boolean = true</code> | <code>&#x27;relative&#x27;</code></p></li><li><p>示例:</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token punctuation">{</span>
      javascript<span class="token operator">:</span> <span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// disable parsing of `new URL()` syntax</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><p>自 webpack <span class="badge">5.23.0</span> 起，<code>module.parser.javascript.url</code> 的 <code>&#x27;relative&#x27;</code> 值可用。当使用 <code>&#x27;relative&#x27;</code> 时，webpack 将为 <code>new URL()</code> 语法生成相对的 URL，即结果 URL 中不包含根 URL：</p><pre><code class="hljs language-html"><span class="token comment">&lt;!-- with &#x27;relative&#x27; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>c43188443804f1b1f534.svg<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- without &#x27;relative&#x27; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file:///path/to/project/dist/c43188443804f1b1f534.svg<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></code></pre><ol><li>当服务器不知道根 URL 时，这对 SSR（服务端渲染）很有用（而且可用节省一些字节）。为了使其相同，它也必须用于客户端构建。</li><li>这也适用于 SSG（静态网站生成器），mini-css-plugin 和 html-plugin 等通常需要进行服务端渲染。</li></ol><h2><span id="modulenoparse"></span>module.noParse<a href="#modulenoparse" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>RegExp</code> <code>[RegExp]</code> <code>function(resource)</code> <code>string</code> <code>[string]</code></p><p>防止 webpack 解析那些任何与给定正则表达式相匹配的文件。忽略的文件中 <strong>不应该含有</strong> <code>import</code>, <code>require</code>, <code>define</code> 的调用，或任何其他导入机制。忽略大型的 library 可以提高构建性能。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    noParse<span class="token operator">:</span> <span class="token regex">/jquery|lodash/</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">noParse</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token regex">/jquery|lodash/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="moduleunsafecache"></span>module.unsafeCache<a href="#moduleunsafecache" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean</code> <code>function (module)</code></p><p>缓存模块请求的解析。<code>module.unsafeCache</code> 包含如下几个默认值：</p><ul><li>如果 <a href="/configuration/cache"><code>cache</code></a> 未被启用，则默认值为 <code>false</code>。</li><li>如果 <a href="/configuration/cache"><code>cache</code></a> 被启用，并且此模块的来自 node_modules，则值为 <code>true</code>，否则为 <code>false</code>。</li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    unsafeCache<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="modulerules"></span>module.rules<a href="#modulerules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>[Rule]</code></p><p>创建模块时，匹配请求的<a href="#rule">规则</a>数组。这些规则能够修改模块的创建方式。
这些规则能够对模块(module)应用 loader，或者修改解析器(parser)。</p><h2><span id="rule"></span>Rule<a href="#rule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>object</code></p><p>每个规则可以分为三部分 - 条件(condition)，结果(result)和嵌套规则(nested rule)。</p><h3><span id="rule-conditions"></span>Rule 条件<a href="#rule-conditions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>条件有两种输入值：</p><ol><li><p>resource：资源文件的绝对路径。它已经根据 <a href="/configuration/resolve"><code>resolve</code> 规则</a>解析。</p></li><li><p>issuer: 请求者的文件绝对路径。是导入时的位置。</p></li></ol><p><strong>例如：</strong> 从 <code>app.js</code> <code>导入 &#x27;./style.css&#x27;</code>，resource 是 <code>/path/to/style.css</code>. issuer 是 <code>/path/to/app.js</code>。</p><p>在规则中，属性 <a href="#ruletest"><code>test</code></a>, <a href="#ruleinclude"><code>include</code></a>, <a href="#ruleexclude"><code>exclude</code></a> 和 <a href="#ruleresource"><code>resource</code></a> 对 resource 匹配，并且属性 <a href="#ruleissuer"><code>issuer</code></a> 对 issuer 匹配。</p><p>当使用多个条件时，所有条件都匹配。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>小心！resource 是文件的 <em>解析</em> 路径，这意味着符号链接的资源是真正的路径，<em>而不是</em> 符号链接位置。
在使用工具来符号链接包的时候（如 <code>npm link</code>）比较好记，像 <code>/node_modules/</code> 等常见条件可能会不小心错过符号链接的文件。
注意，可以通过 <a href="/configuration/resolve#resolve-symlinks"><code>resolve.symlinks</code></a>
关闭符号链接解析（以便将资源解析为符号链接路径）。</p></aside><h3><span id="rule-results"></span>Rule 结果<a href="#rule-results" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>规则结果只在规则条件匹配时使用。</p><p>规则有两种输入值：</p><ol><li>应用的 loader：应用在 resource 上的 loader 数组。</li><li>Parser 选项：用于为模块创建解析器的选项对象。</li></ol><p>这些属性会影响 loader：<a href="#ruleloader"><code>loader</code></a>, <a href="#ruleoptions--rulequery"><code>options</code></a>, <a href="#ruleuse"><code>use</code></a>。</p><p>也兼容这些属性：<a href="#ruleoptions--rulequery"><code>query</code></a>, <a href="#ruleloaders"><code>loaders</code></a>。</p><p><a href="#ruleenforce"><code>enforce</code></a> 属性会影响 loader 种类。不论是普通的，前置的，后置的 loader。</p><p><a href="#ruleparser"><code>parser</code></a> 属性会影响 parser 选项。</p><h2><span id="nested-rules"></span>嵌套的 Rule<a href="#nested-rules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>可以使用属性 <a href="#rulerules"><code>rules</code></a> 和 <a href="#ruleoneof"><code>oneOf</code></a> 指定嵌套规则。</p><p>这些规则用于在规则条件(rule condition)匹配时进行取值。每个嵌套规则包含它自己的条件。</p><p>被解析的顺序基于以下规则：</p><ol><li>父规则</li><li><a href="#rulerules"><code>rules</code></a></li><li><a href="#ruleoneof"><code>oneOf</code></a></li></ol><h2><span id="ruleenforce"></span>Rule.enforce<a href="#ruleenforce" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code></p><p>可能的值有：<code>&quot;pre&quot; | &quot;post&quot;</code></p><p>指定 loader 种类。没有值表示是普通 loader。</p><p>还有一个额外的种类&quot;行内 loader&quot;，loader 被应用在 import/require 行内。</p><p>所有一个接一个地进入的 loader，都有两个阶段：</p><ol><li><strong>Pitching</strong> 阶段: loader 上的 pitch 方法，按照 <code>后置(post)、行内(inline)、普通(normal)、前置(pre)</code> 的顺序调用。更多详细信息，请查看 <a href="/api/loaders/#pitching-loader">Pitching Loader</a>。</li><li><strong>Normal</strong> 阶段: loader 上的 常规方法，按照 <code>前置(pre)、普通(normal)、行内(inline)、后置(post)</code> 的顺序调用。模块源码的转换，
发生在这个阶段。</li></ol><p>所有普通 loader 可以通过在请求中加上 <code>!</code> 前缀来忽略（覆盖）。</p><p>所有普通和前置 loader 可以通过在请求中加上 <code>-!</code> 前缀来忽略（覆盖）。</p><p>所有普通，后置和前置 loader 可以通过在请求中加上 <code>!!</code> 前缀来忽略（覆盖）。</p><pre><code class="hljs language-javascript"><span class="token comment">// 禁用普通 loaders</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> a <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;!./file1.js&#x27;</span><span class="token punctuation">;</span>

<span class="token comment">// 禁用前置和普通 loaders</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> b <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;-!./file2.js&#x27;</span><span class="token punctuation">;</span>

<span class="token comment">// 禁用所有的 loaders</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> c <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;!!./file3.js&#x27;</span><span class="token punctuation">;</span></code></pre><p>不应使用内联 loader 和 <code>!</code> 前缀，因为它是非标准的。它们可能会被 loader 生成代码使用。</p><h2><span id="ruleexclude"></span>Rule.exclude<a href="#ruleexclude" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>排除所有符合条件的模块。如果你提供了 <code>Rule.exclude</code> 选项，就不能再提供 <code>Rule.resource</code>。详细请查看 <a href="#ruleresource"><code>Rule.resource</code></a> 和 <a href="#condition"><code>Condition.exclude</code></a>。</p><h2><span id="ruleinclude"></span>Rule.include<a href="#ruleinclude" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>引入符合以下任何条件的模块。如果你提供了 <code>Rule.include</code> 选项，就不能再提供 <code>Rule.resource</code>。详细请查看 <a href="#ruleresource"><code>Rule.resource</code></a> 和 <a href="#condition"><code>Condition.include</code></a>。</p><h2><span id="ruleissuer"></span>Rule.issuer<a href="#ruleissuer" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>一个<a href="#condition"><code>条件</code></a>，用来与被发出的 request 对应的模块项匹配。在以下示例中，<code>a.js</code> request 的<code>发出者(issuer)</code>
是 index.js 文件的路径。</p><p><strong>index.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token constant">A</span> <span class="token keyword">from</span> <span class="token string">&#x27;./a.js&#x27;</span><span class="token punctuation">;</span></code></pre><p>这个选项可以用来将 loader 应用到一个特定模块或一组模块的依赖中。</p><h2><span id="ruleissuerlayer"></span>Rule.issuerLayer<a href="#ruleissuerlayer" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>允许按 issuer 的 layer 进行过滤/匹配。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        issuerLayer<span class="token operator">:</span> <span class="token string">&#x27;other-layer&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="rulelayer"></span>Rule.layer<a href="#rulelayer" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code></p><p>指定模块应放置在哪个 layer。一组模块可以统一在一个 layer 中，然后可以被用在 <a href="/plugins/split-chunks-plugin/#splitchunkslayer">split chunks</a>、<a href="/configuration/stats/#statsgroupmodulesbylayer">stats</a> 或者 <a href="/configuration/entry-context/#entry-descriptor">entry options</a>。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/module-layer-change/</span><span class="token punctuation">,</span>
        layer<span class="token operator">:</span> <span class="token string">&#x27;layer&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="ruleloader"></span>Rule.loader<a href="#ruleloader" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>Rule.loader</code> 是 <code>Rule.use: [ { loader } ]</code> 的简写。详细请查看 <a href="#ruleuse"><code>Rule.use</code></a> 和 <a href="#useentry"><code>UseEntry.loader</code></a>。</p><h2><span id="ruleloaders"></span>Rule.loaders<a href="#ruleloaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><aside class="warning"><h6 class="warning__prefix">警告</h6><p>由于需要支持 <code>Rule.use</code>，此选项 <strong>已废弃</strong>。</p></aside><p><code>Rule.loaders</code> 是 <code>Rule.use</code> 的别名。详细请查看 <a href="#ruleuse"><code>Rule.use</code></a>。</p><h2><span id="rulemimetype"></span>Rule.mimetype<a href="#rulemimetype" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>你可以使用 <code>mimetype</code> 使 rules 配置与 data 的 uri 进行匹配。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        mimetype<span class="token operator">:</span> <span class="token string">&#x27;application/json&#x27;</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;json&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>mimetype 已默认包含了 <code>application/json</code>，<code>text/javascript</code>，<code>application/javascript</code>，<code>application/node</code> 以及 <code>application/wasm</code>。</p><h2><span id="ruleoneof"></span>Rule.oneOf<a href="#ruleoneof" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="#rule"><code>规则</code></a>数组，当规则匹配时，只使用第一个匹配规则。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        oneOf<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            resourceQuery<span class="token operator">:</span> <span class="token regex">/inline/</span><span class="token punctuation">,</span> <span class="token comment">// foo.css?inline</span>
            use<span class="token operator">:</span> <span class="token string">&#x27;url-loader&#x27;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            resourceQuery<span class="token operator">:</span> <span class="token regex">/external/</span><span class="token punctuation">,</span> <span class="token comment">// foo.css?external</span>
            use<span class="token operator">:</span> <span class="token string">&#x27;file-loader&#x27;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>详情请参阅 <a href="#nested-rules"><code>嵌套规则</code></a>。</p></aside><h2><span id="ruleoptions--rulequery"></span>Rule.options / Rule.query<a href="#ruleoptions--rulequery" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>Rule.options</code> 和 <code>Rule.query</code> 是 <code>Rule.use: [ { options } ]</code> 的简写。详细请查看 <a href="#ruleuse"><code>Rule.use</code></a>
和 <a href="#useentry"><code>UseEntry.options</code></a>。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>由于需要支持 <code>Rule.options</code>，<code>UseEntry.options</code> 以及 <code>Rule.use</code>，因此 <code>Rule.query</code> 已废弃。</p></aside><h2><span id="ruleparser"></span>Rule.parser<a href="#ruleparser" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>解析选项对象。所有应用的解析选项都将合并。</p><p>解析器(parser)可以查阅这些选项，并相应地禁用或重新配置。大多数默认插件，
会如下解释值：</p><ul><li>将选项设置为 <code>false</code>，将禁用解析器。</li><li>将选项设置为 <code>true</code>，或不修改将其保留为 <code>undefined</code>，可以启用解析器。</li></ul><p>然而，一些解析器(parser)插件可能不光只接收一个布尔值。例如，内部的 <code>NodeStuffPlugin</code> 插件，可以接收一个对象，而不是 <code>true</code>，
来为特定的规则添加额外的选项。</p><p><strong>示例</strong>（默认的插件解析器选项）：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
        parser<span class="token operator">:</span> <span class="token punctuation">{</span>
          amd<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 AMD</span>
          commonjs<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 CommonJS</span>
          system<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 SystemJS</span>
          harmony<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 ES2015 Harmony import/export</span>
          requireInclude<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 require.include</span>
          requireEnsure<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 require.ensure</span>
          requireContext<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 require.context</span>
          browserify<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用特殊处理的 browserify bundle</span>
          requireJs<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 requirejs.*</span>
          node<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 __dirname, __filename, module, require.extensions, require.main, 等。</span>
          commonjsMagicComments<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用对 CommonJS 的  magic comments 支持</span>
          node<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 在模块级别(module level)上重新配置 node 层(layer)</span>
          worker<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;default from web-worker&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;...&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 自定义 WebWorker 对 JavaScript 的处理，其中 &quot;...&quot; 为默认值。</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>如果 <code>Rule.type</code> 的值为 <code>asset</code>，那么 <code>Rules.parser</code> 选项可能是一个对象或一个函数，其作用可能是将文件内容编码为 Base64，还可能是将其当做单独文件 emit 到输出目录。</p><p>如果 <code>Rule.type</code> 的值为 <code>asset</code> 或 <code>asset/inline</code>，那么 <code>Rule.generator</code> 选项可能是一个描述模块源编码方式的对象，还可能是一个通过自定义算法对模块源代码进行编码的函数。</p><p>更多信息及用例请查阅 <a href="/guides/asset-modules/">Asset 模块指南</a>。</p><h2><span id="ruleparserdataurlcondition"></span>Rule.parser.dataUrlCondition<a href="#ruleparserdataurlcondition" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>object = { maxSize number = 8096 }</code> <code>function (source, { filename, module }) =&gt; boolean</code></p><p>如果一个模块源码大小小于 <code>maxSize</code>，那么模块会被作为一个 Base64 编码的字符串注入到包中，
否则模块文件会被生成到输出的目标目录中。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
        parser<span class="token operator">:</span> <span class="token punctuation">{</span>
          dataUrlCondition<span class="token operator">:</span> <span class="token punctuation">{</span>
            maxSize<span class="token operator">:</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>当提供函数时，返回 <code>true</code> 值时告知 webpack 将模块作为一个 Base64 编码的字符串注入到包中，
否则模块文件会被生成到输出的目标目录中。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
        parser<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token function-variable function">dataUrlCondition</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">source<span class="token punctuation">,</span> <span class="token punctuation">{</span> filename<span class="token punctuation">,</span> module <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> content <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> content<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#x27;some marker&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="rulegenerator"></span>Rule.generator<a href="#rulegenerator" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><h3><span id="rulegeneratordataurl"></span>Rule.generator.dataUrl<a href="#rulegeneratordataurl" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>object = { encoding string = &#x27;base64&#x27; | false, mimetype string = undefined | false }</code> <code>function (content, { filename, module }) =&gt; string</code></p><p>当 <code>Rule.generator.dataUrl</code> 被用作一个对象，你可以配置两个属性：</p><ul><li>encoding: 当被设置为<code>&#x27;base64&#x27;</code>，模块源码会用 Baes64 算法 编码。设置 <code>encoding</code> 为 false，会禁用编码。</li><li>mimetype: 为数据链接(data URI)设置的一个 mimetype 值。默认根据模块资源后缀设置。</li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
        generator<span class="token operator">:</span> <span class="token punctuation">{</span>
          dataUrl<span class="token operator">:</span> <span class="token punctuation">{</span>
            encoding<span class="token operator">:</span> <span class="token string">&#x27;base64&#x27;</span><span class="token punctuation">,</span>
            mimetype<span class="token operator">:</span> <span class="token string">&#x27;mimetype/png&#x27;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>当被作为一个函数使用，它必须为每个模块执行且并须返回一个数据链接(data URI)字符串。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
        generator<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token function-variable function">dataUrl</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> svgToMiniDataURI <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;mini-svg-data-uri&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> content <span class="token operator">!==</span> <span class="token string">&#x27;string&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              content <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token function">svgToMiniDataURI</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="rulegeneratoremit"></span>Rule.generator.emit<a href="#rulegeneratoremit" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>配置不从 <a href="/guides/asset-modules/">Asset Modules</a> 写入资源文件, 你可能会在 SSR 中使用它。</p><ul><li><p>类型：<code>boolean = true</code></p></li><li><p>可用版本：<span class="badge">5.25.0+</span></p></li><li><p>示例：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.png$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset/resource&#x27;</span><span class="token punctuation">,</span>
        generator<span class="token operator">:</span> <span class="token punctuation">{</span>
          emit<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><h3><span id="rulegeneratorfilename"></span>Rule.generator.filename<a href="#rulegeneratorfilename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>对某些特定的规则而言与 <a href="/configuration/output/#outputassetmodulefilename"><code>output.assetModuleFilename</code></a> 相同. 覆盖了 <code>output.assetModuleFilename</code> 选项并且仅与 <code>asset</code> 和 <code>asset/resource</code> 模块类型一同起作用。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    assetModuleFilename<span class="token operator">:</span> <span class="token string">&#x27;images/[hash][ext][query]&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.png/</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset/resource&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.html/</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset/resource&#x27;</span><span class="token punctuation">,</span>
        generator<span class="token operator">:</span> <span class="token punctuation">{</span>
          filename<span class="token operator">:</span> <span class="token string">&#x27;static/[hash][ext]&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="rulegeneratorpublichpath"></span>Rule.generator.publicPath<a href="#rulegeneratorpublichpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>对指定的资源模式指定 <code>publicPath</code>。</p><ul><li>类型：<code>string | ((pathData: PathData, assetInfo?: AssetInfo) =&gt; string)</code></li><li>可用版本：<span class="badge">5.28.0+</span></li></ul><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token operator">:</span> <span class="token string">&#x27;static/&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.png$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset/resource&#x27;</span><span class="token punctuation">,</span>
        generator<span class="token operator">:</span> <span class="token punctuation">{</span>
          publicPath<span class="token operator">:</span> <span class="token string">&#x27;assets/&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="rulegeneratoroutputpath"></span>Rule.generator.outputPath<a href="#rulegeneratoroutputpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>将静态资源输出到相对于 &#x27;output.path&#x27; 的指定文件夹中。只有当 &#x27;publicPath&#x27; 被用来匹配文件夹结构时才会需要设置该配置。</p><ul><li>类型：<code>string | ((pathData: PathData, assetInfo?: AssetInfo) =&gt; string)</code></li><li>可用：<span class="badge">5.67.0+</span></li></ul><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token operator">:</span> <span class="token string">&#x27;static/&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.png$/i</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset/resource&#x27;</span><span class="token punctuation">,</span>
        generator<span class="token operator">:</span> <span class="token punctuation">{</span>
          publicPath<span class="token operator">:</span> <span class="token string">&#x27;https://cdn/assets/&#x27;</span><span class="token punctuation">,</span>
          outputPath<span class="token operator">:</span> <span class="token string">&#x27;cdn-assets/&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="ruleresource"></span>Rule.resource<a href="#ruleresource" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="#rule"><code>条件</code></a>会匹配 resource。在 <a href="#rule-conditions"><code>Rule</code> 条件</a> 中查阅详情。</p><h2><span id="ruleresourcequery"></span>Rule.resourceQuery<a href="#ruleresourcequery" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>与资源查询相匹配的 <a href="#condition"><code>Condition</code></a>。此选项用于测试请求字符串的查询部分（即从问号开始）。如果你需要通过 <code>import Foo from &#x27;./foo.css?inline&#x27;</code> 导入 Foo，则需符合以下条件：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        resourceQuery<span class="token operator">:</span> <span class="token regex">/inline/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token string">&#x27;url-loader&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="ruleparserparse"></span>Rule.parser.parse<a href="#ruleparserparse" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>function(input) =&gt; string | object</code></p><p>如果 <code>Rule.type</code> 被设置成 <code>&#x27;json&#x27;</code>，那么 <code>Rules.parser.parse</code> 选择可能会是一个方法，该方法实现自定义的逻辑，以解析模块的源和并将它转换成 JavaScript <code>对象</code>。
它可能在没有特定加载器的时候，对将 <code>toml</code>, <code>yaml</code> 和其它非 JSON 文件导入成导入非常有用：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> toml <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;toml&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.toml/</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;json&#x27;</span><span class="token punctuation">,</span>
        parser<span class="token operator">:</span> <span class="token punctuation">{</span>
          parse<span class="token operator">:</span> toml<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="rulerules"></span>Rule.rules<a href="#rulerules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="#rule"><code>规则</code></a>数组，当规则匹配时使用。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>详情参阅 <a href="#nested-rules"><code>嵌套规则</code></a> 。</p></aside><h2><span id="rulescheme"></span>Rule.scheme<a href="#rulescheme" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>匹配使用的 schema，例如 <code>data</code>，<code>http</code>。</p><ul><li>类型：<code>string | RegExp | ((value: string) =&gt; boolean) | RuleSetLogicalConditions | RuleSetCondition[]</code></li><li>可用：<span class="badge">5.38.0+</span></li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        scheme<span class="token operator">:</span> <span class="token string">&#x27;data&#x27;</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;asset/resource&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="rulesideeffects"></span>Rule.sideEffects<a href="#rulesideeffects" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>bool</code></p><p>表明模块的哪一部份包含副作用。请参阅 <a href="/guides/tree-shaking/#mark-the-file-as-side-effect-free">Tree Shaking</a> 以了解更多信息。</p><h2><span id="ruletest"></span>Rule.test<a href="#ruletest" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>引入所有通过断言测试的模块。如果你提供了一个 <code>Rule.test</code> 选项，就不能再提供 <code>Rule.resource</code>。详细请查看 <a href="#ruleresource"><code>Rule.resource</code></a> 和 <a href="#condition"><code>Condition.test</code></a>。</p><h2><span id="ruletype"></span>Rule.type<a href="#ruletype" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code></p><p>可设置值: <code>&#x27;javascript/auto&#x27; | &#x27;javascript/dynamic&#x27; | &#x27;javascript/esm&#x27; | &#x27;json&#x27; | &#x27;webassembly/sync&#x27; | &#x27;webassembly/async&#x27; | &#x27;asset&#x27; | &#x27;asset/source&#x27; | &#x27;asset/resource&#x27; | &#x27;asset/inline&#x27;</code></p><p><code>Rule.type</code> 设置类型用于匹配模块。它防止了 <code>defaultRules</code> 和它们的默认导入行为发生。例如，如果你想
通过自定义 loader 加载一个 <code>.json</code> 文件，你会需要将 <code>type</code> 设置为 <code>javascript/auto</code> 以绕过 webpack 内置的 json 导入。
（详参<a href="https://github.com/webpack/webpack/releases/tag/v4.0.0">v4.0 更新日志</a>）</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">//...</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.json$/</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&#x27;javascript/auto&#x27;</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">&#x27;custom-json-loader&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><blockquote><p>关于 <code>asset*</code> 类型详参 <a href="/guides/asset-modules/">资源模块指南</a> 。</p></blockquote><h2><span id="ruleuse"></span>Rule.use<a href="#ruleuse" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>[UseEntry]</code> <code>function(info)</code></p><p><strong><code>[UseEntry]</code></strong></p><p><code>Rule.use</code> 可以是一个应用于模块的 <a href="#useentry">UseEntries</a> 数组。每个入口(entry)指定使用一个 loader。</p><p>传递字符串（如：<code>use: [ &#x27;style-loader&#x27; ]</code>）是 loader 属性的简写方式（如：<code>use: [ { loader: &#x27;style-loader&#x27;} ]</code>）。</p><p>Loaders 可以通过传入多个 loaders 以达到链式调用的效果，它们会从右到左被应用（从最后到最先配置）。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&#x27;style-loader&#x27;</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&#x27;css-loader&#x27;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&#x27;less-loader&#x27;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              noIeCompat<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong><code>function(info)</code></strong></p><p><code>Rule.use</code> 也可以是一个函数，接受对象参数，描述被加载的模块，而且必须
返回 <code>UseEntry</code> 元素的数组。</p><p><code>info</code> 对象参数有以下的字段：</p><ul><li><code>compiler</code>: 当前 webpack 的编译器（可以是 undefined 值）</li><li><code>issuer</code>: 模块的路径，该元素正在导入一个被加载的模块(resource)</li><li><code>realResource</code>: 总会是被加载模块的路径</li><li><code>resource</code>: 被加载的模块路径，它常常与 <code>realResource</code> 相等，只有当资源名称被 request 字符串中的 <code>!=!</code> 覆盖时才不相等</li></ul><p>相同的作为数组的快捷方式可以用作返回值（如 <code>use: [ &#x27;style-loader&#x27; ]</code>）。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token function-variable function">use</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&#x27;custom-svg-loader&#x27;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&#x27;svgo-loader&#x27;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                  cleanupIDs<span class="token operator">:</span> <span class="token punctuation">{</span>
                    prefix<span class="token operator">:</span> <span class="token function">basename</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>resource<span class="token punctuation">)</span><span class="token punctuation">,</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>参参 <a href="#useentry">UseEntry</a>。</p><h2><span id="ruleresolve"></span>Rule.resolve<a href="#ruleresolve" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><aside class="warning"><h6 class="warning__prefix">警告</h6><p><code>Rule.resolve</code> 从 webpack 4.36.1 起可用</p></aside><p>模块解析可以在模块层被配置。<a href="/configuration/resolve/#resolve">resolve 配置页面</a>可查看所有可用的配置。
所有被应用的 resolve 选项被更高层级的<a href="/configuration/resolve/#resolve">resolve</a>配置合并。</p><p>例如，假设我们有一个入口文件在 <code>./src/index.js</code>, <code>./src/footer/default.js</code> 和一个 <code>./src/footer/overridden.js</code>，
用以论证模块层级的解析。</p><p><strong>./src/index.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">import</span> footer <span class="token keyword">from</span> <span class="token string">&#x27;footer&#x27;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>footer<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>./src/footer/default.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">&#x27;default footer&#x27;</span><span class="token punctuation">;</span></code></pre><p><strong>./src/footer/overridden.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">&#x27;overridden footer&#x27;</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.js.org</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      footer<span class="token operator">:</span> <span class="token string">&#x27;./footer/default.js&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>当用该配置创建一个包，<code>console.log(footer)</code> 会输出 &#x27;default footer&#x27;。让我们为 <code>.js</code> 文件设置 <code>Rule.resolve</code>，以及
<code>footer</code> 作为 <code>overridden.js</code> 的别名。</p><p><strong>webpack.js.org</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      footer<span class="token operator">:</span> <span class="token string">&#x27;./footer/default.js&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
          alias<span class="token operator">:</span> <span class="token punctuation">{</span>
            footer<span class="token operator">:</span> <span class="token string">&#x27;./footer/overridden.js&#x27;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>当用该配置创建一个包，<code>console.log(footer)</code> 会输出 &#x27;overridden footer&#x27;。</p><h3><span id="resolve-fully-specified"></span>resolve.fullySpecified<a href="#resolve-fully-specified" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>启用后，你若在 <code>.mjs</code> 文件或其他 <code>.js</code> 文件中导入模块，并且它们最近的 <code>package.json</code> 中包含 <code>&quot;type&quot;</code> 字段，其值为 <code>&quot;module&quot;</code>时，你应为此文件提供扩展名，否则 webpack 会提示 <code>Module not found</code> 的错误且编译失败。并且 webpack 不会解析 <a href="/configuration/resolve/#resolvemainfiles"><code>resolve.mainFiles</code></a> 中定义的文件目录，你必须自己指定文件名。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.m?js$/</span><span class="token punctuation">,</span>
        resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
          fullySpecified<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// disable the behaviour</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p><code>resolve.fullySpecified</code> 不影响来自 <a href="/configuration/resolve/#resolvemainfields">mainFields</a>，<a href="/configuration/resolve/#resolvealiasfields">aliasFields</a> 或 <a href="/configuration/resolve/#resolvealias">aliases</a> 的请求。</p></aside><h2><span id="condition"></span>Condition<a href="#condition" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>条件可以是这些之一：</p><ul><li>字符串：匹配输入必须以提供的字符串开始。是的。目录绝对路径或文件绝对路径。</li><li>正则表达式：test 输入值。</li><li>函数：调用输入的函数，必须返回一个真值(truthy value)以匹配。</li><li>条件数组：至少一个匹配条件。</li><li>对象：匹配所有属性。每个属性都有一个定义行为。</li></ul><p><code>{ and: [Condition] }</code>：必须匹配数组中的所有条件</p><p><code>{ or: [Condition] }</code>：匹配数组中任何一个条件</p><p><code>{ not: [Condition] }</code>：必须排除这个条件</p><p><strong>示例:</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        include<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// will include any paths relative to the current directory starting with `app/styles`</span>
          <span class="token comment">// e.g. `app/styles.css`, `app/styles/styles.css`, `app/stylesheet.css`</span>
          path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;app/styles&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token comment">// add an extra slash to only include the content of the directory `vendor/styles/`</span>
          path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;vendor/styles/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="useentry"></span>UseEntry<a href="#useentry" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>object</code> <code>function(info)</code></p><p><strong><code>object</code></strong></p><p>必须有一个 <code>loader</code> 属性是字符串。它使用 loader 解析选项（<a href="/configuration/resolve#resolveloader">resolveLoader</a>），相对于配置中的 <a href="/configuration/entry-context#context"><code>context</code></a> 来解析。</p><p>可以有一个 <code>options</code> 属性为字符串或对象。值可以传递到 loader 中，将其理解为 loader 选项。</p><p>由于兼容性原因，也可能有 <code>query</code> 属性，它是 <code>options</code> 属性的别名。使用 <code>options</code> 属性替代。</p><p>注意，webpack 需要生成资源和所有 loader 的独立模块标识，包括选项。
它尝试对选项对象使用 <code>JSON.stringify</code>。这在 99.9% 的情况下是可以的，
但是如果将相同的 loader 应用于相同资源的不同选项，并且选项具有一些带字符的值，则可能不是唯一的。</p><p>如果选项对象不被字符化（例如循环 JSON），它也会中断。因此，你可以在选项对象使用 <code>ident</code> 属性，
作为唯一标识符。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">&#x27;css-loader&#x27;</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          modules<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong><code>function(info)</code></strong></p><p><code>UseEntry</code> 也可以是一个函数，接受对象参数，描述被加载的模块，而且必须返回一个参数对象。这可用于按模块更改 loader 选项。</p><p><code>info</code> 对象参数有以下的字段：</p><ul><li><code>compiler</code>: 当前 webpack 的编译器（可以是 undefined 值）</li><li><code>issuer</code>: 模块的路径，该元素正在导入一个被加载的模块(resource)</li><li><code>realResource</code>: 总会是被加载模块的路径</li><li><code>resource</code>: 被加载的模块路径，它常常与 <code>realResource</code> 相等，只有当资源名称被 request 字符串中的 <code>!=!</code> 覆盖时才不相等</li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">&#x27;file-loader&#x27;</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          outputPath<span class="token operator">:</span> <span class="token string">&#x27;svgs&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">&#x27;svgo-loader&#x27;</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
              cleanupIDs<span class="token operator">:</span> <span class="token punctuation">{</span> prefix<span class="token operator">:</span> <span class="token function">basename</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>resource<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="module-contexts"></span>模块上下文(Module Contexts)<a href="#module-contexts" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>这些选项描述了当遇到动态依赖时，创建上下文的默认设置。</p><p>例如，<code>未知的(unknown)</code> 动态依赖：<code>require</code>。</p><p>例如，<code>表达式(expr)</code> 动态依赖：<code>require(expr)</code>。</p><p>例如，<code>包裹的(wrapped)</code> 动态依赖：<code>require(&#x27;./templates/&#x27; + expr)</code>。</p><p>以下是其<a href="https://github.com/webpack/webpack/blob/master/lib/config/defaults.js">默认值</a>的可用选项</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    exprContextCritical<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    exprContextRecursive<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    exprContextRegExp<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    exprContextRequest<span class="token operator">:</span> <span class="token string">&#x27;.&#x27;</span><span class="token punctuation">,</span>
    unknownContextCritical<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    unknownContextRecursive<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    unknownContextRegExp<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    unknownContextRequest<span class="token operator">:</span> <span class="token string">&#x27;.&#x27;</span><span class="token punctuation">,</span>
    wrappedContextCritical<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    wrappedContextRecursive<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    wrappedContextRegExp<span class="token operator">:</span> <span class="token regex">/.*/</span><span class="token punctuation">,</span>
    strictExportPresence<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>你可以使用 <code>ContextReplacementPlugin</code> 来修改这些单个依赖的值。这也会删除警告。</p></aside><p>几个用例：</p><ul><li>动态依赖的警告：<code>wrappedContextCritical: true</code>。</li><li><code>require(expr)</code> 应该包含整个目录：<code>exprContextRegExp: /^\.\//</code></li><li><code>require(&quot;./templates/&quot; + expr)</code> 不应该包含默认子目录：<code>wrappedContextRecursive: false</code></li><li><code>strictExportPresence</code> 将缺失的导出提示成错误而不是警告</li><li>为部分动态依赖项设置内部正则表达式：<code>wrappedContextRegExp: /\\.\\*/</code></li></ul><aside class="warning"><h6 class="warning__prefix">警告</h6><p>为支持 <a href="#moduleparserjavascript"><code>exportsPresence</code></a> 配置项，<code>strictExportPresence</code> 已被废弃。</p></aside><h1><span id="解析Resolve"></span>解析(Resolve)<a href="#%E8%A7%A3%E6%9E%90Resolve" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>这些选项能设置模块如何被解析。webpack 提供合理的默认值，但是还是可能会修改一些解析的细节。关于 resolver 具体如何工作的更多解释说明，请查看<a href="/concepts/module-resolution">模块解析</a>。</p><h2><span id="resolve"></span>resolve<a href="#resolve" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>object</code></p><p>配置模块如何解析。例如，当在 ES2015 中调用 <code>import &#x27;lodash&#x27;</code>，<code>resolve</code> 选项能够对 webpack 查找 <code>&#x27;lodash&#x27;</code> 的方式去做修改（查看<a href="#resolvemodules"><code>模块</code></a>）。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// configuration options</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolvealias"></span>resolve.alias<a href="#resolvealias" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>object</code></p><p>创建 <code>import</code> 或 <code>require</code> 的别名，来确保模块引入变得更简单。例如，一些位于 <code>src/</code> 文件夹下的常用模块：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      Utilities<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src/utilities/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      Templates<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src/templates/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>现在，替换“在导入时使用相对路径”这种方式，就像这样：</p><pre><code class="hljs language-js"><span class="token keyword">import</span> Utility <span class="token keyword">from</span> <span class="token string">&#x27;../../utilities/utility&#x27;</span><span class="token punctuation">;</span></code></pre><p>你可以这样使用别名：</p><pre><code class="hljs language-js"><span class="token keyword">import</span> Utility <span class="token keyword">from</span> <span class="token string">&#x27;Utilities/utility&#x27;</span><span class="token punctuation">;</span></code></pre><p>也可以在给定对象的键后的末尾添加 <code>$</code>，以表示精准匹配：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      xyz$<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;path/to/file.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>这将产生以下结果：</p><pre><code class="hljs language-js"><span class="token keyword">import</span> Test1 <span class="token keyword">from</span> <span class="token string">&#x27;xyz&#x27;</span><span class="token punctuation">;</span> <span class="token comment">// 精确匹配，所以 path/to/file.js 被解析和导入</span>
<span class="token keyword">import</span> Test2 <span class="token keyword">from</span> <span class="token string">&#x27;xyz/file.js&#x27;</span><span class="token punctuation">;</span> <span class="token comment">// 非精确匹配，触发普通解析</span></code></pre><p>下面的表格展示了一些其他情况：</p><table><thead><tr><th><code>alias:</code></th><th><code>import &#x27;xyz&#x27;</code></th><th><code>import &#x27;xyz/file.js&#x27;</code></th></tr></thead><tbody><tr><td data-th="alias:"><span><code>{}</code></span></td><td data-th="import &#x27;xyz&#x27;"><span><code>/abc/node_modules/xyz/index.js</code></span></td><td data-th="import &#x27;xyz/file.js&#x27;"><span><code>/abc/node_modules/xyz/file.js</code></span></td></tr><tr><td data-th="alias:"><span><code>{ xyz: &#x27;/abc/path/to/file.js&#x27; }</code></span></td><td data-th="import &#x27;xyz&#x27;"><span><code>/abc/path/to/file.js</code></span></td><td data-th="import &#x27;xyz/file.js&#x27;"><span>error</span></td></tr><tr><td data-th="alias:"><span><code>{ xyz$: &#x27;/abc/path/to/file.js&#x27; }</code></span></td><td data-th="import &#x27;xyz&#x27;"><span><code>/abc/path/to/file.js</code></span></td><td data-th="import &#x27;xyz/file.js&#x27;"><span><code>/abc/node_modules/xyz/file.js</code></span></td></tr><tr><td data-th="alias:"><span><code>{ xyz: &#x27;./dir/file.js&#x27; }</code></span></td><td data-th="import &#x27;xyz&#x27;"><span><code>/abc/dir/file.js</code></span></td><td data-th="import &#x27;xyz/file.js&#x27;"><span>error</span></td></tr><tr><td data-th="alias:"><span><code>{ xyz$: &#x27;./dir/file.js&#x27; }</code></span></td><td data-th="import &#x27;xyz&#x27;"><span><code>/abc/dir/file.js</code></span></td><td data-th="import &#x27;xyz/file.js&#x27;"><span><code>/abc/node_modules/xyz/file.js</code></span></td></tr><tr><td data-th="alias:"><span><code>{ xyz: &#x27;/some/dir&#x27; }</code></span></td><td data-th="import &#x27;xyz&#x27;"><span><code>/some/dir/index.js</code></span></td><td data-th="import &#x27;xyz/file.js&#x27;"><span><code>/some/dir/file.js</code></span></td></tr><tr><td data-th="alias:"><span><code>{ xyz$: &#x27;/some/dir&#x27; }</code></span></td><td data-th="import &#x27;xyz&#x27;"><span><code>/some/dir/index.js</code></span></td><td data-th="import &#x27;xyz/file.js&#x27;"><span><code>/abc/node_modules/xyz/file.js</code></span></td></tr><tr><td data-th="alias:"><span><code>{ xyz: &#x27;./dir&#x27; }</code></span></td><td data-th="import &#x27;xyz&#x27;"><span><code>/abc/dir/index.js</code></span></td><td data-th="import &#x27;xyz/file.js&#x27;"><span><code>/abc/dir/file.js</code></span></td></tr><tr><td data-th="alias:"><span><code>{ xyz: &#x27;modu&#x27; }</code></span></td><td data-th="import &#x27;xyz&#x27;"><span><code>/abc/node_modules/modu/index.js</code></span></td><td data-th="import &#x27;xyz/file.js&#x27;"><span><code>/abc/node_modules/modu/file.js</code></span></td></tr><tr><td data-th="alias:"><span><code>{ xyz$: &#x27;modu&#x27; }</code></span></td><td data-th="import &#x27;xyz&#x27;"><span><code>/abc/node_modules/modu/index.js</code></span></td><td data-th="import &#x27;xyz/file.js&#x27;"><span><code>/abc/node_modules/xyz/file.js</code></span></td></tr><tr><td data-th="alias:"><span><code>{ xyz: &#x27;modu/some/file.js&#x27; }</code></span></td><td data-th="import &#x27;xyz&#x27;"><span><code>/abc/node_modules/modu/some/file.js</code></span></td><td data-th="import &#x27;xyz/file.js&#x27;"><span>error</span></td></tr><tr><td data-th="alias:"><span><code>{ xyz: &#x27;modu/dir&#x27; }</code></span></td><td data-th="import &#x27;xyz&#x27;"><span><code>/abc/node_modules/modu/dir/index.js</code></span></td><td data-th="import &#x27;xyz/file.js&#x27;"><span><code>/abc/node_modules/modu/dir/file.js</code></span></td></tr><tr><td data-th="alias:"><span><code>{ xyz$: &#x27;modu/dir&#x27; }</code></span></td><td data-th="import &#x27;xyz&#x27;"><span><code>/abc/node_modules/modu/dir/index.js</code></span></td><td data-th="import &#x27;xyz/file.js&#x27;"><span><code>/abc/node_modules/xyz/file.js</code></span></td></tr></tbody></table><p>如果在 <code>package.json</code> 中定义，<code>index.js</code> 可能会被解析为另一个文件。</p><p><code>/abc/node_modules</code> 也可能在 <code>/node_modules</code> 中解析。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p><code>resolve.alias</code> 优先级高于其它模块解析方式。</p></aside><aside class="warning"><h6 class="warning__prefix">警告</h6><p><a href="https://github.com/webpack-contrib/null-loader"><code>null-loader</code></a> 在 webpack5 中被废弃。使用 <code>alias: { xyz$: false }</code> 或绝对路径 <code>alias: {[path.resolve(__dirname, &#x27;./path/to/module&#x27;)]: false }</code></p></aside><aside class="warning"><h6 class="warning__prefix">警告</h6><p><code>[string]</code> 字符串值在 webapck 5 中被支持。</p></aside><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      _<span class="token operator">:</span> <span class="token punctuation">[</span>
        path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src/utilities/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src/templates/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>将 <code>resolve.alias</code> 设置为 <code>false</code> 将告知 webpack 忽略模块。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#x27;ignored-module&#x27;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;./ignored-module&#x27;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolvealiasfields"></span>resolve.aliasFields<a href="#resolvealiasfields" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>[string]: [&#x27;browser&#x27;]</code></p><p>指定一个字段，例如 <code>browser</code>，根据
<a href="https://github.com/defunctzombie/package-browser-field-spec">此规范</a>进行解析。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    aliasFields<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;browser&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolvecachewithcontext"></span>resolve.cacheWithContext<a href="#resolvecachewithcontext" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>如果启用了不安全缓存，请在缓存键(cache key)中引入 <code>request.context</code>。这个选项被 <a href="https://github.com/webpack/enhanced-resolve/"><code>enhanced-resolve</code></a> 模块考虑在内。从 webpack 3.1.0 开始，在配置了 resolve 或 resolveLoader 插件时，解析缓存(resolve caching)中的上下文(context)会被忽略。这解决了性能衰退的问题。</p><h3><span id="resolveconditionnames"></span>resolve.conditionNames<a href="#resolveconditionnames" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string[]</code></p><p><a href="https://nodejs.org/api/packages.html#packages_exports"><code>exports</code> 配置项</a> （定义一个库的入口）的 conditionName。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    conditionNames<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;require&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;node&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Webpack 将会匹配列在 <code>resolve.conditionNames</code> 数组中的 <a href="https://nodejs.org/api/packages.html#conditional-exports">export conditions</a>。</p><p><code>exports</code> 字段中的键顺序很重要。在条件匹配期间，较早的入口具有更高的优先级并优先于后面的入口。</p><p>例如，</p><p><strong>package.json</strong></p><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;.&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-import.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-require.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./index-node.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;./bar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./bar-node.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./bar-require.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;./baz&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./baz-import.js&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./baz-node.js&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    conditionNames<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;require&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;node&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>importing</p><ul><li><code>&#x27;foo&#x27;</code> 将解析为 <code>&#x27;foo/index-require.js&#x27;</code></li><li><code>&#x27;foo/bar&#x27;</code>将解析为 <code>&#x27;foo/bar-node.js&#x27;</code>，因为在条件导出对象中， <code>&quot;node&quot;</code> 字段在 <code>&quot;require&quot;</code> 之前。</li><li><code>&#x27;foo/baz&#x27;</code> 将解析为 <code>&#x27;foo/baz-node.js&#x27;</code></li></ul><h3><span id="resolvedescriptionFiles"></span>resolve.descriptionFiles<a href="#resolvedescriptionFiles" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>[string] = [&#x27;package.json&#x27;]</code></p><p>用于描述的 JSON 文件。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    descriptionFiles<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;package.json&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolveenforceextension"></span>resolve.enforceExtension<a href="#resolveenforceextension" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = false</code></p><p>如果是 <code>true</code>，将不允许无扩展名文件。默认如果 <code>./foo</code> 有 <code>.js</code> 扩展，<code>require(&#x27;./foo&#x27;)</code> 可以正常运行。但如果启用此选项，只有 <code>require(&#x27;./foo.js&#x27;)</code>
能够正常工作。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    enforceExtension<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolveextensionAlias"></span>resolve.extensionAlias<a href="#resolveextensionAlias" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>object</code></p><p>一个将拓展名与拓展名别名映射的对象。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    extensionAlias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#x27;.js&#x27;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;.ts&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;.js&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;.mjs&#x27;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;.mts&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;.mjs&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolveextensions"></span>resolve.extensions<a href="#resolveextensions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>[string] = [&#x27;.js&#x27;, &#x27;.json&#x27;, &#x27;.wasm&#x27;]</code></p><p>尝试按顺序解析这些后缀名。如果有多个文件有相同的名字，但后缀名不同，webpack 会解析列在数组首位的后缀的文件
并跳过其余的后缀。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;.js&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;.json&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;.wasm&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>能够使用户在引入模块时不带扩展：</p><pre><code class="hljs language-js"><span class="token keyword">import</span> File <span class="token keyword">from</span> <span class="token string">&#x27;../path/to/file&#x27;</span><span class="token punctuation">;</span></code></pre><p>请注意，以上这样使用 <code>resolve.extensions</code> 会 <strong>覆盖默认数组</strong>，这就意味着 webpack 将不再尝试使用默认扩展来解析模块。然而你可以使用 <code>&#x27;...&#x27;</code> 访问默认拓展名：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;.ts&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;...&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolvefallback"></span>resolve.fallback<a href="#resolvefallback" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>object</code></p><p>当正常解析失败时，重定向模块请求。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    fallback<span class="token operator">:</span> <span class="token punctuation">{</span>
      abc<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// do not include a polyfill for abc</span>
      xyz<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;path/to/file.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// include a polyfill for xyz</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>webpack 5 不再自动 polyfill Node.js 的核心模块，这意味着如果你在浏览器或类似的环境中运行的代码中使用它们，你必须从 NPM 中安装兼容的模块，并自己包含它们。以下是 webpack 在 webpack 5 之前使用过的 polyfill 包列表：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    fallback<span class="token operator">:</span> <span class="token punctuation">{</span>
      assert<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;assert&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      buffer<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;buffer&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      console<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;console-browserify&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      constants<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;constants-browserify&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      crypto<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;crypto-browserify&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      domain<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;domain-browser&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      events<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;events&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      http<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;stream-http&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      https<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;https-browserify&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      os<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;os-browserify/browser&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      path<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;path-browserify&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      punycode<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;punycode&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      process<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;process/browser&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      querystring<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;querystring-es3&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      stream<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;stream-browserify&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      string_decoder<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;string_decoder&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      sys<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;util&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      timers<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;timers-browserify&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      tty<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;tty-browserify&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;url&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      util<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;util&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      vm<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;vm-browserify&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      zlib<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;browserify-zlib&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolvemainfields"></span>resolve.mainFields<a href="#resolvemainfields" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>[string]</code></p><p>当从 npm 包中导入模块时（例如，<code>import * as D3 from &#x27;d3&#x27;</code>），此选项将决定在 <code>package.json</code> 中使用哪个字段导入模块。根据 webpack 配置中指定的 <a href="/concepts/targets"><code>target</code></a> 不同，默认值也会有所不同。</p><p>当 <code>target</code> 属性设置为 <code>webworker</code>, <code>web</code> 或者没有指定：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    mainFields<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;browser&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;module&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;main&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>对于其他任意的 target（包括 <code>node</code>），默认值为：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    mainFields<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;module&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;main&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>例如，考虑任意一个名为 <code>upstream</code> 的类库 <code>package.json</code> 包含以下字段：</p><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;browser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;build/upstream.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index&quot;</span>
<span class="token punctuation">}</span></code></pre><p>在我们 <code>import * as Upstream from &#x27;upstream&#x27;</code> 时，这实际上会从 <code>browser</code> 属性解析文件。在这里 <code>browser</code> 属性是最优先选择的，因为它是 <code>mainFields</code> 的第一项。同时，由 webpack 打包的 Node.js 应用程序首先会尝试从 <code>module</code> 字段中解析文件。</p><h3><span id="resolvemainfiles"></span>resolve.mainFiles<a href="#resolvemainfiles" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>[string] = [&#x27;index&#x27;]</code></p><p>解析目录时要使用的文件名。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    mainFiles<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;index&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolveexportsfields"></span>resolve.exportsFields<a href="#resolveexportsfields" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>[string] = [&#x27;exports&#x27;]</code></p><p>在 package.json 中用于解析模块请求的字段。欲了解更多信息，请查阅 <a href="/guides/package-exports/">package-exports guideline</a> 文档。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    exportsFields<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;exports&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;myCompanyExports&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolvemodules"></span>resolve.modules<a href="#resolvemodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>[string] = [&#x27;node_modules&#x27;]</code></p><p>告诉 webpack 解析模块时应该搜索的目录。</p><p>绝对路径和相对路径都能使用，但是要知道它们之间有一点差异。</p><p>通过查看当前目录以及祖先路径（即 <code>./node_modules</code>, <code>../node_modules</code> 等等），
相对路径将类似于 Node 查找 &#x27;node_modules&#x27; 的方式进行查找。</p><p>使用绝对路径，将只在给定目录中搜索。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    modules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;node_modules&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>如果你想要添加一个目录到模块搜索目录，此目录优先于 <code>node_modules/</code> 搜索：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    modules<span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#x27;node_modules&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolveunsafecache"></span>resolve.unsafeCache<a href="#resolveunsafecache" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>RegExp</code> <code>[RegExp]</code> <code>boolean: true</code></p><p>启用，会主动缓存模块，但并 <strong>不安全</strong>。传递 <code>true</code> 将缓存一切。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    unsafeCache<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>正则表达式，或正则表达式数组，可以用于匹配文件路径或只缓存某些模块。
例如，只缓存 utilities 模块：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    unsafeCache<span class="token operator">:</span> <span class="token regex">/src\/utilities/</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>修改缓存路径可能在极少数情况下导致失败。</p></aside><h3><span id="resolveusesyncfilesystemcalls"></span>resolve.useSyncFileSystemCalls<a href="#resolveusesyncfilesystemcalls" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>对 resolver 使用同步文件系统调用。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    useSyncFileSystemCalls<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolveplugins"></span>resolve.plugins<a href="#resolveplugins" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><a href="/plugins/"><code>[Plugin]</code></a></p><p>应该使用的额外的解析插件列表。
它允许插件，如 <a href="https://www.npmjs.com/package/directory-named-webpack-plugin"><code>DirectoryNamedWebpackPlugin</code></a>。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">DirectoryNamedWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolvepreferrelative"></span>resolve.preferRelative<a href="#resolvepreferrelative" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>当启用此选项时，webpack 更倾向于将模块请求解析为相对请求，而不使用来自 <code>node_modules</code> 目录下的模块。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    preferRelative<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>src/index.js</strong></p><pre><code class="hljs language-js"><span class="token comment">// let&#x27;s say `src/logo.svg` exists</span>
<span class="token keyword">import</span> logo1 <span class="token keyword">from</span> <span class="token string">&#x27;logo.svg&#x27;</span><span class="token punctuation">;</span> <span class="token comment">// this is viable when `preferRelative` enabled</span>
<span class="token keyword">import</span> logo2 <span class="token keyword">from</span> <span class="token string">&#x27;./logo.svg&#x27;</span><span class="token punctuation">;</span> <span class="token comment">// otherwise you can only use relative path to resolve logo.svg</span>

<span class="token comment">// `preferRelative` is enabled by default for `new URL()` case</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#x27;module/path&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#x27;./module/path&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3><span id="resolvepreferAbsolute"></span>resolve.preferAbsolute<a href="#resolvepreferAbsolute" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><span class="badge">5.13.0+</span><p>解析时，首选的绝对路径为 <a href="#resolveroots"><code>resolve.roots</code></a>。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    preferAbsolute<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolvesymlinks"></span>resolve.symlinks<a href="#resolvesymlinks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>是否将符号链接(symlink)解析到它们的符号链接位置(symlink location)。</p><p>启用时，符号链接(symlink)的资源，将解析为其 <em>真实</em> 路径，而不是其符号链接(symlink)的位置。注意，当使用创建符号链接包的工具（如 <code>npm link</code>）时，这种方式可能会导致模块解析失败。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    symlinks<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolvecachepredicate"></span>resolve.cachePredicate<a href="#resolvecachepredicate" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>function(module) =&gt; boolean</code></p><p>决定请求是否应该被缓存的函数。函数传入一个带有 <code>path</code> 和 <code>request</code> 属性的对象。
必须返回一个 boolean 值。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">cachePredicate</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// additional logic</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolverestrictions"></span>resolve.restrictions<a href="#resolverestrictions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>[string, RegExp]</code></p><p>解析限制列表，用于限制可以解析请求的路径。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    restrictions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token regex">/\.(sass|scss|css)$/</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolveroots"></span>resolve.roots<a href="#resolveroots" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>[string]</code></p><p>A list of directories where requests of server-relative URLs (starting with &#x27;/&#x27;) are resolved, defaults to <a href="/configuration/entry-context/#context"><code>context</code> configuration option</a>. On non-Windows systems these requests are resolved as an absolute path first.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> fixtures <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;fixtures&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    roots<span class="token operator">:</span> <span class="token punctuation">[</span>__dirname<span class="token punctuation">,</span> fixtures<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolveimportsFields"></span>resolve.importsFields<a href="#resolveimportsFields" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>[string]</code></p><p>Fields from <code>package.json</code> which are used to provide the internal requests of a package (requests starting with <code>#</code> are considered internal).</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    importsFields<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;browser&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;module&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;main&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="resolvebydependency"></span>resolve.byDependency<a href="#resolvebydependency" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>通过 module 请求类型来配置 resolve 选项。</p><ul><li><p>Type: <code>[type: string]: ResolveOptions</code></p></li><li><p>Example:</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    byDependency<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
      esm<span class="token operator">:</span> <span class="token punctuation">{</span>
        mainFields<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;browser&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;module&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      commonjs<span class="token operator">:</span> <span class="token punctuation">{</span>
        aliasFields<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;browser&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token punctuation">{</span>
        preferRelative<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><h2><span id="resolveloader"></span>resolveLoader<a href="#resolveloader" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>object { modules [string] = [&#x27;node_modules&#x27;], extensions [string] = [&#x27;.js&#x27;, &#x27;.json&#x27;], mainFields [string] = [&#x27;loader&#x27;, &#x27;main&#x27;]}</code></p><p>这组选项与上面的 <code>resolve</code> 对象的属性集合相同，
但仅用于解析 webpack 的 <a href="/concepts/loaders">loader</a> 包。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolveLoader<span class="token operator">:</span> <span class="token punctuation">{</span>
    modules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;node_modules&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;.js&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;.json&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    mainFields<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;loader&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;main&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>请注意你可以在这里使用别名和 resolve 中熟悉的其他特性。例如 <code>{ txt: &#x27;raw-loader&#x27; }</code> 将会 shim <code>txt!templates/demo.txt</code> 使用 <code>raw-loader</code>。</p></aside><h1><span id="优化Optimization"></span>优化(Optimization)<a href="#%E4%BC%98%E5%8C%96Optimization" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>从 webpack 4 开始，会根据你选择的 <a href="/concepts/mode/"><code>mode</code></a> 来执行不同的优化，
不过所有的优化还是可以手动配置和重写。</p><h2><span id="optimizationchunkids"></span>optimization.chunkIds<a href="#optimizationchunkids" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = false</code> <code>string: &#x27;natural&#x27; | &#x27;named&#x27; | &#x27;size&#x27; | &#x27;total-size&#x27; | &#x27;deterministic&#x27;</code></p><p>告知 webpack 当选择模块 id 时需要使用哪种算法。将 <code>optimization.chunkIds</code> 设置为 <code>false</code> 会告知 webpack 没有任何内置的算法会被使用，但自定义的算法会由插件提供。<code>optimization.chunkIds</code> 的默认值是 <code>false</code>：</p><ul><li>如果环境是开发环境，那么 <code>optimization.chunkIds</code> 会被设置成 <code>&#x27;named&#x27;</code>，但当在生产环境中时，它会被设置成 <code>&#x27;deterministic&#x27;</code></li><li>如果上述的条件都不符合, <code>optimization.chunkIds</code> 会被默认设置为 <code>&#x27;natural&#x27;</code></li></ul><p>下述选项字符串值均为被支持：</p><table><thead><tr><th>选项值</th><th>描述</th></tr></thead><tbody><tr><td data-th="选项值"><span><code>&#x27;natural&#x27;</code></span></td><td data-th="描述"><span>按使用顺序的数字 id。</span></td></tr><tr><td data-th="选项值"><span><code>&#x27;named&#x27;</code></span></td><td data-th="描述"><span>对调试更友好的可读的 id。</span></td></tr><tr><td data-th="选项值"><span><code>&#x27;deterministic&#x27;</code></span></td><td data-th="描述"><span>在不同的编译中不变的短数字 id。有益于长期缓存。在生产模式中会默认开启。</span></td></tr><tr><td data-th="选项值"><span><code>&#x27;size&#x27;</code></span></td><td data-th="描述"><span>专注于让初始下载包大小更小的数字 id。</span></td></tr><tr><td data-th="选项值"><span><code>&#x27;total-size&#x27;</code></span></td><td data-th="描述"><span>专注于让总下载包大小更小的数字 id。</span></td></tr></tbody></table><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    chunkIds<span class="token operator">:</span> <span class="token string">&#x27;named&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>默认地，当 <code>optimization.chunkIds</code> 被设置为 <code>&#x27;deterministic&#x27;</code> 时，最少 3 位数字会被使用。要覆盖默认的行为，要将 <code>optimization.chunkIds</code> 设置为 <code>false</code>，同时要使用 <code>webpack.ids.DeterministicChunkIdsPlugin</code>。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    chunkIds<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ids<span class="token punctuation">.</span>DeterministicChunkIdsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      maxLength<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="optimizationconcatenatemodules"></span>optimization.concatenateModules<a href="#optimizationconcatenatemodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean</code></p><p>告诉 webpack 在模块图中查找可以安全连接到单个模块的片段。此优化首先需要 <a href="#optimizationprovidedexports"><code>optimization.providedExports</code></a> 与 <a href="#optimizationusedexports"><code>optimization.usedExports</code></a> 设置为启用。
默认情况下，<code>optimization.concatenateModules</code> 在 <code>production</code> <a href="/configuration/mode/">模式</a> 下启用，而在其它情况下被禁用。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    concatenateModules<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="optimizationemitonerrors"></span>optimization.emitOnErrors<a href="#optimizationemitonerrors" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = false</code></p><p>使用 <code>optimization.emitOnErrors</code> 在编译时每当有错误时，就会发送静态资源。这样可以确保出错的静态资源被发送出来。关键错误会被发送到生成的代码中，并会在运行时报错。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    emitOnErrors<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>如果你使用的是 webpack 的 <a href="/api/cli/">CLI</a>，当这个插件被启用时，webpack 进程不会以错误代码退出。如果你想让 webpack 在使用 CLI 时 &quot;fail&quot;，请查阅 <a href="/api/cli/#advanced-options"><code>bail</code> 选项</a>。</p></aside><h2><span id="optimizationflagincludedchunks"></span>optimization.flagIncludedChunks<a href="#optimizationflagincludedchunks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean</code></p><p>告知 webpack 确定和标记出作为其他 chunk 子集的那些 chunk，其方式是在已经加载过较大的 chunk 之后，就不再去加载这些 chunk 子集。<code>optimization.flagIncludedChunks</code> 默认会在 <code>production</code> <a href="/concepts/mode/">模式</a> 中启用，其他情况禁用。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    flagIncludedChunks<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="optimizationinnergraph"></span>optimization.innerGraph<a href="#optimizationinnergraph" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = true</code></p><p><code>optimization.innerGraph</code> 告诉 webpack 是否对未使用的导出内容实施内部图形分析。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    innerGraph<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="optimizationmangleexports"></span>optimization.mangleExports<a href="#optimizationmangleexports" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean</code> <code>string: &#x27;deterministic&#x27; | &#x27;size&#x27;</code></p><p><code>optimization.mangleExports</code> 允许控制导出处理(export mangling)。</p><p>默认 <code>optimization.mangleExports: &#x27;deterministic&#x27;</code> 会在 <code>production</code> <a href="/configuration/mode/">模式下</a> 启用而其它情况会被禁用。</p><p>此选项支持以下选项：</p><table><thead><tr><th>选项</th><th>描述</th></tr></thead><tbody><tr><td data-th="选项"><span><code>&#x27;size&#x27;</code></span></td><td data-th="描述"><span>简写形式 — 通常只有一个字符 — 专注于最小的下载 size。</span></td></tr><tr><td data-th="选项"><span><code>&#x27;deterministic&#x27;</code></span></td><td data-th="描述"><span>简写形式 - 通常两个字符 — 在添加或移除 export 时不会改变。适用于长效缓存。</span></td></tr><tr><td data-th="选项"><span><code>true</code></span></td><td data-th="描述"><span>等价于 <code>&#x27;deterministic&#x27;</code></span></td></tr><tr><td data-th="选项"><span><code>false</code></span></td><td data-th="描述"><span>保留原名，有利于阅读和调试。</span></td></tr></tbody></table><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    mangleExports<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="optimizationmanglewasmimports"></span>optimization.mangleWasmImports<a href="#optimizationmanglewasmimports" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = false</code></p><p>在设置为 <code>true</code> 时，告知 webpack 通过将导入修改为更短的字符串，来减少 WASM 大小。这会破坏模块和导出名称。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    mangleWasmImports<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="optimizationmergeduplicatechunks"></span>optimization.mergeDuplicateChunks<a href="#optimizationmergeduplicatechunks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = true</code></p><p>告知 webpack 合并含有相同模块的 chunk。将 <code>optimization.mergeDuplicateChunks</code> 设置为 <code>false</code> 以禁用这项优化。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    mergeDuplicateChunks<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="optimizationminimize"></span>optimization.minimize<a href="#optimizationminimize" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = true</code></p><p>告知 webpack 使用 <a href="/plugins/terser-webpack-plugin/">TerserPlugin</a> 或其它在 <a href="#optimizationminimizer"><code>optimization.minimizer</code></a>定义的插件压缩 bundle。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimize<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>了解 <a href="/configuration/mode/">mode</a> 工作机制。</p></aside><h2><span id="optimizationminimizer"></span>optimization.minimizer<a href="#optimizationminimizer" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>[TerserPlugin]</code> 或 <code>[function (compiler)]</code></p><p>允许你通过提供一个或多个定制过的 <a href="/plugins/terser-webpack-plugin/">TerserPlugin</a> 实例，覆盖默认压缩工具(minimizer)。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;terser-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        parallel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        terserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// https://github.com/webpack-contrib/terser-webpack-plugin#terseroptions</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>或，使用函数的形式：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;terser-webpack-plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token comment">/* 你的配置 */</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>在 <code>optimization.minimizer</code> 中可以使用 <code>&#x27;...&#x27;</code> 来访问默认值。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CssMinimizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#x27;...&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="optimizationmoduleids"></span>optimization.moduleIds<a href="#optimizationmoduleids" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean: false</code> <code>string: &#x27;natural&#x27; | &#x27;named&#x27; | &#x27;deterministic&#x27; | &#x27;size&#x27;</code></p><p>告知 webpack 当选择模块 id 时需要使用哪种算法。将 <code>optimization.moduleIds</code> 设置为 <code>false</code> 会告知 webpack 没有任何内置的算法会被使用，但自定义的算法会由插件提供。</p><p>下述选项字符串值均为被支持:</p><table><thead><tr><th>选荐值</th><th>描述</th></tr></thead><tbody><tr><td data-th="选荐值"><span><code>natural</code></span></td><td data-th="描述"><span>按使用顺序的数字 id。</span></td></tr><tr><td data-th="选荐值"><span><code>named</code></span></td><td data-th="描述"><span>对调试更友好的可读的 id。</span></td></tr><tr><td data-th="选荐值"><span><code>deterministic</code></span></td><td data-th="描述"><span>被哈希转化成的小位数值模块名。</span></td></tr><tr><td data-th="选荐值"><span><code>size</code></span></td><td data-th="描述"><span>专注于让初始下载包大小更小的数字 id。</span></td></tr></tbody></table><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    moduleIds<span class="token operator">:</span> <span class="token string">&#x27;deterministic&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><code>deterministic</code> 选项有益于长期缓存，但对比于 <code>hashed</code> 来说，它会导致更小的文件 bundles。数字值的长度会被选作用于填满最多 80%的 id 空间。当 <code>optimization.moduleIds</code> 被设置成 <code>deterministic</code>，默认最小 3 位数字会被使用。要覆盖默认行为，要将 <code>optimization.moduleIds</code> 设置成 <code>false</code>，并且要使用 <code>webpack.ids.DeterministicModuleIdsPlugin</code>。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    moduleIds<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ids<span class="token punctuation">.</span>DeterministicModuleIdsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      maxLength<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p><code>moduleIds: &#x27;deterministic&#x27;</code> 在 webpack 5 中被添加，而且 <code>moduleIds: &#x27;hashed&#x27;</code> 相应地会在 webpack 5 中废弃。</p></aside><aside class="warning"><h6 class="warning__prefix">警告</h6><p><code>moduleIds: total-size</code> 在 webpack 5 中被废弃。</p></aside><h2><span id="optimizationnodeenv"></span>optimization.nodeEnv<a href="#optimizationnodeenv" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = false</code> <code>string</code></p><p>告知 webpack 将 <code>process.env.NODE_ENV</code> 设置为一个给定字符串。如果 <code>optimization.nodeEnv</code> 不是 <code>false</code>，则会使用 <a href="/plugins/define-plugin/">DefinePlugin</a>，<code>optimization.nodeEnv</code> <strong>默认值</strong>取决于 <a href="/concepts/mode/">mode</a>，如果为 false 值，则会回退到 <code>&quot;production&quot;</code>。</p><p>可能的值有：</p><ul><li>任何字符串：用于设置 <code>process.env.NODE_ENV</code> 的值。</li><li>false：不修改/设置 <code>process.env.NODE_ENV</code>的值。</li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    nodeEnv<span class="token operator">:</span> <span class="token string">&#x27;production&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>当 <a href="/configuration/mode/">mode</a> 设置为 <code>&#x27;none&#x27;</code> 时，<code>optimization.nodeEnv</code> 的默认值为 <code>false</code>。</p></aside><h2><span id="optimizationportablerecords"></span>optimization.portableRecords<a href="#optimizationportablerecords" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean</code></p><p><code>optimization.portableRecords</code> 告知 webpack 生成带有相对路径的记录(records)使得可以移动上下文目录。</p><p>默认 <code>optimization.portableRecords</code> 被禁用。如果下列至少一个选项在 webpack 中被设置，该选项也会自动启用：<a href="/configuration/other-options/#recordspath"><code>recordsPath</code></a>, <a href="/configuration/other-options/#recordsinputpath"><code>recordsInputPath</code></a>，<a href="/configuration/other-options/#recordsoutputpath"><code>recordsOutputPath</code></a>。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    portableRecords<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="optimizationprovidedexports"></span>optimization.providedExports<a href="#optimizationprovidedexports" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean</code></p><p>告知 webpack 去确定那些由模块提供的导出内容，为 <code>export * from ...</code> 生成更多高效的代码。默认 <code>optimization.providedExports</code> 会被启用。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    providedExports<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="optimizationrealcontenthash"></span>optimization.realContentHash<a href="#optimizationrealcontenthash" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = true</code></p><p>在处理静态资源后添加额外的哈希编译，以获得正确的静态资源内容哈希。如果 <code>realContentHash</code> 设置为 <code>false</code>，内部数据用于计算哈希值，当静态资源相同时，它可以改变。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    realContentHash<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="optimizationremoveavailablemodules"></span>optimization.removeAvailableModules<a href="#optimizationremoveavailablemodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = false</code></p><p>如果模块已经包含在所有父级模块中，告知 webpack 从 chunk 中检测出这些模块，或移除这些模块。将 <code>optimization.removeAvailableModules</code> 设置为 <code>true</code> 以启用这项优化。在 <a href="/configuration/mode/"><code>production</code> 模式</a> 中默认会被开启。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    removeAvailableModules<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p><code>optimization.removeAvailableModules</code> 会削减了 webapck 的性能表现，而且将会在下一个主要发布版本中，在 <code>production</code> 模式下会被禁用。如果你想获得额外的构建性能，请在 <code>production</code> 模式中禁用它。</p></aside><h2><span id="optimizationremoveemptychunks"></span>optimization.removeEmptyChunks<a href="#optimizationremoveemptychunks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = true</code></p><p>如果 chunk 为空，告知 webpack 检测或移除这些 chunk。将 <code>optimization.removeEmptyChunks</code> 设置为 <code>false</code> 以禁用这项优化。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    removeEmptyChunks<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="optimizationruntimechunk"></span>optimization.runtimeChunk<a href="#optimizationruntimechunk" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>object</code> <code>string</code> <code>boolean</code></p><p>将 <code>optimization.runtimeChunk</code> 设置为 <code>true</code> 或 <code>&#x27;multiple&#x27;</code>，会为每个入口添加一个只含有 runtime 的额外 chunk。此配置的别名如下：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    runtimeChunk<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">name</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">entrypoint</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">runtime~</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entrypoint<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>值 <code>&quot;single&quot;</code> 会创建一个在所有生成 chunk 之间共享的运行时文件。此设置是如下设置的别名：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    runtimeChunk<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#x27;runtime&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过将 <code>optimization.runtimeChunk</code> 设置为 <code>object</code>，对象中可以设置只有 <code>name</code> 属性，其中属性值可以是名称或者返回名称的函数，用于为 runtime chunks 命名。</p><p>默认值是 <code>false</code>：每个入口 chunk 中直接嵌入 runtime。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>对于每个 runtime chunk，导入的模块会被分别初始化，因此如果你在同一个页面中引用多个入口起点，请注意此行为。你或许应该将其设置为 <code>single</code>，或者使用其他只有一个 runtime 实例的配置。</p></aside><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    runtimeChunk<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">name</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">entrypoint</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">runtimechunk~</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entrypoint<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="optimizationsideeffects"></span>optimization.sideEffects<a href="#optimizationsideeffects" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = true</code> <code>string: &#x27;flag&#x27;</code></p><p>告诉 webpack 去辨识 <code>package.json</code> 中的 <a href="https://github.com/webpack/webpack/blob/master/examples/side-effects/README.md"><code>sideEffects</code></a> 标记或规则，以跳过那些当导出不被使用且被标记为不包含副作用的模块。</p><p><strong>package.json</strong></p><pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;awesome npm module&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>请注意，<code>sideEffects</code> 应该位于 npm 模块的 <code>package.json</code> 文件中，但并不意味着你需要在自己项目中引入大模块的
<code>package.json</code> 中将 <code>sideEffects</code> 设置成 <code>false</code>。</p></aside><p><code>optimization.sideEffects</code> 首先依赖于 <a href="#optimizationprovidedexports"><code>optimization.providedExports</code></a> 被设置为启用。这个依赖会有构建时间的损耗，但移除模块将生成更少的代码，因此有利于性能的提升。该优化的效果取决于代码库，
可以尝试此特性以获取一些可能的性能优化。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    sideEffects<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>如果不想要分析源码，那么可以将其指定为 <code>flag</code>：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    sideEffects<span class="token operator">:</span> <span class="token string">&#x27;flag&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>此处的 <code>&#x27;flag&#x27;</code> 值在非生产环境中默认使用。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>启用 <code>optimization.sideEffects</code> 后，当模块只包含无副作用的语句时，此模块也会被标记为无副作用。</p></aside><h2><span id="optimizationsplitchunks"></span>optimization.splitChunks<a href="#optimizationsplitchunks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>object</code></p><p>对于动态导入模块，默认使用 webpack v4+ 提供的全新的通用分块策略(common chunk strategy)。请在 <a href="/plugins/split-chunks-plugin/">SplitChunksPlugin</a> 页面中查看配置其行为的可用选项。</p><h2><span id="optimizationusedexports"></span>optimization.usedExports<a href="#optimizationusedexports" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = true</code> <code>string: &#x27;global&#x27;</code></p><p>告诉 webpack 去决定每个模块的导出内容是否被使用。这首先取决于 <a href="#optimizationprovidedexports"><code>optimization.providedExports</code></a> 选项是否被启用。由 <code>optimization.usedExports</code> 收集的信息会被其它优化手段或者代码生成使用，比如未使用的导出内容不会被生成，当所有的使用都适配，导出名称会被处理做单个标记字符。
压缩工具执行清除死代码时会受益于该选项，而且能够去除未使用的导出内容。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    usedExports<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>选择退出每次运行时使用 export 分享：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    usedExports<span class="token operator">:</span> <span class="token string">&#x27;global&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h1><span id="插件Plugins"></span>插件(Plugins)<a href="#%E6%8F%92%E4%BB%B6Plugins" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p><code>plugins</code> 选项用于以各种方式自定义 webpack 构建过程。webpack 附带了各种内置插件，可以通过 <code>webpack.[plugin-name]</code> 访问这些插件。请查看 <a href="/plugins">插件页面</a> 获取插件列表和对应文档，但请注意这只是其中一部分，社区中还有许多插件。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>注意：本页面仅讨论使用插件，如果你有兴趣编写自己的插件，
请访问 <a href="/contribute/writing-a-plugin/">编写一个插件</a> 页面。</p></aside><h2><span id="plugins"></span>plugins<a href="#plugins" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><a href="/plugins/"><code>[Plugin]</code></a></p><p>一组 webpack 插件。例如，<a href="/plugins/define-plugin/"><code>DefinePlugin</code></a> 允许你创建可在编译时配置的全局常量。这对需要再开发环境构建和生产环境构建之间产生不同行为来说非常有用。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// Definitions...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>一个复杂示例，使用多个插件，可能看起来就像这样：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">var</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 导入非 webpack 自带默认插件</span>
<span class="token keyword">var</span> DashboardPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack-dashboard/plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在配置中添加插件</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>IgnorePlugin</span><span class="token punctuation">(</span><span class="token regex">/^\.\/locale$/</span><span class="token punctuation">,</span> <span class="token regex">/moment$/</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token comment">// 编译时(compile time)插件</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string">&#x27;process.env.NODE_ENV&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;&quot;production&quot;&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token comment">// webpack-dev-server 强化插件</span>
    <span class="token keyword">new</span> <span class="token class-name">DashboardPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h1><span id="DevServer"></span>DevServer<a href="#DevServer" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p><a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> 可用于快速开发应用程序。请查阅 <a href="/guides/development/">开发指南</a> 开始使用。</p><p>当前页面记录了影响 <code>webpack-dev-server</code> (简写: <code>dev-server</code>) <span class="badge">version &gt;= 4.0.0</span> 配置的选项。可以在 <a href="https://github.com/webpack/webpack-dev-server/blob/master/migration-v4.md">这里</a> 找到 <code>v3</code> 到 <code>v4</code> 的迁移指南</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p><code>webpack-dev-server v4.0.0+</code> 要求 <code>node &gt;= v12.13.0</code>、<code>webpack &gt;= v4.37.0</code>（但是我们推荐使用 <code>webpack &gt;= v5.0.0</code>）和 <code>webpack-cli &gt;= v4.7.0</code>。</p></aside><h2><span id="devserver"></span>devServer<a href="#devserver" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>object</code></p><p>通过 <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> 的这些配置，能够以多种方式改变其行为。这是一个基本的示例，利用 <code>gzips</code> 压缩 <code>public/</code> 目录当中的所有内容并提供一个本地服务(serve)：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      directory<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;public&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">9000</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>当服务(<code>server</code>)启动后，在解析模块列表之前输出一条消息：</p><pre><code class="hljs language-bash"><span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> <span class="token punctuation">[</span>webpack-dev-server<span class="token punctuation">]</span> Project is running at:
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> <span class="token punctuation">[</span>webpack-dev-server<span class="token punctuation">]</span> Loopback: http://localhost:9000/
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> <span class="token punctuation">[</span>webpack-dev-server<span class="token punctuation">]</span> On Your Network <span class="token punctuation">(</span>IPv4<span class="token punctuation">)</span>: http://197.158.164.104:9000/
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> <span class="token punctuation">[</span>webpack-dev-server<span class="token punctuation">]</span> On Your Network <span class="token punctuation">(</span>IPv6<span class="token punctuation">)</span>: http://<span class="token punctuation">[</span>fe80::1<span class="token punctuation">]</span>:9000/
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> <span class="token punctuation">[</span>webpack-dev-server<span class="token punctuation">]</span> Content not from webpack is served from <span class="token string">&#x27;/path/to/public&#x27;</span> directory</code></pre><p>这里将会给出服务启动位置以及内容的一些基本信息。</p><p>如果你通过 Node.js API 使用 dev-server，则 <code>devServer</code> 中的配置选项将被忽略。但可以将配置选项作为第一个参数传入：<code>new WebpackDevServer({...}, compiler)</code>。<a href="https://github.com/webpack/webpack-dev-server/tree/master/examples/api/simple">此示例</a>展示了如何通过 Node.js API 使用 webpack-dev-server。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>使用 <code>WebpackDevServer</code> 时，不能使用第二个 <code>compiler</code> 参数（一个回调）。</p></aside><aside class="warning"><h6 class="warning__prefix">警告</h6><p>请注意，当<a href="/configuration/configuration-types/#exporting-multiple-configurations">导出多个配置对象</a>时，只会使用 <code>devServer</code> 的第一个配置选项，并将其应用于所有的配置当中。</p></aside><aside class="tip"><h6 class="tip__prefix">提示</h6><p>如果你碰到了问题，请将路由导航至 <code>/webpack-dev-server</code> 将会为你展示服务文件的位置。例如： <code>http://localhost:9000/webpack-dev-server</code>。</p></aside><aside class="tip"><h6 class="tip__prefix">提示</h6><p>如果你需要要手动重新编译 <code>bundle</code>，将路由导航至 <code>/webpack-dev-server/invalidate</code> 使当前编译的 <code>bundle</code> <a href="/api/node/#invalidate-watching">无效</a>，并通过 <a href="https://github.com/webpack/webpack-dev-middleware#invalidate">webpack-dev-middleware</a> 为你重新编译。根据你的配置，URL 可能看起来像 <code>http://localhost:9000/webpack-dev-server/invalidate</code>。</p></aside><aside class="tip"><h6 class="tip__prefix">提示</h6><p>当启动本地服务的时候 HTML 模板是必须提供的，通常是 <code>index.html</code>。确保将脚本引用添加到 HTML 中，webpack-dev-server 不会自动注入它们。</p></aside><h3><span id="usage-via-cli"></span>Usage via CLI<a href="#usage-via-cli" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>你可以通过 CLI 调用 webpack-dev-server，方式是：</p><pre><code class="hljs language-bash">npx webpack serve</code></pre><p>CLI 配置项列表可以在 <a href="https://github.com/webpack/webpack-cli/blob/master/SERVE-OPTIONS-v4.md">这里</a> 查询。</p><h3><span id="usageviaapi"></span>Usage via API<a href="#usageviaapi" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>虽然推荐通过 CLI 运行 <code>webpack-dev-server</code>，但是你也可以通过 API 来启用服务器。</p><p>查看相关的 <a href="/api/webpack-dev-server/"><code>webpack-dev-server</code> API 文档</a>。</p><h2><span id="devserverallowedhosts"></span>devServer.allowedHosts<a href="#devserverallowedhosts" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>&#x27;auto&#x27; | &#x27;all&#x27;</code> <code>[string]</code></p><p>该选项允许将允许访问开发服务器的服务列入白名单。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    allowedHosts<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&#x27;host.com&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;subdomain.host.com&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;subdomain2.host.com&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;host2.com&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>模仿 django 的<code>ALLOWED_HOSTS</code>，用 <code>.</code> 作为子域通配符。<code>.host.com</code> 会与 <code>host.com</code>，<code>www.host.com</code> 以及 <code>host.com</code> 等其他任何其他子域匹配。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// this achieves the same effect as the first example</span>
    <span class="token comment">// with the bonus of not having to update your config</span>
    <span class="token comment">// if new subdomains need to access the dev server</span>
    allowedHosts<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;.host.com&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;host2.com&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --allowed-hosts .host.com --allowed-hosts host2.com</code></pre><p>当设置为 <code>&#x27;all&#x27;</code> 时会跳过 host 检查。<strong>并不推荐这样做</strong>，因为不检查 host 的应用程序容易受到 DNS 重绑定攻击。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    allowedHosts<span class="token operator">:</span> <span class="token string">&#x27;all&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --allowed-hosts all</code></pre><p>当设置为 <code>&#x27;auto&#x27;</code> 时，此配置项总是允许 <code>localhost</code>、 <a href="#devserverhost"><code>host</code></a> 和 <a href="#websocketurl"><code>client.webSocketURL.hostname</code></a>：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    allowedHosts<span class="token operator">:</span> <span class="token string">&#x27;auto&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --allowed-hosts auto</code></pre><h2><span id="devserverbonjour"></span>devServer.bonjour<a href="#devserverbonjour" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = false</code> <code>object</code></p><p>这个配置用于在启动时通过 <a href="http://www.zeroconf.org/">ZeroConf</a> 网络广播你的开发服务器。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    bonjour<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --bonjour</code></pre><p>如需禁用：</p><pre><code class="hljs language-bash">npx webpack serve --no-bonjour</code></pre><p>你也可以为 bonjour 设置 <a href="https://github.com/watson/bonjour#initializing">自定义配置项</a>，例如：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    bonjour<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;http&#x27;</span><span class="token punctuation">,</span>
      protocol<span class="token operator">:</span> <span class="token string">&#x27;udp&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="devserverclient"></span>devServer.client<a href="#devserverclient" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><h3><span id="logging"></span>logging<a href="#logging" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>&#x27;log&#x27; | &#x27;info&#x27; | &#x27;warn&#x27; | &#x27;error&#x27; | &#x27;none&#x27; | &#x27;verbose&#x27;</code></p><p>允许在浏览器中设置日志级别，例如在重载之前，在一个错误之前或者 <a href="/concepts/hot-module-replacement/">模块热替换</a> 启用时。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    client<span class="token operator">:</span> <span class="token punctuation">{</span>
      logging<span class="token operator">:</span> <span class="token string">&#x27;info&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --client-logging info</code></pre><h3><span id="overlay"></span>overlay<a href="#overlay" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code> <code>object: { errors boolean = true, warnings boolean = true }</code></p><p>当出现编译错误或警告时，在浏览器中显示全屏覆盖。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    client<span class="token operator">:</span> <span class="token punctuation">{</span>
      overlay<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --client-overlay</code></pre><p>如需禁用：</p><pre><code class="hljs language-bash">npx webpack serve --no-client-overlay</code></pre><p>如果你只想显示错误信息：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    client<span class="token operator">:</span> <span class="token punctuation">{</span>
      overlay<span class="token operator">:</span> <span class="token punctuation">{</span>
        errors<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        warnings<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --client-overlay-errors --no-client-overlay-warnings</code></pre><h3><span id="progress"></span>progress<a href="#progress" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>在浏览器中以百分比显示编译进度。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    client<span class="token operator">:</span> <span class="token punctuation">{</span>
      progress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --client-progress</code></pre><p>如需禁用：</p><pre><code class="hljs language-bash">npx webpack serve --no-client-progress</code></pre><h3><span id="reconnect"></span>reconnect<a href="#reconnect" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code> <code>number</code></p><span class="badge">v4.4.0+</span><p>告诉 dev-server 它应该尝试重新连接客户端的次数。当为 <code>true</code> 时，它将无限次尝试重新连接。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    client<span class="token operator">:</span> <span class="token punctuation">{</span>
      reconnect<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --client-reconnect</code></pre><p>当设置为 <code>false</code> 时，它将不会尝试连接。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    client<span class="token operator">:</span> <span class="token punctuation">{</span>
      reconnect<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --no-client-reconnect</code></pre><p>您还可以指定客户端应该尝试重新连接的确切次数。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    client<span class="token operator">:</span> <span class="token punctuation">{</span>
      reconnect<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --client-reconnect <span class="token number">5</span></code></pre><h3><span id="websockettransport"></span>webSocketTransport<a href="#websockettransport" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>&#x27;ws&#x27; | &#x27;sockjs&#x27;</code> <code>string</code></p><p>该配置项允许我们为客户端单独选择当前的 <code>devServer</code> 传输模式，或者提供自定义的客户端实现。这允许指定浏览器或其他客户端与 <code>devServer</code> 的通信方式。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>为 <a href="#devserverwebsocketserver"><code>webSocketServer</code></a> 设置 <code>&#x27;ws&#x27;</code> 或者 <code>&#x27;sockjs&#x27;</code> 是一个设置 <code>devServer.client.webSocketTransport</code> 和 <code>devServer.webSocketServer</code> 的快捷方式。</p></aside><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    client<span class="token operator">:</span> <span class="token punctuation">{</span>
      webSocketTransport<span class="token operator">:</span> <span class="token string">&#x27;ws&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    webSocketServer<span class="token operator">:</span> <span class="token string">&#x27;ws&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --client-web-socket-transport ws --web-socket-server ws</code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>在提供自定义客户端和服务器实现时，要确保它们彼此兼容，以成功通信。</p></aside><p>创建一个自定义客户端实现，创建一个类拓展 <a href="https://github.com/webpack/webpack-dev-server/blob/master/client-src/clients/BaseClient.js"><code>BaseClient</code></a>。</p><p>使用 <code>CustomClient.js</code> 的路径，一个自定义 WebSocket 客户端实现，连同兼容的 <code>&#x27;ws&#x27;</code> 服务器：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    client<span class="token operator">:</span> <span class="token punctuation">{</span>
      webSocketTransport<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;./CustomClient&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    webSocketServer<span class="token operator">:</span> <span class="token string">&#x27;ws&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>使用自定义且兼容的 WebSocket 客户端和服务端实现：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    client<span class="token operator">:</span> <span class="token punctuation">{</span>
      webSocketTransport<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;./CustomClient&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    webSocketServer<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;./CustomServer&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="websocketurl"></span>webSocketURL<a href="#websocketurl" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string</code> <code>object</code></p><p>这个选项允许指定 URL 到 web socket 服务器（当你代理开发服务器和客户端脚本不总是知道连接到哪里时很有用）。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    client<span class="token operator">:</span> <span class="token punctuation">{</span>
      webSocketURL<span class="token operator">:</span> <span class="token string">&#x27;ws://0.0.0.0:8080/ws&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --client-web-socket-url ws://0.0.0.0:8080/ws</code></pre><p>您还可以指定具有以下属性的对象：</p><ul><li><code>hostname</code>: 告诉连接到 devServer 的客户端使用提供的 hostname 进行连接。</li><li><code>pathname</code>: 告诉连接到 devServer 的客户端使用提供的路径进行连接。</li><li><code>password</code>: 告诉连接到 devServer 的客户端使用提供的密码进行认证。</li><li><code>port</code>: 告诉连接到 devServer 的客户端使用提供的端口进行连接。</li><li><code>protocol</code>: 告诉连接到 devServer 的客户端使用提供的协议进行连接。</li><li><code>username</code>: 告诉连接到 devServer 的客户端使用提供的用户名进行认证。</li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    client<span class="token operator">:</span> <span class="token punctuation">{</span>
      webSocketURL<span class="token operator">:</span> <span class="token punctuation">{</span>
        hostname<span class="token operator">:</span> <span class="token string">&#x27;0.0.0.0&#x27;</span><span class="token punctuation">,</span>
        pathname<span class="token operator">:</span> <span class="token string">&#x27;/ws&#x27;</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span> <span class="token string">&#x27;dev-server&#x27;</span><span class="token punctuation">,</span>
        port<span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
        protocol<span class="token operator">:</span> <span class="token string">&#x27;ws&#x27;</span><span class="token punctuation">,</span>
        username<span class="token operator">:</span> <span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>要从浏览器中获取 <code>protocol</code>/<code>hostname</code>/<code>port</code>，请使用 <code>webSocketURL: &#x27;auto://0.0.0.0:0/ws&#x27;</code>。</p></aside><h2><span id="devservercompress"></span>devServer.compress<a href="#devservercompress" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = true</code></p><p>启用 <a href="https://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/">gzip compression</a>：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --compress</code></pre><p>如需禁用</p><pre><code class="hljs language-bash">npx webpack serve --no-compress</code></pre><h2><span id="devserverdevmiddleware"></span>devServer.devMiddleware<a href="#devserverdevmiddleware" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>object</code></p><p>为 <a href="https://github.com/webpack/webpack-dev-middleware">webpack-dev-middleware</a> 提供处理 webpack 资源的配置项。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    devMiddleware<span class="token operator">:</span> <span class="token punctuation">{</span>
      index<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      mimeTypes<span class="token operator">:</span> <span class="token punctuation">{</span> phtml<span class="token operator">:</span> <span class="token string">&#x27;text/html&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      publicPath<span class="token operator">:</span> <span class="token string">&#x27;/publicPathForDevServe&#x27;</span><span class="token punctuation">,</span>
      serverSideRender<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      writeToDisk<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="devserverhttp2"></span>devServer.http2<a href="#devserverhttp2" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean</code></p><p>使用 <a href="https://www.npmjs.com/package/spdy">spdy</a> 提供 HTTP/2 服务。对于 Node 15.0.0 及更高版本，此选项将被忽略，因为 spdy 在这些版本中已被破坏。一旦 <a href="https://expressjs.com/">Express</a> 支持，开发服务器将迁移到 Node 内置的 HTTP/2。</p><p>HTTP/2 带有自签名证书：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    http2<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --http2</code></pre><p>禁用：</p><pre><code class="hljs language-bash">npx webpack serve --no-http2</code></pre><p>通过 <a href="#devserverhttps">https</a> 配置你自己的证书文件：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;fs&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    http2<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    https<span class="token operator">:</span> <span class="token punctuation">{</span>
      key<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&#x27;/path/to/server.key&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      cert<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&#x27;/path/to/server.crt&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      ca<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&#x27;/path/to/ca.pem&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>要通过 CLI 使用你的证书，请使用以下配置项：</p><pre><code class="hljs language-bash">npx webpack serve --http2 --https-key ./path/to/server.key --https-cert ./path/to/server.crt --https-ca ./path/to/ca.pem</code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>此配置项已被弃用，以支持 <a href="#devserverserver">devServer.server</a>。</p></aside><h2><span id="devserverhttps"></span>devServer.https<a href="#devserverhttps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean</code> <code>object</code></p><p>默认情况下，开发服务器将通过 HTTP 提供服务。可以选择使用 HTTPS 提供服务：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    https<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --https</code></pre><p>禁用：</p><pre><code class="hljs language-bash">npx webpack serve --no-https</code></pre><p>根据上述配置，将使用自签名证书，但是你也可以提供自己的证书：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    https<span class="token operator">:</span> <span class="token punctuation">{</span>
      ca<span class="token operator">:</span> <span class="token string">&#x27;./path/to/server.pem&#x27;</span><span class="token punctuation">,</span>
      pfx<span class="token operator">:</span> <span class="token string">&#x27;./path/to/server.pfx&#x27;</span><span class="token punctuation">,</span>
      key<span class="token operator">:</span> <span class="token string">&#x27;./path/to/server.key&#x27;</span><span class="token punctuation">,</span>
      cert<span class="token operator">:</span> <span class="token string">&#x27;./path/to/server.crt&#x27;</span><span class="token punctuation">,</span>
      passphrase<span class="token operator">:</span> <span class="token string">&#x27;webpack-dev-server&#x27;</span><span class="token punctuation">,</span>
      requestCert<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>该对象直接传递到 Node.js HTTPS 模块，因此请参阅 <a href="https://nodejs.org/api/https.html">HTTPS documentation</a> 以获取更多信息。</p><p>要通过 CLI 使用自己的证书，请使用以下选项：</p><pre><code class="hljs language-bash">npx webpack serve --https-request-cert --https-key ./path/to/server.key --https-cert ./path/to/server.crt --https-ca ./path/to/ca.pem --https-pfx ./path/to/server.pfx --https-passphrase webpack-dev-server</code></pre><p><code>webpack-dev-server &gt;= v4.2.0</code> 允许你设置额外的 <a href="https://nodejs.org/api/tls.html#tls_tls_createsecurecontext_options">TLS 配置项</a>，比如 <code>minVersion</code>。同样你可以直接传递各自文件的内容：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;fs&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    https<span class="token operator">:</span> <span class="token punctuation">{</span>
      minVersion<span class="token operator">:</span> <span class="token string">&#x27;TLSv1.1&#x27;</span><span class="token punctuation">,</span>
      key<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;./server.key&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      pfx<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;./server.pfx&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      cert<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;./server.crt&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      ca<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;./ca.pem&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      passphrase<span class="token operator">:</span> <span class="token string">&#x27;webpack-dev-server&#x27;</span><span class="token punctuation">,</span>
      requestCert<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>不要同时指定 <code>https.ca</code> 与 <code>https.cacert</code> 配置项，如果指定的话将会使用 <code>https.ca</code>。<code>https.cacert</code> 已弃用并且将会在下个主要版本中被移除。</p></aside><aside class="warning"><h6 class="warning__prefix">警告</h6><p>该配置项已弃用，以支持 <a href="#devserverserver">devServer.server</a>。</p></aside><h2><span id="devserverheaders"></span>devServer.headers<a href="#devserverheaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>array</code> <code>function</code> <code>object</code></p><p>为所有响应添加 headers：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#x27;X-Custom-Foo&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;bar&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>你也可以传递一个数组：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    headers<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        key<span class="token operator">:</span> <span class="token string">&#x27;X-Custom&#x27;</span><span class="token punctuation">,</span>
        value<span class="token operator">:</span> <span class="token string">&#x27;foo&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        key<span class="token operator">:</span> <span class="token string">&#x27;Y-Custom&#x27;</span><span class="token punctuation">,</span>
        value<span class="token operator">:</span> <span class="token string">&#x27;bar&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>你也可以传递一个函数：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">headers</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token string">&#x27;X-Bar&#x27;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;key1=value1&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;key2=value2&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="devserverhistoryapifallback"></span>devServer.historyApiFallback<a href="#devserverhistoryapifallback" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = false</code> <code>object</code></p><p>When using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/History">HTML5 History API</a>, the <code>index.html</code> page will likely have to be served in place of any <code>404</code> responses. Enable <code>devServer.historyApiFallback</code> by setting it to <code>true</code>:</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --history-api-fallback</code></pre><p>禁用：</p><pre><code class="hljs language-bash">npx webpack serve --no-history-api-fallback</code></pre><p>通过提供一个对象，这种行为可以通过像 <code>rewrites</code> 这样的配置项进一步控制：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    historyApiFallback<span class="token operator">:</span> <span class="token punctuation">{</span>
      rewrites<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token regex">/^\/$/</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">&#x27;/views/landing.html&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token regex">/^\/subpage/</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">&#x27;/views/subpage.html&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token regex">/./</span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">&#x27;/views/404.html&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>在你的路径中使用点（与 Angular 相同），你可能需要使用 <code>disableDotRule</code>：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    historyApiFallback<span class="token operator">:</span> <span class="token punctuation">{</span>
      disableDotRule<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>For more options and information, see the <a href="https://github.com/bripkens/connect-history-api-fallback">connect-history-api-fallback</a> documentation.</p><h2><span id="devserverhost"></span>devServer.host<a href="#devserverhost" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>&#x27;local-ip&#x27; | &#x27;local-ipv4&#x27; | &#x27;local-ipv6&#x27;</code> <code>string</code></p><p>指定要使用的 host。如果你想让你的服务器可以被外部访问，像这样指定：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    host<span class="token operator">:</span> <span class="token string">&#x27;0.0.0.0&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --host <span class="token number">0.0</span>.0.0</code></pre><p>这也适用于 IPv6：</p><pre><code class="hljs language-bash">npx webpack serve --host ::</code></pre><h3><span id="localip"></span>local-ip<a href="#localip" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Specifying <code>local-ip</code> as host will try to resolve the host option as your local <code>IPv4</code> address if available, if <code>IPv4</code> is not available it will try to resolve your local <code>IPv6</code> address.</p><pre><code class="hljs language-bash">npx webpack serve --host local-ip</code></pre><h3><span id="local-ipv4"></span>local-ipv4<a href="#local-ipv4" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Specifying <code>local-ipv4</code> as host will try to resolve the host option as your local <code>IPv4</code> address.</p><pre><code class="hljs language-bash">npx webpack serve --host local-ipv4</code></pre><h3><span id="local-ipv6"></span>local-ipv6<a href="#local-ipv6" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>指定 local-ipv6 作为主机将尝试将主机选项解析为您的本地 IPv6 地址。</p><pre><code class="hljs language-bash">npx webpack serve --host local-ipv6</code></pre><h2><span id="devserverhot"></span>devServer.hot<a href="#devserverhot" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>&#x27;only&#x27;</code> <code>boolean = true</code></p><p>启用 webpack 的 <a href="/concepts/hot-module-replacement/">模块热替换</a> 特性：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --hot</code></pre><p>如需禁用：</p><pre><code class="hljs language-bash">npx webpack serve --no-hot</code></pre><p>启用模块热替换功能，在构建失败时不刷新页面作为回退，使用 <code>hot: &#x27;only&#x27;</code>：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    hot<span class="token operator">:</span> <span class="token string">&#x27;only&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --hot only</code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>从 webpack-dev-server v4 开始，HMR 是默认启用的。它会自动应用 <a href="/plugins/hot-module-replacement-plugin/"><code>webpack.HotModuleReplacementPlugin</code></a>，这是启用 HMR 所必需的。因此当 <code>hot</code> 设置为 <code>true</code> 或者通过 CLI 设置 <code>--hot</code>，你不需要在你的 <code>webpack.config.js</code> 添加该插件。查看 <a href="/concepts/hot-module-replacement/">HMR concepts page</a> 以获取更多信息。</p></aside><h2><span id="devserveripc"></span>devServer.ipc<a href="#devserveripc" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>true</code> <code>string</code></p><p>The Unix socket to listen to (instead of a <a href="#devserverhost"><code>host</code></a>).</p><p>将其设置为 <code>true</code> 将会监听 <code>/your-os-temp-dir/webpack-dev-server.sock</code> 的 socket：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    ipc<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --ipc</code></pre><p>你也可以这样监听一个不同的 socket：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    ipc<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;my-socket.sock&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="devserverlivereload"></span>devServer.liveReload<a href="#devserverlivereload" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = true</code></p><p>默认情况下，当监听到文件变化时 dev-server 将会重新加载或刷新页面。为了 <code>liveReload</code> 能够生效，<a href="#devserverhot"><code>devServer.hot</code></a> 配置项必须禁用或者 <a href="#devserverwatchfiles"><code>devServer.watchFiles</code></a> 配置项必须启用。将其设置为 <code>false</code> 以禁用 <code>devServer.liveReload</code>：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    liveReload<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --live-reload</code></pre><p>禁用该功能：</p><pre><code class="hljs language-bash">npx webpack serve --no-live-reload</code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>热加载仅对像 <code>web</code>、<code>webworker</code>、<code>electron-renderer</code> 和 <code>node-webkit</code> 的 <a href="/configuration/target/#string">targets</a> 生效。</p></aside><h2><span id="devservermagichtml"></span>devServer.magicHtml<a href="#devservermagichtml" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = true</code></p><span class="badge">v4.1.0+</span><p>Tell dev-server to enable/disable magic HTML routes (routes corresponding to your webpack output, for example <code>/main</code> for <code>main.js</code>).</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    magicHtml<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --magic-html</code></pre><p>禁用：</p><pre><code class="hljs language-bash">npx webpack serve --no-magic-html</code></pre><h2><span id="devserveronaftersetupmiddleware"></span>devServer.onAfterSetupMiddleware<a href="#devserveronaftersetupmiddleware" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>function (devServer)</code></p><p>提供服务器内部在所有其他中间件之后执行
自定义中间件的能力</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">onAfterSetupMiddleware</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">devServer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>devServer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack-dev-server is not defined&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      devServer<span class="token punctuation">.</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#x27;/some/path&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> custom<span class="token operator">:</span> <span class="token string">&#x27;response&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>该配置项已弃用，以支持 <a href="#devserversetupmiddlewares">devServer.setupMiddlewares</a>。</p></aside><h2><span id="devserveronbeforesetupmiddleware"></span>devServer.onBeforeSetupMiddleware<a href="#devserveronbeforesetupmiddleware" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>function (devServer)</code></p><p>提供在服务器内部执行所有其他中间件之前执行自定义中间件的能力。
这可以用来定义自定义处理程序，
例如:</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">onBeforeSetupMiddleware</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">devServer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>devServer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack-dev-server is not defined&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      devServer<span class="token punctuation">.</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#x27;/some/path&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> custom<span class="token operator">:</span> <span class="token string">&#x27;response&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>该配置项已弃用，以支持 <a href="#devserversetupmiddlewares">devServer.setupMiddlewares</a>。</p></aside><h2><span id="devserveronlistening"></span>devserver.onListening<a href="#devserveronlistening" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>function (devServer)</code></p><p>提供在 webpack-dev-server 开始监听端口连接时执行自定义函数的能力。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">onListening</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">devServer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>devServer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack-dev-server is not defined&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">const</span> port <span class="token operator">=</span> devServer<span class="token punctuation">.</span>server<span class="token punctuation">.</span><span class="token function">address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>port<span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Listening on port:&#x27;</span><span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="devserveropen"></span>devServer.open<a href="#devserveropen" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean</code> <code>string</code> <code>object</code> <code>[string, object]</code></p><p>告诉 dev-server 在服务器已经启动后打开浏览器。设置其为 <code>true</code> 以打开你的默认浏览器。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --open</code></pre><p>如需禁用：</p><pre><code class="hljs language-bash">npx webpack serve --no-open</code></pre><p>在浏览器中打开指定页面：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    open<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;/my-page&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --open /my-page</code></pre><p>在浏览器中打开多个指定页面：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    open<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;/my-page&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;/another-page&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --open /my-page --open /another-page</code></pre><p>提供要使用的浏览器名称，而不是默认名称：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    open<span class="token operator">:</span> <span class="token punctuation">{</span>
      app<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&#x27;google-chrome&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --open-app-name <span class="token string">&#x27;google-chrome&#x27;</span></code></pre><p>该对象接收所有 <a href="https://www.npmjs.com/package/open">open</a> 配置项：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    open<span class="token operator">:</span> <span class="token punctuation">{</span>
      target<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;first.html&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;http://localhost:8080/second.html&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      app<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&#x27;google-chrome&#x27;</span><span class="token punctuation">,</span>
        arguments<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;--incognito&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;--new-window&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>浏览器应用程序名称与平台相关。不要在可重用模块中硬编码它。例如，<code>&#x27;Chrome&#x27;</code> 在 macOS 是 <code>&#x27;Google Chrome&#x27;</code>，在 Linux 是 <code>&#x27;google-chrome&#x27;</code>，在 Windows 是 <code>&#x27;chrome&#x27;</code>。</p></aside><h2><span id="devserverport"></span>devServer.port<a href="#devserverport" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>&#x27;auto&#x27;</code> <code>string</code> <code>number</code></p><p>指定监听请求的端口号：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    port<span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过命令行使用：</p><pre><code class="hljs language-bash">npx webpack serve --port <span class="token number">8080</span></code></pre><p><code>port</code> 配置项不能设置为 <code>null</code> 或者空字符串，要想自动使用一个可用端口请使用 <code>port: &#x27;auto&#x27;</code>：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    port<span class="token operator">:</span> <span class="token string">&#x27;auto&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --port auto</code></pre><h2><span id="devserverproxy"></span>devServer.proxy<a href="#devserverproxy" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>object</code> <code>[object, function]</code></p><p>当拥有单独的 API 后端开发服务器并且希望在同一域上发送 API 请求时，代理某些 URL 可能会很有用。</p><p>开发服务器使用功能强大的 <a href="https://github.com/chimurai/http-proxy-middleware">http-proxy-middleware</a> 软件包。 查看其 <a href="https://github.com/chimurai/http-proxy-middleware#options">documentation</a> 了解更多高级用法。 请注意，<code>http-proxy-middleware</code> 的某些功能不需要<code>target</code>键，例如 它的 <code>router</code> 功能，但是仍然需要在此处的配置中包含<code>target</code>，否则<code>webpack-dev-server</code> 不会将其传递给 <code>http-proxy-middleware</code>。</p><p>使用后端在 <code>localhost:3000</code> 上，可以使用它来启用代理：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#x27;/api&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;http://localhost:3000&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>现在，对 <code>/api/users</code> 的请求会将请求代理到 <code>http://localhost:3000/api/users</code>。</p><p>如果不希望传递<code>/api</code>，则需要重写路径：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#x27;/api&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        target<span class="token operator">:</span> <span class="token string">&#x27;http://localhost:3000&#x27;</span><span class="token punctuation">,</span>
        pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&#x27;^/api&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>默认情况下，将不接受在 HTTPS 上运行且证书无效的后端服务器。 如果需要，可以这样修改配置：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#x27;/api&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        target<span class="token operator">:</span> <span class="token string">&#x27;https://other-server.example.com&#x27;</span><span class="token punctuation">,</span>
        secure<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>有时不想代理所有内容。 可以基于函数的返回值绕过代理。</p><p>在该功能中，可以访问请求，响应和代理选项。</p><ul><li>返回 <code>null</code> 或 <code>undefined</code> 以继续使用代理处理请求。</li><li>返回 <code>false</code> 会为请求产生 404 错误。</li><li>返回提供服务的路径，而不是继续代理请求。</li></ul><p>例如。 对于浏览器请求，想要提供 HTML 页面，但是对于 API 请求，想要代理它。 可以执行以下操作：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#x27;/api&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        target<span class="token operator">:</span> <span class="token string">&#x27;http://localhost:3000&#x27;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">bypass</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> proxyOptions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>accept<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#x27;html&#x27;</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Skipping proxy for browser request.&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token string">&#x27;/index.html&#x27;</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>如果想将多个特定路径代理到同一目标，则可以使用一个或多个带有 <code>context</code> 属性的对象的数组：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        context<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;/auth&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;/api&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        target<span class="token operator">:</span> <span class="token string">&#x27;http://localhost:3000&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>请注意，默认情况下不会代理对 root 的请求。 要启用根代理，应将 <a href="#devserverdevmiddleware"><code>devMiddleware.index</code></a> 选项指定为虚假值：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    devMiddleware<span class="token operator">:</span> <span class="token punctuation">{</span>
      index<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// specify to enable root proxying</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">context</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      target<span class="token operator">:</span> <span class="token string">&#x27;http://localhost:1234&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>默认情况下，代理时会保留主机头的来源，可以将 <code>changeOrigin</code> 设置为 <code>true</code> 以覆盖此行为。 在某些情况下，例如使用 <a href="https://en.wikipedia.org/wiki/Virtual_hosting#Name-based">name-based virtual hosted sites</a>，它很有用。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&#x27;/api&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        target<span class="token operator">:</span> <span class="token string">&#x27;http://localhost:3000&#x27;</span><span class="token punctuation">,</span>
        changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="devserverserver"></span>devServer.server<a href="#devserverserver" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>&#x27;http&#x27; | &#x27;https&#x27; | &#x27;spdy&#x27;</code> <code>string</code> <code>object</code></p><span class="badge">v4.4.0+</span><p>允许设置服务器和配置项（默认为 &#x27;http&#x27;）。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    server<span class="token operator">:</span> <span class="token string">&#x27;http&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --server-type http</code></pre><p>使用自签名证书通过 <code>HTTPS</code> 提供服务：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    server<span class="token operator">:</span> <span class="token string">&#x27;https&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --server-type https</code></pre><p>使用 <a href="https://www.npmjs.com/package/spdy">spdy</a> 使用自签名证书通过 <code>HTTP/2</code> 提供服务：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    server<span class="token operator">:</span> <span class="token string">&#x27;spdy&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --server-type spdy</code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>该配置项在 Node 15.0.0 及以上的版本会被忽略，因为 <a href="https://github.com/spdy-http2/node-spdy/issues/380">spdy 在这些版本中不会正常工作</a>。一旦 <a href="https://expressjs.com/">Express</a> 支持 Node 内建 HTTP/2，dev server 会进行迁移。</p></aside><p>使用对象语法提供自己的证书：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    server<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;https&#x27;</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        ca<span class="token operator">:</span> <span class="token string">&#x27;./path/to/server.pem&#x27;</span><span class="token punctuation">,</span>
        pfx<span class="token operator">:</span> <span class="token string">&#x27;./path/to/server.pfx&#x27;</span><span class="token punctuation">,</span>
        key<span class="token operator">:</span> <span class="token string">&#x27;./path/to/server.key&#x27;</span><span class="token punctuation">,</span>
        cert<span class="token operator">:</span> <span class="token string">&#x27;./path/to/server.crt&#x27;</span><span class="token punctuation">,</span>
        passphrase<span class="token operator">:</span> <span class="token string">&#x27;webpack-dev-server&#x27;</span><span class="token punctuation">,</span>
        requestCert<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --server-type https --server-options-key ./path/to/server.key --server-options-cert ./path/to/server.crt --server-options-ca ./path/to/ca.pem --server-options-passphrase webpack-dev-server</code></pre><p>It also allows you to set additional <a href="https://nodejs.org/api/tls.html#tls_tls_createsecurecontext_options">TLS options</a> like <code>minVersion</code> and you can directly pass the contents of respective files:</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;fs&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    server<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;https&#x27;</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        minVersion<span class="token operator">:</span> <span class="token string">&#x27;TLSv1.1&#x27;</span><span class="token punctuation">,</span>
        key<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;./server.key&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        pfx<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;./server.pfx&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        cert<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;./server.crt&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        ca<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;./ca.pem&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        passphrase<span class="token operator">:</span> <span class="token string">&#x27;webpack-dev-server&#x27;</span><span class="token punctuation">,</span>
        requestCert<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>如果指定的 <code>server.options.ca</code> 将会被使用的话，不要同时指定 <code>server.options.ca</code> 与 <code>server.options.cacert</code> 配置项。<code>server.options.cacert</code> 已弃用并且会在下一个大版本中移除。</p></aside><h2><span id="devserversetupexitsignals"></span>devServer.setupExitSignals<a href="#devserversetupexitsignals" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = true</code></p><p>允许在 <code>SIGINT</code> 和 <code>SIGTERM</code> 信号时关闭开发服务器和退出进程。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    setupExitSignals<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="devserversetupmiddlewares"></span>devServer.setupMiddlewares<a href="#devserversetupmiddlewares" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>function (middlewares, devServer)</code></p><span class="badge">v4.7.0+</span><p>提供执行自定义函数和应用自定义中间件的能力。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">setupMiddlewares</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">middlewares<span class="token punctuation">,</span> devServer</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>devServer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack-dev-server is not defined&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      devServer<span class="token punctuation">.</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#x27;/setup-middleware/some/path&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#x27;setup-middlewares option GET&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 如果你想在所有其他中间件之前运行一个中间件或者当你从 `onBeforeSetupMiddleware` 配置项迁移时，</span>
      <span class="token comment">// 可以使用 `unshift` 方法</span>
      middlewares<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&#x27;first-in-array&#x27;</span><span class="token punctuation">,</span>
        <span class="token comment">// `path` 是可选的</span>
        path<span class="token operator">:</span> <span class="token string">&#x27;/foo/path&#x27;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">middleware</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#x27;Foo!&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 如果你想在所有其他中间件之后运行一个中间件或者当你从 `onAfterSetupMiddleware` 配置项迁移时，</span>
      <span class="token comment">// 可以使用 `push` 方法</span>
      middlewares<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&#x27;hello-world-test-one&#x27;</span><span class="token punctuation">,</span>
        <span class="token comment">// `path` 是可选的</span>
        path<span class="token operator">:</span> <span class="token string">&#x27;/foo/bar&#x27;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">middleware</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#x27;Foo Bar!&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      middlewares<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#x27;Hello World!&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> middlewares<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="devserverstatic"></span>devServer.static<a href="#devserverstatic" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean</code> <code>string</code> <code>object</code> <code>[string, object]</code></p><p>该配置项允许配置从目录提供静态文件的选项（默认是 &#x27;public&#x27; 文件夹）。将其设置为 <code>false</code> 以禁用：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --static</code></pre><p>禁用该功能：</p><pre><code class="hljs language-bash">npx webpack serve --no-static</code></pre><p>监听单个目录：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;assets&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --static assets</code></pre><p>监听多个静态资源目录：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;assets&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;css&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --static assets --static css</code></pre><h3><span id="directory"></span>directory<a href="#directory" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string = path.join(process.cwd(), &#x27;public&#x27;)</code></p><p>告诉服务器从哪里提供内容。只有在你希望提供静态文件时才需要这样做。<a href="#publicpath"><code>static.publicPath</code></a> 将会被用来决定应该从哪里提供 bundle，并具有优先级。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      directory<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;public&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>提供一个对象数组，以防你有多个静态资源文件夹：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        directory<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;assets&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        directory<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;css&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>推荐使用绝对路径。</p></aside><h3><span id="staticOptions"></span>staticOptions<a href="#staticOptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>object</code></p><p>可以配置从 <a href="#directory"><code>static.directory</code></a> 提供静态文件的高级选项。关于可用配置项可以插件 <a href="http://expressjs.com/en/4x/api.html#express.static">Express 文档</a>。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      staticOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        redirect<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="publicpath"></span>publicPath<a href="#publicpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string = &#x27;/&#x27;</code> <code>[string]</code></p><p>告诉服务器在哪个 URL 上提供 <a href="#directory"><code>static.directory</code></a> 的内容。例如为在 <code>/serve-public-path-url/manifest.json</code> 中的 <code>assets/manifest.json</code> 提供服务，你的配置项应该像下面这样：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      directory<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;assets&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      publicPath<span class="token operator">:</span> <span class="token string">&#x27;/serve-public-path-url&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>提供一个对象数组，以防你有多个静态文件夹：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        directory<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;assets&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        publicPath<span class="token operator">:</span> <span class="token string">&#x27;/serve-public-path-url&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        directory<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;css&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        publicPath<span class="token operator">:</span> <span class="token string">&#x27;/other-serve-public-path-url&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="serveindex"></span>serveIndex<a href="#serveindex" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code> <code>object = { icons: true }</code></p><p>告诉开发服务器启用后使用 <a href="https://github.com/expressjs/serve-index"><code>serveIndex</code></a> 中间件。</p><p><a href="https://github.com/expressjs/serve-index"><code>serveIndex</code></a> 中间件会在查看没有 index.html 文件的目录时生成目录列表。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      directory<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;public&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      serveIndex<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --static-serve-index</code></pre><p>禁用该功能：</p><pre><code class="hljs language-bash">npx webpack serve --no-static-serve-index</code></pre><h3><span id="watch"></span>watch<a href="#watch" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code> <code>object</code></p><p>通过 <a href="#directory"><code>static.directory</code></a> 配置项告诉 dev-server 监听文件。默认启用，文件更改将触发整个页面重新加载。可以通过将 <code>watch</code> 设置为 <code>false</code> 禁用。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      directory<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;public&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      watch<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>通过 CLI 使用：</p><pre><code class="hljs language-bash">npx webpack serve --static-watch</code></pre><p>禁用该功能：</p><pre><code class="hljs language-bash">npx webpack serve --no-static-watch</code></pre><p>可以配置高级选项以监听 <a href="#directory"><code>static.directory</code></a> 中的静态文件。关于可用选项可以查看 <a href="https://github.com/paulmillr/chokidar"><code>chokidar</code></a> 文档。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      directory<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;public&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      watch<span class="token operator">:</span> <span class="token punctuation">{</span>
        ignored<span class="token operator">:</span> <span class="token string">&#x27;*.txt&#x27;</span><span class="token punctuation">,</span>
        usePolling<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="devserverwatchfiles"></span>devServer.watchFiles<a href="#devserverwatchfiles" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code> <code>object</code> <code>[string, object]</code></p><p>该配置项允许你配置 globs/directories/files 来监听文件变化。例如：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    watchFiles<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;src/**/*.php&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;public/**/*&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>可以配置高级选项来监听文件。关于可用选项可以查看 <a href="https://github.com/paulmillr/chokidar"><code>chokidar</code></a> 文档。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    watchFiles<span class="token operator">:</span> <span class="token punctuation">{</span>
      paths<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;src/**/*.php&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;public/**/*&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        usePolling<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="devserverwebsocketserver"></span>devServer.webSocketServer<a href="#devserverwebsocketserver" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>false | &#x27;sockjs&#x27; | &#x27;ws&#x27;</code> <code>string</code> <code>function</code> <code>object</code></p><p>该配置项允许我们选择当前的 web-socket 服务器或者提供自定义的 web-socket 服务器实现。</p><p>当前默认模式为 <code>&#x27;ws&#x27;</code>。该模式使用 <a href="https://www.npmjs.com/package/ws"><code>ws</code></a> 作为服务器，客户端中的 WebSockets。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    webSocketServer<span class="token operator">:</span> <span class="token string">&#x27;ws&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>为了创建一个自定义服务端实现，可以创建一个拓展 <a href="https://github.com/webpack/webpack-dev-server/blob/master/lib/servers/BaseServer.js"><code>BaseServer</code></a> 的类。</p><p>使用 <code>CustomServer.js</code> 导出的类实现自定义 WebSocket 客户端并兼容<code>ws</code>服务端：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    client<span class="token operator">:</span> <span class="token punctuation">{</span>
      webSocketTransport<span class="token operator">:</span> <span class="token string">&#x27;ws&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    webSocketServer<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;./CustomServer&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>使用自定义且兼容的 WebSocket 客户端以及服务端实现：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    client<span class="token operator">:</span> <span class="token punctuation">{</span>
      webSocketTransport<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;./CustomClient&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    webSocketServer<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;./CustomServer&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h1><span id="Cache"></span>Cache<a href="#Cache" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<h2><span id="cache"></span>cache<a href="#cache" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean</code> <code>object</code></p><p>缓存生成的 webpack 模块和 chunk，来改善构建速度。<code>cache</code> 会在<a href="/configuration/mode/#mode-development"><code>开发</code> 模式</a>被设置成 <code>type: &#x27;memory&#x27;</code> 而且在 <a href="/configuration/mode/#mode-production"><code>生产</code> 模式</a> 中被禁用。 <code>cache: true</code> 与 <code>cache: { type: &#x27;memory&#x27; }</code> 配置作用一致。 传入 <code>false</code> 会禁用缓存:</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  cache<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>当将 <code>cache.type</code> 设置为 <code>&#x27;filesystem&#x27;</code> 是会开放更多的可配置项。</p><h3><span id="cacheallowcollectingmemory"></span>cache.allowCollectingMemory<a href="#cacheallowcollectingmemory" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>收集在反序列化期间分配的未使用的内存，仅当 <a href="#cachetype"><code>cache.type</code></a> 设置为 <code>&#x27;filesystem&#x27;</code> 时生效。这需要将数据复制到更小的缓冲区中，并有性能成本。</p><ul><li>Type: <code>boolean</code><ul><li>It defaults to <code>false</code> in production mode and <code>true</code> in development mode.</li></ul></li><li><span class="badge">5.35.0+</span></li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;filesystem&#x27;</span><span class="token punctuation">,</span>
    allowCollectingMemory<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cachebuilddependencies"></span>cache.buildDependencies<a href="#cachebuilddependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>object</code></p><p><code>cache.buildDependencies</code> 是一个针对构建的额外代码依赖的数组对象。webpack 将使用这些项和所有依赖项的哈希值来使文件系统缓存失效。</p><p>默认是 <code>webpack/lib</code> 来获取 webpack 的所有依赖项。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>推荐在 webpack 配置中设置 <code>cache.buildDependencies.config: [__filename]</code> 来获取最新配置以及所有依赖项。</p></aside><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    buildDependencies<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// This makes all dependencies of this file - build dependencies</span>
      config<span class="token operator">:</span> <span class="token punctuation">[</span>__filename<span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// 默认情况下 webpack 与 loader 是构建依赖。</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cachecachedirectory"></span>cache.cacheDirectory<a href="#cachecachedirectory" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string</code></p><p>缓存的。默认为 <code>node_modules/.cache/webpack</code>。</p><p><code>cache.cacheDirectory</code> 选项仅当 <a href="#cachetype"><code>cache.type</code></a> 被设置成 <code>&#x27;filesystem&#x27;</code> 才可用。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;filesystem&#x27;</span><span class="token punctuation">,</span>
    cacheDirectory<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;.temp_cache&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>最终的缓存目标是 <code>cache.cacheDirectory</code> + <code>cache.name</code> 的混合。</p></aside><h3><span id="cachecachelocation"></span>cache.cacheLocation<a href="#cachecachelocation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string</code></p><p>缓存的路径。默认值为 <code>path.resolve(cache.cacheDirectory, cache.name)</code>.</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;filesystem&#x27;</span><span class="token punctuation">,</span>
    cacheLocation<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;.test_cache&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cachecacheunaffected"></span>cache.cacheUnaffected<a href="#cachecacheunaffected" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>对未改变的模块进行缓存计算，只引用未改变的模块。它只能在 <a href="#cachetype"><code>cache.type</code></a> 值为 <code>&#x27;memory&#x27;</code> 时使用，除此之外，必须启用 <a href="/configuration/experiments/#experimentscacheunaffected"><code>experiments.cacheUnaffected</code></a> 配置项。</p><ul><li>类型：<code>boolean</code></li><li>v5.54.0+</li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;memory&#x27;</span><span class="token punctuation">,</span>
    cacheUnaffected<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cachecompression"></span>cache.compression<a href="#cachecompression" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>false | &#x27;gzip&#x27; | &#x27;brotli&#x27;</code></p><span class="badge">5.42.0+</span><p>用于缓存文件的压缩类型。<code>development</code> 模式下默认为 <code>false</code>，<code>production</code> 模式下默认为 <code>&#x27;gzip&#x27;</code>。</p><p><code>cache.compression</code> 配置项仅在 <a href="#cachetype"><code>cache.type</code></a> 设为 <code>&#x27;filesystem&#x27;</code> 时可用。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;filesystem&#x27;</span><span class="token punctuation">,</span>
    compression<span class="token operator">:</span> <span class="token string">&#x27;gzip&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cachehashalgorithm"></span>cache.hashAlgorithm<a href="#cachehashalgorithm" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string</code></p><p>用于哈希生成的算法。详情请参阅 <a href="https://nodejs.org/api/crypto.html">Node.js crypto</a>。默认值为 <code>md4</code>.</p><p><code>cache.hashAlgorithm</code> 选项仅当 <a href="#cachetype"><code>cache.type</code></a> 设置成 <code>&#x27;filesystem&#x27;</code> 才可配置。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;filesystem&#x27;</span><span class="token punctuation">,</span>
    hashAlgorithm<span class="token operator">:</span> <span class="token string">&#x27;md4&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cacheidletimeout"></span>cache.idleTimeout<a href="#cacheidletimeout" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number = 60000</code></p><p>时间以毫秒为单位。<code>cache.idleTimeout</code> 表示缓存存储发生的时间间隔。</p><p><code>cache.idleTimeout</code> 配置项仅在 [<code>cache.type</code>] <code>&#x27;filesystem&#x27;</code> 时生效。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//..</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;filesystem&#x27;</span><span class="token punctuation">,</span>
    idleTimeout<span class="token operator">:</span> <span class="token number">60000</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cacheidletimeoutafterlargechanges"></span>cache.idleTimeoutAfterLargeChanges<a href="#cacheidletimeoutafterlargechanges" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number = 1000</code></p><span class="badge">5.41.0+</span><p>以毫秒为单位。<code>cache.idleTimeoutAfterLargeChanges</code> 是当检测到较大的更改时，缓存存储应在此之后发生的时间段。</p><p><code>cache.idleTimeoutAfterLargeChanges</code> 仅在 <a href="#cachetype"><code>cache.type</code></a> 设为 <code>&#x27;filesystem&#x27;</code> 时可用。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//..</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;filesystem&#x27;</span><span class="token punctuation">,</span>
    idleTimeoutAfterLargeChanges<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cacheidletimeoutforinitialstore"></span>cache.idleTimeoutForInitialStore<a href="#cacheidletimeoutforinitialstore" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number = 5000</code></p><p>单位毫秒。 <code>cache.idleTimeoutForInitialStore</code> 是在初始缓存存储发生后的时间段。</p><p><code>cache.idleTimeoutForInitialStore</code> 配置项仅在 [<code>cache.type</code>] <code>&#x27;filesystem&#x27;</code> 时生效。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//..</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;filesystem&#x27;</span><span class="token punctuation">,</span>
    idleTimeoutForInitialStore<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cachemanagedpaths"></span>cache.managedPaths<a href="#cachemanagedpaths" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>[string] = [&#x27;./node_modules&#x27;]</code></p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>已迁移到 <a href="/configuration/other-options/#managedpaths">snapshot.managedPaths</a></p></aside><p><code>cache.managedPaths</code> 是仅托管路径的包管理器数组。webpack 将避免将他们进行哈希和时间戳处理，假设版本是唯一的，并将其用作快照（用于内存和文件系统缓存）。</p><h3><span id="cachemaxage"></span>cache.maxAge<a href="#cachemaxage" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number = 5184000000</code></p><span class="badge">5.30.0+</span><p>允许未使用的缓存留在文件系统缓存中的时间（以毫秒为单位）；默认为一个月。</p><p><code>cache.maxAge</code> 仅在 <a href="#cachetype"><code>cache.type</code></a> 设置为 <code>&#x27;filesystem&#x27;</code> 时生效。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;filesystem&#x27;</span><span class="token punctuation">,</span>
    maxAge<span class="token operator">:</span> <span class="token number">5184000000</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cachemaxgenerations"></span>cache.maxGenerations<a href="#cachemaxgenerations" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number</code></p><span class="badge">5.30.0+</span><p>定义内存缓存中未使用的缓存项的生命周期。</p><ul><li><p><code>cache.maxGenerations: 1</code>: 在一次编译中未使用的缓存被删除。</p></li><li><p><code>cache.maxGenerations: Infinity</code>: 缓存将永远保存。</p></li></ul><p><code>cache.maxGenerations</code> 配置项仅在 <a href="#cachetype"><code>cache.type</code></a> 设置为 <code>&#x27;memory&#x27;</code> 时有效。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;memory&#x27;</span><span class="token punctuation">,</span>
    maxGenerations<span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cachemaxMemoryGenerations-cachemaxMemorygenerations"></span>cache.maxMemoryGenerations $#cachemaxMemorygenerations$<a href="#cachemaxMemoryGenerations-cachemaxMemorygenerations" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number</code></p><span class="badge">5.30.0+</span><p>定义内存缓存中未使用的缓存项的生命周期。</p><ul><li><p><code>cache.maxMemoryGenerations: 0</code>: 持久化缓存不会使用额外的内存缓存。它只将项目缓存到内存中，直到它们被序列化到磁盘。一旦序列化，下一次读取将再次从磁盘反序列化它们。这种模式将最小化内存使用，但会带来性能成本。</p></li><li><p><code>cache.maxMemoryGenerations: 1</code>: 这将从内存缓存中清除已序列化且在至少一次编译中未使用的项。当再次使用它们时，它们将从磁盘反序列化。这种模式将最小化内存使用量，同时仍将活动项保留在内存缓存中。</p></li><li><p><code>cache.maxMemoryGenerations</code>: 大于 0 的小数字将为 GC 操作带来性能成本。它会随着数字的增加而降低。</p></li><li><p><code>cache.maxMemoryGenerations</code>: <code>development</code> 模式下默认为 10，<code>production</code> 模式下默认为 <code>Infinity</code>。</p></li></ul><p><code>cache.maxMemoryGenerations</code> 配置项仅在 <a href="#cachetype"><code>cache.type</code></a> 设置为 <code>&#x27;filesystem&#x27;</code> 时有效。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;filesystem&#x27;</span><span class="token punctuation">,</span>
    maxMemoryGenerations<span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cachememorycacheunaffected"></span>cache.memoryCacheUnaffected<a href="#cachememorycacheunaffected" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>对未改变的模块进行缓存计算，并且只引用内存中未改变的模块。它只能在 <a href="#cachetype"><code>cache.type</code></a> 值为 <code>&#x27;filesystem&#x27;</code> 时使用，除此之外，必须启用 <a href="/configuration/experiments/#experimentscacheunaffected"><code>experiments.cacheUnaffected</code></a> 配置项。</p><ul><li>类型：<code>boolean</code></li><li>v5.54.0+</li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;filesystem&#x27;</span><span class="token punctuation">,</span>
    memoryCacheUnaffected<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cachename"></span>cache.name<a href="#cachename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string</code></p><p>缓存的名称。不同的名字会导致不同的的共存的缓存。默认值为 <code>${config.name}-${config.mode}</code>。使用 <code>cache.name</code> 当你有多份配置的时候，是比较合理的因为会有配置会有独立的缓存。</p><p><code>cache.name</code> 选项仅当 <a href="#cachetype"><code>cache.type</code></a> 被设置成 <code>&#x27;filesystem&#x27;</code> 的时候可进行配置。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;filesystem&#x27;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&#x27;AppBuildCache&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cacheprofile"></span>cache.profile<a href="#cacheprofile" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = false</code></p><p>跟踪并记录各个 <code>&#x27;filesystem&#x27;</code> 缓存项的详细时间信息。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;filesystem&#x27;</span><span class="token punctuation">,</span>
    profile<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cachestore"></span>cache.store<a href="#cachestore" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string = &#x27;pack&#x27;: &#x27;pack&#x27;</code></p><p><code>cache.store</code> 告诉 webpack 什么时候将数据存放在文件系统中。</p><ul><li><code>&#x27;pack&#x27;</code>: 当编译器闲置时候，将缓存数据都存放在一个文件中</li></ul><p><code>cache.store</code> 选项仅当 <a href="#cachetype"><code>cache.type</code></a> 设置成 <code>&#x27;filesystem&#x27;</code> 才可配置。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p><code>pack</code> 是 webpack 5.0.x 起唯一支持的类型</p></aside><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;filesystem&#x27;</span><span class="token punctuation">,</span>
    store<span class="token operator">:</span> <span class="token string">&#x27;pack&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cachetype"></span>cache.type<a href="#cachetype" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string: &#x27;memory&#x27; | &#x27;filesystem&#x27;</code></p><p>将 <code>cache</code> 类型设置为内存或者文件系统。<code>memory</code> 选项很简单，它告诉 webpack 在内存中存储缓存，不允许额外的配置：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;memory&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="cacheversion"></span>cache.version<a href="#cacheversion" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string = &#x27;&#x27;</code></p><p>缓存数据的版本。不同版本不会允许重用缓存和重载当前的内容。当配置以一种无法重用缓存的方式改变时，要更新缓存的版本。这会让缓存失效。</p><p><code>cache.version</code> 选项仅当 <a href="#cachetype"><code>cache.type</code></a> 设置成 <code>&#x27;filesystem&#x27;</code> 才可配置。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&#x27;filesystem&#x27;</span><span class="token punctuation">,</span>
    version<span class="token operator">:</span> <span class="token string">&#x27;your_version&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>在具有不同选项的调用之间不要共享缓存。</p></aside><h2><span id="setup-cache-in-cicd-system"></span>在 CI/CD 系统中设置缓存<a href="#setup-cache-in-cicd-system" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>文件系统缓存允许在 CI 的构建之间共享缓存。为了设置设置缓存：</p><ul><li>CI 应该有一个在构建之间共享缓存的配置项。</li><li>CI 应该在相同的绝对路径中运行任务。这非常重要，因为 webpack 缓存文件存储绝对路径。</li></ul><h3><span id="GitLab-CICD"></span>GitLab CI/CD<a href="#GitLab-CICD" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>以下是一些通用配置</p><pre><code class="hljs language-yaml"><span class="token key atrule">variables</span><span class="token punctuation">:</span>
  <span class="token comment"># 兜底使用 &quot;main&quot; 分支缓存，要求 GitLab Runner 版本为 13.4</span>
  <span class="token key atrule">CACHE_FALLBACK_KEY</span><span class="token punctuation">:</span> main

<span class="token comment"># 这是 webpack 构建任务</span>
<span class="token key atrule">build-job</span><span class="token punctuation">:</span>
  <span class="token key atrule">cache</span><span class="token punctuation">:</span>
    <span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token string">&#x27;$CI_COMMIT_REF_SLUG&#x27;</span> <span class="token comment"># 分支/tag 名称</span>
    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token comment"># 缓存文件夹</span>
      <span class="token comment"># 确保在这个任务中没有运行 &quot;npm ci&quot; 或者更改默认缓存文件夹</span>
      <span class="token comment"># 否则 &quot;npm ci&quot; 将会删除缓存文件</span>
      <span class="token punctuation">-</span> node_modules/.cache/webpack/</code></pre><h3><span id="Github-actions"></span>Github actions<a href="#Github-actions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><pre><code class="hljs language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/cache@v3
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token comment"># 缓存文件夹</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> node_modules/.cache/webpack/
    <span class="token key atrule">key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> GITHUB_REF_NAME <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">-</span>webpack<span class="token punctuation">-</span>build
    <span class="token comment"># 兜底使用 &quot;main&quot; 分支缓存</span>
    <span class="token key atrule">restore-keys</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
      main-webpack-build</span></code></pre><h1><span id="Devtool"></span>Devtool<a href="#Devtool" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>此选项控制是否生成，以及如何生成 source map。</p><p>使用 <a href="/plugins/source-map-dev-tool-plugin"><code>SourceMapDevToolPlugin</code></a> 进行更细粒度的配置。查看 <a href="/loaders/source-map-loader"><code>source-map-loader</code></a> 来处理已有的 source map。</p><h2><span id="devtool"></span>devtool<a href="#devtool" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string = &#x27;eval&#x27;</code> <code>false</code></p><p>选择一种 <a href="http://blog.teamtreehouse.com/introduction-source-maps">source map</a> 风格来增强调试过程。不同的值会明显影响到构建(build)和重新构建(rebuild)的速度。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>webpack 仓库中包含一个 <a href="https://github.com/webpack/webpack/tree/master/examples/source-map">显示所有 <code>devtool</code> 变体效果的示例</a>。这些例子或许会有助于你理解这些差异之处。</p></aside><aside class="tip"><h6 class="tip__prefix">提示</h6><p>你可以直接使用 <code>SourceMapDevToolPlugin</code>/<code>EvalSourceMapDevToolPlugin</code> 来替代使用 <code>devtool</code> 选项，因为它有更多的选项。切勿同时使用 <code>devtool</code> 选项和 <code>SourceMapDevToolPlugin</code>/<code>EvalSourceMapDevToolPlugin</code> 插件。<code>devtool</code> 选项在内部添加过这些插件，所以你最终将应用两次插件。</p></aside><table><thead><tr><th>devtool</th><th>performance</th><th>production</th><th>quality</th><th>comment</th></tr></thead><tbody><tr><td data-th="devtool"><span>(none)</span></td><td data-th="performance"><span><strong>build</strong>: fastest<br/><br/><strong>rebuild</strong>: fastest</span></td><td data-th="production"><span>yes</span></td><td data-th="quality"><span>bundle</span></td><td data-th="comment"><span>Recommended choice for production builds with maximum performance.</span></td></tr><tr><td data-th="devtool"><span><strong><code>eval</code></strong></span></td><td data-th="performance"><span><strong>build</strong>: fast<br/><br/><strong>rebuild</strong>: fastest</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>generated</span></td><td data-th="comment"><span>Recommended choice for development builds with maximum performance.</span></td></tr><tr><td data-th="devtool"><span><code>eval-cheap-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: ok<br/><br/><strong>rebuild</strong>: fast</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>transformed</span></td><td data-th="comment"><span>Tradeoff choice for development builds.</span></td></tr><tr><td data-th="devtool"><span><code>eval-cheap-module-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: slow<br/><br/><strong>rebuild</strong>: fast</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>original lines</span></td><td data-th="comment"><span>Tradeoff choice for development builds.</span></td></tr><tr><td data-th="devtool"><span><strong><code>eval-source-map</code></strong></span></td><td data-th="performance"><span><strong>build</strong>: slowest<br/><br/><strong>rebuild</strong>: ok</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>original</span></td><td data-th="comment"><span>Recommended choice for development builds with high quality SourceMaps.</span></td></tr><tr><td data-th="devtool"><span><code>cheap-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: ok<br/><br/><strong>rebuild</strong>: slow</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>transformed</span></td><td></td></tr><tr><td data-th="devtool"><span><code>cheap-module-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: slow<br/><br/><strong>rebuild</strong>: slow</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>original lines</span></td><td></td></tr><tr><td data-th="devtool"><span><strong><code>source-map</code></strong></span></td><td data-th="performance"><span><strong>build</strong>: slowest<br/><br/><strong>rebuild</strong>: slowest</span></td><td data-th="production"><span>yes</span></td><td data-th="quality"><span>original</span></td><td data-th="comment"><span>Recommended choice for production builds with high quality SourceMaps.</span></td></tr><tr><td data-th="devtool"><span><code>inline-cheap-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: ok<br/><br/><strong>rebuild</strong>: slow</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>transformed</span></td><td></td></tr><tr><td data-th="devtool"><span><code>inline-cheap-module-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: slow<br/><br/><strong>rebuild</strong>: slow</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>original lines</span></td><td></td></tr><tr><td data-th="devtool"><span><code>inline-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: slowest<br/><br/><strong>rebuild</strong>: slowest</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>original</span></td><td data-th="comment"><span>Possible choice when publishing a single file</span></td></tr><tr><td data-th="devtool"><span><code>eval-nosources-cheap-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: ok<br/><br/><strong>rebuild</strong>: fast</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>transformed</span></td><td data-th="comment"><span>source code not included</span></td></tr><tr><td data-th="devtool"><span><code>eval-nosources-cheap-module-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: slow<br/><br/><strong>rebuild</strong>: fast</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>original lines</span></td><td data-th="comment"><span>source code not included</span></td></tr><tr><td data-th="devtool"><span><code>eval-nosources-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: slowest<br/><br/><strong>rebuild</strong>: ok</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>original</span></td><td data-th="comment"><span>source code not included</span></td></tr><tr><td data-th="devtool"><span><code>inline-nosources-cheap-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: ok<br/><br/><strong>rebuild</strong>: slow</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>transformed</span></td><td data-th="comment"><span>source code not included</span></td></tr><tr><td data-th="devtool"><span><code>inline-nosources-cheap-module-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: slow<br/><br/><strong>rebuild</strong>: slow</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>original lines</span></td><td data-th="comment"><span>source code not included</span></td></tr><tr><td data-th="devtool"><span><code>inline-nosources-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: slowest<br/><br/><strong>rebuild</strong>: slowest</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>original</span></td><td data-th="comment"><span>source code not included</span></td></tr><tr><td data-th="devtool"><span><code>nosources-cheap-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: ok<br/><br/><strong>rebuild</strong>: slow</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>transformed</span></td><td data-th="comment"><span>source code not included</span></td></tr><tr><td data-th="devtool"><span><code>nosources-cheap-module-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: slow<br/><br/><strong>rebuild</strong>: slow</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>original lines</span></td><td data-th="comment"><span>source code not included</span></td></tr><tr><td data-th="devtool"><span><code>nosources-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: slowest<br/><br/><strong>rebuild</strong>: slowest</span></td><td data-th="production"><span>yes</span></td><td data-th="quality"><span>original</span></td><td data-th="comment"><span>source code not included</span></td></tr><tr><td data-th="devtool"><span><code>hidden-nosources-cheap-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: ok<br/><br/><strong>rebuild</strong>: slow</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>transformed</span></td><td data-th="comment"><span>no reference, source code not included</span></td></tr><tr><td data-th="devtool"><span><code>hidden-nosources-cheap-module-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: slow<br/><br/><strong>rebuild</strong>: slow</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>original lines</span></td><td data-th="comment"><span>no reference, source code not included</span></td></tr><tr><td data-th="devtool"><span><code>hidden-nosources-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: slowest<br/><br/><strong>rebuild</strong>: slowest</span></td><td data-th="production"><span>yes</span></td><td data-th="quality"><span>original</span></td><td data-th="comment"><span>no reference, source code not included</span></td></tr><tr><td data-th="devtool"><span><code>hidden-cheap-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: ok<br/><br/><strong>rebuild</strong>: slow</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>transformed</span></td><td data-th="comment"><span>no reference</span></td></tr><tr><td data-th="devtool"><span><code>hidden-cheap-module-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: slow<br/><br/><strong>rebuild</strong>: slow</span></td><td data-th="production"><span>no</span></td><td data-th="quality"><span>original lines</span></td><td data-th="comment"><span>no reference</span></td></tr><tr><td data-th="devtool"><span><code>hidden-source-map</code></span></td><td data-th="performance"><span><strong>build</strong>: slowest<br/><br/><strong>rebuild</strong>: slowest</span></td><td data-th="production"><span>yes</span></td><td data-th="quality"><span>original</span></td><td data-th="comment"><span>no reference. Possible choice when using SourceMap only for error reporting purposes.</span></td></tr></tbody></table><table><thead><tr><th>shortcut</th><th>explanation</th></tr></thead><tbody><tr><td data-th="shortcut"><span>performance: build</span></td><td data-th="explanation"><span>How is the performance of the initial build affected by the devtool setting?</span></td></tr><tr><td data-th="shortcut"><span>performance: rebuild</span></td><td data-th="explanation"><span>How is the performance of the incremental build affected by the devtool setting? Slow devtools might reduce development feedback loop in watch mode. The scale is different compared to the build performance, as one would expect rebuilds to be faster than builds.</span></td></tr><tr><td data-th="shortcut"><span>production</span></td><td data-th="explanation"><span>Does it make sense to use this devtool for production builds? It&#x27;s usually <code>no</code> when the devtool has a negative effect on user experience.</span></td></tr><tr><td data-th="shortcut"><span>quality: bundled</span></td><td data-th="explanation"><span>You will see all generated code of a chunk in a single blob of code. This is the raw output file without any devtooling support</span></td></tr><tr><td data-th="shortcut"><span>quality: generated</span></td><td data-th="explanation"><span>You will see the generated code, but each module is shown as separate code file in browser devtools.</span></td></tr><tr><td data-th="shortcut"><span>quality: transformed</span></td><td data-th="explanation"><span>You will see generated code after the preprocessing by loaders but before additional webpack transformations. Only source lines will be mapped and column information will be discarded resp. not generated. This prevents setting breakpoints in the middle of lines which doesn&#x27;t work together with minimizer.</span></td></tr><tr><td data-th="shortcut"><span>quality: original lines</span></td><td data-th="explanation"><span>You will see the original code that you wrote, assuming all loaders support SourceMapping. Only source lines will be mapped and column information will be discarded resp. not generated. This prevents setting breakpoints in the middle of lines which doesn&#x27;t work together with minimizer.</span></td></tr><tr><td data-th="shortcut"><span>quality: original</span></td><td data-th="explanation"><span>You will see the original code that you wrote, assuming all loaders support SourceMapping.</span></td></tr><tr><td data-th="shortcut"><span><code>eval-*</code> addition</span></td><td data-th="explanation"><span>generate SourceMap per module and attach it via eval. Recommended for development, because of improved rebuild performance. Note that there is a windows defender issue, which causes huge slowdown due to virus scanning.</span></td></tr><tr><td data-th="shortcut"><span><code>inline-*</code> addition</span></td><td data-th="explanation"><span>inline the SourceMap to the original file instead of creating a separate file.</span></td></tr><tr><td data-th="shortcut"><span><code>hidden-*</code> addition</span></td><td data-th="explanation"><span>no reference to the SourceMap added. When SourceMap is not deployed, but should still be generated, e. g. for error reporting purposes.</span></td></tr><tr><td data-th="shortcut"><span><code>nosources-*</code> addition</span></td><td data-th="explanation"><span>source code is not included in SourceMap. This can be useful when the original files should be referenced (further config options needed).</span></td></tr></tbody></table><aside class="tip"><h6 class="tip__prefix">提示</h6><p>验证 devtool 名称时， 我们期望使用某种模式， 注意不要混淆 devtool 字符串的顺序， 模式是： <code>[inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map</code>.</p></aside><p>其中一些值适用于开发环境，一些适用于生产环境。对于开发环境，通常希望更快速的 source map，需要添加到 bundle 中以增加体积为代价，但是对于生产环境，则希望更精准的 source map，需要从 bundle 中分离并独立存在。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>查看 <a href="/configuration/output/#outputsourcemapfilename"><code>output.sourceMapFilename</code></a> 自定义生成的 source map 的文件名。</p></aside><h3><span id="qualities"></span>品质说明(quality)<a href="#qualities" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>打包后的代码</code> - 将所有生成的代码视为一大块代码。你看不到相互分离的模块。</p><p><code>生成后的代码</code> - 每个模块相互分离，并用模块名称进行注释。可以看到 webpack 生成的代码。示例：你会看到类似 <code>var module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(42); module__WEBPACK_IMPORTED_MODULE_1__.a();</code>，而不是 <code>import {test} from &quot;module&quot;; test();</code>。</p><p><code>转换过的代码</code> - 每个模块相互分离，并用模块名称进行注释。可以看到 webpack 转换前、loader 转译后的代码。示例：你会看到类似 <code>import {test} from &quot;module&quot;; var A = function(_test) { ... }(test);</code>，而不是 <code>import {test} from &quot;module&quot;; class A extends test {}</code>。</p><p><code>原始源代码</code> - 每个模块相互分离，并用模块名称进行注释。你会看到转译之前的代码，正如编写它时。这取决于 loader 支持。</p><p><code>无源代码内容</code> - source map 中不包含源代码内容。浏览器通常会尝试从 web 服务器或文件系统加载源代码。你必须确保正确设置 <a href="/configuration/output/#output-devtoolmodulefilenametemplate"><code>output.devtoolModuleFilenameTemplate</code></a>，以匹配源代码的 url。</p><p><code>（仅限行）</code> - source map 被简化为每行一个映射。这通常意味着每个语句只有一个映射（假设你使用这种方式）。这会妨碍你在语句级别上调试执行，也会妨碍你在每行的一些列上设置断点。与压缩后的代码组合后，映射关系是不可能实现的，因为压缩工具通常只会输出一行。</p><h3><span id="development"></span>对于开发环境<a href="#development" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>以下选项非常适合开发环境：</p><p><code>eval</code> - 每个模块都使用 <code>eval()</code> 执行，并且都有 <code>//# sourceURL</code>。此选项会非常快地构建。主要缺点是，由于会映射到转换后的代码，而不是映射到原始代码（没有从 loader 中获取 source map），所以不能正确的显示行数。</p><p><code>eval-source-map</code> - 每个模块使用 <code>eval()</code> 执行，并且 source map 转换为 DataUrl 后添加到 <code>eval()</code> 中。初始化 source map 时比较慢，但是会在重新构建时提供比较快的速度，并且生成实际的文件。行数能够正确映射，因为会映射到原始代码中。它会生成用于开发环境的最佳品质的 source map。</p><p><code>eval-cheap-source-map</code> - 类似 <code>eval-source-map</code>，每个模块使用 <code>eval()</code> 执行。这是 &quot;cheap(低开销)&quot; 的 source map，因为它没有生成列映射(column mapping)，只是映射行数。它会忽略源自 loader 的 source map，并且仅显示转译后的代码，就像 <code>eval</code> devtool。</p><p><code>eval-cheap-module-source-map</code> - 类似 <code>eval-cheap-source-map</code>，并且，在这种情况下，源自 loader 的 source map 会得到更好的处理结果。然而，loader source map 会被简化为每行一个映射(mapping)。</p><h3><span id="special-cases"></span>特定场景<a href="#special-cases" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>以下选项对于开发环境和生产环境并不理想。他们是一些特定场景下需要的，例如，针对一些第三方工具。</p><p><code>inline-source-map</code> - source map 转换为 DataUrl 后添加到 bundle 中。</p><p><code>cheap-source-map</code> - 没有列映射(column mapping)的 source map，忽略 loader source map。</p><p><code>inline-cheap-source-map</code> - 类似 <code>cheap-source-map</code>，但是 source map 转换为 DataUrl 后添加到 bundle 中。</p><p><code>cheap-module-source-map</code> - 没有列映射(column mapping)的 source map，将 loader source map 简化为每行一个映射(mapping)。</p><p><code>inline-cheap-module-source-map</code> - 类似 <code>cheap-module-source-map</code>，但是 source mapp 转换为 DataUrl 添加到 bundle 中。</p><h3><span id="production"></span>对于生产环境<a href="#production" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>这些选项通常用于生产环境中：</p><p><code>(none)</code>（省略 <code>devtool</code> 选项） - 不生成 source map。这是一个不错的选择。</p><p><code>source-map</code> - 整个 source map 作为一个单独的文件生成。它为 bundle 添加了一个引用注释，以便开发工具知道在哪里可以找到它。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>你应该将你的服务器配置为，不允许普通用户访问 source map 文件！</p></aside><p><code>hidden-source-map</code> - 与 <code>source-map</code> 相同，但不会为 bundle 添加引用注释。如果你只想 source map 映射那些源自错误报告的错误堆栈跟踪信息，但不想为浏览器开发工具暴露你的 source map，这个选项会很有用。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>你不应将 source map 文件部署到 web 服务器。而是只将其用于错误报告工具。</p></aside><p><code>nosources-source-map</code> - 创建的 source map 不包含 <code>sourcesContent(源代码内容)</code>。它可以用来映射客户端上的堆栈跟踪，而无须暴露所有的源代码。你可以将 source map 文件部署到 web 服务器。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>这仍然会暴露反编译后的文件名和结构，但它不会暴露原始代码。</p></aside><aside class="tip"><h6 class="tip__prefix">提示</h6><p>如果默认的 webpack <code>minimizer</code> 被覆盖 (例如自定义 <code>terser-webpack-plugin</code> 选项)， 请确保将其替换配置为 <code>sourceMap: true</code> 以启用 SourceMap 支持。</p></aside><h1><span id="构建目标Targets"></span>构建目标(Targets)<a href="#%E6%9E%84%E5%BB%BA%E7%9B%AE%E6%A0%87Targets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>webpack 能够为多种环境或 <em>target</em> 构建编译。想要理解什么是 <code>target</code> 的详细信息，
请阅读 <a href="/concepts/targets/">target 概念页面</a>。</p><h2><span id="target"></span>target<a href="#target" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code> <code>[string]</code> <code>false</code></p><p>告知 webpack 为目标(target)指定一个环境。默认值为 <code>&quot;browserslist&quot;</code>，如果没有找到 browserslist 的配置，则默认为 <code>&quot;web&quot;</code></p><h3><span id="string"></span>string<a href="#string" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>通过 <a href="https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsApply.js"><code>WebpackOptionsApply</code></a>，
可以支持以下字符串值：</p><table><thead><tr><th>选项</th><th>描述</th></tr></thead><tbody><tr><td data-th="选项"><span><code>async-node</code></span></td><td data-th="描述"><span>编译为类 Node.js 环境可用（使用 fs 和 vm 异步加载分块）</span></td></tr><tr><td data-th="选项"><span><code>electron-main</code></span></td><td data-th="描述"><span>编译为 <a href="https://electronjs.org/">Electron</a> 主进程。</span></td></tr><tr><td data-th="选项"><span><code>electron-renderer</code></span></td><td data-th="描述"><span>编译为 <a href="https://electronjs.org/">Electron</a> 渲染进程，使用 <code>JsonpTemplatePlugin</code>,</span></td></tr><tr><td data-th="选项"><span><code>FunctionModulePlugin</code> 来为浏览器环境提供目标，使用 <code>NodeTargetPlugin</code> 和 <code>ExternalsPlugin</code></span></td><td></td></tr><tr><td data-th="选项"><span>为 CommonJS 和 Electron 内置模块提供目标。</span></td><td></td></tr><tr><td data-th="选项"><span><code>electron-preload</code></span></td><td data-th="描述"><span>编译为 <a href="https://electronjs.org/">Electron</a> 渲染进程，</span></td></tr><tr><td data-th="选项"><span>使用 <code>NodeTemplatePlugin</code> 且 <code>asyncChunkLoading</code> 设置为 <code>true</code> ，<code>FunctionModulePlugin</code> 来为浏览器提供目标，使用 <code>NodeTargetPlugin</code> 和 <code>ExternalsPlugin</code> 为 CommonJS 和 Electron 内置模块提供目标。</span></td><td></td></tr><tr><td data-th="选项"><span><code>node</code></span></td><td data-th="描述"><span>编译为类 Node.js 环境可用（使用 Node.js <code>require</code> 加载 chunks）</span></td></tr><tr><td data-th="选项"><span><code>node-webkit</code></span></td><td data-th="描述"><span>编译为 Webkit 可用，并且使用 jsonp 去加载分块。支持 Node.js 内置模块和 <a href="http://docs.nwjs.io/en/latest/"><code>nw.gui</code></a></span></td></tr><tr><td data-th="选项"><span>导入（实验性质）</span></td><td></td></tr><tr><td data-th="选项"><span><code>nwjs[[X].Y]</code></span></td><td data-th="描述"><span>等价于 <code>node-webkit</code></span></td></tr><tr><td data-th="选项"><span><code>web</code></span></td><td data-th="描述"><span>编译为类浏览器环境里可用 <strong>（默认）</strong></span></td></tr><tr><td data-th="选项"><span><code>webworker</code></span></td><td data-th="描述"><span>编译成一个 WebWorker</span></td></tr><tr><td data-th="选项"><span><code>esX</code></span></td><td data-th="描述"><span>编译为指定版本的 ECMAScript。例如，es5，es2020</span></td></tr><tr><td data-th="选项"><span><code>browserslist</code></span></td><td data-th="描述"><span>从 browserslist-config 中推断出平台和 ES 特性 <strong>（如果 browserslist 可用，其值则为默认）</strong></span></td></tr></tbody></table><p>例如，当 <code>target</code> 设置为 <code>&quot;electron-main&quot;</code>，webpack 引入多个 electron 特定的变量。</p><p>可指定 <code>node</code> 或者 <code>electron</code> 的版本。上表中使用 <code>[[X].Y]</code> 表示。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  target<span class="token operator">:</span> <span class="token string">&#x27;node12.18&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>它有助于确定可能用于生成运行时代码的 ES 特性（所有的 chunk 和模块都被运行时代码所包裹）</p><h4><span id="browserslist"></span>browserslist<a href="#browserslist" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>如果一个项目有 browserslist 配置，那么 webpack 将会使用它：</p><ul><li>确定可用于运行时代码的 ES 特性。</li><li>推断环境（例如：<code>last 2 node versions</code> 等价于 <code>target: node</code>，并会进行一些 <a href="/configuration/output/#outputenvironment"><code>output.environment</code></a> 设置).</li></ul><p>支持的 browserslist 值：</p><ul><li><code>browserslist</code> - 使用自动解析的 browserslist 配置和环境（从最近的 <code>package.json</code> 或 <code>BROWSERSLIST</code> 环境变量中获取，具体请查阅 <a href="https://github.com/browserslist/browserslist#queries">browserslist 文档</a>）</li><li><code>browserslist:modern</code> - 使用自动解析的 browserslist 配置中的 <code>modern</code> 环境</li><li><code>browserslist:last 2 versions</code> - 使用显式 browserslist 查询（配置将被忽略）</li><li><code>browserslist:/path/to/config</code> - 明确指定 browserslist 配置路径</li><li><code>browserslist:/path/to/config:modern</code> - 明确指定 browserslist 的配置路径和环境</li></ul><h3><span id="string"></span>[string]<a href="#string" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>当传递多个目标时，将使用共同的特性子集：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  target<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;web&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;es5&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Webpack 将生成 web 平台的运行时代码，并且只使用 ES5 相关的特性。</p><p>目前并不是所有的 target 都可以进行混合。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  target<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;web&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;node&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>此时会导致错误。webpack 暂时不支持 universal 的 target。</p><h3><span id="false"></span>false<a href="#false" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>如果上述列表中的预设 target 都不符合你的需求，你可以将 <code>target</code> 设置为 <code>false</code>，这将告诉 webpack 不使用任何插件。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  target<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>或者可以使用你想要指定的插件</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;webpack&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  target<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>web<span class="token punctuation">.</span>JsonpTemplatePlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>output<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>LoaderTargetPlugin</span><span class="token punctuation">(</span><span class="token string">&#x27;web&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>当没有提供 target 或 <a href="/configuration/output/#outputenvironment">environment</a> 特性的信息时，将默认使用 ES2015。</p><h1><span id="watch-和-watchOptions"></span>watch 和 watchOptions<a href="#watch-%E5%92%8C-watchOptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>Webpack 可以监听文件变化，当它们修改后会重新编译。这个页面介绍了如何启用这个功能，以及当 watch 无法正常运行的时候你可以做的一些调整。</p><h2><span id="watch"></span>watch<a href="#watch" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = false</code></p><p>启用 Watch 模式。这意味着在初始构建之后，webpack 将继续监听任何已解析文件的更改。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  watch<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p><a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> 和 <a href="https://github.com/webpack/webpack-dev-middleware">webpack-dev-middleware</a> 里 Watch 模式默认开启。</p></aside><h2><span id="watchoptions"></span><code>watchOptions</code><a href="#watchoptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>object</code></p><p>一组用来定制 watch 模式的选项：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  watchOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    aggregateTimeout<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    poll<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="watchoptionsaggregatetimeout"></span>watchOptions.aggregateTimeout<a href="#watchoptionsaggregatetimeout" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number = 20</code></p><p>当第一个文件更改，会在重新构建前增加延迟。这个选项允许 webpack 将这段时间内进行的任何其他更改都聚合到一次重新构建里。以毫秒为单位：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  watchOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    aggregateTimeout<span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="watchoptionsignored"></span>watchOptions.ignored<a href="#watchoptionsignored" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>RegExp</code> <code>string</code> <code>[string]</code></p><p>对于某些系统，监听大量文件会导致大量的 CPU 或内存占用。可以使用正则排除像 <code>node_modules</code> 如此庞大的文件夹：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  watchOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    ignored<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>此外，还可以使用 glob 模式：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  watchOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    ignored<span class="token operator">:</span> <span class="token string">&#x27;**/node_modules&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>也可以使用多 glob 匹配模式：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  watchOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    ignored<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;**/files/**/*.js&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;**/node_modules&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>此外，你还可以指定一个绝对路径：</p><pre><code class="hljs language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  watchOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    ignored<span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span>posix<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;./ignored-dir&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>当使用 glob 模式时，我们使用 <a href="https://github.com/fitzgen/glob-to-regexp"><code>glob-to-regexp</code></a> 将其转为正则表达式，因此，在使用 <code>watchOptions.ignored</code> 的 glob 模式之前，请确保自己熟悉它。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>如果你使用 <code>require.context</code>，webpack 会监听你的整个目录。你应该忽略一些文件和/或(and/or)目录，以便那些不需要监听的文件修改后不会触发重新构建。</p></aside><h3><span id="watchoptionspoll"></span>watchOptions.poll<a href="#watchoptionspoll" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = false</code> <code>number</code></p><p>通过传递 <code>true</code> 开启 <a href="https://en.wikipedia.org/wiki/Polling_(computer_science)">polling</a>，将会设置默认轮询间隔为 <a href="https://github.com/webpack/watchpack/blob/a54bcdb95759558ca5a9fc2819c4d71b771c162f/lib/DirectoryWatcher.js#L79"><code>5007</code></a>，或者指定毫秒为单位进行轮询。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  watchOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    poll<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// 每秒检查一次变动</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>如果监听没生效，试试这个选项吧。这会对 VirtualBox、WSL、Containers 或者 Docker 有所帮助。在这些情况下，使用轮询间隔并忽略 <code>/node_modules/</code> 这样的大文件夹，以保持最小的 CPU 使用率。</p></aside><h3><span id="watchoptionsfollowsymlinks"></span><code>watchOptions.followSymlinks</code><a href="#watchoptionsfollowsymlinks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>根据软链接查找文件。这通常是不需要的，因为 webpack 已经使用 <a href="/configuration/resolve/#resolvesymlinks"><code>resolve.symlinks</code></a> 解析了软链接。</p><ul><li><p>Type: <code>boolean</code></p></li><li><p>Example:</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  watchOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    followSymlinks<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><h3><span id="watchoptionsstdin"></span>watchOptions.stdin<a href="#watchoptionsstdin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>当 stdin 流结束时停止监听。</p><ul><li><p>类型：<code>boolean</code></p></li><li><p>示例：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  watchOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    stdin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><h2><span id="troubleshooting"></span>故障排除<a href="#troubleshooting" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>如果您遇到任何问题，请查看以下注意事项。对于 webpack 为何会忽略文件修改，这里有多种原因。</p><h3><span id="changes-seen-but-not-processed"></span>发现修改，但并未做处理<a href="#changes-seen-but-not-processed" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>在运行 webpack 时，通过使用 --progress 标志，来验证文件修改后，是否没有通知 webpack。如果进度显示保存，但没有输出文件，则可能是配置问题，而不是文件监视问题。</p><pre><code class="hljs language-bash">webpack --watch --progress</code></pre><h3><span id="not-enough-watchers"></span>没有足够的文件观察者<a href="#not-enough-watchers" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>确认系统中有足够多的文件观察者。如果这个值太低，webpack 中的文件观察者将无法识别修改：</p><pre><code class="hljs language-bash"><span class="token function">cat</span> /proc/sys/fs/inotify/max_user_watches</code></pre><p>Arch 用户，请将 <code>fs.inotify.max_user_watches=524288</code> 添加到 <code>/etc/sysctl.d/99-sysctl.conf</code> 中，然后执行 <code>sysctl --system</code>。 Ubuntu 用户（可能还有其他用户）请执行：<code>echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf &amp;&amp; sudo sysctl -p</code>。</p><h3><span id="macos-fsevents-bug"></span>macOS fsevents Bug<a href="#macos-fsevents-bug" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>在 macOS 中，某些情况下文件夹可能会损坏。请参阅<a href="https://github.com/livereload/livereload-site/blob/master/livereload.com/_articles/troubleshooting/os-x-fsevents-bug-may-prevent-monitoring-of-certain-folders.md">这篇文章</a>。</p><h3><span id="windows-paths"></span>Windows Paths<a href="#windows-paths" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>因为 webpack 期望获得多个配置选项的绝对路径（如 <code>__dirname + &#x27;/app/folder&#x27;</code>），所以 Windows 的路径分隔符 <code>\</code> 可能会破坏某些功能。</p><p>使用正确的分隔符。即 <code>path.resolve(__dirname, &#x27;app/folder&#x27;)</code> 或 <code>path.join(__dirname, &#x27;app&#x27;, &#x27;folder&#x27;)</code>。</p><h3><span id="vim"></span>Vim<a href="#vim" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>在某些机器上，Vim 预先将 <a href="http://vimdoc.sourceforge.net/htmldoc/options.html#&#x27;backupcopy&#x27;">backupcopy 选项</a> 设置为 <code>auto</code>。这可能会导致系统的文件监视机制出现问题。将此选项设置为 <code>yes</code> 可以确保创建文件的副本，并在保存时覆盖原始文件。</p><p><code>:set backupcopy=yes</code></p><h3><span id="saving-in-webstorm"></span>在 WebStorm 中保存<a href="#saving-in-webstorm" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>使用 JetBrains WebStorm IDE 时，你可能会发现保存修改过的文件，并不会按照预期触发观察者。尝试在设置中禁用 <code>Back up files before saving</code> 选项，该选项确定在原文件被覆盖之前，文件是否先保存到临时位置：取消选中 <code>File &gt; {Settings|Preferences} &gt; Appearance &amp; Behavior &gt; System Settings &gt; Back up files before saving</code>。在一些 webstorm 版本中，该配置项可能会被称为 &quot;safe write&quot;（首先将更改保存到临时文件）`。</p><h1><span id="外部扩展Externals"></span>外部扩展(Externals)<a href="#%E5%A4%96%E9%83%A8%E6%89%A9%E5%B1%95Externals" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p><code>externals</code> 配置选项提供了「从输出的 bundle 中排除依赖」的方法。相反，所创建的 bundle 依赖于那些存在于用户环境(consumer&#x27;s environment)中的依赖。此功能通常对 <strong>library 开发人员</strong>来说是最有用的，然而也会有各种各样的应用程序用到它。</p><h2><span id="externals"></span>externals<a href="#externals" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code> <code>object</code> <code>function</code> <code>RegExp</code> <code>[string, object, function, RegExp]</code></p><p><strong>防止</strong>将某些 <code>import</code> 的包(package)<strong>打包</strong>到 bundle 中，而是在运行时(runtime)再去从外部获取这些<em>扩展依赖(external dependencies)</em>。</p><p>例如，从 CDN 引入 <a href="https://jquery.com/">jQuery</a>，而不是把它打包：</p><p><strong>index.html</strong></p><pre><code class="hljs language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span>
  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://code.jquery.com/jquery-3.1.0.js<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk=<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>anonymous<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    jquery<span class="token operator">:</span> <span class="token string">&#x27;jQuery&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>这样就剥离了那些不需要改动的依赖模块，换句话，下面展示的代码还可以正常运行：</p><pre><code class="hljs language-javascript"><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">;</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>上面 <code>webpack.config.js</code> 中 <code>externals</code> 下指定的属性名称 <code>jquery</code> 表示 <code>import $ from &#x27;jquery&#x27;</code> 中的模块 <code>jquery</code> 应该从打包产物中排除。 为了替换这个模块，<code>jQuery</code> 值将用于检索全局 <code>jQuery</code> 变量，因为默认的外部库类型是 <code>var</code>，请参阅 <a href="#externalstype">externalsType</a>。</p><p>虽然我们在上面展示了一个使用外部全局变量的示例，但实际上可以以以下任何形式使用外部变量：全局变量、CommonJS、AMD、ES2015 模块，在 <a href="#externalstype">externalsType</a> 中查看更多信息。</p><h3><span id="string"></span>字符串<a href="#string" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>根据 <a href="#externalstype">externalsType</a>，这可能是全局变量的名称（参见 <a href="#externalsTypeglobal"><code>&#x27;global&#x27;</code></a>、<a href="#externalsTypethis"><code>&#x27;this&#x27;</code></a>、<a href="#externalsTypevar"><code>&#x27;var &#x27;</code></a>, <a href="#externalsTypewindow"><code>&#x27;window&#x27;</code></a>) 或模块的名称（参见 <code>amd</code>, <a href="#externalsTypecommonjs"><code>commonjs</code></a>, <a href="#externalsTypemodule"><code>module</code></a>, <code>umd</code>)。</p><p>如果你只定义 1 个 external，您也可以使用快捷语法：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token operator">:</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>equals to</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    jquery<span class="token operator">:</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>您可以使用 <code>${externalsType} ${libraryName}</code> 语法为外部指定 <a href="#externalstype">外部库类型</a>。 它将覆盖 <a href="#externalstype">externalsType</a> 选项中指定的默认外部库类型。</p><p>例如，如果外部库是一个 <a href="#externalsTypecommonjs">CommonJS 模块</a>，你可以指定</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    jquery<span class="token operator">:</span> <span class="token string">&#x27;commonjs jquery&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="string"></span>[string]<a href="#string" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    subtract<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;./math&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;subtract&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><code>subtract: [&#x27;./math&#x27;, &#x27;subtract&#x27;]</code> 允许你选择模块的一部分，其中 <code>./math</code> 是模块，并且你的包只需要 <code>subtract</code> 变量下的子集。</p><p>当 <code>externalsType</code> 为 <code>commonjs</code> 时，此示例将转换为 <code>require(&#x27;./math&#x27;).subtract;</code>，而当 <code>externalsType</code> 为 <code>window</code> 时，此示例将转换为 <code>window[&quot;./math&quot;][&quot;subtract&quot;];</code></p><p>与 <a href="#string">string 语法</a> 类似，你可以使用 <code>${externalsType} ${libraryName}</code> 语法在数组的第一项中指定外部库类型，例如：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    subtract<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;commonjs ./math&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;subtract&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="object"></span>对象<a href="#object" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><aside class="warning"><h6 class="warning__prefix">警告</h6><p>带有 <code>{ root, amd, commonjs, ... }</code> 的对象只允许用于 <a href="/configuration/output/#outputlibrarytarget"><code>libraryTarget: &#x27;umd&#x27;</code></a> 和 [<code>externalsType: &#x27;umd&#x27;</code>](#externalstype）。其他库的 target 不允许这样做。</p></aside><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    react<span class="token operator">:</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 或者</span>

  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    lodash<span class="token operator">:</span> <span class="token punctuation">{</span>
      commonjs<span class="token operator">:</span> <span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">,</span>
      amd<span class="token operator">:</span> <span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">,</span>
      root<span class="token operator">:</span> <span class="token string">&#x27;_&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// 指向全局变量</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 或者</span>

  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    subtract<span class="token operator">:</span> <span class="token punctuation">{</span>
      root<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;math&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;subtract&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>此语法用于描述外部 library 所有可用的访问方式。这里 <code>lodash</code> 这个外部 library 可以在 AMD 和 CommonJS 模块系统中通过 <code>lodash</code> 访问，但在全局变量形式下用 <code>_</code> 访问。<code>subtract</code> 可以通过全局 <code>math</code> 对象下的属性 <code>subtract</code> 访问（例如 <code>window[&#x27;math&#x27;][&#x27;subtract&#x27;]</code>）。</p><h3><span id="function"></span>函数<a href="#function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><ul><li><code>function ({ context, request, contextInfo, getResolve }, callback)</code></li><li><code>function ({ context, request, contextInfo, getResolve }) =&gt; promise</code> <span class="badge">5.15.0+</span></li></ul><p>对于 webpack 外部化，通过定义函数来控制行为，可能会很有帮助。例如，<a href="https://www.npmjs.com/package/webpack-node-externals">webpack-node-externals</a> 能够排除 <code>node_modules</code> 目录中所有模块，还提供一些选项，比如白名单 package(whitelist package)。</p><p>函数接收两个入参：</p><ul><li><code>ctx</code> (<code>object</code>)：包含文件详情的对象。<ul><li><code>ctx.context</code> (<code>string</code>): 包含引用的文件目录。</li><li><code>ctc.request</code> (<code>string</code>): 被请求引入的路径。</li><li><code>ctx.contextInfo</code> (<code>object</code>): 包含 issuer 的信息（如，layer 和 compiler）</li><li><code>ctx.getResolve</code> <span class="badge">5.15.0+</span>: 获取当前解析器选项的解析函数。</li></ul></li><li><code>callback</code> (<code>function (err, result, type)</code>): 用于指明模块如何被外部化的回调函数</li></ul><p>回调函数接收三个入参：</p><ul><li><code>err</code> (<code>Error</code>): 被用于表明在外部外引用的时候是否会产生错误。如果有错误，这将会是唯一被用到的参数。</li><li><code>result</code> (<code>string</code> <code>[string]</code> <code>object</code>): 描述外部化的模块。可以接受其它标准化外部化模块格式，(<a href="#string"><code>string</code></a>, <a href="#string"><code>[string]</code></a>，或 <a href="#object"><code>object</code></a>)。</li><li><code>type</code> (<code>string</code>): 可选的参数，用于指明模块的 <a href="#externalstype">external type</a>（如果它没在 <code>result</code> 参数中被指明）。</li></ul><p>作为例子，要外部化所有匹配一个正则表达式的引入，你可以像下面那样处理：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> context<span class="token punctuation">,</span> request <span class="token punctuation">}</span><span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/^yourregex$/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 使用 request 路径，将一个 commonjs 模块外部化</span>
        <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&#x27;commonjs &#x27;</span> <span class="token operator">+</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 继续下一步且不外部化引用</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>其它例子使用不同的模块格式：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  externals<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 该外部化的模块，是一个 `commonjs2` 的模块，且放在 `@scope/library` 目录中</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&#x27;@scope/library&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;commonjs2&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  externals<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 该外部化模块是一个全局变量叫作 `nameOfGlobal`.</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&#x27;nameOfGlobal&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  externals<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 该外部化模块是一个在`@scope/library`模块里的命名导出（named export）。</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;@scope/library&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;namedexport&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;commonjs&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  externals<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 外部化模块是一个 UMD 模块</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        root<span class="token operator">:</span> <span class="token string">&#x27;componentsGlobal&#x27;</span><span class="token punctuation">,</span>
        commonjs<span class="token operator">:</span> <span class="token string">&#x27;@scope/components&#x27;</span><span class="token punctuation">,</span>
        commonjs2<span class="token operator">:</span> <span class="token string">&#x27;@scope/components&#x27;</span><span class="token punctuation">,</span>
        amd<span class="token operator">:</span> <span class="token string">&#x27;components&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="regexp"></span>RegExp<a href="#regexp" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>匹配给定正则表达式的每个依赖，都将从输出 bundle 中排除。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token operator">:</span> <span class="token regex">/^(jquery|\$)$/i</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>这个示例中，所有名为 <code>jQuery</code> 的依赖（忽略大小写），或者 <code>$</code>，都会被外部化。</p><h3><span id="combining-syntaxes"></span>混用语法<a href="#combining-syntaxes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>有时你需要混用上面介绍的语法。这可以像以下这样操作：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 字符串</span>
      react<span class="token operator">:</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">,</span>
      <span class="token comment">// 对象</span>
      lodash<span class="token operator">:</span> <span class="token punctuation">{</span>
        commonjs<span class="token operator">:</span> <span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">,</span>
        amd<span class="token operator">:</span> <span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">,</span>
        root<span class="token operator">:</span> <span class="token string">&#x27;_&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// indicates global variable</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 字符串数组</span>
      subtract<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;./math&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;subtract&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 函数</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> context<span class="token punctuation">,</span> request <span class="token punctuation">}</span><span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/^yourregex$/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&#x27;commonjs &#x27;</span> <span class="token operator">+</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 正则表达式</span>
    <span class="token operator">/</span><span class="token operator">^</span><span class="token punctuation">(</span>jquery<span class="token operator">|</span>\$<span class="token punctuation">)</span>$<span class="token operator">/</span>i<span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p>如果你指定的 <code>externals</code> 未使用类型，则会使用<a href="/configuration/externals/#externalstype">默认类型</a>。例如 <code>externals: { react: &#x27;react&#x27; }</code> 会被替换成 <code>externals: { react: &#x27;commonjs-module react&#x27; }</code>。</p></aside><p>关于如何使用此 externals 配置的更多信息，请参考 <a href="/guides/author-libraries">如何编写 library</a>。</p><h3><span id="bylayer"></span>byLayer<a href="#bylayer" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>function</code> <code>object</code></p><p>按层指定 externals：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    byLayer<span class="token operator">:</span> <span class="token punctuation">{</span>
      layer<span class="token operator">:</span> <span class="token punctuation">{</span>
        external1<span class="token operator">:</span> <span class="token string">&#x27;var 43&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="externalstype"></span>externalsType<a href="#externalstype" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string = &#x27;var&#x27;</code></p><p>指定 externals 的默认类型。当 external 被设置为 <code>amd</code>，<code>umd</code>，<code>system</code> 以及 <code>jsonp</code> 时，<a href="/configuration/output/#outputlibrarytarget"><code>output.libraryTarget</code></a> 的值也应相同。例如，你只能在 <code>amd</code> 库中使用 <code>amd</code> 的 externals。</p><p>支持的类型如下：</p><ul><li><code>&#x27;amd&#x27;</code></li><li><code>&#x27;amd-require&#x27;</code></li><li><code>&#x27;assign&#x27;</code> - same as <code>&#x27;var&#x27;</code></li><li><a href="#externalsTypecommonjs"><code>&#x27;commonjs&#x27;</code></a></li><li><code>&#x27;commonjs-module&#x27;</code></li><li><a href="#externalsTypeglobal"><code>&#x27;global&#x27;</code></a></li><li><code>&#x27;import&#x27;</code> - uses <code>import()</code> to load a native EcmaScript module (async module)</li><li><code>&#x27;jsonp&#x27;</code></li><li><a href="#externalsTypemodule"><code>&#x27;module&#x27;</code></a></li><li><a href="#externalsTypenode-commonjs"><code>&#x27;node-commonjs&#x27;</code></a></li><li><a href="#externalsTypepromise"><code>&#x27;promise&#x27;</code></a> - 与 <code>&#x27;var&#x27;</code> 相同，但是会 await 结果（适用于 async 模块）</li><li><a href="#externalsTypeself"><code>&#x27;self&#x27;</code></a></li><li><code>&#x27;system&#x27;</code></li><li><a href="#externalsTypescript"><code>&#x27;script&#x27;</code></a></li><li><a href="#externalsTypethis"><code>&#x27;this&#x27;</code></a></li><li><code>&#x27;umd&#x27;</code></li><li><code>&#x27;umd2&#x27;</code></li><li><a href="#externalsTypevar"><code>&#x27;var&#x27;</code></a></li><li><a href="#externalsTypewindow"><code>&#x27;window&#x27;</code></a></li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externalsType<span class="token operator">:</span> <span class="token string">&#x27;promise&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="externalsTypecommonjs"></span>externalsType.commonjs<a href="#externalsTypecommonjs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>将外部的默认类型指定为“commonjs”。Webpack 将为模块中使用的外部生成类似 <code>const X = require(&#x27;...&#x27;)</code> 的代码。</p><h4><span id="example"></span>示例<a href="#example" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-javascript"><span class="token keyword">import</span> fs <span class="token keyword">from</span> <span class="token string">&#x27;fs-extra&#x27;</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  externalsType<span class="token operator">:</span> <span class="token string">&#x27;commonjs&#x27;</span><span class="token punctuation">,</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&#x27;fs-extra&#x27;</span><span class="token operator">:</span> <span class="token string">&#x27;fs-extra&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>将会转换为类似下面的代码：</p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;fs-extra&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>请注意，输出产物中会有一个 <code>require()</code>。</p><h3><span id="externalsTypeglobal"></span>externalsType.global<a href="#externalsTypeglobal" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>将外部的默认类型指定为 <code>&#x27;global&#x27;</code>。Webpack 会将 external 作为全局变量读取到 <a href="/configuration/output/#outputglobalobject"><code>globalObject</code></a>。</p><h4><span id="example"></span>示例<a href="#example" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-javascript"><span class="token keyword">import</span> jq <span class="token keyword">from</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">;</span>
<span class="token function">jq</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  externalsType<span class="token operator">:</span> <span class="token string">&#x27;global&#x27;</span><span class="token punctuation">,</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    jquery<span class="token operator">:</span> <span class="token string">&#x27;$&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    globalObject<span class="token operator">:</span> <span class="token string">&#x27;global&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>将会转换为类似下面的代码：</p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> jq <span class="token operator">=</span> global<span class="token punctuation">[</span><span class="token string">&#x27;$&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">jq</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3><span id="externalsTypemodule"></span>externalsType.module<a href="#externalsTypemodule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>将 externals 类型设置为 <code>&#x27;module&#x27;</code>，webpack 将会在 module 中为外部引用生成形如 <code>import * as X from &#x27;...&#x27;</code> 的代码。</p><p>确保首先把 <a href="/configuration/experiments/#experimentsoutputModule"><code>experiments.outputModule</code></a> 设置为 <code>true</code>, 否则 webpack 将会报错。</p><h4><span id="Example"></span>Example<a href="#Example" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-javascript"><span class="token keyword">import</span> jq <span class="token keyword">from</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">;</span>
<span class="token function">jq</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  experiments<span class="token operator">:</span> <span class="token punctuation">{</span>
    outputModule<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  externalsType<span class="token operator">:</span> <span class="token string">&#x27;module&#x27;</span><span class="token punctuation">,</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    jquery<span class="token operator">:</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>将会转换为类似下面的代码：</p><pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> __WEBPACK_EXTERNAL_MODULE_jquery__ <span class="token keyword">from</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> jq <span class="token operator">=</span> __WEBPACK_EXTERNAL_MODULE_jquery__<span class="token punctuation">[</span><span class="token string">&#x27;default&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">jq</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>请注意，输出产物中会有一个 <code>import</code> 语句。</p><h3><span id="externalsTypenode-commonjs"></span>externalsType.node-commonjs<a href="#externalsTypenode-commonjs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>将 externals 类型设置为 <code>&#x27;node-commonjs&#x27;</code>，webpack 将从 <code>module</code> 中导入 <code>createRequire</code> 来构造一个 require 函数，用于加载模块中使用的外部对象。</p><h4><span id="Example-1"></span>Example<a href="#Example-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-javascript"><span class="token keyword">import</span> jq <span class="token keyword">from</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">;</span>
<span class="token function">jq</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
  experiments<span class="token operator">:</span> <span class="token punctuation">{</span>
    outputModule<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  externalsType<span class="token operator">:</span> <span class="token string">&#x27;node-commonjs&#x27;</span><span class="token punctuation">,</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    jquery<span class="token operator">:</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>将会转换为类似下面的代码：</p><pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createRequire <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;module&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> jq <span class="token operator">=</span> <span class="token function">createRequire</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">jq</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>请注意，输出包中会有一个 <code>import</code> 语句。</p><h3><span id="externalsTypepromise"></span>externalsType.promise<a href="#externalsTypepromise" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>将外部的默认类型指定为 <code>&#x27;promise&#x27;</code>。Webpack 会将 external 读取为全局变量（类似于 <a href="#externalsTypevar"><code>&#x27;var&#x27;</code></a>）并为它执行 <code>await</code>。</p><h4><span id="Example-2"></span>Example<a href="#Example-2" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-javascript"><span class="token keyword">import</span> jq <span class="token keyword">from</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">;</span>
<span class="token function">jq</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  externalsType<span class="token operator">:</span> <span class="token string">&#x27;promise&#x27;</span><span class="token punctuation">,</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    jquery<span class="token operator">:</span> <span class="token string">&#x27;$&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>将会转换为类似下面的代码：</p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> jq <span class="token operator">=</span> <span class="token keyword">await</span> $<span class="token punctuation">;</span>
<span class="token function">jq</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3><span id="externalsTypeself"></span>externalsType.self<a href="#externalsTypeself" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>将外部的默认类型指定为 <code>&#x27;self&#x27;</code>。 Webpack 会将 external 作为 <code>self</code> 对象上的全局变量读取。</p><h4><span id="example"></span>示例<a href="#example" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-javascript"><span class="token keyword">import</span> jq <span class="token keyword">from</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">;</span>
<span class="token function">jq</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  externalsType<span class="token operator">:</span> <span class="token string">&#x27;self&#x27;</span><span class="token punctuation">,</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    jquery<span class="token operator">:</span> <span class="token string">&#x27;$&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>将会转换为类似下面的代码：</p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> jq <span class="token operator">=</span> self<span class="token punctuation">[</span><span class="token string">&#x27;$&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">jq</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3><span id="externalsTypescript"></span>externalsType.script<a href="#externalsTypescript" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>将 external 的默认类型指定为 <code>&#x27;script&#x27;</code>。Webpack 会将 external 作为脚本加载，并使用 HTML <code>&lt;script&gt;</code> 元素暴露预定义的全局变量。<code>&lt;script&gt;</code> 标签将在脚本加载后被移除。</p><h4><span id="syntax"></span>Syntax<a href="#syntax" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  externalsType<span class="token operator">:</span> <span class="token string">&#x27;script&#x27;</span><span class="token punctuation">,</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    packageName<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&#x27;http://example.com/script.js&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;global&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;property&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;property&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// properties are optional</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>如果你不打算定义任何属性，你可以使用简写形式：</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  externalsType<span class="token operator">:</span> <span class="token string">&#x27;script&#x27;</span><span class="token punctuation">,</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    packageName<span class="token operator">:</span> <span class="token string">&#x27;global@http://example.com/script.js&#x27;</span><span class="token punctuation">,</span> <span class="token comment">// no properties here</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>请注意，<a href="/configuration/output/#outputpublicpath"><code>output.publicPath</code></a> 不会被添加到提供的 URL 中。</p><h4><span id="example"></span>示例<a href="#example" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>从 CDN 加载 <code>lodash</code>：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  externalsType<span class="token operator">:</span> <span class="token string">&#x27;script&#x27;</span><span class="token punctuation">,</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    lodash<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;https://cdn.jsdelivr.net/npm/lodash@4.17.19/lodash.min.js&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;_&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>然后，代码中使用方式如下：</p><pre><code class="hljs language-js"><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">head</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>下面示例是针对上面示例新增了属性配置：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  externalsType<span class="token operator">:</span> <span class="token string">&#x27;script&#x27;</span><span class="token punctuation">,</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    lodash<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&#x27;https://cdn.jsdelivr.net/npm/lodash@4.17.19/lodash.min.js&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;_&#x27;</span><span class="token punctuation">,</span>
      <span class="token string">&#x27;head&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>当你 <code>import &#x27;loadsh&#x27;</code> 时，局部变量 <code>head</code> 和全局变量 <code>window._</code> 都会被暴露：</p><pre><code class="hljs language-js"><span class="token keyword">import</span> head <span class="token keyword">from</span> <span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">head</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs 1 here</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>_<span class="token punctuation">.</span><span class="token function">head</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;a&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;b&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs a here</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>当加载带有 HTML <code>&lt;script&gt;</code> 标签的代码时，webpack 的 runtime 将试图寻找一个已经存在的 <code>&lt;script&gt;</code> 标签，此标签需与 <code>src</code> 的属性相匹配，或者具有特定的 <code>data-webpack</code> 属性。对于 chunk 加载来说，<code>data-webpack</code> 属性的值为 <code>&#x27;[output.uniqueName]:chunk-[chunkId]&#x27;</code>，而 external 脚本的值为 <code>&#x27;[output.uniqueName]:[global]&#x27;</code>。</p></aside><aside class="tip"><h6 class="tip__prefix">提示</h6><p>像 <code>output.chunkLoadTimeout</code>，<code>output.crossOriginLoading</code> 以及 <code>output.scriptType</code> 等选项也会对这种方式加载的 external 脚本产生影响。</p></aside><h3><span id="externalsTypethis"></span>externalsType.this<a href="#externalsTypethis" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>将 external 的默认类型指定为 <code>&#x27;this&#x27;</code>。Webpack 会将 external 作为 <code>this</code> 对象上的全局变量读取。</p><p>示例 $#example$</p><pre><code class="hljs language-javascript"><span class="token keyword">import</span> jq <span class="token keyword">from</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">;</span>
<span class="token function">jq</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  externalsType<span class="token operator">:</span> <span class="token string">&#x27;this&#x27;</span><span class="token punctuation">,</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    jquery<span class="token operator">:</span> <span class="token string">&#x27;$&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>将会转换为类似下面的代码：</p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> jq <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">&#x27;$&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">jq</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3><span id="externalsTypevar"></span>externalsType.var<a href="#externalsTypevar" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>将 external 的默认类型指定为 <code>&#x27;var&#x27;</code>。Webpack 会将 external 作为全局变量读取。</p><p>示例 $#example$</p><pre><code class="hljs language-javascript"><span class="token keyword">import</span> jq <span class="token keyword">from</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">;</span>
<span class="token function">jq</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  externalsType<span class="token operator">:</span> <span class="token string">&#x27;var&#x27;</span><span class="token punctuation">,</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    jquery<span class="token operator">:</span> <span class="token string">&#x27;$&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>将会转换为类似下面的代码：</p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> jq <span class="token operator">=</span> $<span class="token punctuation">;</span>
<span class="token function">jq</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3><span id="externalsTypewindow"></span>externalsType.window<a href="#externalsTypewindow" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>将 external 的默认类型指定为 <code>&#x27;window&#x27;</code>。Webpack 会将 external 作为 <code>window</code> 对象上的全局变量读取。</p><p>示例 $#example$</p><pre><code class="hljs language-javascript"><span class="token keyword">import</span> jq <span class="token keyword">from</span> <span class="token string">&#x27;jquery&#x27;</span><span class="token punctuation">;</span>
<span class="token function">jq</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  externalsType<span class="token operator">:</span> <span class="token string">&#x27;window&#x27;</span><span class="token punctuation">,</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    jquery<span class="token operator">:</span> <span class="token string">&#x27;$&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>将会转换为类似下面的代码：</p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> jq <span class="token operator">=</span> window<span class="token punctuation">[</span><span class="token string">&#x27;$&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">jq</span><span class="token punctuation">(</span><span class="token string">&#x27;.my-element&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2><span id="externalsPresets"></span>externalsPresets<a href="#externalsPresets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>object</code></p><p>为特定的 target 启用 externals 的 preset。</p><table><thead><tr><th>选项</th><th>描述</th><th>输入类型</th></tr></thead><tbody><tr><td data-th="选项"><span><code>electron</code></span></td><td data-th="描述"><span>将 main 和预加载上下文中常见的 electron 内置模块视为 external 模块（如 <code>electron</code>，<code>ipc</code> 或 <code>shell</code>），使用时通过 <code>require()</code> 加载。</span></td><td data-th="输入类型"><span>boolean</span></td></tr><tr><td data-th="选项"><span><code>electronMain</code></span></td><td data-th="描述"><span>将 main 上下文中的 electron 内置模块视为 external 模块（如 <code>app</code>，<code>ipc-main</code> 或 <code>shell</code>），使用时通过 <code>require()</code> 加载。</span></td><td data-th="输入类型"><span>boolean</span></td></tr><tr><td data-th="选项"><span><code>electronPreload</code></span></td><td data-th="描述"><span>将预加载上下文的 electron 内置模块视为 external 模块（如 <code>web-frame</code>，<code>ipc-renderer</code> 或 <code>shell</code>），使用时通过 <code>require()</code> 加载。</span></td><td data-th="输入类型"><span>boolean</span></td></tr><tr><td data-th="选项"><span><code>electronRenderer</code></span></td><td data-th="描述"><span>将 renderer 上下文的 electron 内置模块视为 external 模块（如 <code>web-frame</code>、<code>ipc-renderer</code> 或 <code>shell</code>），使用时通过 <code>require()</code> 加载。</span></td><td data-th="输入类型"><span>boolean</span></td></tr><tr><td data-th="选项"><span><code>node</code></span></td><td data-th="描述"><span>将 node.js 的内置模块视为 external 模块（如 <code>fs</code>，<code>path</code> 或 <code>vm</code>），使用时通过 <code>require()</code> 加载。</span></td><td data-th="输入类型"><span>boolean</span></td></tr><tr><td data-th="选项"><span><code>nwjs</code></span></td><td data-th="描述"><span>将 <code>NW.js</code> 遗留的 <code>nw.gui</code> 模块视为 external 模块，使用时通过 <code>require()</code> 加载。</span></td><td data-th="输入类型"><span>boolean</span></td></tr><tr><td data-th="选项"><span><code>web</code></span></td><td data-th="描述"><span>将 <code>http(s)://...</code> 以及 <code>std:...</code> 视为 external 模块，使用时通过 <code>import</code> 加载。<strong>（注意，这将改变执行顺序，因为 external 代码会在该块中的其他代码执行前被执行）</strong>。</span></td><td data-th="输入类型"><span>boolean</span></td></tr><tr><td data-th="选项"><span><code>webAsync</code></span></td><td data-th="描述"><span>将 &#x27;http(s)://...&#x27; 以及 &#x27;std:...&#x27; 的引用视为 external 模块，使用时通过 <code>async import()</code> 加载。<strong>（注意，此 external 类型为 <code>async</code> 模块，它对执行会产生各种副作用）</strong>。</span></td><td data-th="输入类型"><span>boolean</span></td></tr></tbody></table><p>Note that if you&#x27;re going to output ES Modules with those node.js-related presets, webpack will set the default <code>externalsType</code> to <a href="#externalsTypenode-commonjs"><code>node-commonjs</code></a> which would use <code>createRequire</code> to construct a require function instead of using <code>require()</code>.</p><p><strong>Example</strong></p><p>使用 <code>node</code> 的 preset 不会构建内置模块，而会将其视为 external 模块，使用时通过 <code>require()</code> 加载。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  externalsPresets<span class="token operator">:</span> <span class="token punctuation">{</span>
    node<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h1><span id="Performance"></span>Performance<a href="#Performance" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>这些选项可以控制 webpack 如何通知「资源(asset)和入口起点超过指定文件限制」。
此功能受到 <a href="https://github.com/webpack/webpack/issues/3216">webpack 性能评估</a>的启发。</p><h2><span id="performance"></span><code>performance</code><a href="#performance" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>object</code></p><p>配置如何展示性能提示。例如，如果一个资源超过 250kb，webpack 会对此输出一个警告来通知你。</p><h3><span id="performanceassetfilter"></span>performance.assetFilter<a href="#performanceassetfilter" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>function(assetFilename) =&gt; boolean</code></p><p>此属性允许 webpack 控制用于计算性能提示的文件。默认函数如下：</p><pre><code class="hljs language-js"><span class="token keyword">function</span> <span class="token function">assetFilter</span><span class="token punctuation">(</span><span class="token parameter">assetFilename</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">!</span><span class="token regex">/\.map$/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>assetFilename<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>你可以通过传递自己的函数来覆盖此属性：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  performance<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">assetFilter</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">assetFilename</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> assetFilename<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&#x27;.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>以上示例将只给出 <code>.js</code> 文件的性能提示。</p><h3><span id="performancehints"></span>performance.hints<a href="#performancehints" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string = &#x27;warning&#x27;: &#x27;error&#x27; | &#x27;warning&#x27;</code> <code>boolean: false</code></p><p>打开/关闭提示。此外，当找到提示时，告诉 webpack 抛出一个错误或警告。此属性默认设置为 <code>&quot;warning&quot;</code>。</p><p>给定一个创建后超过 250kb 的资源：</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  performance<span class="token operator">:</span> <span class="token punctuation">{</span>
    hints<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>不展示警告或错误提示。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  performance<span class="token operator">:</span> <span class="token punctuation">{</span>
    hints<span class="token operator">:</span> <span class="token string">&#x27;warning&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>将展示一条警告，通知你这是体积大的资源。在开发环境，我们推荐这样。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  performance<span class="token operator">:</span> <span class="token punctuation">{</span>
    hints<span class="token operator">:</span> <span class="token string">&#x27;error&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>将展示一条错误，通知你这是体积大的资源。在生产环境构建时，我们推荐使用 <code>hints: &quot;error&quot;</code>，有助于防止把体积巨大的 bundle 部署到生产环境，从而影响网页的性能。</p><h3><span id="performancemaxassetsize"></span>performance.maxAssetSize<a href="#performancemaxassetsize" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number = 250000</code></p><p>资源(asset)是从 webpack 生成的任何文件。此选项根据单个资源体积(单位: bytes)，控制 webpack 何时生成性能提示。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  performance<span class="token operator">:</span> <span class="token punctuation">{</span>
    maxAssetSize<span class="token operator">:</span> <span class="token number">100000</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="performancemaxentrypointsize"></span>performance.maxEntrypointSize<a href="#performancemaxentrypointsize" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number = 250000</code></p><p>入口起点表示针对指定的入口，对于所有资源，要充分利用初始加载时(initial load time)期间。此选项根据入口起点的最大体积，控制 webpack 何时生成性能提示。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  performance<span class="token operator">:</span> <span class="token punctuation">{</span>
    maxEntrypointSize<span class="token operator">:</span> <span class="token number">400000</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h1><span id="Node"></span>Node<a href="#Node" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>这些选项可以配置是否 polyfill 或 mock 某些 <a href="https://nodejs.org/docs/latest/api/globals.html">Node.js 全局变量</a>。</p><p>此功能由 webpack 内部的 <a href="https://github.com/webpack/webpack/blob/master/lib/NodeStuffPlugin.js"><code>NodeStuffPlugin</code></a> 插件提供。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>从 webpack 5 开始，你只能在 <code>node</code> 选项下配置 <code>global</code>、<code>__filename</code> 或 <code>__dirname</code>。如果需要在 webpack 5 下的 Node.js 中填充 <code>fs</code>，请查阅 <a href="/configuration/resolve/#resolvefallback">resolve.fallback</a> 获取相关帮助。</p></aside><h2><span id="node"></span>node<a href="#node" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean: false</code> <code>object</code></p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  node<span class="token operator">:</span> <span class="token punctuation">{</span>
    global<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    __filename<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    __dirname<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>从 webpack 3.0.0 开始，<code>node</code> 选项可能被设置为 <code>false</code>，以完全关闭 <code>NodeStuffPlugin</code> 插件。</p><h2><span id="nodeglobal"></span>node.global<a href="#nodeglobal" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean</code> <code>&#x27;warn&#x27;</code></p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>如果你正在使用一个需要全局变量的模块，请使用 <code>ProvidePlugin</code> 替代 <code>global</code>。</p></aside><p>关于此对象的准确行为，请查看<a href="https://nodejs.org/api/globals.html#globals_global">Node.js 文档</a>。</p><p>选项：</p><ul><li><code>true</code>: 提供 polyfill.</li><li><code>false</code>: 不提供任何 polyfill。代码可能会出现 <code>ReferenceError</code> 的崩溃。</li><li><code>&#x27;warn&#x27;</code>: 当使用 <code>global</code> 时展示一个警告。</li></ul><h2><span id="node__filename"></span>node.__filename<a href="#node__filename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean</code> <code>&#x27;mock&#x27; | &#x27;warn-mock&#x27; | &#x27;eval-only&#x27;</code></p><p>选项：</p><ul><li><code>true</code>: <strong>输入</strong>文件的文件名，是相对于 <a href="/configuration/entry-context/#context"><code>context</code> 选项</a>。</li><li><code>false</code>: webpack 不会更改 <code>__filename</code> 的代码。在 Node.js 环境中运行时，<strong>出</strong>文件的文件名。</li><li><code>&#x27;mock&#x27;</code>: value 填充为 <code>&#x27;index.js&#x27;</code>。</li><li><code>&#x27;warn-mock&#x27;</code>: 使用 <code>&#x27;/index.js&#x27;</code> 但是会展示一个警告。</li><li><code>&#x27;eval-only&#x27;</code></li></ul><h2><span id="node__dirname"></span>node.__dirname<a href="#node__dirname" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean</code> <code>&#x27;mock&#x27; | &#x27;warn-mock&#x27; | &#x27;eval-only&#x27;</code></p><p>选项：</p><ul><li><code>true</code>: <strong>输入</strong> 文件的目录名，是相对于 <a href="/configuration/entry-context/#context"><code>context</code> 选项</a>。</li><li><code>false</code>: webpack 不会更改 <code>__dirname</code> 的代码，这意味着你有常规 Node.js 中的 <code>__dirname</code> 的行为。在 Node.js 环境中运行时，<strong>输出</strong> 文件的目录名。</li><li><code>&#x27;mock&#x27;</code>: value 填充为 <code>&#x27;/&#x27;</code>。</li><li><code>&#x27;warn-mock&#x27;</code>: 使用 <code>&#x27;/&#x27;</code> 但是会显示一个警告。</li><li><code>&#x27;eval-only&#x27;</code></li></ul><h1><span id="Stats-对象"></span>Stats 对象<a href="#Stats-%E5%AF%B9%E8%B1%A1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p><code>object</code> <code>string</code></p><p><code>stats</code> 选项让你更精确地控制 bundle 信息该怎么显示。 如果你不希望使用 <code>quiet</code> 或 <code>noInfo</code> 这样的不显示信息，而是又不想得到全部的信息，只是想要获取某部分 bundle 的信息，使用 stats 选项是比较好的折衷方式。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>在使用 Node.js API 时，此选项无效。你需要将统计配置项传递给 <code>stats.toString()</code> 和 <code>stats.toJson()</code> 调用。</p></aside><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token string">&#x27;errors-only&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="stats-presets"></span>Stats Presets<a href="#stats-presets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>webpack 有一些特定的预设选项给统计信息输出：</p><table><thead><tr><th>预设</th><th>可选值</th><th>描述</th></tr></thead><tbody><tr><td data-th="预设"><span><code>&#x27;errors-only&#x27;</code></span></td><td data-th="可选值"><span><em>none</em></span></td><td data-th="描述"><span>只在发生错误时输出</span></td></tr><tr><td data-th="预设"><span><code>&#x27;errors-warnings&#x27;</code></span></td><td data-th="可选值"><span><em>none</em></span></td><td data-th="描述"><span>只在发生错误或有警告时输出</span></td></tr><tr><td data-th="预设"><span><code>&#x27;minimal&#x27;</code></span></td><td data-th="可选值"><span><em>none</em></span></td><td data-th="描述"><span>只在发生错误或新的编译开始时输出</span></td></tr><tr><td data-th="预设"><span><code>&#x27;none&#x27;</code></span></td><td data-th="可选值"><span><code>false</code></span></td><td data-th="描述"><span>没有输出</span></td></tr><tr><td data-th="预设"><span><code>&#x27;normal&#x27;</code></span></td><td data-th="可选值"><span><code>true</code></span></td><td data-th="描述"><span>标准输出</span></td></tr><tr><td data-th="预设"><span><code>&#x27;verbose&#x27;</code></span></td><td data-th="可选值"><span><em>none</em></span></td><td data-th="描述"><span>全部输出</span></td></tr><tr><td data-th="预设"><span><code>&#x27;detailed&#x27;</code></span></td><td data-th="可选值"><span><em>none</em></span></td><td data-th="描述"><span>全部输出除了 <code>chunkModules</code> 和 <code>chunkRootModules</code></span></td></tr><tr><td data-th="预设"><span><code>&#x27;summary&#x27;</code></span></td><td data-th="可选值"><span><em>none</em></span></td><td data-th="描述"><span>输出 webpack 版本，以及警告数和错误数</span></td></tr></tbody></table><h2><span id="stats"></span>Stats<a href="#stats" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>你可以在统计输出里指定你想看到的信息。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>所有在统计信息配置里的选项都是可选的。</p></aside><h3><span id="statsall"></span>stats.all<a href="#statsall" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>当统计信息配置没被定义，则该值是一个回退值。它的优先级比本地的 webpack 默认值高。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    all<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsassets"></span>stats.assets<a href="#statsassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 是否展示资源信息。将 <code>stats.assets</code> 设置成 <code>false</code> 会禁用.</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    assets<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsassetssort"></span>stats.assetsSort<a href="#statsassetssort" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string = &#x27;id&#x27;</code></p><p>告知 <code>stats</code> 基于给定的字段对资源进行排序。所有的 <a href="#sorting-fields">排序字段</a>都被允许作为 <code>stats.assetsSort</code>的值。使用 <code>!</code> 作为值的前缀以反转基于给定字段的排序结果。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    assetsSort<span class="token operator">:</span> <span class="token string">&#x27;!size&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsbuiltat"></span>stats.builtAt<a href="#statsbuiltat" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 是否添加构建日期与时间信息。将 <code>stats.builtAt</code> 设置成 <code>false</code> 来隐藏.</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    builtAt<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsmoduleassets"></span>stats.moduleAssets<a href="#statsmoduleassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 是否添加模块内的资源信息。将 <code>stats.moduleAssets</code> 设置成 <code>false</code> 以隐藏。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    moduleAssets<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsassetsspace"></span>stats.assetsSpace<a href="#statsassetsspace" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number = 15</code></p><p>告诉 <code>stats</code> 应该显示多少个 asset 项目（将以组的方式折叠，以适应这个空间）。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    assetsSpace<span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsmodulesspace"></span>stats.modulesSpace<a href="#statsmodulesspace" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number = 15</code></p><p>告诉 <code>stats</code> 应该显示多少个模块项目（将以组的方式折叠，以适应这个空间）。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    modulesSpace<span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statschunkmodulesspace"></span>stats.chunkModulesSpace<a href="#statschunkmodulesspace" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number = 10</code></p><p>告诉 <code>stats</code> 显示多少个 chunk 模块项目（将以组的方式折叠，以适应这个空间）。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    chunkModulesSpace<span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsnestedmodules"></span>stats.nestedModules<a href="#statsnestedmodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>告知 <code>stats</code> 是否添加嵌套在其他模块中的模块信息（比如模块联邦）。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    nestedModules<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsnestedmodulesspace"></span>stats.nestedModulesSpace<a href="#statsnestedmodulesspace" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number = 10</code></p><p>告诉 <code>stats</code> 应该显示多少个嵌套模块的项目（将以组的方式折叠，以适应这个空间）。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    nestedModulesSpace<span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statscached"></span>stats.cached<a href="#statscached" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>旧版的 <code>stats.cachedModules</code>.</p><h3><span id="statscachedmodules"></span>stats.cachedModules<a href="#statscachedmodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告诉 <code>stats</code> 是否要缓存（非内置）模块的信息。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    cachedModules<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsruntimemodules"></span>stats.runtimeModules<a href="#statsruntimemodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告诉 <code>stats</code> 是否要添加运行时模块的信息。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    runtimeModules<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsdependentmodules"></span>stats.dependentModules<a href="#statsdependentmodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>告诉 <code>stats</code> 是否要展示该 chunk 依赖的其他模块的 chunk 模块。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    dependentModules<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsgroupassetsbychunk"></span>stats.groupAssetsByChunk<a href="#statsgroupassetsbychunk" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>告诉 <code>stats</code> 是否按照 asset 与 chunk 的关系进行分组。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    groupAssetsByChunk<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsgroupassetsbyemitstatus"></span>stats.groupAssetsByEmitStatus<a href="#statsgroupassetsbyemitstatus" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>告诉 <code>stats</code> 是否按照 asset 的状态进行分组（emitted，对比 emit 或缓存）.</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    groupAssetsByEmitStatus<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsgroupassetsbyextension"></span>stats.groupAssetsByExtension<a href="#statsgroupassetsbyextension" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>告诉 <code>stats</code> 是否根据它们的拓展名聚合静态资源。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    groupAssetsByExtension<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsgroupassetsbyinfo"></span>stats.groupAssetsByInfo<a href="#statsgroupassetsbyinfo" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>告诉 <code>stats</code> 是否按照 asset 信息对 asset 进行分组（immutable，development。hotModuleReplacement 等）。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    groupAssetsByInfo<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsgroupassetsbypath"></span>stats.groupAssetsByPath<a href="#statsgroupassetsbypath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>告诉 <code>stats</code> 是否根据它们的路径聚合静态资源。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    groupAssetsByPath<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsgroupmodulesbyattributes"></span>stats.groupModulesByAttributes<a href="#statsgroupmodulesbyattributes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>告诉 <code>stats</code> 是否按模块的属性进行分组（errors，warnings，assets，optional，orphan 或者 dependent）。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    groupModulesByAttributes<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsgroupmodulesbycachestatus"></span>stats.groupModulesByCacheStatus<a href="#statsgroupmodulesbycachestatus" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>告诉 <code>stats</code> 是否按模块的缓存状态进行分组（已缓存或者已构建并且可缓存）。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    groupModulesByCacheStatus<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsgroupmodulesbyextension"></span>stats.groupModulesByExtension<a href="#statsgroupmodulesbyextension" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>告诉 <code>stats</code> 是否按模块的拓展名进行分组。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    groupModulesByExtension<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsgroupmodulesbylayer"></span>stats.groupModulesByLayer<a href="#statsgroupmodulesbylayer" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>告诉 <code>stats</code> 是否按模块的 layer 进行分组。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    groupModulesByLayer<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsgroupmodulesbypath"></span>stats.groupModulesByPath<a href="#statsgroupmodulesbypath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>告诉 <code>stats</code> 是否按模块的路径进行分组。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    groupModulesByPath<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsgroupmodulesbytype"></span>stats.groupModulesByType<a href="#statsgroupmodulesbytype" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>告诉 <code>stats</code> 是否按模块的类型进行分组。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    groupModulesByType<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsgroupreasonsbyorigin"></span>stats.groupReasonsByOrigin<a href="#statsgroupreasonsbyorigin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><span class="badge">5.46.0+</span><p>Group <a href="#statsreasons"><code>reasons</code></a> by their origin module to avoid large set of reasons.</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    groupReasonsByOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statscachedassets"></span>stats.cachedAssets<a href="#statscachedassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 是否添加关于缓存资源的信息。 将 <code>stats.cachedAssets</code> 设置成 <code>false</code> 会告知 <code>stats</code> 仅展示被生成的文件 (并非被构建的模块)。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    cachedAssets<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statschildren"></span>stats.children<a href="#statschildren" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 是否添加关于子模块的信息。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    children<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statschunks"></span>stats.chunks<a href="#statschunks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 是否添加关于 chunk 的信息。 将 <code>stats.chunks</code> 设置为 <code>false</code> 会引发更少的输出。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    chunks<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statschunkgroups"></span>stats.chunkGroups<a href="#statschunkgroups" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 是否添加关于 <code>namedChunkGroups</code> 的信息。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    chunkGroups<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statschunkmodules"></span>stats.chunkModules<a href="#statschunkmodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 是否添加关于已构建模块和关于 chunk 的信息。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    chunkModules<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statschunkorigins"></span>stats.chunkOrigins<a href="#statschunkorigins" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 是不添加关于 chunks 的来源和 chunk 合并的信息。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    chunkOrigins<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statschunkssort"></span>stats.chunksSort<a href="#statschunkssort" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string = &#x27;id&#x27;</code></p><p>告知 <code>stats</code> 基于给定的字段给 chunks 排序。所有 <a href="#sorting-fields">排序字段</a> 都被允许用于作为 <code>stats.chunksSort</code> 的值。使用 <code>!</code> 作为值里的前缀用以将基于给定字段排序的结果反转。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    chunksSort<span class="token operator">:</span> <span class="token string">&#x27;name&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statscontext"></span>stats.context<a href="#statscontext" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string</code></p><p>stats 的基本目录，用来缩短请求信息的 <strong>绝对路径</strong>。</p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    context<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src/components&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>默认情况下，<a href="/configuration/entry-context/#context"><code>context</code></a> 的值是 Node.js 的当前工作目录。</p><h3><span id="statscolors"></span>stats.colors<a href="#statscolors" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = false</code> <code>object</code></p><p>告知 <code>stats</code> 是否输出不同的颜色。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    colors<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>它也可用通过命令行的参数实现：</p><pre><code class="hljs language-bash">npx webpack --stats-colors</code></pre><p>To disable:</p><pre><code class="hljs language-bash">npx webpack --no-stats-colors</code></pre><p>你可以通过使用 <a href="https://en.wikipedia.org/wiki/ANSI_escape_code">ANSI escape sequences</a> 指定你自己的命令行终端颜色。</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  colors<span class="token operator">:</span> <span class="token punctuation">{</span>
    green<span class="token operator">:</span> <span class="token string">&#x27;\u001b[32m&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsdepth"></span>stats.depth<a href="#statsdepth" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = false</code></p><p>告知 <code>stats</code> 是否展示每个模块与入口文件的距离。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    depth<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsentrypoints"></span>stats.entrypoints<a href="#statsentrypoints" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code> <code>string = &#x27;auto&#x27;</code></p><p>告知 <code>stats</code> 是否展示入口文件与对应的文件 bundles。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    entrypoints<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>当 <code>stats.entrypoints</code> 被设置为 <code>&#x27;auto&#x27;</code> 时，webpack 将自动决定是否在 stats 输出中展示入口信息。</p><h3><span id="statsenv"></span>stats.env<a href="#statsenv" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = false</code></p><p>告知 <code>stats</code> 是否展示 <code>--env</code> 信息.</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    env<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsorphanmodules"></span>stats.orphanModules<a href="#statsorphanmodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = false</code></p><p>告知 <code>stats</code> 是否隐藏 <code>孤儿(orphan)</code> 模块. 一个模块属于 <code>孤儿(orphan)</code> 如果它不被包含在任何一个 chunk 里。孤儿模块默认在 <code>stats</code> 中会被隐藏。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    orphanModules<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statserrors"></span>stats.errors<a href="#statserrors" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 是否展示错误。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    errors<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statserrordetails"></span>stats.errorDetails<a href="#statserrordetails" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code> <code>string = &quot;auto&quot;</code></p><p>告知 <code>stats</code> 是否添加错误的详情。如果默认值为 <code>&#x27;auto&#x27;</code>，当只有 2 个或更少的错误时，它将显示错误详情。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    errorDetails<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statserrorstack"></span>stats.errorStack<a href="#statserrorstack" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 是否展示错位的栈追踪信息。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    errorStack<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsexcludeassets"></span>stats.excludeAssets<a href="#statsexcludeassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>array = []: string | RegExp | function (assetName) =&gt; boolean</code> <code>string</code> <code>RegExp</code> <code>function (assetName) =&gt; boolean</code></p><p>告知 <code>stats</code> 排除掉匹配的资源信息。这个可以通过设置一个 <code>字符串</code>, 一个 <code>正则表达式</code>, 一个 <code>函数</code> 取得资源的名字作为入参且返回一个 <code>布尔值</code>。 <code>stats.excludeAssets</code> 可以是一个包括上面任意一类型值的 <code>数组</code> 。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    excludeAssets<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&#x27;filter&#x27;</span><span class="token punctuation">,</span>
      <span class="token regex">/filter/</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter">assetName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> assetName<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&#x27;moduleA&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsexcludemodules"></span>stats.excludeModules<a href="#statsexcludemodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>array = []: string | RegExp | function (assetName) =&gt; boolean</code> <code>string</code> <code>RegExp</code> <code>function (assetName) =&gt; boolean</code> <code>boolean: false</code></p><p>告知 <code>stats</code> 排除掉匹配的资源信息。这个可以通过设置一个 <code>字符串</code>, 一个 <code>正则表达式</code>, 一个 <code>函数</code> 取得资源的名字作为入参且返回一个 <code>布尔值</code>。 <code>stats.excludeModules</code> 可以是一个包括上面任意一类型值的 <code>数组</code> 。<code>stats.excludeModules</code> 会与 <code>stats.exclude</code> 的配置值<a href="https://github.com/webpack/webpack/blob/master/lib/Stats.js#L215">进行合并</a>。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    excludeModules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;filter&#x27;</span><span class="token punctuation">,</span> <span class="token regex">/filter/</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">moduleSource</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>将 <code>stats.excludeModules</code> 设置为 <code>false</code> 会禁用以上的排除行为。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    excludeModules<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsexclude"></span>stats.exclude<a href="#statsexclude" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>详参 <a href="#statsexcludemodules"><code>stats.excludeModules</code></a>.</p><h3><span id="statshash"></span>stats.hash<a href="#statshash" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 是否添加关于编译哈希值的信息。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    hash<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statslogging"></span>stats.logging<a href="#statslogging" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string = &#x27;info&#x27;: &#x27;none&#x27; | &#x27;error&#x27; | &#x27;warn&#x27; | &#x27;info&#x27; | &#x27;log&#x27; | &#x27;verbose&#x27;</code> <code>boolean</code></p><p>告知 <code>stats</code> 是否添加日志输出。</p><ul><li><code>&#x27;none&#x27;</code>, <code>false</code> - 禁用日志</li><li><code>&#x27;error&#x27;</code> - 仅显示错误</li><li><code>&#x27;warn&#x27;</code> - 仅显示错误与告警</li><li><code>&#x27;info&#x27;</code> - 显示错误，告警与信息</li><li><code>&#x27;log&#x27;</code>, <code>true</code> - 显示错误，告警与信息，日志，组别，清理。折叠组别会在折叠状态中被显示 。</li><li><code>&#x27;verbose&#x27;</code> - 输出所有日志除了调试与追踪。 折叠组别会在扩展状态中被显示 。</li></ul><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    logging<span class="token operator">:</span> <span class="token string">&#x27;verbose&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsloggingdebug"></span>stats.loggingDebug<a href="#statsloggingdebug" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>array = []: string | RegExp | function (name) =&gt; boolean</code> <code>string</code> <code>RegExp</code> <code>function (name) =&gt; boolean</code></p><p>告知 <code>stats</code> 去包括特定的日志工具调试信息比如插件或加载器的日志工具。当 <a href="#statslogging"><code>stats.logging</code></a> 被设置为 <code>false</code>, <code>stats.loggingDebug</code> 配置会被忽略。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    loggingDebug<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&#x27;MyPlugin&#x27;</span><span class="token punctuation">,</span>
      <span class="token regex">/MyPlugin/</span><span class="token punctuation">,</span>
      <span class="token regex">/webpack/</span><span class="token punctuation">,</span> <span class="token comment">// To get core logging</span>
      <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&#x27;MyPlugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsloggingtrace"></span>stats.loggingTrace<a href="#statsloggingtrace" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>启用错误，告警与追踪的日志输出中的堆栈追踪。将 <code>stats.loggingTrace</code> 设置为 <code>false</code> 隐藏追踪。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    loggingTrace<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsmodules"></span>stats.modules<a href="#statsmodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 是否添加关于构建模块的信息。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    modules<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsmodulessort"></span>stats.modulesSort<a href="#statsmodulessort" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string = &#x27;id&#x27;</code></p><p>告知 <code>stats</code> 基于给定的字段对资源进行排序。所有的 <a href="#sorting-fields">排序字段</a>都被允许作为 <code>stats.modulesSort</code>的值。使用 <code>!</code> 作为值的前缀以反转基于给定字段的排序结果。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    modulesSort<span class="token operator">:</span> <span class="token string">&#x27;size&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsmoduletrace"></span>stats.moduleTrace<a href="#statsmoduletrace" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 展示依赖和告警/错误的来源。<code>stats.moduleTrace</code> 从 webpack 2.5.0 起可用。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    moduleTrace<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsoptimizationbailout"></span>stats.optimizationBailout<a href="#statsoptimizationbailout" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>告诉 <code>stats</code> 展示模块优化失效的原因。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    optimizationBailout<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsoutputpath"></span>stats.outputPath<a href="#statsoutputpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 展示 <code>outputPath</code>.</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    outputPath<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsperformance"></span>stats.performance<a href="#statsperformance" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 当文件大小超过 <a href="/configuration/performance/#performancemaxassetsize"><code>performance.maxAssetSize</code></a>配置值时，展示性能提性。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    performance<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statspreset"></span>stats.preset<a href="#statspreset" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string</code> <code>boolean: false</code></p><p>为展示的信息类型设置 <a href="/configuration/stats/#stats-presets">预设值</a>。这对<a href="/configuration/stats/#extending-stats-behaviours">扩展统计信息行为</a>非常有用。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    preset<span class="token operator">:</span> <span class="token string">&#x27;minimal&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>将 <code>stats.preset</code> 的值设置为<code>false</code> 告知 webpack 使用 <code>&#x27;none&#x27;</code> <a href="/configuration/stats/#stats-presets">统计信息预设值</a>。</p><h3><span id="statsprovidedexports"></span>stats.providedExports<a href="#statsprovidedexports" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = false</code></p><p>告知 <code>stats</code> 去展示模块的导出。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    providedExports<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statserrorscount"></span>stats.errorsCount<a href="#statserrorscount" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>添加展示 errors 个数。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    errorsCount<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statswarningscount"></span>stats.warningsCount<a href="#statswarningscount" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>添加展示 warnings 个数。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    warningsCount<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statspublicpath"></span>stats.publicPath<a href="#statspublicpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 展示 <code>publicPath</code>。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsreasons"></span>stats.reasons<a href="#statsreasons" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 添加关于模块被引用的原因信息。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    reasons<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsreasonspace"></span>stats.reasonsSpace<a href="#statsreasonspace" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number</code></p><span class="badge">5.46.0+</span><p>Space to display <a href="#statsreasons"><code>reasons</code></a> (groups will be collapsed to fit this space).</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    reasonsSpace<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>The <a href="#stats-presets"><code>detailed preset</code></a> limits <a href="#statsmodulesspace"><code>modulesSpace</code></a>, <a href="#statsassetsspace"><code>assetsSpace</code></a>, and <a href="#statsreasonspace"><code>reasonsSpace</code></a> to 1000 by default.</p></aside><h3><span id="statsrelatedassets"></span>stats.relatedAssets<a href="#statsrelatedassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = false</code></p><p>告诉 <code>stats</code> 是否需添加与其他 assets 相关的信息（例如 assets 的 SourceMaps）。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    relatedAssets<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statssource"></span>stats.source<a href="#statssource" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = false</code></p><p>告知 <code>stats</code> 去添加模块的源码。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    source<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statstimings"></span>stats.timings<a href="#statstimings" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 添加时间信息。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    timings<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsids"></span>stats.ids<a href="#statsids" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = false</code></p><p>通知 <code>stats</code> 给 module 和 chunk 添加 id。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    ids<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsusedexports"></span>stats.usedExports<a href="#statsusedexports" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = false</code></p><p>告知 <code>stats</code> 是否展示模块用了哪些导出。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    usedExports<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statsversion"></span>stats.version<a href="#statsversion" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 添加关于 webpack 版本的信息。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    version<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statschunkgroupauxiliary"></span>stats.chunkGroupAuxiliary<a href="#statschunkgroupauxiliary" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>在 chunk 组中展示辅助 asset。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    chunkGroupAuxiliary<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statschunkgroupchildren"></span>stats.chunkGroupChildren<a href="#statschunkgroupchildren" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>显示 chunk 组的子 chunk。（例如，预置（prefetched），预加载（preloaded）的 chunk 和 asset)。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    chunkGroupChildren<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statschunkgroupmaxassets"></span>stats.chunkGroupMaxAssets<a href="#statschunkgroupmaxassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>number</code></p><p>chunk 组中的 asset 数上限。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    chunkGroupMaxAssets<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statswarnings"></span>stats.warnings<a href="#statswarnings" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = true</code></p><p>告知 <code>stats</code> 添加告警。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    warnings<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="statswarningsfilter"></span>stats.warningsFilter<a href="#statswarningsfilter" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>array = []: string | RegExp | function (warning) =&gt; boolean</code> <code>string</code> <code>RegExp</code> <code>function (warning) =&gt; boolean</code></p><p>告知 <code>stats</code> 排除掉匹配的告警信息。这个可以通过设置一个 <code>字符串</code>, 一个 <code>正则表达式</code>, 一个 <code>函数</code> 取得资源的名字作为入参且返回一个 <code>布尔值</code>。 <code>stats.warningsFilter</code> 可以是一个包括上面任意一类型值的 <code>数组</code> 。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    warningsFilter<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;filter&#x27;</span><span class="token punctuation">,</span> <span class="token regex">/filter/</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">warning</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="warning"><h6 class="warning__prefix">警告</h6><p><code>stats.warningsFilter</code> 已被弃用，请改用 <a href="/configuration/other-options/#ignorewarnings"><code>ignoreWarnings</code></a>。</p></aside><h3><span id="statschunkrelations"></span>stats.chunkRelations<a href="#statschunkrelations" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean = false</code></p><p>告知 <code>stats</code> 展示 chunk 的父 chunk，孩子 chunk 和兄弟 chunk。</p><h3><span id="sorting-fields"></span>字段排序<a href="#sorting-fields" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>对于 <code>assetsSort</code>, <code>chunksSort</code> 和 <code>modulesSort</code> 它们有几个可用的字段用于排序：</p><ul><li><code>&#x27;id&#x27;</code> 是元素（指资源，chunk 或模块，下同）的 id;</li><li><code>&#x27;name&#x27;</code> - 一个元素的名字，在导引的时候被分配；</li><li><code>&#x27;size&#x27;</code> - 一个元素的大小，单位字节（bytes）;</li><li><code>&#x27;chunks&#x27;</code> - 元素来源于哪些 chunks (例如，一个 chunk 有多个子 chunks， - 子 chunks 会被基于主 chunk 组合到一起);</li><li><code>&#x27;errors&#x27;</code> - 元素组错误的数量;</li><li><code>&#x27;warnings&#x27;</code> - 元素中告警的数量;</li><li><code>&#x27;failed&#x27;</code> - 元素是被编译失败;</li><li><code>&#x27;cacheable&#x27;</code> - 元素是否被缓存;</li><li><code>&#x27;built&#x27;</code> - 资源是否被构建;</li><li><code>&#x27;prefetched&#x27;</code> - 资源是否被预拉取;</li><li><code>&#x27;optional&#x27;</code> - 资源是否可选;</li><li><code>&#x27;identifier&#x27;</code> - 元素的标识符;</li><li><code>&#x27;index&#x27;</code> - 元素加工指针;</li><li><code>&#x27;index2&#x27;</code></li><li><code>&#x27;profile&#x27;</code></li><li><code>&#x27;issuer&#x27;</code> - 发起者(issuer)的标识符;</li><li><code>&#x27;issuerId&#x27;</code> - 发起者(issuer)的 id;</li><li><code>&#x27;issuerName&#x27;</code> - 发起者(issuer)的名字;</li><li><code>&#x27;issuerPath&#x27;</code> - 一个完整的发起者(issuer)对象。基于这个字段排序没有现实的需要;</li></ul><h3><span id="extending-stats-behaviours"></span>扩展统计信息行为<a href="#extending-stats-behaviours" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>如果你想使用其中一个预定义的行为，例如 <code>&#x27;minimal&#x27;</code>，但仍想重载一个或更多的规则：请指定想要设置的 <code>stats.preset</code> 同时在后面添加自定义或额外的规则。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//..</span>
  stats<span class="token operator">:</span> <span class="token punctuation">{</span>
    preset<span class="token operator">:</span> <span class="token string">&#x27;minimal&#x27;</span><span class="token punctuation">,</span>
    moduleTrace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    errorDetails<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h1><span id="实验特性Experiments"></span>实验特性(Experiments)<a href="#%E5%AE%9E%E9%AA%8C%E7%89%B9%E6%80%A7Experiments" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<h2><span id="experiments"></span>experiments<a href="#experiments" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean: false</code></p><p><code>experiments</code> 配置是在 webpack 5 中推出，目的是为了给用户赋能去开启并试用一些实验的特性。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>由于实验特性具有相对 宽松的语义版本，可能会有重大的变更，所以主确定你将 webpack 的版本固定为小版本号，例如与其使用 <code>webpack: ~5.4.3</code> 不如使用 <code>webpack: ^5.4.3</code> 或者当使用 <code>experiments</code> 配置时使用版本锁定能力。</p></aside><p>Available options:</p><ul><li><code>asyncWebAssembly</code>: Support the new WebAssembly according to the <a href="https://github.com/WebAssembly/esm-integration">updated specification</a>, it makes a WebAssembly module an async module. And it is enabled by default when <a href="#experimentsfuturedefaults"><code>experiments.futureDefaults</code></a> is set to <code>true</code>.</li><li><a href="#experimentsbackcompat"><code>backCompat</code></a></li><li><a href="#experimentsbuildhttp"><code>buildHttp</code></a></li><li><a href="#experimentscacheunaffected"><code>cacheUnaffected</code></a></li><li><a href="#experimentscss"><code>css</code></a></li><li><a href="#experimentsfuturedefaults"><code>futureDefaults</code></a></li><li><code>layers</code>: Enable module and chunk layers.</li><li><a href="#experimentslazycompilation"><code>lazyCompilation</code></a></li><li><a href="#experimentsoutputModule"><code>outputModule</code></a></li><li><code>syncWebAssembly</code>: Support the old WebAssembly like in webpack 4.</li><li><code>topLevelAwait</code>: Support the <a href="https://github.com/tc39/proposal-top-level-await">Top Level Await Stage 3 proposal</a>, it makes the module an async module when <code>await</code> is used on the top-level. And it is enabled by default when <a href="#experimentsfuturedefaults"><code>experiments.futureDefaults</code></a> is set to <code>true</code>.</li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  experiments<span class="token operator">:</span> <span class="token punctuation">{</span>
    asyncWebAssembly<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    buildHttp<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    layers<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    lazyCompilation<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    outputModule<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    syncWebAssembly<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    topLevelAwait<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="experimentsbackcompat"></span>experiments.backCompat<a href="#experimentsbackcompat" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>为许多 webpack 4 api 启用后向兼容层，并发出弃用警告。</p><ul><li>类型：<code>boolean</code></li></ul><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  experiments<span class="token operator">:</span> <span class="token punctuation">{</span>
    backCompat<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="experimentsbuildhttp"></span>experiments.buildHttp<a href="#experimentsbuildhttp" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>When enabled, webpack can build remote resources that begin with the <code>http(s):</code> protocol.</p><ul><li><p>Type:</p><ul><li><p><code>(string | RegExp | ((uri: string) =&gt; boolean))[]</code></p><p>A shortcut for <a href="#experimentsbuildhttpalloweduris"><code>experiments.buildHttp.allowedUris</code></a>.</p></li><li><p><code>HttpUriOptions</code></p><pre><code class="hljs language-ts"><span class="token punctuation">{</span>
  allowedUris<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token operator">|</span>RegExp<span class="token operator">|</span><span class="token punctuation">(</span>uri<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  cacheLocation<span class="token operator">?</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  frozen<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
  lockfileLocation<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  upgrade<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span></code></pre></li></ul></li><li><p>Available: 5.49.0+</p></li><li><p>Example</p><pre><code class="hljs language-javascript"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  experiments<span class="token operator">:</span> <span class="token punctuation">{</span>
    buildHttp<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre><code class="hljs language-js"><span class="token comment">// src/index.js</span>
<span class="token keyword">import</span> pMap1 <span class="token keyword">from</span> <span class="token string">&#x27;https://cdn.skypack.dev/p-map&#x27;</span><span class="token punctuation">;</span>
<span class="token comment">// with `buildHttp` enabled, webpack will build pMap1 just like a regular local module</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pMap1<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ul><h4><span id="experimentsbuildhttpalloweduris"></span>experiments.buildHttp.allowedUris<a href="#experimentsbuildhttpalloweduris" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>允许的 URI 列表。</p><ul><li><p>类型：<code>(string|RegExp|(uri: string) =&gt; boolean)[]</code></p></li><li><p>示例</p><pre><code class="hljs language-javascript"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  experiments<span class="token operator">:</span> <span class="token punctuation">{</span>
    buildHttp<span class="token operator">:</span> <span class="token punctuation">{</span>
      allowedUris<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#x27;http://localhost:9990/&#x27;</span><span class="token punctuation">,</span>
        <span class="token string">&#x27;https://raw.githubusercontent.com/&#x27;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><h4><span id="experimentsbuildhttpcachelocation"></span>experiments.buildHttp.cacheLocation<a href="#experimentsbuildhttpcachelocation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Define the location for caching remote resources.</p><ul><li><p>Type</p><ul><li><code>string</code></li><li><code>false</code></li></ul></li><li><p>Example</p><pre><code class="hljs language-javascript"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  experiments<span class="token operator">:</span> <span class="token punctuation">{</span>
    buildHttp<span class="token operator">:</span> <span class="token punctuation">{</span>
      cacheLocation<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><p>By default webpack would use <code>&lt;compiler-name.&gt;webpack.lock.data/</code> for caching, but you can disable it by setting its value to <code>false</code>.</p><p>Note that you should commit files under <code>experiments.buildHttp.cacheLocation</code> into a version control system as no network requests will be made during the <code>production</code> build.</p><h4><span id="experimentsbuildhttpfrozen"></span>experiments.buildHttp.frozen<a href="#experimentsbuildhttpfrozen" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Freeze the remote resources and lockfile. Any modification to the lockfile or resource contents will result in an error.</p><ul><li>类型：<code>boolean</code></li></ul><h4><span id="experimentsbuildhttplockfilelocation"></span>experiments.buildHttp.lockfileLocation<a href="#experimentsbuildhttplockfilelocation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>Define the location to store the lockfile.</p><ul><li>类型：<code>string</code></li></ul><p>By default webpack would generate a <code>&lt;compiler-name.&gt;webpack.lock</code> file&gt;. Make sure to commit it into a version control system. During the <code>production</code> build, webpack will build those modules beginning with <code>http(s):</code> protocol from the lockfile and caches under <a href="#experimentsbuildhttpcachelocation"><code>experiments.buildHttp.cacheLocation</code></a>.</p><h4><span id="experimentsbuildHttpproxy"></span>experiments.buildHttp.proxy<a href="#experimentsbuildHttpproxy" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>指定用来获取远程资源的代理服务器。</p><ul><li>类型：<code>string</code></li></ul><p>默认情况下，webpack 会让代理服务器使用 <code>http_proxy</code>（不区分大小写） 环境变量值获取远程资源。然而，你也可以通过 <code>proxy</code> 配置项指定。</p><h4><span id="experimentsbuildHttpupgrade"></span>experiments.buildHttp.upgrade<a href="#experimentsbuildHttpupgrade" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4><p>检测远程资源的更改并自动升级。</p><ul><li>类型：<code>boolean</code></li></ul><h3><span id="experimentscss"></span>experiments.css<a href="#experimentscss" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>启用原生 CSS 支持。请注意该实验特性仍处于开发状态并且将会在 webpack v6 中默认启用，你可以在 <a href="https://github.com/webpack/webpack/issues/14893">GitHub</a> 中跟踪进度。</p><ul><li>类型：<code>boolean</code></li></ul><h3><span id="experimentscacheunaffected"></span>experiments.cacheUnaffected<a href="#experimentscacheunaffected" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Enable additional in-memory caching of modules which are unchanged and reference only unchanged modules.</p><ul><li>类型：<code>boolean</code></li></ul><p>Defaults to the value of <a href="#experimentsfuturedefaults"><code>futureDefaults</code></a>.</p><h3><span id="experimentsfuturedefaults"></span>experiments.futureDefaults<a href="#experimentsfuturedefaults" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>使用下一个 webpack 主版本的默认值，并在任何有问题的地方显示警告。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  experiments<span class="token operator">:</span> <span class="token punctuation">{</span>
    futureDefaults<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="experimentslazycompilation"></span>experiments.lazyCompilation<a href="#experimentslazycompilation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>Compile entrypoints and dynamic <code>import</code>s only when they are in use. It can be used for either Web or Node.js.</p><ul><li><p>Type</p><ul><li><p><code>boolean</code></p></li><li><p><code>object</code></p><pre><code class="hljs language-ts"><span class="token punctuation">{</span>
<span class="token comment">// define a custom backend</span>
backend<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>
  compiler<span class="token operator">:</span> Compiler<span class="token punctuation">,</span>
  <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span>err<span class="token operator">?</span><span class="token operator">:</span> Error<span class="token punctuation">,</span> api<span class="token operator">?</span><span class="token operator">:</span> BackendApi<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span>
  <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>compiler<span class="token operator">:</span> Compiler<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>BackendApi<span class="token operator">&gt;</span><span class="token punctuation">)</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * A custom client.
    */</span>
    client<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * Specify where to listen to from the server.
     */</span>
    listen<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> ListenOptions <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>server<span class="token operator">:</span> <span class="token keyword">typeof</span> Server<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * Specify the protocol the client should use to connect to the server.
     */</span>
    protocol<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">&quot;http&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;https&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * Specify how to create the server handling the EventSource requests.
     */</span>
    server<span class="token operator">?</span><span class="token operator">:</span> ServerOptionsImport <span class="token operator">|</span> ServerOptionsHttps <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">typeof</span> Server<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">,</span>
entries<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
imports<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
test<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> RegExp <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">module</span><span class="token operator">:</span> Module<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><ul><li><code>backend</code>: Customize the backend.</li><li><code>entries</code>: Enable lazy compilation for entries.</li><li><code>imports</code> <span class="badge">5.20.0+</span>: Enable lazy compilation for dynamic imports.</li><li><code>test</code> <span class="badge">5.20.0+</span>: Specify which imported modules should be lazily compiled.</li></ul></li></ul></li><li><p>Available: 5.17.0+</p></li><li><p>Example 1:</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  experiments<span class="token operator">:</span> <span class="token punctuation">{</span>
    lazyCompilation<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li><li><p>Example 2:</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// …</span>
  experiments<span class="token operator">:</span> <span class="token punctuation">{</span>
    lazyCompilation<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// disable lazy compilation for dynamic imports</span>
      imports<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

      <span class="token comment">// disable lazy compilation for entries</span>
      entries<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

      <span class="token comment">// do not lazily compile moduleB</span>
      <span class="token function-variable function">test</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token regex">/moduleB/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span><span class="token function">nameForCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ul><h3><span id="experimentsoutputModule"></span>experiments.outputModule<a href="#experimentsoutputModule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>boolean</code></p><p>Once enabled, webpack will output ECMAScript module syntax whenever possible. For instance, <code>import()</code> to load chunks, ESM exports to expose chunk data, among others.</p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  experiments<span class="token operator">:</span> <span class="token punctuation">{</span>
    outputModule<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h1><span id="其它选项"></span>其它选项<a href="#%E5%85%B6%E5%AE%83%E9%80%89%E9%A1%B9" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1>
<p>这里是 webpack 支持的其它选项。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>寻求帮助：这个页面还在更新中，如果你发现本页面内有描述不准确或者不完整，请在 <a href="https://github.com/webpack/webpack.js.org">webpack 的文档仓库</a>中创建 issue 或者 pull request</p></aside><h2><span id="amd"></span>amd<a href="#amd" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>object</code> <code>boolean: false</code></p><p>设置 <code>require.amd</code> 或 <code>define.amd</code> 的值。设置 <code>amd</code> 为 <code>false</code> 会禁用 webpack 的 AMD 支持。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  amd<span class="token operator">:</span> <span class="token punctuation">{</span>
    jQuery<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>某些流行的模块是按照 AMD 规范编写的，最引人瞩目的 jQuery 版本在 1.7.0 到 1.9.1，如果 loader 提示它对页面包含的多个版本采取了<a href="https://github.com/amdjs/amdjs-api/wiki/jQuery-and-AMD">特殊许可</a>时，才会注册为 AMD 模块。</p><p>许可权限是具有「限制指定版本注册」或「支持有不同定义模块的不同沙盒」的能力。</p><p>此选项允许将模块查找的键(key)设置为真值(truthy value)。
发生这种情况时，webpack 中的 AMD 支持将忽略定义的名称。</p><h2><span id="bail"></span>bail<a href="#bail" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean = false</code></p><p>在第一个错误出现时抛出失败结果，而不是容忍它。默认情况下，当使用 HMR 时，webpack 会将在终端以及浏览器控制台中，以红色文字记录这些错误，但仍然继续进行打包。要启用它：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  bail<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>这将迫使 webpack 退出其打包过程。</p><aside class="warning"><h6 class="warning__prefix">警告</h6><p>避免在 <a href="/configuration/watch"><code>watch</code></a> 模式下使用 <code>ball</code> 选项，因为这将会致使 webpack 在发现错误时尽快退出。</p></aside><h2><span id="dependencies"></span>dependencies<a href="#dependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>[string]</code></p><p>一个 <a href="#name"><code>name</code></a> 列表，定义它所依赖的所有兄弟（sibling）配置。需要首先编译依赖的配置。</p><p>在 watch 模式下，当出现以下情况时，依赖项将使编译器失效：</p><ol><li>依赖项发生变化</li><li>依赖项当前正在编译或者处于无效状态</li></ol><p>请记住，在完成依赖项编译之前，不会编译此配置。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#x27;client&#x27;</span><span class="token punctuation">,</span>
    target<span class="token operator">:</span> <span class="token string">&#x27;web&#x27;</span><span class="token punctuation">,</span>
    <span class="token comment">// …</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#x27;server&#x27;</span><span class="token punctuation">,</span>
    target<span class="token operator">:</span> <span class="token string">&#x27;node&#x27;</span><span class="token punctuation">,</span>
    dependencies<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;client&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><h2><span id="ignorewarnings"></span>ignoreWarnings<a href="#ignorewarnings" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>[RegExp, function (WebpackError, Compilation) =&gt; boolean, {module?: RegExp, file?: RegExp, message?: RegExp}]</code></p><p>告诉 webpack 忽略掉特定的警告。类型可以是 <code>RegExp</code>，可以是自定义 <code>function</code>。如果类型为函数，可基于原始 warning 来选择性展示警告，其参数分别为 <code>WebpackError</code> 和 <code>Compilation</code>，且返回值为 <code>boolean</code>。还可以包含以下属性的 <code>object</code>：</p><ul><li><code>file</code>： 类型为 <code>RegExp</code>，用于选择出现警告的源文件。</li><li><code>message</code>： 类型为 <code>RegExp</code>，用于选择警告的内容。</li><li><code>module</code>： 类型为 <code>RegExp</code>，用于选择警告来源的模块。</li></ul><p><code>ignoreWarnings</code> 必须是上述任意或所有类型组成的 <code>array</code>。</p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  ignoreWarnings<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      module<span class="token operator">:</span> <span class="token regex">/module2\.js\?[34]/</span><span class="token punctuation">,</span> <span class="token comment">// A RegExp</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      module<span class="token operator">:</span> <span class="token regex">/[13]/</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token regex">/homepage/</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token regex">/warning from compiler/</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">warning</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="infrastructurelogging"></span>infrastructureLogging<a href="#infrastructurelogging" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p>用于基础设施水平的日志选项。</p><p><code>object = {}</code></p><h3><span id="appendonly"></span>appendOnly<a href="#appendonly" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><span class="badge">5.31.0+</span><p><code>boolean</code></p><p>将内容追加到现有输出中，而非更新现有输出，这对于展示状态信息来说非常有用。此选项仅在未提供自定义 <a href="#console"><code>console</code></a> 的情况下使用。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  infrastructureLogging<span class="token operator">:</span> <span class="token punctuation">{</span>
    appendOnly<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    level<span class="token operator">:</span> <span class="token string">&#x27;verbose&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> logger <span class="token operator">=</span> compiler<span class="token punctuation">.</span><span class="token function">getInfrastructureLogger</span><span class="token punctuation">(</span><span class="token string">&#x27;MyPlugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      logger<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token string">&#x27;first output&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this line won&#x27;t be overridden with `appendOnly` enabled</span>
      logger<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token string">&#x27;second output&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="colors"></span>colors<a href="#colors" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><span class="badge">5.31.0+</span><p><code>boolean</code></p><p>为基础设施日志启用带有颜色的输出。此选项仅在未提供自定义 <a href="#console"><code>console</code></a> 的情况下使用。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  infrastructureLogging<span class="token operator">:</span> <span class="token punctuation">{</span>
    colors<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    level<span class="token operator">:</span> <span class="token string">&#x27;verbose&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> logger <span class="token operator">=</span> compiler<span class="token punctuation">.</span><span class="token function">getInfrastructureLogger</span><span class="token punctuation">(</span><span class="token string">&#x27;MyPlugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;this output will be colorful&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="console"></span>console<a href="#console" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><span class="badge">5.31.0+</span><p><code>Console</code></p><p>为基础设施日志提供自定义方案。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  infrastructureLogging<span class="token operator">:</span> <span class="token punctuation">{</span>
    console<span class="token operator">:</span> <span class="token function">yourCustomConsole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="debug"></span>debug<a href="#debug" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string</code> <code>boolean = false</code> <code>RegExp</code> <code>function(name) =&gt; boolean</code> <code>[string, RegExp, function(name) =&gt; boolean]</code></p><p>开启特定日志比如插件(plugins)和加载器(loaders)的调试信息。 与 <a href="/configuration/stats/#statsloggingdebug"><code>stats.loggingDebug</code></a> 选项类似但仅仅对于基础设施而言。默认为 <code>false</code>。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  infrastructureLogging<span class="token operator">:</span> <span class="token punctuation">{</span>
    level<span class="token operator">:</span> <span class="token string">&#x27;info&#x27;</span><span class="token punctuation">,</span>
    debug<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;MyPlugin&#x27;</span><span class="token punctuation">,</span> <span class="token regex">/MyPlugin/</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&#x27;MyPlugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="level"></span>level<a href="#level" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>string = &#x27;info&#x27; : &#x27;none&#x27; | &#x27;error&#x27; | &#x27;warn&#x27; | &#x27;info&#x27; | &#x27;log&#x27; | &#x27;verbose&#x27;</code></p><p>开启基础设施日志输出。与 <a href="/configuration/stats/#statslogging"><code>stats.logging</code></a> 选项类似但仅仅是对于基础设施而言。默认值为 <code>&#x27;info&#x27;</code>。</p><p>可能的取值：</p><ul><li><code>&#x27;none&#x27;</code> - 禁用日志</li><li><code>&#x27;error&#x27;</code> - 仅仅显示错误</li><li><code>&#x27;warn&#x27;</code> - 仅仅显示错误与告警</li><li><code>&#x27;info&#x27;</code> - 显示错误、告警与信息</li><li><code>&#x27;log&#x27;</code> - 显示错误、告警，信息，日志信息，组别，清楚。 收缩的组别会在收缩的状态中被显示。</li><li><code>&#x27;verbose&#x27;</code> - 输出所有日志除了调试与追踪。收缩的组别会在扩展的状态中被显示。</li></ul><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  infrastructureLogging<span class="token operator">:</span> <span class="token punctuation">{</span>
    level<span class="token operator">:</span> <span class="token string">&#x27;info&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="stream"></span>stream<a href="#stream" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><span class="badge">5.31.0+</span><p><code>NodeJS.WritableStream = process.stderr</code></p><p>用于日志输出的流。默认为 <code>process.stderr</code>。此选项仅在未提供自定义 <a href="#console"><code>console</code></a> 的情况下使用。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  infrastructureLogging<span class="token operator">:</span> <span class="token punctuation">{</span>
    stream<span class="token operator">:</span> process<span class="token punctuation">.</span>stderr<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>在 TTY 流的情况下，会启用 <code>colors</code> 并禁用 <code>appendOnly</code>，反之亦然。</p></aside><h2><span id="loader"></span>loader<a href="#loader" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>object</code></p><p>在 <a href="/api/loaders/#the-loader-context">loader 上下文</a> 中暴露自定义值。</p><p>例如，你可以在 loader 上下文中定义一个新变量：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  loader<span class="token operator">:</span> <span class="token punctuation">{</span>
    answer<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>然后使用 <code>this.answer</code> 在 loader 中获取该值：</p><p><strong>custom-loader.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>answer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// will log `42` here</span>
  <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><aside class="tip"><h6 class="tip__prefix">提示</h6><p>你可以覆盖 loader 上下文中的属性，因为 webpack 会将所有定义在 <code>loader</code> 中的属性负责到 loader 上下文中。</p></aside><h2><span id="name"></span>name<a href="#name" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code></p><p>配置的名称。当加载不同的配置时会被使用。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  name<span class="token operator">:</span> <span class="token string">&#x27;admin-app&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="parallelism"></span>parallelism<a href="#parallelism" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>number = 100</code></p><p>限制并行处理的模块数量。可以用于调优性能或获取更可靠的性能分析结果。</p><h2><span id="profile"></span>profile<a href="#profile" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>boolean</code></p><p>捕获一个应用程序&quot;配置文件&quot;，包括统计和提示，然后可以使用 <a href="https://webpack.github.io/analyse/">Analyze</a> 分析工具进行详细分析。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>使用 <a href="https://www.npmjs.com/package/stats-webpack-plugin">StatsPlugin</a> 可以更好地控制生成的配置文件。</p></aside><aside class="tip"><h6 class="tip__prefix">提示</h6><p>与 <code>parallelism: 1</code> 混用以达到更好的结果。
需要注意的是，这样做也会减慢建造速度。</p></aside><h2><span id="recordsinputpath"></span>recordsInputPath<a href="#recordsinputpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code></p><p>指定读取最后一条记录的文件的名称。这可以用来重命名一个记录文件，可以查看下面的实例：</p><h2><span id="recordsoutputpath"></span>recordsOutputPath<a href="#recordsoutputpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code></p><p>指定记录要写入的位置。以下示例描述了如何用这个选项和 <code>recordsInptuPaht</code> 来重命名一个记录文件：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  recordsInputPath<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;records.json&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  recordsOutputPath<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;newRecords.json&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2><span id="recordspath"></span>recordsPath<a href="#recordspath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>string</code></p><p>开启这个选项可以生成一个 JSON 文件，其中含有 webpack 的 &quot;records&quot; 记录 - 即「用于存储跨多次构建(across multiple builds)的模块标识符」的数据片段。可以使用此文件来跟踪在每次构建之间的模块变化。只要简单的设置一下路径,就可以生成这个 JSON 文件：</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  recordsPath<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;records.json&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>如果你使用了<a href="/guides/code-splitting">代码分离(code splittnig)</a>这样的复杂配置，records 会特别有用。这些数据用于确保拆分 bundle，以便实现你需要的<a href="/guides/caching">缓存(caching)</a>行为。</p><aside class="tip"><h6 class="tip__prefix">提示</h6><p>注意，虽然这个文件是由编译器(compiler)生成的，但你可能仍然希望在源代码管理中追踪它，以便随时记录它的变化情况。</p></aside><aside class="warning"><h6 class="warning__prefix">警告</h6><p>设置 <code>recordsPath</code> 本质上会把 <code>recordsInputPath</code> 和 <code>recordsOutputPath</code> 都设置成相同的路径。通常来讲这也是符合逻辑的，除非你决定改变记录文件的名称。可以查看下面的实例：</p></aside><h2><span id="snapshot"></span>snapshot<a href="#snapshot" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2><p><code>object</code></p><p><code>snapshot</code> 配置项决定文件系统是如何创建和无效快照。</p><p><strong>webpack.config.js</strong></p><pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  snapshot<span class="token operator">:</span> <span class="token punctuation">{</span>
    managedPaths<span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;../node_modules&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    immutablePaths<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    buildDependencies<span class="token operator">:</span> <span class="token punctuation">{</span>
      hash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      timestamp<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
      timestamp<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
      timestamp<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    resolveBuildDependencies<span class="token operator">:</span> <span class="token punctuation">{</span>
      hash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      timestamp<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3><span id="build-dependencies"></span>buildDependencies<a href="#build-dependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>object = { hash boolean = true, timestamp boolean = true }</code></p><p>使用持久化缓存时的依赖构建关系快照。</p><ul><li><code>hash</code>：比较内容哈希以确定无效（比 <code>timestamp</code> 更昂贵，但更改的频率较低）。</li><li><code>timestamp</code>：比较 timestamps 以确定无效。</li></ul><p><code>hash</code> 与 <code>timestamp</code> 都是可选配置。</p><ul><li><code>{ hash: true }</code>：对 CI 缓存很有帮助，使用新的 checkout，不需要保存时间戳，并且使用哈希。</li><li><code>{ timestamp: true }</code>：对应本地开发缓存很用帮助。</li><li><code>{ timestamp: true, hash: true }</code>：对于以上提到的两者都很有帮助。首先比较时间戳，这代价很低，因为 webpack 不需要读取文件来计算它们的哈希值。仅当时间戳相同时才会比较内容哈希，这对初始构建的性能影响很小。</li></ul><h3><span id="immutable-paths"></span>immutablePaths<a href="#immutable-paths" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>(RegExp | string)[]</code></p><p>由包管理器管理的路径数组，在其路径中包含一个版本或哈希，以便所有文件都是不可变的（immutable）。</p><p>如果使用正则表达式，请确保将路径包裹在捕获组中。</p><h3><span id="managedpaths"></span>managedPaths<a href="#managedpaths" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p>如果使用正则表达式，请确保将路径包裹在捕获组中。</p><h3><span id="managedPaths"></span>managedPaths<a href="#managedPaths" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>(RegExp | string)[]</code></p><p>由包管理器管理的路径数组，可以信任它不会被修改。</p><p>如果使用正则表达式，请确保将路径包裹在捕获组中。</p><h3><span id="module"></span>module<a href="#module" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>object = {hash boolean = true, timestamp boolean = true}</code></p><p>构建模块的快照。</p><ul><li><code>hash</code>：比较内容哈希以判断无效。（比 <code>timestamp</code> 更昂贵，但更改的频率较低）。</li><li><code>timestamp</code>：比较时间戳以确定无效。</li></ul><h3><span id="resolve"></span>resolve<a href="#resolve" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>object = {hash boolean = true, timestamp boolean = true}</code></p><p>解析请求的快照。</p><ul><li><code>hash</code>：比较内容哈希以判断无效。（比 <code>timestamp</code> 更昂贵，但更改的频率较低）。</li><li><code>timestamp</code>：比较时间戳以确定无效。</li></ul><h3><span id="resolve-build-dependencies"></span>resolveBuildDependencies<a href="#resolve-build-dependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3><p><code>object = {hash boolean = true, timestamp boolean = true}</code></p><p>使用持久缓存时用于解析构建依赖项的快照。</p><ul><li><code>hash</code>：比较内容哈希以判断无效。（比 <code>timestamp</code> 更昂贵，但更改的频率较低）。</li><li><code>timestamp</code>：比较时间戳以确定无效。</li></ul></div><div class="print:hidden mt-20"><a class="text-gray-500 dark:text-gray-500 text-sm cursor-pointer font-sans hover:underline" href="https://github.com/docschina/webpack.js.org/edit/cn/src/content/configuration/printable.mdx">编辑此页</a><span class="mx-5 text-black font-bold dark:text-white">·</span><a class="text-gray-500 dark:text-gray-500 text-sm cursor-pointer font-sans hover:underline">打印文档</a></div><div data-testid="contributors" class="print:hidden"><h2 class="!font-sans !font-normal">1<!-- --> <!-- -->位贡献者</h2><div><div class="grid gap-[10px] lg:gap-[15px] grid-cols-contributors"><a href="https://github.com/webpack"><img width="45" height="45" alt="webpack" title="webpack" class="w-full rounded-full shadow" src="/icon-square-small-slack.9281492bb267314634b4.png"/></a></div></div></div></div></section></div><footer class="footer"><div class="container footer__inner"><section class="footer__left"><a class="footer__link" href="/guides/getting-started/">快速开始</a><a class="footer__link" href="/comparison/">对比</a><a href="https://privacy-policy.openjsf.org/" target="_blank" rel="noopener noreferrer" class="footer__link">Privacy Policy</a></section><section class="footer__middle"><a class="footer__icon" href="/"><img src="/icon-square-small.85ba630cf0c5f29ae3e3.svg" alt="webpack icon" width="35" height="35"/></a></section><section class="footer__right"><a href="https://webpack.threadless.com/" target="_blank" rel="noopener noreferrer" class="footer__link">周边</a><a class="footer__link" href="/awesome-webpack/">Awesome webpack</a><a class="footer__link" href="/glossary/">术语</a><a class="footer__link" href="/branding/">品牌</a><a href="https://gitter.im/webpack/webpack" target="_blank" rel="noopener noreferrer" class="footer__link">Gitter</a><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener noreferrer" class="footer__link">更新日志</a><a class="footer__link footer__license" href="/license"><img alt="Creative Commons License" src="/cc.ab77d813bf219c6e34ff.svg" width="25" height="25"/><img alt="Creative Commons License" src="/by.1360bb2e6d1fc28cdd9e.svg" width="25" height="25"/></a></section></div></footer></div></div><script>
window.matchMedia('print').addListener(function(mql) {
  if (!mql.matches) {
      window.close();
  }
});
window.print();
</script><script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?f92e0e48311f635665d2de225751a349";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script></body>